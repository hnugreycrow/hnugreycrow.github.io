<!DOCTYPE html><html lang="zh-CN" class="bg-[var(--page-bg)] text-[14px] md:text-[16px]" data-overlayscrollbars-initialize data-astro-cid-sckkx6r4 style="--bannerOffset: 15vh;--banner-height-home: 65vh;--banner-height: 35vh;--configHue: 230;--page-width: 90rem;"> <head><!-- 第三方分析脚本 - 延迟加载优化 --><script>
			// 使用 requestIdleCallback 延迟加载第三方脚本
			function loadAnalytics() {
				// Google Tag Manager
				(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src='https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);})(window,document,'script','dataLayer','GTM-KRX3XGVH');
				
				// Clarity
				(function(c,l,a,r,i,t,y){c[a]=c[a]||function(){(c[a].q=c[a].q||[]).push(arguments)};t=l.createElement(r);t.async=1;t.src="https://www.clarity.ms/tag/"+i;y=l.getElementsByTagName(r)[0];y.parentNode.insertBefore(t,y);})(window, document, "clarity", "script", "tjr3vkhj8i");
			}
			
			// 在浏览器空闲时加载，或者在 3 秒后加载
			if ('requestIdleCallback' in window) {
				requestIdleCallback(loadAnalytics, { timeout: 3000 });
			} else {
				setTimeout(loadAnalytics, 3000);
			}
		</script><title>Encrypted Post - hnugreycrow</title><meta charset="UTF-8"><meta name="description" content="This is an article for testing the page encryption feature"><meta name="author" content="hnugreycrow"><meta property="og:site_name" content="hnugreycrow"><meta property="og:url" content="https://github.com/posts/encrypted-post/"><meta property="og:title" content="Encrypted Post - hnugreycrow"><meta property="og:description" content="This is an article for testing the page encryption feature"><meta property="og:type" content="article"><meta name="twitter:card" content="summary_large_image"><meta property="twitter:url" content="https://github.com/posts/encrypted-post/"><meta name="twitter:title" content="Encrypted Post - hnugreycrow"><meta name="twitter:description" content="This is an article for testing the page encryption feature"><meta name="viewport" content="width=device-width"><meta name="generator" content="Astro v5.16.0"><link rel="icon" href="/favicon/favicon.ico" sizes="64x64" media="(prefers-color-scheme: light)"><link rel="icon" href="/favicon/favicon.ico" sizes="64x64" media="(prefers-color-scheme: dark)"><!-- Set the theme before the page is rendered to avoid a flash --><script>(function(){const DEFAULT_THEME = "light";
const LIGHT_MODE = "light";
const DARK_MODE = "dark";
const BANNER_HEIGHT_EXTEND = 30;
const PAGE_WIDTH = 90;
const configHue = 230;

			// Load the theme from local storage
			const theme = localStorage.getItem('theme') || DEFAULT_THEME;
			let isDark = false;
			switch (theme) {
				case LIGHT_MODE:
					document.documentElement.classList.remove('dark');
					isDark = false;
					break
				case DARK_MODE:
					document.documentElement.classList.add('dark');
					isDark = true;
					break
			}
			
			// Set the theme for Expressive Code based on current mode
			const expressiveTheme = isDark ? "github-dark" : "github-light";
			const currentTheme = document.documentElement.getAttribute("data-theme");
			
			// 只在主题不同时才更新，避免触发不必要的重绘
			if (currentTheme !== expressiveTheme) {
				document.documentElement.setAttribute("data-theme", expressiveTheme);
			}

			// Load the hue from local storage
			const hue = localStorage.getItem('hue') || configHue;
			document.documentElement.style.setProperty('--hue', hue);

			// calculate the --banner-height-extend, which needs to be a multiple of 4 to avoid blurry text
			let offset = Math.floor(window.innerHeight * (BANNER_HEIGHT_EXTEND / 100));
			offset = offset - offset % 4;
			document.documentElement.style.setProperty('--banner-height-extend', `${offset}px`);
		})();</script><!-- defines global css variables. This will be applied to <html> <body> and some other elements idk why --><script type="application/ld+json">{"@context":"https://schema.org","@type":"BlogPosting","headline":"Encrypted Post","description":"This is an article for testing the page encryption feature","keywords":["Test","Encryption"],"author":{"@type":"Person","name":"hnugreycrow","url":"https://github.com/hnugreycrow/hnugreycrow.github.io/"},"datePublished":"2024-01-15","inLanguage":"zh-CN"}</script><!-- Pio 看板娘样式 - 仅在启用时加载 --><link rel="stylesheet" href="/pio/static/pio.css"><link rel="alternate" type="application/rss+xml" title="hnugreycrow" href="https://github.com/hnugreycrow/hnugreycrow.github.io/rss.xml"><!-- Umami Analytics --><link rel="stylesheet" href="/_astro/Layout.y4KPJ9hc.css">
<link rel="stylesheet" href="/_astro/Layout.DRe9SoLl.css">
<style>.password-protection[data-astro-cid-732embm3]{display:flex;justify-content:center;align-items:center;min-height:60vh;padding:2rem}.password-container[data-astro-cid-732embm3]{text-align:center;max-width:400px;width:100%;padding:2rem;border-radius:12px;background:transparent;border:1px solid var(--line-divider);box-shadow:none}.lock-icon[data-astro-cid-732embm3]{margin-bottom:1rem;color:var(--primary)}.password-container[data-astro-cid-732embm3] h2[data-astro-cid-732embm3]{margin-bottom:.5rem;color:#000000d9;font-size:1.5rem}.dark .password-container[data-astro-cid-732embm3] h2[data-astro-cid-732embm3]{color:#ffffffd9}.password-container[data-astro-cid-732embm3] p[data-astro-cid-732embm3]{margin-bottom:1.5rem;color:#000000bf;opacity:.8}.dark .password-container[data-astro-cid-732embm3] p[data-astro-cid-732embm3]{color:#ffffffbf}.password-input-group[data-astro-cid-732embm3]{display:flex;gap:.5rem;margin-bottom:1rem;align-items:stretch}.password-input[data-astro-cid-732embm3]{flex:1;min-width:0;padding:.75rem 1rem;border:1px solid var(--line-divider);border-radius:8px;background:transparent;color:#000000d9;font-size:1rem;transition:border-color .2s ease}.dark .password-input[data-astro-cid-732embm3]{color:#ffffffd9}.password-input[data-astro-cid-732embm3]::-moz-placeholder{color:#00000080}.password-input[data-astro-cid-732embm3]::placeholder{color:#00000080}.dark .password-input[data-astro-cid-732embm3]::-moz-placeholder{color:#ffffff80}.dark .password-input[data-astro-cid-732embm3]::placeholder{color:#ffffff80}.password-input[data-astro-cid-732embm3]:focus{outline:none;border-color:var(--primary)}.unlock-button[data-astro-cid-732embm3]{padding:.75rem 1.5rem;background:transparent;color:var(--primary);border:1px solid var(--primary);border-radius:8px;font-size:1rem;cursor:pointer;transition:border-color .2s,color .2s,background .2s;white-space:nowrap;flex-shrink:0;min-width:-moz-fit-content;min-width:fit-content;max-width:-moz-max-content;max-width:max-content}.unlock-button[data-astro-cid-732embm3]:hover{background:var(--primary);color:#fff;border-color:var(--primary)}.unlock-button[data-astro-cid-732embm3]:disabled{opacity:.6;cursor:not-allowed}.error-message[data-astro-cid-732embm3]{color:#ef4444;font-size:.875rem;margin-top:.5rem}.decrypted-content[data-astro-cid-732embm3]{animation:fadeIn .3s ease-in-out}@keyframes fadeIn{0%{opacity:0;transform:translateY(10px)}to{opacity:1;transform:translateY(0)}}@media(min-width:769px){.password-input-group[data-astro-cid-732embm3]{flex-wrap:nowrap}.unlock-button[data-astro-cid-732embm3]{max-width:40%}}@media(max-width:768px){.password-protection[data-astro-cid-732embm3]{padding:1rem;min-height:50vh}.password-container[data-astro-cid-732embm3]{max-width:none;width:100%;padding:1.5rem;margin:0 .5rem}.password-container[data-astro-cid-732embm3] h2[data-astro-cid-732embm3]{font-size:1.25rem;margin-bottom:.75rem}.password-container[data-astro-cid-732embm3] p[data-astro-cid-732embm3]{font-size:.9rem;margin-bottom:1.25rem}.password-input-group[data-astro-cid-732embm3]{flex-direction:column;gap:.75rem}.password-input[data-astro-cid-732embm3]{padding:.875rem 1rem;font-size:1rem;width:100%}.unlock-button[data-astro-cid-732embm3]{padding:.875rem 1rem;font-size:1rem;max-width:100%;width:100%;white-space:nowrap}.error-message[data-astro-cid-732embm3]{font-size:.8rem;text-align:center}}@media(max-width:480px){.password-protection[data-astro-cid-732embm3]{padding:.75rem}.password-container[data-astro-cid-732embm3]{padding:1.25rem;margin:0 .25rem}.password-container[data-astro-cid-732embm3] h2[data-astro-cid-732embm3]{font-size:1.125rem}.password-container[data-astro-cid-732embm3] p[data-astro-cid-732embm3]{font-size:.85rem}.password-input[data-astro-cid-732embm3],.unlock-button[data-astro-cid-732embm3]{padding:.75rem .875rem;font-size:.95rem}}
</style>
<link rel="stylesheet" href="/_astro/_page_.EX5jCGH2.css">
<link rel="stylesheet" href="/_astro/_page_.BH-s_JDD.css">
<link rel="stylesheet" href="/_astro/about.CLMvY_Mt.css">
<link rel="stylesheet" href="/_astro/_page_.Djju_2fB.css">
<style>.line-clamp-2[data-astro-cid-b6yaaygw]{display:-webkit-box;-webkit-line-clamp:2;-webkit-box-orient:vertical;overflow:hidden}.album-card[data-astro-cid-b6yaaygw]:hover{transform:translateY(-2px)}@keyframes fadeInUp{0%{opacity:0;transform:translateY(20px)}to{opacity:1;transform:translateY(0)}}.album-card[data-astro-cid-b6yaaygw]{animation:fadeInUp .3s ease-out}
.grid-layout[data-astro-cid-rgidg7mq]{display:grid;gap:1rem}.grid-layout[data-astro-cid-rgidg7mq][data-columns="2"]{grid-template-columns:repeat(auto-fit,minmax(300px,1fr))}.grid-layout[data-astro-cid-rgidg7mq][data-columns="3"]{grid-template-columns:repeat(auto-fit,minmax(250px,1fr))}.grid-layout[data-astro-cid-rgidg7mq][data-columns="4"]{grid-template-columns:repeat(auto-fit,minmax(200px,1fr))}.masonry-layout[data-astro-cid-rgidg7mq]{-moz-columns:2;columns:2;-moz-column-gap:1rem;column-gap:1rem}@media(min-width:768px){.masonry-layout[data-astro-cid-rgidg7mq]{-moz-columns:3;columns:3}}@media(min-width:1024px){.masonry-layout[data-astro-cid-rgidg7mq][data-columns="4"]{-moz-columns:4;columns:4}}.masonry-layout[data-astro-cid-rgidg7mq] .photo-item[data-astro-cid-rgidg7mq]{-moz-column-break-inside:avoid;break-inside:avoid;margin-bottom:1rem}.grid-layout[data-astro-cid-rgidg7mq] .photo-container[data-astro-cid-rgidg7mq]{aspect-ratio:1}
.card-base[data-astro-cid-fepk5tcl]{container-type:inline-size}.anime-grid-container[data-astro-cid-fepk5tcl]{display:grid;grid-template-columns:repeat(2,1fr);transition:all .5s cubic-bezier(.4,0,.2,1)}@container (min-width: 900px){.anime-grid-container[data-astro-cid-fepk5tcl].single-sidebar{grid-template-columns:repeat(5,1fr)}}@container (min-width: 600px) and (max-width: 899px){.anime-grid-container[data-astro-cid-fepk5tcl].single-sidebar{grid-template-columns:repeat(3,1fr)}}@container (max-width: 599px){.anime-grid-container[data-astro-cid-fepk5tcl].single-sidebar{grid-template-columns:repeat(2,1fr)}}@container (min-width: 950px){.anime-grid-container[data-astro-cid-fepk5tcl].both-sidebar{grid-template-columns:repeat(5,1fr)}}@container (min-width: 650px) and (max-width: 949px){.anime-grid-container[data-astro-cid-fepk5tcl].both-sidebar{grid-template-columns:repeat(4,1fr)}}@container (min-width: 480px) and (max-width: 649px){.anime-grid-container[data-astro-cid-fepk5tcl].both-sidebar{grid-template-columns:repeat(3,1fr)}}@container (max-width: 479px){.anime-grid-container[data-astro-cid-fepk5tcl].both-sidebar{grid-template-columns:repeat(2,1fr)}}.filter-container[data-astro-cid-fepk5tcl]{display:flex;flex-wrap:wrap;gap:.5rem}.filter-tag[data-astro-cid-fepk5tcl]{padding:.5rem 1rem;border:1px solid var(--line-divider);border-radius:var(--radius-large);background:var(--btn-regular-bg);color:var(--btn-content);font-size:.875rem;font-weight:500;cursor:pointer;transition:all .2s ease;white-space:nowrap}.filter-tag[data-astro-cid-fepk5tcl]:hover:not(.active){background:var(--btn-hover-bg);border-color:var(--primary);transform:translateY(-1px)}.filter-tag[data-astro-cid-fepk5tcl].active{background:var(--primary);color:#fff;border-color:var(--primary)}.filter-tag[data-astro-cid-fepk5tcl].active:hover{background:var(--primary)!important;color:#fff!important;border-color:var(--primary)!important;transform:translateY(-1px)}[data-astro-cid-fepk5tcl][data-anime-status]{transition:all .5s cubic-bezier(.4,0,.2,1)}#anime-list-container[data-astro-cid-fepk5tcl].grid-mode [data-astro-cid-fepk5tcl][data-anime-status]:hover{transform:translateY(-8px) scale(1.02);box-shadow:0 12px 24px #00000026;z-index:10;transition:all .3s cubic-bezier(.4,0,.2,1)}#anime-list-container[data-astro-cid-fepk5tcl].list-mode [data-astro-cid-fepk5tcl][data-anime-status]:hover{transform:translate(8px) scale(1.01);box-shadow:0 8px 16px #0000001a;z-index:10;transition:all .3s cubic-bezier(.4,0,.2,1)}[data-astro-cid-fepk5tcl][data-anime-status].anime-hidden{display:none}[data-astro-cid-fepk5tcl][data-anime-status].anime-animating{transition:transform .5s cubic-bezier(.4,0,.2,1),opacity .5s cubic-bezier(.4,0,.2,1)}[data-astro-cid-fepk5tcl][data-anime-status].anime-fade-out{opacity:0;transform:scale(.8);pointer-events:none;transition:opacity .3s cubic-bezier(.4,0,.2,1),transform .3s cubic-bezier(.4,0,.2,1)}[data-astro-cid-fepk5tcl][data-anime-status].anime-fade-in{opacity:0;transform:scale(.8)}[data-astro-cid-fepk5tcl][data-anime-status].anime-fade-in-active{opacity:1;transform:scale(1)}
.filter-container[data-astro-cid-komnyuwm]{display:flex;flex-wrap:wrap;gap:.75rem;margin-bottom:1rem}.filter-tag[data-astro-cid-komnyuwm]{padding:.625rem 1.25rem;border:1px solid var(--line-divider);border-radius:var(--radius-large);background:var(--btn-regular-bg);color:var(--btn-content);font-size:.875rem;font-weight:500;cursor:pointer;transition:all .3s cubic-bezier(.4,0,.2,1);white-space:nowrap;position:relative;overflow:hidden}.filter-tag[data-astro-cid-komnyuwm]:before{content:"";position:absolute;top:0;left:0;width:100%;height:100%;background:var(--primary);opacity:0;transition:opacity .3s ease;z-index:-1}.filter-tag[data-astro-cid-komnyuwm]:hover:not(.active){background:var(--btn-hover-bg);border-color:var(--primary);transform:translateY(-2px);box-shadow:0 4px 8px #0000001a}.filter-tag[data-astro-cid-komnyuwm].active{background:var(--primary);color:#fff;border-color:var(--primary);transform:translateY(-1px);box-shadow:0 4px 12px rgba(var(--color-primary-rgb),.3)}.filter-tag[data-astro-cid-komnyuwm].active:hover{transform:translateY(-2px);box-shadow:0 6px 16px rgba(var(--color-primary-rgb),.4)}@keyframes fadeInUp{0%{opacity:0;transform:translateY(20px)}to{opacity:1;transform:translateY(0)}}.onload-animation[data-astro-cid-komnyuwm]{animation:fadeInUp .6s cubic-bezier(.25,.1,.25,1) forwards;opacity:0}.line-clamp-2[data-astro-cid-komnyuwm]{display:-webkit-box;-webkit-line-clamp:2;-webkit-box-orient:vertical;overflow:hidden}.device-card[data-astro-cid-komnyuwm]:after{content:"";position:absolute;inset:0;border-radius:.75rem;background:linear-gradient(135deg,rgba(var(--color-primary-rgb),.05),transparent);opacity:0;transition:opacity .4s ease;pointer-events:none}.device-card[data-astro-cid-komnyuwm]:hover:after{opacity:1}.device-card[data-astro-cid-komnyuwm] h3[data-astro-cid-komnyuwm]{text-shadow:0 1px 2px rgba(0,0,0,.05)}@media(max-width:640px){.filter-container[data-astro-cid-komnyuwm]{gap:.5rem}.filter-tag[data-astro-cid-komnyuwm]{padding:.5rem 1rem;font-size:.8rem}.device-card[data-astro-cid-komnyuwm] .relative[data-astro-cid-komnyuwm].p-6.pb-0{padding:1rem 1rem 0}.device-card[data-astro-cid-komnyuwm] .p-6[data-astro-cid-komnyuwm].pt-4{padding:1rem}}@media(prefers-color-scheme:dark){.device-card[data-astro-cid-komnyuwm]:hover{box-shadow:0 4px 12px #00000026}}
.card-base[data-astro-cid-pyfuvgrx]{background:var(--card-bg);border:1px solid var(--line-divider);transition:all .3s ease}.moments-header[data-astro-cid-pyfuvgrx]{padding:1rem;border-radius:8px;background:linear-gradient(135deg,var(--primary) 0%,var(--primary-dark, var(--primary)) 100%);color:#fff;position:relative;overflow:hidden}.header-content[data-astro-cid-pyfuvgrx]{display:flex;justify-content:space-between;align-items:center;position:relative;z-index:1}.moments-title[data-astro-cid-pyfuvgrx]{color:#fff;text-shadow:0 1px 2px rgba(0,0,0,.1)}.moments-subtitle[data-astro-cid-pyfuvgrx]{color:#ffffffe6}.stat-number[data-astro-cid-pyfuvgrx]{color:#fff}.stat-label[data-astro-cid-pyfuvgrx]{color:#fffc}.image-item[data-astro-cid-pyfuvgrx] img[data-astro-cid-pyfuvgrx]{transition:transform .3s ease}.image-item[data-astro-cid-pyfuvgrx]:hover img[data-astro-cid-pyfuvgrx]{transform:scale(1.05)}.action-btn[data-astro-cid-pyfuvgrx]{background:none;border:none;cursor:pointer;color:var(--text-muted)}.action-btn[data-astro-cid-pyfuvgrx]:hover{color:var(--primary)}@media(max-width:640px){.moments-header[data-astro-cid-pyfuvgrx]{padding:.75rem}.header-content[data-astro-cid-pyfuvgrx]{flex-direction:column;text-align:center;gap:.75rem}.moment-images[data-astro-cid-pyfuvgrx]{grid-template-columns:repeat(2,1fr)}.moment-footer[data-astro-cid-pyfuvgrx]{flex-direction:column;align-items:flex-start;gap:.5rem}}@media(min-width:641px)and (max-width:900px){.moments-header[data-astro-cid-pyfuvgrx]{padding:1.25rem}.header-content[data-astro-cid-pyfuvgrx]{display:flex;justify-content:space-between;align-items:center}.moment-item[data-astro-cid-pyfuvgrx]{padding:1.5rem}.moment-images[data-astro-cid-pyfuvgrx]{grid-template-columns:repeat(3,1fr);gap:.75rem;max-width:500px}.moment-text[data-astro-cid-pyfuvgrx]{font-size:1rem;line-height:1.7}.moment-footer[data-astro-cid-pyfuvgrx]{margin-top:1rem}}@media(min-width:901px){.moments-header[data-astro-cid-pyfuvgrx]{padding:1.5rem}.moment-item[data-astro-cid-pyfuvgrx]{padding:2rem}.moment-images[data-astro-cid-pyfuvgrx]{grid-template-columns:repeat(auto-fit,minmax(150px,1fr));max-width:600px;gap:1rem}.moment-text[data-astro-cid-pyfuvgrx]{font-size:1.1rem;line-height:1.8}}@media(max-width:480px){.moment-item[data-astro-cid-pyfuvgrx]{border-radius:8px}.moments-header[data-astro-cid-pyfuvgrx]{border-radius:6px}}
.friend-card[data-astro-cid-spp2p3no]{animation:fadeInUp .5s ease-out forwards;opacity:0}.friend-card[data-astro-cid-spp2p3no]:nth-child(1){animation-delay:.05s}.friend-card[data-astro-cid-spp2p3no]:nth-child(2){animation-delay:.1s}.friend-card[data-astro-cid-spp2p3no]:nth-child(3){animation-delay:.15s}.friend-card[data-astro-cid-spp2p3no]:nth-child(4){animation-delay:.2s}.friend-card[data-astro-cid-spp2p3no]:nth-child(5){animation-delay:.25s}.friend-card[data-astro-cid-spp2p3no]:nth-child(6){animation-delay:.3s}@keyframes fadeInUp{0%{opacity:0;transform:translateY(20px)}to{opacity:1;transform:translateY(0)}}#friend-search[data-astro-cid-spp2p3no]:focus{box-shadow:0 0 0 3px var(--primary) / .1}.filter-container[data-astro-cid-spp2p3no]{display:flex;flex-wrap:wrap;gap:.5rem}.filter-tag[data-astro-cid-spp2p3no]{padding:.5rem 1rem;border:1px solid var(--line-divider);border-radius:var(--radius-large);background:var(--btn-regular-bg);color:var(--btn-content);font-size:.875rem;font-weight:500;cursor:pointer;transition:all .2s ease;white-space:nowrap}.filter-tag[data-astro-cid-spp2p3no]:hover:not(.active){background:var(--btn-hover-bg);border-color:var(--primary);transform:translateY(-1px)}.filter-tag[data-astro-cid-spp2p3no].active{background:var(--primary);color:#fff;border-color:var(--primary)}.filter-tag[data-astro-cid-spp2p3no].active:hover{background:var(--primary)!important;color:#fff!important;border-color:var(--primary)!important;transform:translateY(-1px)}
.line-clamp-1[data-astro-cid-aid3sr62]{display:-webkit-box;-webkit-line-clamp:1;-webkit-box-orient:vertical;overflow:hidden}.line-clamp-2[data-astro-cid-aid3sr62]{display:-webkit-box;-webkit-line-clamp:2;-webkit-box-orient:vertical;overflow:hidden}
.line-clamp-2[data-astro-cid-qlh7ngej]{display:-webkit-box;-webkit-line-clamp:2;-webkit-box-orient:vertical;overflow:hidden}@keyframes pulse{0%{transform:scale(1);box-shadow:0 0 #6366f166}70%{transform:scale(1.05);box-shadow:0 0 0 10px #6366f100}to{transform:scale(1);box-shadow:0 0 #6366f100}}.timeline-node[data-astro-cid-qlh7ngej]{animation:pulse 2s infinite}.timeline-horizontal-scroll[data-astro-cid-qlh7ngej]::-webkit-scrollbar{height:8px}.timeline-horizontal-scroll[data-astro-cid-qlh7ngej]::-webkit-scrollbar-track{background:#e5e7eb;border-radius:4px}.timeline-horizontal-scroll[data-astro-cid-qlh7ngej]::-webkit-scrollbar-thumb{background:hsl(var(--hue),70%,60%);border-radius:4px}
.skills-container[data-astro-cid-xahix5fp]{position:relative}.skills-grid-container[data-astro-cid-xahix5fp]{grid-template-columns:1fr;transition:grid-template-columns .3s ease}@container (min-width: 640px){.skills-grid-container[data-astro-cid-xahix5fp]{grid-template-columns:repeat(2,1fr)}}@container (min-width: 900px){.skills-grid-container[data-astro-cid-xahix5fp]{grid-template-columns:repeat(3,1fr)}}
</style>
<link rel="stylesheet" href="/_astro/_page_.DodusQ_4.css"><script type="module" src="/_astro/page.BUqocEu6.js"></script></head> <body class=" min-h-screen " style="font-family: ZenMaruGothic-Medium, &#34;萝莉体 第二版&#34;, system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;; --bannerOffset: 15vh;--banner-height-home: 65vh;--banner-height: 35vh;--configHue: 230;--page-width: 90rem;" data-overlayscrollbars-initialize data-astro-cid-sckkx6r4> <noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-KRX3XGVH" height="0" width="0" style="display:none;visibility:hidden; --bannerOffset: 15vh;--banner-height-home: 65vh;--banner-height: 35vh;--configHue: 230;--page-width: 90rem;" data-astro-cid-sckkx6r4></iframe></noscript> <!-- 页面顶部渐变高光效果 - 只在full和semifull模式下显示 --> <div class="top-gradient-highlight" data-astro-cid-sckkx6r4 style="--bannerOffset: 15vh;--banner-height-home: 65vh;--banner-height: 35vh;--configHue: 230;--page-width: 90rem;"></div> <!-- 全局配置载体 --><div id="config-carrier" data-hue="230" data-hide-code-blocks-during-transition="true"></div> <script>(function(){const tocEnable = true;
const tocDepth = 2;
const tocUseJapaneseBadge = true;

  // 将TOC配置传递到前端
  window.siteConfig = window.siteConfig || {};
  window.siteConfig.toc = {
    enable: tocEnable,
    depth: tocDepth,
    useJapaneseBadge: tocUseJapaneseBadge
  };
  
  // 添加调试信息
  console.log('TOC Config:', window.siteConfig.toc);
})();</script> <!-- 引入Umami Share工具脚本 --> <script src="/js/umami-share.js"></script>  <script>(function(){const navbarTransparentMode = "semifull";
const defaultWallpaperMode = "banner";
const defaultPostListLayout = "list";

	// 立即执行，在页面渲染前应用壁纸模式和布局模式，避免闪烁
	(function() {
		const wallpaperMode = localStorage.getItem('wallpaperMode') || defaultWallpaperMode;
		const body = document.body;
		
		// 定义 banner 高度常量（与 constants.ts 保持一致）
		const BANNER_HEIGHT = 35;
		const BANNER_HEIGHT_EXTEND = 30;
		const BANNER_HEIGHT_HOME = BANNER_HEIGHT + BANNER_HEIGHT_EXTEND;
		const MAIN_PANEL_OVERLAPS_BANNER_HEIGHT = 3.5;
		
		// 立即应用 body 类，确保首次渲染就是正确的状态
		switch(wallpaperMode) {
			case 'banner':
				body.classList.add('enable-banner');
				body.classList.remove('wallpaper-transparent', 'no-banner-mode');
				break;
			case 'fullscreen':
				body.classList.remove('enable-banner');
				body.classList.add('wallpaper-transparent', 'no-banner-mode');
				break;
			case 'none':
				body.classList.remove('enable-banner', 'wallpaper-transparent');
				body.classList.add('no-banner-mode');
				break;
		}
		
		// 立即调整主内容区域位置和布局模式（避免闪烁和位置错误）
		// 使用 requestAnimationFrame 确保 DOM 准备好
		requestAnimationFrame(function() {
			const mainContent = document.querySelector('.absolute.w-full.z-30.pointer-events-none');
			if (mainContent) {
				if (wallpaperMode === 'banner') {
					// 让主内容区域从banner顶部开始，这样波浪线会自然覆盖内容上部
					mainContent.style.top = `${BANNER_HEIGHT}vh`;
				} else {
					// fullscreen 或 none 模式
					mainContent.style.top = '5.5rem';
				}
			}
			
			// 立即应用布局模式，避免闪烁
			const mainGrid = document.getElementById('main-grid');
			if (mainGrid) {
				const savedLayout = localStorage.getItem('postListLayout');
				const currentLayout = savedLayout || defaultPostListLayout;
				mainGrid.setAttribute('data-layout-mode', currentLayout);
				
				// 根据布局模式显示或隐藏右侧边栏
				const rightSidebar = document.querySelector('.right-sidebar-container');
				if (rightSidebar) {
					if (currentLayout === 'grid') {
						rightSidebar.classList.add('hidden-in-grid-mode');
					} else {
						rightSidebar.classList.remove('hidden-in-grid-mode');
					}
				}
				
				// 同时更新文章列表容器的CSS类
				const postListContainer = document.getElementById('post-list-container');
				if (postListContainer) {
					postListContainer.classList.remove('list-mode', 'grid-mode');
					
					if (currentLayout === 'grid') {
						postListContainer.classList.add('grid-mode');
						postListContainer.classList.add('grid', 'grid-cols-1', 'lg:grid-cols-2', 'gap-6');
						postListContainer.classList.remove('flex', 'flex-col');
					} else {
						postListContainer.classList.add('list-mode');
						postListContainer.classList.add('flex', 'flex-col');
						postListContainer.classList.remove('grid', 'grid-cols-1', 'lg:grid-cols-2', 'gap-6');
					}
				}
			}
		});
	})();
	
	// 根据壁纸模式动态设置 banner 和全屏壁纸的显示
	const wallpaperMode = localStorage.getItem('wallpaperMode') || defaultWallpaperMode;
	
	// 在 DOM 加载后执行
	if (document.readyState === 'loading') {
		document.addEventListener('DOMContentLoaded', applyWallpaperMode);
	} else {
		applyWallpaperMode();
	}
	
	function applyWallpaperMode() {
		var wallpaperMode = localStorage.getItem('wallpaperMode') || defaultWallpaperMode;
		var bannerWrapper = document.getElementById('banner-wrapper');
		var fullscreenWallpaper = document.querySelector('[data-fullscreen-wallpaper]');
		var navbar = document.getElementById('navbar');
		var body = document.body;
		var mainContent = document.querySelector('.absolute.w-full.z-30.pointer-events-none');
		
		// 强制重排以确保样式正确应用
		var forceReflow = function() {
			void document.body.offsetHeight;
		};
		
		switch(wallpaperMode) {
			case 'banner':
				// 显示 banner，隐藏全屏壁纸
				if (bannerWrapper) {
					bannerWrapper.style.display = 'block';
				}
				if (fullscreenWallpaper) {
					fullscreenWallpaper.style.display = 'none';
				}
				// 先移除body类，避免CSS冲突
				body.classList.remove('wallpaper-transparent');
				body.classList.remove('no-banner-mode');
				// 强制重排
				forceReflow();
				// 移除内联样式，让CSS完全接管
				if (mainContent) {
					mainContent.style.removeProperty('top');
				}
				// 再添加enable-banner类
				body.classList.add('enable-banner');
				// navbar 恢复原始透明模式（从 config 读取）
				if (navbar) {
					navbar.removeAttribute('data-dynamic-transparent');
					// 恢复 config 中设置的 data-transparent-mode
					navbar.setAttribute('data-transparent-mode', navbarTransparentMode);
					// 如果是 semifull 模式，重新初始化滚动检测
					if (navbarTransparentMode === 'semifull' && window.initSemifullScrollDetection) {
						window.initSemifullScrollDetection();
					}
				}
				// 强制重排以确保CSS变量正确更新
				forceReflow();
				break;
				
			case 'fullscreen':
				// 隐藏 banner，显示全屏壁纸
				if (bannerWrapper) {
					bannerWrapper.style.display = 'none';
				}
				if (fullscreenWallpaper) {
					fullscreenWallpaper.style.display = 'block';
				}
				// 先移除body类，避免CSS冲突
				body.classList.remove('enable-banner');
				// 强制重排
				forceReflow();
				// 移除内联样式，让CSS完全接管
				if (mainContent) {
					mainContent.style.removeProperty('top');
				}
				// 再添加wallpaper-transparent和no-banner-mode类
				body.classList.add('wallpaper-transparent');
				body.classList.add('no-banner-mode');
				// navbar 强制设置为 semi 透明模式（忽略 config 配置）
				if (navbar) {
					navbar.setAttribute('data-dynamic-transparent', 'semi');
					// 强制移除 config 中的 data-transparent-mode 影响
					navbar.removeAttribute('data-transparent-mode');
				}
				// 强制重排以确保CSS变量正确更新
				forceReflow();
				break;
				
			case 'none':
				// 隐藏所有壁纸
				if (bannerWrapper) {
					bannerWrapper.style.display = 'none';
				}
				if (fullscreenWallpaper) {
					fullscreenWallpaper.style.display = 'none';
				}
				// 先移除body类，避免CSS冲突
				body.classList.remove('enable-banner');
				body.classList.remove('wallpaper-transparent');
				// 强制重排
				forceReflow();
				// 移除内联样式，让CSS完全接管
				if (mainContent) {
					mainContent.style.removeProperty('top');
				}
				// 再添加no-banner-mode类
				body.classList.add('no-banner-mode');
				// navbar 强制设置为不透明（忽略 config 配置）
				if (navbar) {
					navbar.setAttribute('data-dynamic-transparent', 'none');
					// 强制移除 config 中的 data-transparent-mode 影响
					navbar.removeAttribute('data-transparent-mode');
				}
				// 强制重排以确保CSS变量正确更新
				forceReflow();
				break;
		}
	}
	
	// 监听壁纸模式变化，立即应用（不重载页面）
	window.addEventListener('wallpaper-mode-change', function(event) {
		applyWallpaperMode();
	});
	
	// 支持 Swup 页面过渡 - 在内容替换之前就应用布局，避免闪烁
	function setupSwupLayoutSync() {
		if (typeof window !== 'undefined' && window.swup) {
			// 关键：在 content:replace 之前（animation:out:start）就准备好布局状态
			window.swup.hooks.on('animation:out:start', function() {
				// 保存当前布局状态，以便在新页面中立即应用
				const savedLayout = localStorage.getItem('postListLayout');
				if (savedLayout) {
					window.__pendingLayoutMode = savedLayout;
				}
			});
			
			// 在内容替换后立即应用布局，不等待其他脚本
			window.swup.hooks.on('content:replace', function() {
				const mainGrid = document.getElementById('main-grid');
				if (mainGrid) {
					const currentLayout = window.__pendingLayoutMode || localStorage.getItem('postListLayout') || defaultPostListLayout;
					mainGrid.setAttribute('data-layout-mode', currentLayout);
					
					const rightSidebar = document.querySelector('.right-sidebar-container');
					if (rightSidebar) {
						if (currentLayout === 'grid') {
							rightSidebar.classList.add('hidden-in-grid-mode');
						} else {
							rightSidebar.classList.remove('hidden-in-grid-mode');
						}
					}
					
					// 关键：同时更新文章列表容器的CSS类
					const postListContainer = document.getElementById('post-list-container');
					if (postListContainer) {
						// 移除现有布局类
						postListContainer.classList.remove('list-mode', 'grid-mode');
						
						if (currentLayout === 'grid') {
							postListContainer.classList.add('grid-mode');
							postListContainer.classList.add('grid', 'grid-cols-1', 'lg:grid-cols-2', 'gap-6');
							postListContainer.classList.remove('flex', 'flex-col');
						} else {
							postListContainer.classList.add('list-mode');
							postListContainer.classList.add('flex', 'flex-col');
							postListContainer.classList.remove('grid', 'grid-cols-1', 'lg:grid-cols-2', 'gap-6');
						}
					}
					
					// 清除临时状态
					delete window.__pendingLayoutMode;
				}
			});
			
			return true;
		}
		return false;
	}
	
	// 尝试立即设置，如果失败则延迟重试
	if (!setupSwupLayoutSync()) {
		const checkSwup = setInterval(function() {
			if (setupSwupLayoutSync()) {
				clearInterval(checkSwup);
			}
		}, 50);
		
		setTimeout(function() {
			clearInterval(checkSwup);
		}, 2000);
	}
	
	// 支持 Swup 页面过渡
	document.addEventListener('swup:page:view', function() {
		applyWallpaperMode();
		
		// 在Swup页面切换时也要重新应用布局模式
		requestAnimationFrame(function() {
			const mainGrid = document.getElementById('main-grid');
			if (mainGrid) {
				const savedLayout = localStorage.getItem('postListLayout');
				const currentLayout = savedLayout || defaultPostListLayout;
				mainGrid.setAttribute('data-layout-mode', currentLayout);
				
				if (currentLayout === 'grid') {
					const rightSidebar = document.querySelector('.right-sidebar-container');
					if (rightSidebar) {
						rightSidebar.classList.add('hidden-in-grid-mode');
					}
				} else {
					const rightSidebar = document.querySelector('.right-sidebar-container');
					if (rightSidebar) {
						rightSidebar.classList.remove('hidden-in-grid-mode');
					}
				}
			}
		});
	});
	// 在页面完全加载后，再次确认布局模式是否正确
	if (document.readyState === 'loading') {
		document.addEventListener('DOMContentLoaded', function() {
			const mainGrid = document.getElementById('main-grid');
			if (mainGrid) {
				const savedLayout = localStorage.getItem('postListLayout');
				const currentLayout = savedLayout || defaultPostListLayout;
				mainGrid.setAttribute('data-layout-mode', currentLayout);
				
				if (currentLayout === 'grid') {
					const rightSidebar = document.querySelector('.right-sidebar-container');
					if (rightSidebar) {
						rightSidebar.classList.add('hidden-in-grid-mode');
					}
				}
			}
		});
	}
})();</script>  <div class="fixed inset-0 w-full h-full overflow-hidden pointer-events-none" style="z-index: -1; opacity: 0.8;" data-fullscreen-wallpaper> <script>
// 根据 localStorage 立即设置全屏壁纸初始显示状态，避免闪烁
(function() {
	const wallpaperMode = localStorage.getItem('wallpaperMode') || 'banner';
	const fullscreenWallpaper = document.currentScript.parentElement;
	if (wallpaperMode !== 'fullscreen') {
		fullscreenWallpaper.style.display = 'none';
	}
})();
</script> <!-- 桌面端壁纸 --> <div class="hidden lg:block w-full h-full relative"> <img src="/assets/desktop-banner/1.webp" alt="Desktop wallpaper 1" class="absolute inset-0 w-full h-full object-cover transition-opacity duration-1000 object-center" data-carousel-item="0" style="filter: blur(1px);"><img src="/assets/desktop-banner/2.webp" alt="Desktop wallpaper 2" class="absolute inset-0 w-full h-full object-cover transition-opacity duration-1000 object-center" data-carousel-item="1" style="filter: blur(1px);"><img src="/assets/desktop-banner/3.webp" alt="Desktop wallpaper 3" class="absolute inset-0 w-full h-full object-cover transition-opacity duration-1000 object-center" data-carousel-item="2" style="filter: blur(1px);"><img src="/assets/desktop-banner/4.webp" alt="Desktop wallpaper 4" class="absolute inset-0 w-full h-full object-cover transition-opacity duration-1000 object-center" data-carousel-item="3" style="filter: blur(1px);"><img src="/assets/desktop-banner/5.webp" alt="Desktop wallpaper 5" class="absolute inset-0 w-full h-full object-cover transition-opacity duration-1000 object-center" data-carousel-item="4" style="filter: blur(1px);"><img src="/assets/desktop-banner/6.webp" alt="Desktop wallpaper 6" class="absolute inset-0 w-full h-full object-cover transition-opacity duration-1000 object-center" data-carousel-item="5" style="filter: blur(1px);"> </div> <!-- 移动端壁纸 --> <div class="block lg:hidden w-full h-full relative"> <img src="/assets/mobile-banner/1.webp" alt="Mobile wallpaper 1" class="absolute inset-0 w-full h-full object-cover transition-opacity duration-1000 object-center" data-carousel-item="0" style="filter: blur(1px);"><img src="/assets/mobile-banner/2.webp" alt="Mobile wallpaper 2" class="absolute inset-0 w-full h-full object-cover transition-opacity duration-1000 object-center" data-carousel-item="1" style="filter: blur(1px);"><img src="/assets/mobile-banner/3.webp" alt="Mobile wallpaper 3" class="absolute inset-0 w-full h-full object-cover transition-opacity duration-1000 object-center" data-carousel-item="2" style="filter: blur(1px);"><img src="/assets/mobile-banner/4.webp" alt="Mobile wallpaper 4" class="absolute inset-0 w-full h-full object-cover transition-opacity duration-1000 object-center" data-carousel-item="3" style="filter: blur(1px);"><img src="/assets/mobile-banner/5.webp" alt="Mobile wallpaper 5" class="absolute inset-0 w-full h-full object-cover transition-opacity duration-1000 object-center" data-carousel-item="4" style="filter: blur(1px);"><img src="/assets/mobile-banner/6.webp" alt="Mobile wallpaper 6" class="absolute inset-0 w-full h-full object-cover transition-opacity duration-1000 object-center" data-carousel-item="5" style="filter: blur(1px);"> </div> </div> <script>(function(){const carouselInterval = 5;

		// 全屏壁纸轮播逻辑
		function initFullscreenWallpaperCarousel() {
			const wallpaperContainer = document.querySelector('[data-fullscreen-wallpaper]');
			if (!wallpaperContainer) return;

			const desktopItems = wallpaperContainer.querySelectorAll('.hidden.lg\\:block [data-carousel-item]');
			const mobileItems = wallpaperContainer.querySelectorAll('.block.lg\\:hidden [data-carousel-item]');

			function startCarousel(items) {
				if (items.length <= 1) return;

				let currentIndex = 0;
				
				// 初始化：显示第一张，隐藏其他
				items.forEach((item, index) => {
					item.style.opacity = index === 0 ? '1' : '0';
				});

				// 开始轮播
				setInterval(() => {
					// 隐藏当前图片
					items[currentIndex].style.opacity = '0';
					
					// 切换到下一张
					currentIndex = (currentIndex + 1) % items.length;
					
					// 显示下一张图片
					items[currentIndex].style.opacity = '1';
				}, carouselInterval * 1000);
			}

			// 分别为桌面端和移动端启动轮播
			if (desktopItems.length > 0) {
				startCarousel(desktopItems);
			}
			if (mobileItems.length > 0) {
				startCarousel(mobileItems);
			}
		}

		// 页面加载完成后初始化轮播
		if (document.readyState === 'loading') {
			document.addEventListener('DOMContentLoaded', initFullscreenWallpaperCarousel);
		} else {
			initFullscreenWallpaperCarousel();
		}
	})();</script>  <!-- Iconify图标库加载器 --><script>(function(){const preloadIcons = [];
const timeout = 10000;
const retryCount = 3;

  // 全局图标加载逻辑
  (function() {
    'use strict';
    
    // 避免重复加载
    if (window.__iconifyLoaderInitialized) {
      return;
    }
    window.__iconifyLoaderInitialized = true;

    // 图标加载器类
    class IconifyLoader {
      constructor() {
        this.isLoaded = false;
        this.isLoading = false;
        this.loadPromise = null;
        this.observers = new Set();
        this.preloadQueue = new Set();
      }

      async load(options = {}) {
        const { timeout: loadTimeout = timeout, retryCount: maxRetries = retryCount } = options;
        
        if (this.isLoaded) {
          return Promise.resolve();
        }

        if (this.isLoading && this.loadPromise) {
          return this.loadPromise;
        }

        this.isLoading = true;
        this.loadPromise = this.loadWithRetry(loadTimeout, maxRetries);

        try {
          await this.loadPromise;
          this.isLoaded = true;
          this.notifyObservers();
          await this.processPreloadQueue();
        } catch (error) {
          console.error('Failed to load Iconify:', error);
          throw error;
        } finally {
          this.isLoading = false;
        }
      }

      async loadWithRetry(timeout, retryCount) {
        for (let attempt = 1; attempt <= retryCount; attempt++) {
          try {
            await this.loadScript(timeout);
            return;
          } catch (error) {
            console.warn(`Iconify load attempt ${attempt} failed:`, error);
            
            if (attempt === retryCount) {
              throw new Error(`Failed to load Iconify after ${retryCount} attempts`);
            }
            
            await new Promise(resolve => setTimeout(resolve, 1000));
          }
        }
      }

      loadScript(timeout) {
        return new Promise((resolve, reject) => {
          // 检查是否已经存在
          if (this.isIconifyReady()) {
            resolve();
            return;
          }

          const existingScript = document.querySelector('script[src*="iconify-icon"]');
          if (existingScript) {
            this.waitForIconifyReady().then(resolve).catch(reject);
            return;
          }

          const script = document.createElement('script');
          script.src = 'https://code.iconify.design/iconify-icon/1.0.7/iconify-icon.min.js';
          script.async = true;
          script.crossOrigin = 'anonymous';

          const timeoutId = setTimeout(() => {
            script.remove();
            reject(new Error('Script load timeout'));
          }, timeout);

          script.onload = () => {
            clearTimeout(timeoutId);
            this.waitForIconifyReady().then(resolve).catch(reject);
          };

          script.onerror = () => {
            clearTimeout(timeoutId);
            script.remove();
            reject(new Error('Script load error'));
          };

          document.head.appendChild(script);
        });
      }

      waitForIconifyReady(maxWait = 5000) {
        return new Promise((resolve, reject) => {
          const startTime = Date.now();
          
          const checkReady = () => {
            if (this.isIconifyReady()) {
              resolve();
              return;
            }
            
            if (Date.now() - startTime > maxWait) {
              reject(new Error('Iconify initialization timeout'));
              return;
            }
            
            setTimeout(checkReady, 50);
          };
          
          checkReady();
        });
      }

      isIconifyReady() {
        return typeof window !== 'undefined' && 
               'customElements' in window && 
               customElements.get('iconify-icon') !== undefined;
      }

      onLoad(callback) {
        if (this.isLoaded) {
          callback();
        } else {
          this.observers.add(callback);
        }
      }

      notifyObservers() {
        this.observers.forEach(callback => {
          try {
            callback();
          } catch (error) {
            console.error('Error in icon load observer:', error);
          }
        });
        this.observers.clear();
      }

      addToPreloadQueue(icons) {
        if (Array.isArray(icons)) {
          icons.forEach(icon => this.preloadQueue.add(icon));
        } else {
          this.preloadQueue.add(icons);
        }
        
        if (this.isLoaded) {
          this.processPreloadQueue();
        }
      }

      async processPreloadQueue() {
        if (this.preloadQueue.size === 0) return;
        
        const iconsToLoad = Array.from(this.preloadQueue);
        this.preloadQueue.clear();
        
        await this.preloadIcons(iconsToLoad);
      }

      async preloadIcons(icons) {
        if (!this.isLoaded || icons.length === 0) return;

        return new Promise((resolve) => {
          let loadedCount = 0;
          const totalIcons = icons.length;
          const tempElements = [];

          const cleanup = () => {
            tempElements.forEach(el => {
              if (el.parentNode) {
                el.parentNode.removeChild(el);
              }
            });
          };

          const checkComplete = () => {
            loadedCount++;
            if (loadedCount >= totalIcons) {
              cleanup();
              resolve();
            }
          };

          icons.forEach(icon => {
            const tempIcon = document.createElement('iconify-icon');
            tempIcon.setAttribute('icon', icon);
            tempIcon.style.cssText = 'position:absolute;top:-9999px;left:-9999px;width:1px;height:1px;opacity:0;pointer-events:none;';
            
            tempIcon.addEventListener('load', checkComplete);
            tempIcon.addEventListener('error', checkComplete);
            
            tempElements.push(tempIcon);
            document.body.appendChild(tempIcon);
          });

          // 设置超时清理
          setTimeout(() => {
            cleanup();
            resolve();
          }, 3000);
        });
      }
    }

    // 创建全局实例
    window.__iconifyLoader = new IconifyLoader();

    // 立即开始加载
    window.__iconifyLoader.load().catch(error => {
      console.error('Failed to initialize Iconify:', error);
    });

    // 如果有预加载图标，添加到队列
    if (preloadIcons && preloadIcons.length > 0) {
      window.__iconifyLoader.addToPreloadQueue(preloadIcons);
    }

    // 导出便捷函数到全局
    window.loadIconify = () => window.__iconifyLoader.load();
    window.preloadIcons = (icons) => window.__iconifyLoader.addToPreloadQueue(icons);
    window.onIconifyReady = (callback) => window.__iconifyLoader.onLoad(callback);

    // 页面可见性变化时重新检查
    document.addEventListener('visibilitychange', () => {
      if (!document.hidden && !window.__iconifyLoader.isLoaded) {
        window.__iconifyLoader.load().catch(console.error);
      }
    });

  })();
})();</script> <!-- 为不支持JavaScript的情况提供备用方案 --><noscript><style>
    iconify-icon {
      display: none;
    }
    .icon-fallback {
      display: inline-block;
    }
  </style></noscript>   <div id="top-row" class="z-50 pointer-events-none relative transition-all duration-700 max-w-[var(--page-width)] px-0 md:px-4 mx-auto" data-astro-cid-haiuh7kc> <div id="navbar-wrapper" class="pointer-events-auto sticky top-0 transition-all" data-astro-cid-haiuh7kc> <div id="navbar" class="z-50 onload-animation" data-transparent-mode="semifull" data-is-home="false"> <div class="absolute h-8 left-0 right-0 -top-8 bg-[var(--card-bg)] transition"></div> <!-- used for onload animation --> <div class="!overflow-visible max-w-[var(--page-width)] h-[4.5rem] mx-auto flex items-center justify-between px-4"> <a href="/" class="btn-plain scale-animation rounded-lg h-[3.25rem] px-5 font-bold active:scale-95"> <div class="flex flex-row items-center text-md">   <img src="/assets/home/home.png" alt="hnugreycrow" class="h-[1.75rem] w-[1.75rem] mb-1 mr-2 object-contain" loading="lazy"> <span class="dark:text-white text-black">hnugreycrow</span>  </div> </a> <div class="hidden md:flex items-center space-x-1"> <div class="dropdown-container" data-dropdown data-astro-cid-qou34bit> <a aria-label="主页" href="/" class="btn-plain scale-animation rounded-lg h-11 font-bold px-5 active:scale-95" data-astro-cid-qou34bit> <div class="flex items-center" data-astro-cid-qou34bit> <svg width="1em" height="1em" class="text-[1.1rem] mr-2" data-astro-cid-qou34bit="true" data-icon="material-symbols:home">   <symbol id="ai:material-symbols:home" viewBox="0 0 24 24"><path fill="currentColor" d="M4 21V9l8-6l8 6v12h-6v-7h-4v7z"/></symbol><use href="#ai:material-symbols:home"></use>  </svg> 主页  </div> </a> </div>  <script type="module">document.addEventListener("DOMContentLoaded",function(){const i=document.querySelectorAll("[data-dropdown]");i.forEach(t=>{const e=t.querySelector("[data-dropdown-trigger]"),o=t.querySelector("[data-dropdown-menu]"),n=t.querySelectorAll(".dropdown-item");!e||!o||(e.addEventListener("keydown",function(r){r.key==="Enter"||r.key===" "?(r.preventDefault(),d(t,e,o)):r.key==="ArrowDown"?(r.preventDefault(),u(t,e,o),n.length>0&&n[0].focus()):r.key==="Escape"&&a(t,e,o)}),n.forEach((r,l)=>{r.addEventListener("keydown",function(s){if(s.key==="ArrowDown"){s.preventDefault();const c=(l+1)%n.length;n[c].focus()}else if(s.key==="ArrowUp"){s.preventDefault();const c=(l-1+n.length)%n.length;n[c].focus()}else s.key==="Escape"&&(a(t,e,o),e.focus())})}))}),document.addEventListener("click",function(t){i.forEach(e=>{if(!e.contains(t.target)){const o=e.querySelector("[data-dropdown-trigger]"),n=e.querySelector("[data-dropdown-menu]");o&&n&&a(e,o,n)}})})});function d(i,t,e){t.getAttribute("aria-expanded")==="true"?a(i,t,e):u(i,t,e)}function u(i,t,e){t.setAttribute("aria-expanded","true"),e.classList.remove("opacity-0","invisible","pointer-events-none","translate-y-[-8px]"),e.classList.add("opacity-100","visible","pointer-events-auto","translate-y-0")}function a(i,t,e){t.setAttribute("aria-expanded","false"),e.classList.add("opacity-0","invisible","pointer-events-none","translate-y-[-8px]"),e.classList.remove("opacity-100","visible","pointer-events-auto","translate-y-0")}</script><div class="dropdown-container" data-dropdown data-astro-cid-qou34bit> <a aria-label="归档" href="/archive/" class="btn-plain scale-animation rounded-lg h-11 font-bold px-5 active:scale-95" data-astro-cid-qou34bit> <div class="flex items-center" data-astro-cid-qou34bit> <svg width="1em" height="1em" class="text-[1.1rem] mr-2" data-astro-cid-qou34bit="true" data-icon="material-symbols:archive">   <symbol id="ai:material-symbols:archive" viewBox="0 0 24 24"><path fill="currentColor" d="m12 18l4-4l-1.4-1.4l-1.6 1.6V10h-2v4.2l-1.6-1.6L8 14zm-7 3q-.825 0-1.412-.587T3 19V6.525q0-.35.113-.675t.337-.6L4.7 3.725q.275-.35.687-.538T6.25 3h11.5q.45 0 .863.188t.687.537l1.25 1.525q.225.275.338.6t.112.675V19q0 .825-.587 1.413T19 21zm.4-15h13.2l-.85-1H6.25z"/></symbol><use href="#ai:material-symbols:archive"></use>  </svg> 归档  </div> </a> </div>  <div class="dropdown-container" data-dropdown data-astro-cid-qou34bit> <a aria-label="About" href="/about/" class="btn-plain scale-animation rounded-lg h-11 font-bold px-5 active:scale-95" data-astro-cid-qou34bit> <div class="flex items-center" data-astro-cid-qou34bit> <svg width="1em" height="1em" class="text-[1.1rem] mr-2" data-astro-cid-qou34bit="true" data-icon="material-symbols:person">   <symbol id="ai:material-symbols:person" viewBox="0 0 24 24"><path fill="currentColor" d="M12 12q-1.65 0-2.825-1.175T8 8t1.175-2.825T12 4t2.825 1.175T16 8t-1.175 2.825T12 12m-8 8v-2.8q0-.85.438-1.562T5.6 14.55q1.55-.775 3.15-1.162T12 13t3.25.388t3.15 1.162q.725.375 1.163 1.088T20 17.2V20z"/></symbol><use href="#ai:material-symbols:person"></use>  </svg> 关于  </div> </a> </div>  <div class="dropdown-container" data-dropdown data-astro-cid-qou34bit> <a aria-label="Friends" href="/friends/" class="btn-plain scale-animation rounded-lg h-11 font-bold px-5 active:scale-95" data-astro-cid-qou34bit> <div class="flex items-center" data-astro-cid-qou34bit> <svg width="1em" height="1em" class="text-[1.1rem] mr-2" data-astro-cid-qou34bit="true" data-icon="material-symbols:group">   <symbol id="ai:material-symbols:group" viewBox="0 0 24 24"><path fill="currentColor" d="M1 20v-2.8q0-.85.438-1.562T2.6 14.55q1.55-.775 3.15-1.162T9 13t3.25.388t3.15 1.162q.725.375 1.163 1.088T17 17.2V20zm18 0v-3q0-1.1-.612-2.113T16.65 13.15q1.275.15 2.4.513t2.1.887q.9.5 1.375 1.112T23 17v3zM9 12q-1.65 0-2.825-1.175T5 8t1.175-2.825T9 4t2.825 1.175T13 8t-1.175 2.825T9 12m10-4q0 1.65-1.175 2.825T15 12q-.275 0-.7-.062t-.7-.138q.675-.8 1.038-1.775T15 8t-.362-2.025T13.6 4.2q.35-.125.7-.163T15 4q1.65 0 2.825 1.175T19 8"/></symbol><use href="#ai:material-symbols:group"></use>  </svg> 友链  </div> </a> </div>   </div> <div class="flex"> <!--<SearchPanel client:load>--> <style>astro-island,astro-slot,astro-static-slot{display:contents}</style><script>(()=>{var e=async t=>{await(await t())()};(self.Astro||(self.Astro={})).only=e;window.dispatchEvent(new Event("astro:only"));})();</script><script>(()=>{var A=Object.defineProperty;var g=(i,o,a)=>o in i?A(i,o,{enumerable:!0,configurable:!0,writable:!0,value:a}):i[o]=a;var d=(i,o,a)=>g(i,typeof o!="symbol"?o+"":o,a);{let i={0:t=>m(t),1:t=>a(t),2:t=>new RegExp(t),3:t=>new Date(t),4:t=>new Map(a(t)),5:t=>new Set(a(t)),6:t=>BigInt(t),7:t=>new URL(t),8:t=>new Uint8Array(t),9:t=>new Uint16Array(t),10:t=>new Uint32Array(t),11:t=>1/0*t},o=t=>{let[l,e]=t;return l in i?i[l](e):void 0},a=t=>t.map(o),m=t=>typeof t!="object"||t===null?t:Object.fromEntries(Object.entries(t).map(([l,e])=>[l,o(e)]));class y extends HTMLElement{constructor(){super(...arguments);d(this,"Component");d(this,"hydrator");d(this,"hydrate",async()=>{var b;if(!this.hydrator||!this.isConnected)return;let e=(b=this.parentElement)==null?void 0:b.closest("astro-island[ssr]");if(e){e.addEventListener("astro:hydrate",this.hydrate,{once:!0});return}let c=this.querySelectorAll("astro-slot"),n={},h=this.querySelectorAll("template[data-astro-template]");for(let r of h){let s=r.closest(this.tagName);s!=null&&s.isSameNode(this)&&(n[r.getAttribute("data-astro-template")||"default"]=r.innerHTML,r.remove())}for(let r of c){let s=r.closest(this.tagName);s!=null&&s.isSameNode(this)&&(n[r.getAttribute("name")||"default"]=r.innerHTML)}let p;try{p=this.hasAttribute("props")?m(JSON.parse(this.getAttribute("props"))):{}}catch(r){let s=this.getAttribute("component-url")||"<unknown>",v=this.getAttribute("component-export");throw v&&(s+=` (export ${v})`),console.error(`[hydrate] Error parsing props for component ${s}`,this.getAttribute("props"),r),r}let u;await this.hydrator(this)(this.Component,p,n,{client:this.getAttribute("client")}),this.removeAttribute("ssr"),this.dispatchEvent(new CustomEvent("astro:hydrate"))});d(this,"unmount",()=>{this.isConnected||this.dispatchEvent(new CustomEvent("astro:unmount"))})}disconnectedCallback(){document.removeEventListener("astro:after-swap",this.unmount),document.addEventListener("astro:after-swap",this.unmount,{once:!0})}connectedCallback(){if(!this.hasAttribute("await-children")||document.readyState==="interactive"||document.readyState==="complete")this.childrenConnectedCallback();else{let e=()=>{document.removeEventListener("DOMContentLoaded",e),c.disconnect(),this.childrenConnectedCallback()},c=new MutationObserver(()=>{var n;((n=this.lastChild)==null?void 0:n.nodeType)===Node.COMMENT_NODE&&this.lastChild.nodeValue==="astro:end"&&(this.lastChild.remove(),e())});c.observe(this,{childList:!0}),document.addEventListener("DOMContentLoaded",e)}}async childrenConnectedCallback(){let e=this.getAttribute("before-hydration-url");e&&await import(e),this.start()}async start(){let e=JSON.parse(this.getAttribute("opts")),c=this.getAttribute("client");if(Astro[c]===void 0){window.addEventListener(`astro:${c}`,()=>this.start(),{once:!0});return}try{await Astro[c](async()=>{let n=this.getAttribute("renderer-url"),[h,{default:p}]=await Promise.all([import(this.getAttribute("component-url")),n?import(n):()=>()=>{}]),u=this.getAttribute("component-export")||"default";if(!u.includes("."))this.Component=h[u];else{this.Component=h;for(let f of u.split("."))this.Component=this.Component[f]}return this.hydrator=p,this.hydrate},e,this)}catch(n){console.error(`[astro-island] Error hydrating ${this.getAttribute("component-url")}`,n)}}attributeChangedCallback(){this.hydrate()}}d(y,"observedAttributes",["props"]),customElements.get("astro-island")||customElements.define("astro-island",y)}})();</script><astro-island uid="2o3UR7" component-url="/_astro/Search.BgRQTfl-.js" component-export="default" renderer-url="/_astro/client.svelte.Kd9eTfLd.js" props="{}" ssr client="only" opts="{&quot;name&quot;:&quot;Search&quot;,&quot;value&quot;:&quot;svelte&quot;}"></astro-island> <astro-island uid="hRNGm" component-url="/_astro/MobileTOC.nde6GZp_.js" component-export="default" renderer-url="/_astro/client.svelte.Kd9eTfLd.js" props="{}" ssr client="only" opts="{&quot;name&quot;:&quot;MobileTOC&quot;,&quot;value&quot;:&quot;svelte&quot;}"></astro-island> <button aria-label="Display Settings" class="btn-plain scale-animation rounded-lg h-11 w-11 active:scale-90" id="display-settings-switch"> <svg width="1em" height="1em" class="text-[1.25rem]" data-icon="material-symbols:palette-outline">   <symbol id="ai:material-symbols:palette-outline" viewBox="0 0 24 24"><path fill="currentColor" d="M12 22q-2.05 0-3.875-.788t-3.187-2.15t-2.15-3.187T2 12q0-2.075.813-3.9t2.2-3.175T8.25 2.788T12.2 2q2 0 3.775.688t3.113 1.9t2.125 2.875T22 11.05q0 2.875-1.75 4.413T16 17h-1.85q-.225 0-.312.125t-.088.275q0 .3.375.863t.375 1.287q0 1.25-.687 1.85T12 22m-5.5-9q.65 0 1.075-.425T8 11.5t-.425-1.075T6.5 10t-1.075.425T5 11.5t.425 1.075T6.5 13m3-4q.65 0 1.075-.425T11 7.5t-.425-1.075T9.5 6t-1.075.425T8 7.5t.425 1.075T9.5 9m5 0q.65 0 1.075-.425T16 7.5t-.425-1.075T14.5 6t-1.075.425T13 7.5t.425 1.075T14.5 9m3 4q.65 0 1.075-.425T19 11.5t-.425-1.075T17.5 10t-1.075.425T16 11.5t.425 1.075T17.5 13M12 20q.225 0 .363-.125t.137-.325q0-.35-.375-.825T11.75 17.3q0-1.05.725-1.675T14.25 15H16q1.65 0 2.825-.962T20 11.05q0-3.025-2.312-5.038T12.2 4Q8.8 4 6.4 6.325T4 12q0 3.325 2.338 5.663T12 20"/></symbol><use href="#ai:material-symbols:palette-outline"></use>  </svg> </button> <astro-island uid="ZAahTG" component-url="/_astro/LayoutSwitchButton.Cro20lT2.js" component-export="default" renderer-url="/_astro/client.svelte.Kd9eTfLd.js" props="{&quot;currentLayout&quot;:[0,&quot;list&quot;]}" ssr client="only" opts="{&quot;name&quot;:&quot;LayoutSwitchButton&quot;,&quot;value&quot;:&quot;svelte&quot;}"></astro-island> <!-- 整体布局方案切换按钮：根据配置决定在哪些设备上显示 --> <div class="hidden md:block"> <astro-island uid="Z2e84Rw" component-url="/_astro/WallpaperSwitch.CApy4C7m.js" component-export="default" renderer-url="/_astro/client.svelte.Kd9eTfLd.js" props="{}" ssr client="only" opts="{&quot;name&quot;:&quot;WallpaperSwitch&quot;,&quot;value&quot;:&quot;svelte&quot;}"></astro-island> </div> <astro-island uid="ZTF5JN" component-url="/_astro/LightDarkSwitch.XgwJVfeN.js" component-export="default" renderer-url="/_astro/client.svelte.Kd9eTfLd.js" props="{}" ssr client="only" opts="{&quot;name&quot;:&quot;LightDarkSwitch&quot;,&quot;value&quot;:&quot;svelte&quot;}"></astro-island> <button aria-label="Menu" name="Nav Menu" class="btn-plain scale-animation rounded-lg w-11 h-11 active:scale-90 md:!hidden" id="nav-menu-switch"> <svg width="1em" height="1em" class="text-[1.25rem]" data-icon="material-symbols:menu-rounded">   <symbol id="ai:material-symbols:menu-rounded" viewBox="0 0 24 24"><path fill="currentColor" d="M4 18q-.425 0-.712-.288T3 17t.288-.712T4 16h16q.425 0 .713.288T21 17t-.288.713T20 18zm0-5q-.425 0-.712-.288T3 12t.288-.712T4 11h16q.425 0 .713.288T21 12t-.288.713T20 13zm0-5q-.425 0-.712-.288T3 7t.288-.712T4 6h16q.425 0 .713.288T21 7t-.288.713T20 8z"/></symbol><use href="#ai:material-symbols:menu-rounded"></use>  </svg> </button> </div> <div id="nav-menu-panel" class="float-panel float-panel-closed absolute transition-all fixed right-4 px-2 py-2 max-h-[80vh] overflow-y-auto" data-astro-cid-h5lvqo6o> <div class="mobile-menu-item" data-astro-cid-h5lvqo6o> <!-- 普通链接项目 -->
                <a href="/" class="group flex justify-between items-center py-2 pl-3 pr-1 rounded-lg gap-8
                    hover:bg-[var(--btn-plain-bg-hover)] active:bg-[var(--btn-plain-bg-active)] transition
                " data-astro-cid-h5lvqo6o> <div class="flex items-center transition text-black/75 dark:text-white/75 font-bold group-hover:text-[var(--primary)] group-active:text-[var(--primary)]" data-astro-cid-h5lvqo6o> <svg width="1em" height="1em" viewBox="0 0 24 24" class="text-[1.1rem] mr-2" data-astro-cid-h5lvqo6o="true" data-icon="material-symbols:home">   <use href="#ai:material-symbols:home"></use>  </svg> 主页 </div> <svg width="1em" height="1em" class="transition text-[1.25rem] text-[var(--primary)]" data-astro-cid-h5lvqo6o="true" data-icon="material-symbols:chevron-right-rounded">   <symbol id="ai:material-symbols:chevron-right-rounded" viewBox="0 0 24 24"><path fill="currentColor" d="M12.6 12L8.7 8.1q-.275-.275-.275-.7t.275-.7t.7-.275t.7.275l4.6 4.6q.15.15.213.325t.062.375t-.062.375t-.213.325l-4.6 4.6q-.275.275-.7.275t-.7-.275t-.275-.7t.275-.7z"/></symbol><use href="#ai:material-symbols:chevron-right-rounded"></use>  </svg>  </a> </div><div class="mobile-menu-item" data-astro-cid-h5lvqo6o> <!-- 普通链接项目 -->
                <a href="/archive/" class="group flex justify-between items-center py-2 pl-3 pr-1 rounded-lg gap-8
                    hover:bg-[var(--btn-plain-bg-hover)] active:bg-[var(--btn-plain-bg-active)] transition
                " data-astro-cid-h5lvqo6o> <div class="flex items-center transition text-black/75 dark:text-white/75 font-bold group-hover:text-[var(--primary)] group-active:text-[var(--primary)]" data-astro-cid-h5lvqo6o> <svg width="1em" height="1em" viewBox="0 0 24 24" class="text-[1.1rem] mr-2" data-astro-cid-h5lvqo6o="true" data-icon="material-symbols:archive">   <use href="#ai:material-symbols:archive"></use>  </svg> 归档 </div> <svg width="1em" height="1em" viewBox="0 0 24 24" class="transition text-[1.25rem] text-[var(--primary)]" data-astro-cid-h5lvqo6o="true" data-icon="material-symbols:chevron-right-rounded">   <use href="#ai:material-symbols:chevron-right-rounded"></use>  </svg>  </a> </div><div class="mobile-menu-item" data-astro-cid-h5lvqo6o> <!-- 普通链接项目 -->
                <a href="/about/" class="group flex justify-between items-center py-2 pl-3 pr-1 rounded-lg gap-8
                    hover:bg-[var(--btn-plain-bg-hover)] active:bg-[var(--btn-plain-bg-active)] transition
                " data-astro-cid-h5lvqo6o> <div class="flex items-center transition text-black/75 dark:text-white/75 font-bold group-hover:text-[var(--primary)] group-active:text-[var(--primary)]" data-astro-cid-h5lvqo6o> <svg width="1em" height="1em" viewBox="0 0 24 24" class="text-[1.1rem] mr-2" data-astro-cid-h5lvqo6o="true" data-icon="material-symbols:person">   <use href="#ai:material-symbols:person"></use>  </svg> 关于 </div> <svg width="1em" height="1em" viewBox="0 0 24 24" class="transition text-[1.25rem] text-[var(--primary)]" data-astro-cid-h5lvqo6o="true" data-icon="material-symbols:chevron-right-rounded">   <use href="#ai:material-symbols:chevron-right-rounded"></use>  </svg>  </a> </div><div class="mobile-menu-item" data-astro-cid-h5lvqo6o> <!-- 普通链接项目 -->
                <a href="/friends/" class="group flex justify-between items-center py-2 pl-3 pr-1 rounded-lg gap-8
                    hover:bg-[var(--btn-plain-bg-hover)] active:bg-[var(--btn-plain-bg-active)] transition
                " data-astro-cid-h5lvqo6o> <div class="flex items-center transition text-black/75 dark:text-white/75 font-bold group-hover:text-[var(--primary)] group-active:text-[var(--primary)]" data-astro-cid-h5lvqo6o> <svg width="1em" height="1em" viewBox="0 0 24 24" class="text-[1.1rem] mr-2" data-astro-cid-h5lvqo6o="true" data-icon="material-symbols:group">   <use href="#ai:material-symbols:group"></use>  </svg> 友链 </div> <svg width="1em" height="1em" viewBox="0 0 24 24" class="transition text-[1.25rem] text-[var(--primary)]" data-astro-cid-h5lvqo6o="true" data-icon="material-symbols:chevron-right-rounded">   <use href="#ai:material-symbols:chevron-right-rounded"></use>  </svg>  </a> </div> </div>  <script type="module">document.addEventListener("DOMContentLoaded",function(){const r=document.querySelectorAll("[data-mobile-dropdown]");r.forEach(e=>{const t=e.querySelector("[data-mobile-dropdown-trigger]"),d=e.querySelector("[data-mobile-submenu]");!t||!d||t.addEventListener("click",function(o){o.preventDefault();const u=e.getAttribute("data-expanded")==="true";r.forEach(a=>{if(a!==e){a.setAttribute("data-expanded","false");const i=a.querySelector("[data-mobile-dropdown-trigger]");i&&i.setAttribute("aria-expanded","false")}});const n=!u;e.setAttribute("data-expanded",n.toString()),t.setAttribute("aria-expanded",n.toString())})})});</script> <astro-island uid="d0YDf" component-url="/_astro/DisplaySettings.B7kYw1Gx.js" component-export="default" renderer-url="/_astro/client.svelte.Kd9eTfLd.js" props="{}" ssr client="only" opts="{&quot;name&quot;:&quot;DisplaySettings&quot;,&quot;value&quot;:&quot;svelte&quot;}"></astro-island> </div> </div> <script type="module" src="/_astro/Navbar.astro_astro_type_script_index_0_lang.CjFOzVWH.js"></script> <script>(function(){const scriptUrl = "/pagefind/pagefind.js";

async function loadPagefind() {
    try {
        const response = await fetch(scriptUrl, { method: 'HEAD' });
        if (!response.ok) {
            throw new Error(`Pagefind script not found: ${response.status}`);
        }

        const pagefind = await import(scriptUrl);

        await pagefind.options({
            excerptLength: 20
        });

        window.pagefind = pagefind;

        document.dispatchEvent(new CustomEvent('pagefindready'));
        console.log('Pagefind loaded and initialized successfully, event dispatched.');
    } catch (error) {
        console.error('Failed to load Pagefind:', error);
        window.pagefind = {
            search: () => Promise.resolve({ results: [] }),
            options: () => Promise.resolve(),
        };
        document.dispatchEvent(new CustomEvent('pagefindloaderror'));
        console.log('Pagefind load error, event dispatched.');
    }
}

if (document.readyState === 'loading') {
    document.addEventListener('DOMContentLoaded', loadPagefind);
} else {
    loadPagefind();
}
})();</script> </div> </div>  <div id="banner-wrapper" class="absolute z-10 w-full transition duration-700 overflow-hidden mobile-hide-banner" style="top: -30vh" data-astro-cid-haiuh7kc> <!-- Carousel mode for multiple images -->
        <div id="banner-carousel" class="relative h-full w-full" data-astro-cid-haiuh7kc> <ul class="carousel-list h-full w-full" data-astro-cid-haiuh7kc> <li class="carousel-item absolute inset-0 transition-all duration-500 opacity-100 scale-100" data-astro-cid-haiuh7kc> <!-- Mobile: use mobile-specific images with same logic as desktop --> <div class="block lg:hidden object-cover h-full w-full transition-transform duration-500 ease-out overflow-hidden relative"> <div class="transition absolute inset-0 dark:bg-black/10 bg-opacity-50 pointer-events-none"></div>  <img src="/images/wallpapers/0d980ee24f43443cabab6c099ee3842120240606.jpg" alt="Mobile banner image 1" class="w-full h-full object-cover" style="object-position: center"> </div> <!-- Desktop: use desktop-specific images --> <div class="hidden lg:block object-cover h-full w-full transition-transform duration-500 ease-out overflow-hidden relative"> <div class="transition absolute inset-0 dark:bg-black/10 bg-opacity-50 pointer-events-none"></div>  <img src="/images/wallpapers/0d980ee24f43443cabab6c099ee3842120240606.jpg" alt="Desktop banner image 1" class="w-full h-full object-cover" style="object-position: center"> </div> </li><li class="carousel-item absolute inset-0 transition-all duration-500 opacity-0 scale-110" data-astro-cid-haiuh7kc> <!-- Mobile: use mobile-specific images with same logic as desktop --> <div class="block lg:hidden object-cover h-full w-full transition-transform duration-500 ease-out overflow-hidden relative"> <div class="transition absolute inset-0 dark:bg-black/10 bg-opacity-50 pointer-events-none"></div>  <img src="/images/wallpapers/拂晓长誓.png" alt="Mobile banner image 2" class="w-full h-full object-cover" style="object-position: center"> </div> <!-- Desktop: use desktop-specific images --> <div class="hidden lg:block object-cover h-full w-full transition-transform duration-500 ease-out overflow-hidden relative"> <div class="transition absolute inset-0 dark:bg-black/10 bg-opacity-50 pointer-events-none"></div>  <img src="/images/wallpapers/拂晓长誓.png" alt="Desktop banner image 2" class="w-full h-full object-cover" style="object-position: center"> </div> </li><li class="carousel-item absolute inset-0 transition-all duration-500 opacity-0 scale-110" data-astro-cid-haiuh7kc> <!-- Mobile: use mobile-specific images with same logic as desktop --> <div class="block lg:hidden object-cover h-full w-full transition-transform duration-500 ease-out overflow-hidden relative"> <div class="transition absolute inset-0 dark:bg-black/10 bg-opacity-50 pointer-events-none"></div>  <img src="/images/wallpapers/e73f7fc72d35418bbc23a51fa71f439a20250615.jpg" alt="Mobile banner image 3" class="w-full h-full object-cover" style="object-position: center"> </div> <!-- Desktop: use desktop-specific images --> <div class="hidden lg:block object-cover h-full w-full transition-transform duration-500 ease-out overflow-hidden relative"> <div class="transition absolute inset-0 dark:bg-black/10 bg-opacity-50 pointer-events-none"></div>  <img src="/images/wallpapers/e73f7fc72d35418bbc23a51fa71f439a20250615.jpg" alt="Desktop banner image 3" class="w-full h-full object-cover" style="object-position: center"> </div> </li> </ul> </div> <!-- Home page text overlay --> <div class="banner-text-overlay absolute inset-0 z-20 flex items-center justify-center hidden" data-astro-cid-haiuh7kc> <div class="w-4/5 lg:w-3/4 text-center mb-0" data-astro-cid-haiuh7kc> <div class="flex flex-col" data-astro-cid-haiuh7kc>  <h2 class="banner-subtitle text-xl lg:text-3xl text-white/90 drop-shadow-md" data-astro-cid-haiuh7kc> <span class="inline-block min-h-[1.2em]" data-astro-cid-haiuh7kc> <span class="typewriter " data-text="[&#34;欢迎来到我的博客&#34;]" data-speed="100" data-delete-speed="50" data-pause-time="2000" data-astro-cid-4iv2rnoh></span> <script type="module">class n{element;texts;currentTextIndex=0;speed;deleteSpeed;pauseTime;currentIndex=0;isDeleting=!1;timeoutId=null;constructor(t){this.element=t;const e=t.dataset.text||"";try{const i=JSON.parse(e);this.texts=Array.isArray(i)?i:[e]}catch{this.texts=[e]}this.speed=parseInt(t.dataset.speed||"100"),this.deleteSpeed=parseInt(t.dataset.deleteSpeed||"50"),this.pauseTime=parseInt(t.dataset.pauseTime||"2000"),this.texts.length>1&&!this.isTypewriterEnabled()?this.showRandomText():this.start()}isTypewriterEnabled(){return this.element.dataset.speed!==void 0||this.element.dataset.deleteSpeed!==void 0||this.element.dataset.pauseTime!==void 0}showRandomText(){const t=Math.floor(Math.random()*this.texts.length);this.element.textContent=this.texts[t]}start(){this.texts.length!==0&&this.type()}getCurrentText(){return this.texts[this.currentTextIndex]||""}type(){const t=this.getCurrentText();this.isDeleting?this.currentIndex>0?(this.currentIndex--,this.element.textContent=t.substring(0,this.currentIndex),this.timeoutId=window.setTimeout(()=>this.type(),this.deleteSpeed)):(this.isDeleting=!1,this.currentTextIndex=(this.currentTextIndex+1)%this.texts.length,this.timeoutId=window.setTimeout(()=>this.type(),this.speed)):this.currentIndex<t.length?(this.currentIndex++,this.element.textContent=t.substring(0,this.currentIndex),this.timeoutId=window.setTimeout(()=>this.type(),this.speed)):this.texts.length>1?(this.isDeleting=!0,this.timeoutId=window.setTimeout(()=>this.type(),this.pauseTime)):this.texts.length===1&&this.texts[0]===""&&(this.element.innerHTML="&nbsp;")}destroy(){this.timeoutId&&clearTimeout(this.timeoutId)}}document.addEventListener("DOMContentLoaded",()=>{document.querySelectorAll(".typewriter").forEach(t=>{new n(t)})});document.addEventListener("swup:contentReplaced",()=>{document.querySelectorAll(".typewriter").forEach(t=>{new n(t)})});</script>  </span> </h2> </div> </div> </div> <!-- Water waves effect --> <div class="waves absolute -bottom-[1px] h-[10vh] max-h-[9.375rem] min-h-[3.125rem] w-full md:h-[15vh]" id="header-waves" style="transform: translateZ(0); will-change: fill;" data-astro-cid-haiuh7kc> <svg class="waves" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 20 150 32" preserveAspectRatio="none" shape-rendering="auto" style="transform: translateZ(0); backface-visibility: hidden;" data-astro-cid-haiuh7kc> <defs data-astro-cid-haiuh7kc> <path id="gentle-wave" d="M-160 44c30 0 58-18 88-18s 58 18 88 18 58-18 88-18 58 18 88 18 v48h-352z" data-astro-cid-haiuh7kc></path> </defs> <g class="parallax" style="transform: translateZ(0);" data-astro-cid-haiuh7kc> <use xlink:href="#gentle-wave" x="48" y="0" class="opacity-25 fill-[var(--page-bg)]" style="animation-delay: -2s; animation-duration: 7s; will-change: transform;" data-astro-cid-haiuh7kc></use> <use xlink:href="#gentle-wave" x="48" y="3" class="opacity-50 fill-[var(--page-bg)]" style="animation-delay: -3s; animation-duration: 10s; will-change: transform;" data-astro-cid-haiuh7kc></use> <use xlink:href="#gentle-wave" x="48" y="5" class="opacity-75 fill-[var(--page-bg)]" style="animation-delay: -4s; animation-duration: 13s; will-change: transform;" data-astro-cid-haiuh7kc></use> <use xlink:href="#gentle-wave" x="48" y="7" class="fill-[var(--page-bg)]" style="animation-delay: -5s; animation-duration: 20s; will-change: transform;" data-astro-cid-haiuh7kc></use> </g> </svg> </div> </div>  <div class="absolute w-full z-30 pointer-events-none mobile-main-no-banner  " style="top: 35vh" data-astro-cid-haiuh7kc> <!-- The pointer-events-none here prevent blocking the click event of the TOC --> <div class="relative max-w-[var(--page-width)] mx-auto pointer-events-auto" data-astro-cid-haiuh7kc> <div id="main-grid" class="transition duration-700 w-full left-0 right-0 grid grid-cols-1 grid-cols-1 lg:grid-cols-[17.5rem_1fr] lg:grid-cols-[17.5rem_1fr_17.5rem] grid-rows-[auto_1fr_auto] lg:grid-rows-[auto] mx-auto gap-4 px-2 md:px-4  mobile-both-sidebar" data-layout-mode="list" data-astro-cid-haiuh7kc> <!-- Banner image credit -->  <div id="sidebar" class="mb-4 row-start-2 row-end-3 col-span-1 onload-animation block block row-start-2 row-end-3 col-span-1 lg:block lg:row-start-1 lg:row-end-2 lg:max-w-[17.5rem] lg:col-start-1 lg:col-end-2  w-full" data-astro-cid-gfmxq3pg> <!-- 顶部固定组件区域 --> <div class="flex flex-col w-full gap-4 mb-4" data-astro-cid-gfmxq3pg> <div class="card-base p-3"> <a aria-label="Go to About Page" href="/about/" class="group block relative mx-auto mt-1 lg:mx-0 lg:mt-0 mb-3
       max-w-[12rem] lg:max-w-none overflow-hidden rounded-xl active:scale-95"> <div class="absolute transition pointer-events-none group-hover:bg-black/30 group-active:bg-black/50
        w-full h-full z-50 flex items-center justify-center"> <svg width="1.13em" height="1em" class="transition opacity-0 scale-90 group-hover:scale-100 group-hover:opacity-100 text-white text-5xl" data-icon="fa6-regular:address-card">   <symbol id="ai:fa6-regular:address-card" viewBox="0 0 576 512"><path fill="currentColor" d="M512 80c8.8 0 16 7.2 16 16v320c0 8.8-7.2 16-16 16H64c-8.8 0-16-7.2-16-16V96c0-8.8 7.2-16 16-16zM64 32C28.7 32 0 60.7 0 96v320c0 35.3 28.7 64 64 64h448c35.3 0 64-28.7 64-64V96c0-35.3-28.7-64-64-64zm144 224a64 64 0 1 0 0-128a64 64 0 1 0 0 128m-32 32c-44.2 0-80 35.8-80 80c0 8.8 7.2 16 16 16h192c8.8 0 16-7.2 16-16c0-44.2-35.8-80-80-80zm200-144c-13.3 0-24 10.7-24 24s10.7 24 24 24h80c13.3 0 24-10.7 24-24s-10.7-24-24-24zm0 96c-13.3 0-24 10.7-24 24s10.7 24 24 24h80c13.3 0 24-10.7 24-24s-10.7-24-24-24z"/></symbol><use href="#ai:fa6-regular:address-card"></use>  </svg> </div> <div class="mx-auto lg:w-full h-full lg:mt-0  overflow-hidden relative"> <div class="transition absolute inset-0 dark:bg-black/10 bg-opacity-50 pointer-events-none"></div> <img src="/_astro/luxiya.DQ-tla0E_Z295zFs.webp" alt="Profile Image of the Author" style="object-position: center" loading="lazy" decoding="async" fetchpriority="auto" width="1057" height="1057" class="w-full h-full object-cover">  </div> </a> <div class="px-2"> <div class="font-bold text-xl text-center mb-1 dark:text-neutral-50 transition">hnugreycrow</div> <div class="h-1 w-5 bg-[var(--primary)] mx-auto rounded-full mb-2 transition"></div> <div class="text-center text-neutral-400 mb-2.5 transition"> <span class="typewriter inline-block" data-text="The world is big, you have to go and see" data-speed="80" data-delete-speed="50" data-pause-time="2000" data-astro-cid-4iv2rnoh></span>   </div> <div class="flex gap-2 justify-center mb-1"> <a rel="me" aria-label="Bilibli" href="https://space.bilibili.com/701864046" target="_blank" class="btn-regular rounded-lg h-10 w-10 active:scale-90"> <svg width="1em" height="1em" class="text-[1.5rem]" data-icon="fa6-brands:bilibili">   <symbol id="ai:fa6-brands:bilibili" viewBox="0 0 512 512"><path fill="currentColor" d="M488.6 104.1c16.7 18.1 24.4 39.7 23.3 65.7v202.4c-.4 26.4-9.2 48.1-26.5 65.1c-17.2 17-39.1 25.9-65.5 26.7H92.02c-26.45-.8-48.21-9.8-65.28-27.2C9.682 419.4.767 396.5 0 368.2V169.8c.767-26 9.682-47.6 26.74-65.7C43.81 87.75 65.57 78.77 92.02 78h29.38L96.05 52.19c-5.75-5.73-8.63-13-8.63-21.79c0-8.8 2.88-16.06 8.63-21.797C101.8 2.868 109.1 0 117.9 0q13.2 0 21.9 8.603L213.1 78h88l74.5-69.397C381.7 2.868 389.2 0 398 0q13.2 0 21.9 8.603c5.7 5.737 8.6 12.997 8.6 21.797c0 8.79-2.9 16.06-8.6 21.79L394.6 78h29.3c26.4.77 48 9.75 64.7 26.1m-38.8 69.7c-.4-9.6-3.7-17.4-10.7-23.5c-5.2-6.1-14-9.4-22.7-9.8H96.05c-9.59.4-17.45 3.7-23.58 9.8c-6.14 6.1-9.4 13.9-9.78 23.5v194.4c0 9.2 3.26 17 9.78 23.5s14.38 9.8 23.58 9.8H416.4c9.2 0 17-3.3 23.3-9.8s9.7-14.3 10.1-23.5zm-264.3 42.7c6.3 6.3 9.7 14.1 10.1 23.2V273c-.4 9.2-3.7 16.9-9.8 23.2c-6.2 6.3-14 9.5-23.6 9.5s-17.5-3.2-23.6-9.5s-9.4-14-9.8-23.2v-33.3c.4-9.1 3.8-16.9 10.1-23.2s13.2-9.6 23.3-10c9.2.4 17 3.7 23.3 10m191.5 0c6.3 6.3 9.7 14.1 10.1 23.2V273c-.4 9.2-3.7 16.9-9.8 23.2s-14 9.5-23.6 9.5s-17.4-3.2-23.6-9.5c-7-6.3-9.4-14-9.7-23.2v-33.3c.3-9.1 3.7-16.9 10-23.2s14.1-9.6 23.3-10c9.2.4 17 3.7 23.3 10"/></symbol><use href="#ai:fa6-brands:bilibili"></use>  </svg> </a><a rel="me" aria-label="Gitee" href="https://gitee.com/matsuzakayuki" target="_blank" class="btn-regular rounded-lg h-10 w-10 active:scale-90"> <svg width="1em" height="1em" class="text-[1.5rem]" data-icon="mdi:git">   <symbol id="ai:mdi:git" viewBox="0 0 24 24"><path fill="currentColor" d="M2.6 10.59L8.38 4.8l1.69 1.7c-.24.85.15 1.78.93 2.23v5.54c-.6.34-1 .99-1 1.73a2 2 0 0 0 2 2a2 2 0 0 0 2-2c0-.74-.4-1.39-1-1.73V9.41l2.07 2.09c-.07.15-.07.32-.07.5a2 2 0 0 0 2 2a2 2 0 0 0 2-2a2 2 0 0 0-2-2c-.18 0-.35 0-.5.07L13.93 7.5a1.98 1.98 0 0 0-1.15-2.34c-.43-.16-.88-.2-1.28-.09L9.8 3.38l.79-.78c.78-.79 2.04-.79 2.82 0l7.99 7.99c.79.78.79 2.04 0 2.82l-7.99 7.99c-.78.79-2.04.79-2.82 0L2.6 13.41c-.79-.78-.79-2.04 0-2.82"/></symbol><use href="#ai:mdi:git"></use>  </svg> </a><a rel="me" aria-label="GitHub" href="https://github.com/matsuzaka-yuki" target="_blank" class="btn-regular rounded-lg h-10 w-10 active:scale-90"> <svg width="0.97em" height="1em" class="text-[1.5rem]" data-icon="fa6-brands:github">   <symbol id="ai:fa6-brands:github" viewBox="0 0 496 512"><path fill="currentColor" d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6c-3.3.3-5.6-1.3-5.6-3.6c0-2 2.3-3.6 5.2-3.6c3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9c2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9c.3 2 2.9 3.3 5.9 2.6c2.9-.7 4.9-2.6 4.6-4.6c-.3-1.9-3-3.2-5.9-2.9M244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2c12.8 2.3 17.3-5.6 17.3-12.1c0-6.2-.3-40.4-.3-61.4c0 0-70 15-84.7-29.8c0 0-11.4-29.1-27.8-36.6c0 0-22.9-15.7 1.6-15.4c0 0 24.9 2 38.6 25.8c21.9 38.6 58.6 27.5 72.9 20.9c2.3-16 8.8-27.1 16-33.7c-55.9-6.2-112.3-14.3-112.3-110.5c0-27.5 7.6-41.3 23.6-58.9c-2.6-6.5-11.1-33.3 2.6-67.9c20.9-6.5 69 27 69 27c20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27c13.7 34.7 5.2 61.4 2.6 67.9c16 17.7 25.8 31.5 25.8 58.9c0 96.5-58.9 104.2-114.8 110.5c9.2 7.9 17 22.9 17 46.4c0 33.7-.3 75.4-.3 83.6c0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252C496 113.3 383.5 8 244.8 8M97.2 352.9c-1.3 1-1 3.3.7 5.2c1.6 1.6 3.9 2.3 5.2 1c1.3-1 1-3.3-.7-5.2c-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9c1.6 1 3.6.7 4.3-.7c.7-1.3-.3-2.9-2.3-3.9c-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2c2.3 2.3 5.2 2.6 6.5 1c1.3-1.3.7-4.3-1.3-6.2c-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2c-1.4-2.3-4-3.3-5.6-2"/></symbol><use href="#ai:fa6-brands:github"></use>  </svg> </a><a rel="me" aria-label="Codeberg" href="https://codeberg.org" target="_blank" class="btn-regular rounded-lg h-10 w-10 active:scale-90"> <svg width="1em" height="1em" class="text-[1.5rem]" data-icon="simple-icons:codeberg">   <symbol id="ai:simple-icons:codeberg" viewBox="0 0 24 24"><path fill="currentColor" d="M11.999.747A11.974 11.974 0 0 0 0 12.75c0 2.254.635 4.465 1.833 6.376L11.837 6.19c.072-.092.251-.092.323 0l4.178 5.402h-2.992l.065.239h3.113l.882 1.138h-3.674l.103.374h3.86l.777 1.003h-4.358l.135.483h4.593l.695.894h-5.038l.165.589h5.326l.609.785h-5.717l.182.65h6.038l.562.727h-6.397l.183.65h6.717A12 12 0 0 0 24 12.75A11.977 11.977 0 0 0 11.999.747m3.654 19.104l.182.65h5.326c.173-.204.353-.433.513-.65zm.385 1.377l.18.65h3.563c.233-.198.485-.428.712-.65zm.383 1.377l.182.648h1.203c.356-.204.685-.412 1.042-.648z"/></symbol><use href="#ai:simple-icons:codeberg"></use>  </svg> </a><a rel="me" aria-label="Discord" href="https://discord.gg/MqW6TcQtVM" target="_blank" class="btn-regular rounded-lg h-10 w-10 active:scale-90"> <svg width="1.25em" height="1em" class="text-[1.5rem]" data-icon="fa6-brands:discord">   <symbol id="ai:fa6-brands:discord" viewBox="0 0 640 512"><path fill="currentColor" d="M524.531 69.836a1.5 1.5 0 0 0-.764-.7A485 485 0 0 0 404.081 32.03a1.82 1.82 0 0 0-1.923.91a338 338 0 0 0-14.9 30.6a447.9 447.9 0 0 0-134.426 0a310 310 0 0 0-15.135-30.6a1.89 1.89 0 0 0-1.924-.91a483.7 483.7 0 0 0-119.688 37.107a1.7 1.7 0 0 0-.788.676C39.068 183.651 18.186 294.69 28.43 404.354a2.02 2.02 0 0 0 .765 1.375a487.7 487.7 0 0 0 146.825 74.189a1.9 1.9 0 0 0 2.063-.676A348 348 0 0 0 208.12 430.4a1.86 1.86 0 0 0-1.019-2.588a321 321 0 0 1-45.868-21.853a1.885 1.885 0 0 1-.185-3.126a251 251 0 0 0 9.109-7.137a1.82 1.82 0 0 1 1.9-.256c96.229 43.917 200.41 43.917 295.5 0a1.81 1.81 0 0 1 1.924.233a235 235 0 0 0 9.132 7.16a1.884 1.884 0 0 1-.162 3.126a301.4 301.4 0 0 1-45.89 21.83a1.875 1.875 0 0 0-1 2.611a391 391 0 0 0 30.014 48.815a1.86 1.86 0 0 0 2.063.7A486 486 0 0 0 610.7 405.729a1.88 1.88 0 0 0 .765-1.352c12.264-126.783-20.532-236.912-86.934-334.541M222.491 337.58c-28.972 0-52.844-26.587-52.844-59.239s23.409-59.241 52.844-59.241c29.665 0 53.306 26.82 52.843 59.239c0 32.654-23.41 59.241-52.843 59.241m195.38 0c-28.971 0-52.843-26.587-52.843-59.239s23.409-59.241 52.843-59.241c29.667 0 53.307 26.82 52.844 59.239c0 32.654-23.177 59.241-52.844 59.241"/></symbol><use href="#ai:fa6-brands:discord"></use>  </svg> </a>  </div>  </div> </div> <widget-layout data-id="tags" data-is-collapsed="true" class="pb-4 card-base onload-animation" style="animation-delay: 250ms; --collapsedHeight: 7.5rem;" data-astro-cid-ucso7hve="true"> <div class="font-bold transition text-lg text-neutral-900 dark:text-neutral-100 relative ml-8 mt-4 mb-2 flex items-center
        before:w-1 before:h-4 before:rounded-md before:bg-[var(--primary)]
        before:absolute before:left-[-16px] before:top-[5.5px]" data-astro-cid-ucso7hve style="--collapsedHeight: 7.5rem;"> 标签  </div> <div id="tags" class="collapse-wrapper px-4 overflow-hidden collapsed" data-astro-cid-ucso7hve style="--collapsedHeight: 7.5rem;">  <div class="flex gap-2 flex-wrap"> <a href="/archive/?tag=Blogging" aria-label="View all posts with the Blogging tag" class="btn-regular h-8 text-sm px-3 rounded-lg">  Blogging </a><a href="/archive/?tag=Bug" aria-label="View all posts with the Bug tag" class="btn-regular h-8 text-sm px-3 rounded-lg">  Bug </a><a href="/archive/?tag=CommonJS" aria-label="View all posts with the CommonJS tag" class="btn-regular h-8 text-sm px-3 rounded-lg">  CommonJS </a><a href="/archive/?tag=Customization" aria-label="View all posts with the Customization tag" class="btn-regular h-8 text-sm px-3 rounded-lg">  Customization </a><a href="/archive/?tag=Demo" aria-label="View all posts with the Demo tag" class="btn-regular h-8 text-sm px-3 rounded-lg">  Demo </a><a href="/archive/?tag=Docker" aria-label="View all posts with the Docker tag" class="btn-regular h-8 text-sm px-3 rounded-lg">  Docker </a><a href="/archive/?tag=Electron" aria-label="View all posts with the Electron tag" class="btn-regular h-8 text-sm px-3 rounded-lg">  Electron </a><a href="/archive/?tag=Encryption" aria-label="View all posts with the Encryption tag" class="btn-regular h-8 text-sm px-3 rounded-lg">  Encryption </a><a href="/archive/?tag=ESM" aria-label="View all posts with the ESM tag" class="btn-regular h-8 text-sm px-3 rounded-lg">  ESM </a><a href="/archive/?tag=Example" aria-label="View all posts with the Example tag" class="btn-regular h-8 text-sm px-3 rounded-lg">  Example </a><a href="/archive/?tag=Lombok" aria-label="View all posts with the Lombok tag" class="btn-regular h-8 text-sm px-3 rounded-lg">  Lombok </a><a href="/archive/?tag=Markdown" aria-label="View all posts with the Markdown tag" class="btn-regular h-8 text-sm px-3 rounded-lg">  Markdown </a><a href="/archive/?tag=Mermaid" aria-label="View all posts with the Mermaid tag" class="btn-regular h-8 text-sm px-3 rounded-lg">  Mermaid </a><a href="/archive/?tag=Mizuki" aria-label="View all posts with the Mizuki tag" class="btn-regular h-8 text-sm px-3 rounded-lg">  Mizuki </a><a href="/archive/?tag=mizuki" aria-label="View all posts with the mizuki tag" class="btn-regular h-8 text-sm px-3 rounded-lg">  mizuki </a><a href="/archive/?tag=SpringBoot" aria-label="View all posts with the SpringBoot tag" class="btn-regular h-8 text-sm px-3 rounded-lg">  SpringBoot </a><a href="/archive/?tag=Test" aria-label="View all posts with the Test tag" class="btn-regular h-8 text-sm px-3 rounded-lg">  Test </a><a href="/archive/?tag=Video" aria-label="View all posts with the Video tag" class="btn-regular h-8 text-sm px-3 rounded-lg">  Video </a><a href="/archive/?tag=vue" aria-label="View all posts with the vue tag" class="btn-regular h-8 text-sm px-3 rounded-lg">  vue </a><a href="/archive/?tag=Vue" aria-label="View all posts with the Vue tag" class="btn-regular h-8 text-sm px-3 rounded-lg">  Vue </a><a href="/archive/?tag=%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0" aria-label="View all posts with the 学习笔记 tag" class="btn-regular h-8 text-sm px-3 rounded-lg">  学习笔记 </a> </div>  </div> <div class="expand-btn px-4 -mb-2" data-astro-cid-ucso7hve style="--collapsedHeight: 7.5rem;"> <button class="btn-plain rounded-lg w-full h-9" data-astro-cid-ucso7hve style="--collapsedHeight: 7.5rem;"> <div class="text-[var(--primary)] flex items-center justify-center gap-2 -translate-x-2" data-astro-cid-ucso7hve style="--collapsedHeight: 7.5rem;"> <svg width="1em" height="1em" class="text-[1.75rem]" data-astro-cid-ucso7hve="true" data-icon="material-symbols:more-horiz">   <symbol id="ai:material-symbols:more-horiz" viewBox="0 0 24 24"><path fill="currentColor" d="M6 14q-.825 0-1.412-.587T4 12t.588-1.412T6 10t1.413.588T8 12t-.587 1.413T6 14m6 0q-.825 0-1.412-.587T10 12t.588-1.412T12 10t1.413.588T14 12t-.587 1.413T12 14m6 0q-.825 0-1.412-.587T16 12t.588-1.412T18 10t1.413.588T20 12t-.587 1.413T18 14"/></symbol><use href="#ai:material-symbols:more-horiz"></use>  </svg> 更多 </div> </button> </div> </widget-layout>  <script type="module">class d extends HTMLElement{constructor(){if(super(),this.dataset.isCollapsed!=="true")return;const e=this.dataset.id,t=this.querySelector(".expand-btn"),s=this.querySelector(`#${e}`);t.addEventListener("click",()=>{s.classList.remove("collapsed"),t.classList.add("hidden")})}}customElements.get("widget-layout")||customElements.define("widget-layout",d);</script> </div> <!-- 粘性组件区域 --> <div id="sidebar-sticky" class="transition-all duration-700 flex flex-col w-full gap-4 top-4 sticky top-4" data-astro-cid-gfmxq3pg> <widget-layout data-id="categories" data-is-collapsed="true" class="pb-4 card-base onload-animation" style="animation-delay: 150ms; --collapsedHeight: 7.5rem;" data-astro-cid-ucso7hve="true"> <div class="font-bold transition text-lg text-neutral-900 dark:text-neutral-100 relative ml-8 mt-4 mb-2 flex items-center
        before:w-1 before:h-4 before:rounded-md before:bg-[var(--primary)]
        before:absolute before:left-[-16px] before:top-[5.5px]" data-astro-cid-ucso7hve style="--collapsedHeight: 7.5rem;"> 分类  </div> <div id="categories" class="collapse-wrapper px-4 overflow-hidden collapsed" data-astro-cid-ucso7hve style="--collapsedHeight: 7.5rem;"> <a href="/archive/?category=Examples" aria-label="View all posts in the Examples category"> <button class="
            w-full
            h-10
            rounded-lg
            bg-none
            hover:bg-[var(--btn-plain-bg-hover)]
            active:bg-[var(--btn-plain-bg-active)]
            transition-all
            pl-2
            hover:pl-3
            
            text-neutral-700
            hover:text-[var(--primary)]
            dark:text-neutral-300
            dark:hover:text-[var(--primary)]
        "> <div class="flex items-center justify-between relative mr-2"> <div class="overflow-hidden text-left whitespace-nowrap overflow-ellipsis  "> Examples </div> <div class="transition px-2 h-7 ml-4 min-w-[2rem] rounded-lg text-sm font-bold
                    text-[var(--btn-content)] dark:text-[var(--deep-text)]
                    bg-[oklch(0.95_0.025_var(--hue))] dark:bg-[var(--primary)]
                    flex items-center justify-center"> 4 </div> </div> </button> </a><a href="/archive/?category=Guides" aria-label="View all posts in the Guides category"> <button class="
            w-full
            h-10
            rounded-lg
            bg-none
            hover:bg-[var(--btn-plain-bg-hover)]
            active:bg-[var(--btn-plain-bg-active)]
            transition-all
            pl-2
            hover:pl-3
            
            text-neutral-700
            hover:text-[var(--primary)]
            dark:text-neutral-300
            dark:hover:text-[var(--primary)]
        "> <div class="flex items-center justify-between relative mr-2"> <div class="overflow-hidden text-left whitespace-nowrap overflow-ellipsis  "> Guides </div> <div class="transition px-2 h-7 ml-4 min-w-[2rem] rounded-lg text-sm font-bold
                    text-[var(--btn-content)] dark:text-[var(--deep-text)]
                    bg-[oklch(0.95_0.025_var(--hue))] dark:bg-[var(--primary)]
                    flex items-center justify-center"> 1 </div> </div> </button> </a><a href="/archive/?category=Technology" aria-label="View all posts in the Technology category"> <button class="
            w-full
            h-10
            rounded-lg
            bg-none
            hover:bg-[var(--btn-plain-bg-hover)]
            active:bg-[var(--btn-plain-bg-active)]
            transition-all
            pl-2
            hover:pl-3
            
            text-neutral-700
            hover:text-[var(--primary)]
            dark:text-neutral-300
            dark:hover:text-[var(--primary)]
        "> <div class="flex items-center justify-between relative mr-2"> <div class="overflow-hidden text-left whitespace-nowrap overflow-ellipsis  "> Technology </div> <div class="transition px-2 h-7 ml-4 min-w-[2rem] rounded-lg text-sm font-bold
                    text-[var(--btn-content)] dark:text-[var(--deep-text)]
                    bg-[oklch(0.95_0.025_var(--hue))] dark:bg-[var(--primary)]
                    flex items-center justify-center"> 1 </div> </div> </button> </a><a href="/archive/?category=Vue" aria-label="View all posts in the Vue category"> <button class="
            w-full
            h-10
            rounded-lg
            bg-none
            hover:bg-[var(--btn-plain-bg-hover)]
            active:bg-[var(--btn-plain-bg-active)]
            transition-all
            pl-2
            hover:pl-3
            
            text-neutral-700
            hover:text-[var(--primary)]
            dark:text-neutral-300
            dark:hover:text-[var(--primary)]
        "> <div class="flex items-center justify-between relative mr-2"> <div class="overflow-hidden text-left whitespace-nowrap overflow-ellipsis  "> Vue </div> <div class="transition px-2 h-7 ml-4 min-w-[2rem] rounded-lg text-sm font-bold
                    text-[var(--btn-content)] dark:text-[var(--deep-text)]
                    bg-[oklch(0.95_0.025_var(--hue))] dark:bg-[var(--primary)]
                    flex items-center justify-center"> 3 </div> </div> </button> </a><a href="/archive/?category=%E6%8A%80%E6%9C%AF%E8%B8%A9%E5%9D%91" aria-label="View all posts in the 技术踩坑 category"> <button class="
            w-full
            h-10
            rounded-lg
            bg-none
            hover:bg-[var(--btn-plain-bg-hover)]
            active:bg-[var(--btn-plain-bg-active)]
            transition-all
            pl-2
            hover:pl-3
            
            text-neutral-700
            hover:text-[var(--primary)]
            dark:text-neutral-300
            dark:hover:text-[var(--primary)]
        "> <div class="flex items-center justify-between relative mr-2"> <div class="overflow-hidden text-left whitespace-nowrap overflow-ellipsis  "> 技术踩坑 </div> <div class="transition px-2 h-7 ml-4 min-w-[2rem] rounded-lg text-sm font-bold
                    text-[var(--btn-content)] dark:text-[var(--deep-text)]
                    bg-[oklch(0.95_0.025_var(--hue))] dark:bg-[var(--primary)]
                    flex items-center justify-center"> 2 </div> </div> </button> </a><a href="/archive/?uncategorized=true" aria-label="View all posts in the 未分类 category"> <button class="
            w-full
            h-10
            rounded-lg
            bg-none
            hover:bg-[var(--btn-plain-bg-hover)]
            active:bg-[var(--btn-plain-bg-active)]
            transition-all
            pl-2
            hover:pl-3
            
            text-neutral-700
            hover:text-[var(--primary)]
            dark:text-neutral-300
            dark:hover:text-[var(--primary)]
        "> <div class="flex items-center justify-between relative mr-2"> <div class="overflow-hidden text-left whitespace-nowrap overflow-ellipsis  "> 未分类 </div> <div class="transition px-2 h-7 ml-4 min-w-[2rem] rounded-lg text-sm font-bold
                    text-[var(--btn-content)] dark:text-[var(--deep-text)]
                    bg-[oklch(0.95_0.025_var(--hue))] dark:bg-[var(--primary)]
                    flex items-center justify-center"> 4 </div> </div> </button> </a> </div> <div class="expand-btn px-4 -mb-2" data-astro-cid-ucso7hve style="--collapsedHeight: 7.5rem;"> <button class="btn-plain rounded-lg w-full h-9" data-astro-cid-ucso7hve style="--collapsedHeight: 7.5rem;"> <div class="text-[var(--primary)] flex items-center justify-center gap-2 -translate-x-2" data-astro-cid-ucso7hve style="--collapsedHeight: 7.5rem;"> <svg width="1em" height="1em" viewBox="0 0 24 24" class="text-[1.75rem]" data-astro-cid-ucso7hve="true" data-icon="material-symbols:more-horiz">   <use href="#ai:material-symbols:more-horiz"></use>  </svg> 更多 </div> </button> </div> </widget-layout>   </div> </div> <!-- 响应式样式和JavaScript -->  <script>
	import { widgetManager } from "../../utils/widget-manager";
	
	// 响应式布局管理
	class SidebarManager {
		constructor() {
			this.init();
		}
		
		init() {
			this.updateResponsiveDisplay();
			window.addEventListener('resize', () => this.updateResponsiveDisplay());
			
			// 监听SWUP内容替换事件
			if (typeof window !== 'undefined' && window.swup) {
				window.swup.hooks.on('content:replace', () => {
					// 延迟执行以确保DOM已更新
					setTimeout(() => {
						this.updateResponsiveDisplay();
					}, 100);
				});
			}
		}
		
		updateResponsiveDisplay() {
			const breakpoints = widgetManager.getBreakpoints();
			const width = window.innerWidth;
			
			let deviceType: 'mobile' | 'tablet' | 'desktop';
			if (width < breakpoints.mobile) {
				deviceType = 'mobile';
			} else if (width < breakpoints.tablet) {
				deviceType = 'tablet';
			} else {
				deviceType = 'desktop';
			}
			
			const shouldShow = widgetManager.shouldShowSidebar(deviceType);
			const sidebar = document.getElementById('sidebar');
			
			if (sidebar) {
				sidebar.style.setProperty(
					`--sidebar-${deviceType}-display`, 
					shouldShow ? 'block' : 'none'
				);
			}
		}
	}
	
	// 初始化侧边栏管理器
	new SidebarManager();
</script>  <div class="right-sidebar-container mb-4 col-span-1 onload-animation block row-start-3 row-end-4 lg:block lg:row-start-1 lg:row-end-2 lg:max-w-[17.5rem] lg:col-start-3 lg:col-end-4 " data-astro-cid-haiuh7kc><div id="right-sidebar" class="w-full" data-astro-cid-dnkjr6w2> <!-- 顶部固定组件区域 --> <div class="flex flex-col w-full gap-4 mb-4" data-astro-cid-dnkjr6w2> <widget-layout data-id="site-stats" data-is-collapsed="undefined" class="pb-4 card-base onload-animation hidden lg:block" style="animation-delay: 200ms; " data-astro-cid-ucso7hve="true"> <div class="font-bold transition text-lg text-neutral-900 dark:text-neutral-100 relative ml-8 mt-4 mb-2 flex items-center
        before:w-1 before:h-4 before:rounded-md before:bg-[var(--primary)]
        before:absolute before:left-[-16px] before:top-[5.5px]" data-astro-cid-ucso7hve style=""> 站点统计  </div> <div id="site-stats" class="collapse-wrapper px-4 overflow-hidden" data-astro-cid-ucso7hve style="">  <div class="flex flex-col gap-2"> <div class="flex items-center justify-between px-3 py-1.5"> <div class="flex items-center gap-2.5"> <div class="text-[var(--primary)] text-xl"> <svg width="1em" height="1em" data-icon="material-symbols:article-outline">   <symbol id="ai:material-symbols:article-outline" viewBox="0 0 24 24"><path fill="currentColor" d="M7 17h7v-2H7zm0-4h10v-2H7zm0-4h10V7H7zM5 21q-.825 0-1.412-.587T3 19V5q0-.825.588-1.412T5 3h14q.825 0 1.413.588T21 5v14q0 .825-.587 1.413T19 21zm0-2h14V5H5zM5 5v14z"/></symbol><use href="#ai:material-symbols:article-outline"></use>  </svg> </div> <span class="text-neutral-700 dark:text-neutral-300 font-medium text-sm"> 文章 </span> </div> <div class="flex items-center"> <span class="text-base font-bold text-neutral-900 dark:text-neutral-100"> 15 </span>  </div> </div><div class="flex items-center justify-between px-3 py-1.5"> <div class="flex items-center gap-2.5"> <div class="text-[var(--primary)] text-xl"> <svg width="1em" height="1em" data-icon="material-symbols:folder-outline">   <symbol id="ai:material-symbols:folder-outline" viewBox="0 0 24 24"><path fill="currentColor" d="M4 20q-.825 0-1.412-.587T2 18V6q0-.825.588-1.412T4 4h6l2 2h8q.825 0 1.413.588T22 8v10q0 .825-.587 1.413T20 20zm0-2h16V8h-8.825l-2-2H4zm0 0V6z"/></symbol><use href="#ai:material-symbols:folder-outline"></use>  </svg> </div> <span class="text-neutral-700 dark:text-neutral-300 font-medium text-sm"> 分类 </span> </div> <div class="flex items-center"> <span class="text-base font-bold text-neutral-900 dark:text-neutral-100"> 6 </span>  </div> </div><div class="flex items-center justify-between px-3 py-1.5"> <div class="flex items-center gap-2.5"> <div class="text-[var(--primary)] text-xl"> <svg width="1em" height="1em" data-icon="material-symbols:label-outline">   <symbol id="ai:material-symbols:label-outline" viewBox="0 0 24 24"><path fill="currentColor" d="M4 20q-.825 0-1.412-.587T2 18V6q0-.825.588-1.412T4 4h11q.475 0 .9.213t.7.587L22 12l-5.4 7.2q-.275.375-.7.588T15 20zm0-2h11l4.5-6L15 6H4zm5.5-6"/></symbol><use href="#ai:material-symbols:label-outline"></use>  </svg> </div> <span class="text-neutral-700 dark:text-neutral-300 font-medium text-sm"> 标签 </span> </div> <div class="flex items-center"> <span class="text-base font-bold text-neutral-900 dark:text-neutral-100"> 21 </span>  </div> </div><div class="flex items-center justify-between px-3 py-1.5"> <div class="flex items-center gap-2.5"> <div class="text-[var(--primary)] text-xl"> <svg width="1em" height="1em" data-icon="material-symbols:text-ad-outline-rounded">   <symbol id="ai:material-symbols:text-ad-outline-rounded" viewBox="0 0 24 24"><path fill="currentColor" d="M4 20q-.825 0-1.412-.587T2 18V6q0-.825.588-1.412T4 4h16q.825 0 1.413.588T22 6v12q0 .825-.587 1.413T20 20zm0-2h16V6H4zm0 0V6zm2-1h12q.425 0 .713-.288T19 16t-.288-.712T18 15H6q-.425 0-.712.288T5 16t.288.713T6 17m0-4h12q.425 0 .713-.288T19 12t-.288-.712T18 11H6q-.425 0-.712.288T5 12t.288.713T6 13m0-4h8q.425 0 .713-.288T15 8t-.288-.712T14 7H6q-.425 0-.712.288T5 8t.288.713T6 9"/></symbol><use href="#ai:material-symbols:text-ad-outline-rounded"></use>  </svg> </div> <span class="text-neutral-700 dark:text-neutral-300 font-medium text-sm"> 总字数 </span> </div> <div class="flex items-center"> <span class="text-base font-bold text-neutral-900 dark:text-neutral-100"> 17,020 </span>  </div> </div><div class="flex items-center justify-between px-3 py-1.5"> <div class="flex items-center gap-2.5"> <div class="text-[var(--primary)] text-xl"> <svg width="1em" height="1em" data-icon="material-symbols:calendar-clock-outline">   <symbol id="ai:material-symbols:calendar-clock-outline" viewBox="0 0 24 24"><path fill="currentColor" d="M5 8h14V6H5zm0 0V6zm0 14q-.825 0-1.412-.587T3 20V6q0-.825.588-1.412T5 4h1V2h2v2h8V2h2v2h1q.825 0 1.413.588T21 6v5.675q-.475-.225-.975-.375T19 11.075V10H5v10h6.3q.175.55.413 1.05t.562.95zm13 1q-2.075 0-3.537-1.463T13 18t1.463-3.537T18 13t3.538 1.463T23 18t-1.463 3.538T18 23m1.675-2.625l.7-.7L18.5 17.8V15h-1v3.2z"/></symbol><use href="#ai:material-symbols:calendar-clock-outline"></use>  </svg> </div> <span class="text-neutral-700 dark:text-neutral-300 font-medium text-sm"> 运行时长 </span> </div> <div class="flex items-center"> <span class="text-base font-bold text-neutral-900 dark:text-neutral-100" data-stat-id="running-days"> 0 </span> <span class="text-sm text-neutral-500 dark:text-neutral-400 ml-1">  天 </span> </div> </div><div class="flex items-center justify-between px-3 py-1.5"> <div class="flex items-center gap-2.5"> <div class="text-[var(--primary)] text-xl"> <svg width="1em" height="1em" data-icon="material-symbols:ecg-heart-outline">   <symbol id="ai:material-symbols:ecg-heart-outline" viewBox="0 0 24 24"><path fill="currentColor" d="M12 21q-.45 0-.862-.162t-.738-.488l-6.7-6.725q-.875-.875-1.287-2T2 9.275Q2 6.7 3.675 4.85T7.85 3q1.2 0 2.263.475T12 4.8q.8-.85 1.863-1.325T16.125 3q2.5 0 4.188 1.85T22 9.25q0 1.225-.425 2.35t-1.275 2l-6.725 6.75q-.325.325-.725.488T12 21m1-13q.25 0 .475.125t.35.325l1.7 2.55h4.15q.175-.425.263-.862t.087-.888q-.05-1.725-1.15-2.963t-2.75-1.237q-.775 0-1.487.3t-1.238.875l-.675.725q-.125.15-.325.238t-.4.087t-.4-.087t-.35-.238l-.675-.725q-.525-.575-1.225-.9T7.85 5Q6.2 5 5.1 6.263T4 9.25q0 .45.075.888t.25.862H9q.25 0 .475.125t.35.325l.875 1.3l1.35-4.05q.1-.3.362-.5T13 8m.3 3.25l-1.35 4.05q-.1.3-.375.5t-.6.2q-.25 0-.475-.125t-.35-.325L8.45 13H5.9l5.925 5.925q.05.05.088.063T12 19t.088-.012t.087-.063l5.9-5.925H15q-.25 0-.475-.125t-.375-.325z"/></symbol><use href="#ai:material-symbols:ecg-heart-outline"></use>  </svg> </div> <span class="text-neutral-700 dark:text-neutral-300 font-medium text-sm"> 最后活动 </span> </div> <div class="flex items-center"> <span class="text-base font-bold text-neutral-900 dark:text-neutral-100" data-stat-id="last-update"> 0 </span> <span class="text-sm text-neutral-500 dark:text-neutral-400 ml-1">  天前 </span> </div> </div> </div>  </div>  </widget-layout>   <script>(function(){const siteStartDate = "2025-08-13";
const lastPostDate = "2025-11-07T00:00:00.000Z";

  function updateDynamicStats() {
    const today = new Date();
    
    // 更新运行天数
    const startDate = new Date(siteStartDate);
    const diffTime = Math.abs(today.getTime() - startDate.getTime());
    const diffDays = Math.ceil(diffTime / (1000 * 60 * 60 * 24));
    
    const runningDaysElement = document.querySelector('[data-stat-id="running-days"]');
    if (runningDaysElement) {
      runningDaysElement.textContent = diffDays.toString();
    }
    
    // 更新最后活动时间
    if (lastPostDate) {
      const lastPost = new Date(lastPostDate);
      const timeSinceLastPost = Math.abs(today.getTime() - lastPost.getTime());
      const daysSinceLastUpdate = Math.floor(timeSinceLastPost / (1000 * 60 * 60 * 24));
      
      const lastUpdateElement = document.querySelector('[data-stat-id="last-update"]');
      if (lastUpdateElement) {
        lastUpdateElement.textContent = daysSinceLastUpdate.toString();
      }
    }
  }
  
  // 页面加载时更新
  updateDynamicStats();
  
  // 每小时更新一次（可选，因为天数变化较慢）
  setInterval(updateDynamicStats, 60 * 60 * 1000);
})();</script><widget-layout data-id="calendar-widget" data-is-collapsed="undefined" class="pb-4 card-base hidden md:block onload-animation hidden lg:block" style="animation-delay: 250ms; " data-astro-cid-ucso7hve="true"> <div class="font-bold transition text-lg text-neutral-900 dark:text-neutral-100 relative ml-8 mt-4 mb-2 flex items-center
        before:w-1 before:h-4 before:rounded-md before:bg-[var(--primary)]
        before:absolute before:left-[-16px] before:top-[5.5px]" data-astro-cid-ucso7hve style="">  <span id="calendar-widget-title" class="flex-1 text-left" data-astro-cid-o3b4delr></span> </div> <div id="calendar-widget" class="collapse-wrapper px-4 overflow-hidden" data-astro-cid-ucso7hve style="">   <div class="calendar-container" data-astro-cid-o3b4delr> <!-- 星期标题 --> <div class="weekdays grid grid-cols-7 gap-1 mb-2" data-astro-cid-o3b4delr> <div class="text-center text-xs text-neutral-500 dark:text-neutral-400 font-medium" data-astro-cid-o3b4delr> 日 </div><div class="text-center text-xs text-neutral-500 dark:text-neutral-400 font-medium" data-astro-cid-o3b4delr> 一 </div><div class="text-center text-xs text-neutral-500 dark:text-neutral-400 font-medium" data-astro-cid-o3b4delr> 二 </div><div class="text-center text-xs text-neutral-500 dark:text-neutral-400 font-medium" data-astro-cid-o3b4delr> 三 </div><div class="text-center text-xs text-neutral-500 dark:text-neutral-400 font-medium" data-astro-cid-o3b4delr> 四 </div><div class="text-center text-xs text-neutral-500 dark:text-neutral-400 font-medium" data-astro-cid-o3b4delr> 五 </div><div class="text-center text-xs text-neutral-500 dark:text-neutral-400 font-medium" data-astro-cid-o3b4delr> 六 </div> </div> <!-- 日历格子（由客户端动态生成） --> <div class="calendar-grid grid grid-cols-7 gap-1" id="calendar-grid" data-astro-cid-o3b4delr> <!-- 将由 JavaScript 填充 --> </div> <!-- 文章列表 --> <div id="calendar-posts" class="mt-3" data-astro-cid-o3b4delr> <div class="border-t border-neutral-200 dark:border-neutral-700 mb-2" id="calendar-posts-divider" style="display: none;" data-astro-cid-o3b4delr></div> <div class="flex flex-col gap-1" id="calendar-posts-list" data-astro-cid-o3b4delr> <!-- 将由 JavaScript 填充 --> </div> </div> </div>  </div>  </widget-layout>   <script>(function(){const postDateMap = {"2025-11-07":[{"id":"eideticlip/eideticlip","data":{"title":"一个剪贴板管理工具","published":"2025-11-07T00:00:00.000Z","draft":false,"description":"","image":"","tags":["Electron","vue"],"category":"","lang":"","pinned":false,"author":"","sourceLink":"","licenseName":"","licenseUrl":"","encrypted":false,"password":"","prevTitle":"Electron中导入better-sqlite3：为什么import不行，require却可以？","prevSlug":"bug/electron中导入better-sqlite3","nextTitle":"","nextSlug":""},"body":"> **eidetic** /aɪˈdetɪk/ ：形容词，意为\"异常清晰的，过目不忘的\"\n>\n> 正如其名，希望这个工具能帮你记住每一个复制的瞬间。\n\nEideticlip 是一款基于 Electron 和 Vue 3 开发的智能剪贴板管理工具。它能够自动记录您复制的所有文本内容，构建完整的剪贴板历史，让您随时回溯、查找并重用之前的复制记录。\n\n作为学习 Electron 开发的一个小项目，它在功能上可能不如 Windows 系统自带的剪贴板历史完善，但提供了更加个性化和可控的管理体验。\n\n## 核心功能亮点\n\n### 📋 智能历史记录\n\n- **自动保存**：后台静默记录所有复制的文本内容\n- **快速检索**：轻松查找之前的复制记录，支持关键词搜索\n- **一键重用**：点击即可重新使用历史剪贴板内容\n\n### ⌨️ 高效操作体验\n\n- **全局快捷键**：自定义唤醒快捷键，随时调出剪贴板历史\n- **系统托盘集成**：最小化至系统托盘，不干扰正常工作流程\n- **即时呼出**：通过快捷键快速唤出界面，提升工作效率\n\n### 🎨 个性化定制\n\n- **主题切换**：支持亮色与暗色主题，适应不同使用环境\n- **数据保存周期**：可自定义历史记录的保存时长\n- **快捷键自定义**：根据使用习惯设置专属快捷键\n\n## 界面展示\n\n### 主界面\n\n清晰展示剪贴板历史记录，支持快速查看和重复使用\n![image-20251107213300571](./image-20251107213300571.png)\n\n### 设置界面\n\n![image-20251107211934334](./image-20251107211934334.png)\n\n集成化设置面板，一站式管理所有个性化选项：\n\n- 主题切换（亮色/暗色）\n- 数据保存时间配置\n- 全局快捷键设置\n- 版本信息与更新检查\n\n## 更新机制\n\nEideticlip 提供了便捷的更新体验：\n\n- **自动更新检查**：应用启动时自动检测新版本\n- **手动更新触发**：在设置界面随时点击“检查更新”\n- **下载安装一体化**：检测到新版本后，自动下载并提示安装\n\n> **注意**：自动更新功能需要能够访问 GitHub 网站。如遇网络限制，您也可以前往项目发布页面手动下载最新版本。\n\nGithub仓库链接：[https://github.com/hnugreycrow/Eideticlip](https://github.com/hnugreycrow/Eideticlip)","filePath":"src/content/posts/Eideticlip/Eideticlip.md","assetImports":["./image-20251107213300571.png","./image-20251107211934334.png"],"digest":"f319e5cea4ff4f48","rendered":{"html":"<blockquote>\n<p><strong>eidetic</strong> /aɪˈdetɪk/ ：形容词，意为”异常清晰的，过目不忘的”</p>\n<p>正如其名，希望这个工具能帮你记住每一个复制的瞬间。</p>\n</blockquote>\n<p>Eideticlip 是一款基于 Electron 和 Vue 3 开发的智能剪贴板管理工具。它能够自动记录您复制的所有文本内容，构建完整的剪贴板历史，让您随时回溯、查找并重用之前的复制记录。</p>\n<p>作为学习 Electron 开发的一个小项目，它在功能上可能不如 Windows 系统自带的剪贴板历史完善，但提供了更加个性化和可控的管理体验。</p>\n<section><h2 id=\"核心功能亮点\">核心功能亮点<a class=\"anchor\" href=\"#核心功能亮点\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h2><section><h3 id=\"-智能历史记录\">📋 智能历史记录<a class=\"anchor\" href=\"#-智能历史记录\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h3><ul>\n<li><strong>自动保存</strong>：后台静默记录所有复制的文本内容</li>\n<li><strong>快速检索</strong>：轻松查找之前的复制记录，支持关键词搜索</li>\n<li><strong>一键重用</strong>：点击即可重新使用历史剪贴板内容</li>\n</ul></section><section><h3 id=\"️-高效操作体验\">⌨️ 高效操作体验<a class=\"anchor\" href=\"#️-高效操作体验\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h3><ul>\n<li><strong>全局快捷键</strong>：自定义唤醒快捷键，随时调出剪贴板历史</li>\n<li><strong>系统托盘集成</strong>：最小化至系统托盘，不干扰正常工作流程</li>\n<li><strong>即时呼出</strong>：通过快捷键快速唤出界面，提升工作效率</li>\n</ul></section><section><h3 id=\"-个性化定制\">🎨 个性化定制<a class=\"anchor\" href=\"#-个性化定制\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h3><ul>\n<li><strong>主题切换</strong>：支持亮色与暗色主题，适应不同使用环境</li>\n<li><strong>数据保存周期</strong>：可自定义历史记录的保存时长</li>\n<li><strong>快捷键自定义</strong>：根据使用习惯设置专属快捷键</li>\n</ul></section></section>\n<section><h2 id=\"界面展示\">界面展示<a class=\"anchor\" href=\"#界面展示\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h2><section><h3 id=\"主界面\">主界面<a class=\"anchor\" href=\"#主界面\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h3><p>清晰展示剪贴板历史记录，支持快速查看和重复使用\n<img __ASTRO_IMAGE_=\"{&#x22;src&#x22;:&#x22;./image-20251107213300571.png&#x22;,&#x22;alt&#x22;:&#x22;image-20251107213300571&#x22;,&#x22;index&#x22;:0}\"></p></section><section><h3 id=\"设置界面\">设置界面<a class=\"anchor\" href=\"#设置界面\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h3><p><img __ASTRO_IMAGE_=\"{&#x22;src&#x22;:&#x22;./image-20251107211934334.png&#x22;,&#x22;alt&#x22;:&#x22;image-20251107211934334&#x22;,&#x22;index&#x22;:0}\"></p><p>集成化设置面板，一站式管理所有个性化选项：</p><ul>\n<li>主题切换（亮色/暗色）</li>\n<li>数据保存时间配置</li>\n<li>全局快捷键设置</li>\n<li>版本信息与更新检查</li>\n</ul></section></section>\n<section><h2 id=\"更新机制\">更新机制<a class=\"anchor\" href=\"#更新机制\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h2><p>Eideticlip 提供了便捷的更新体验：</p><ul>\n<li><strong>自动更新检查</strong>：应用启动时自动检测新版本</li>\n<li><strong>手动更新触发</strong>：在设置界面随时点击“检查更新”</li>\n<li><strong>下载安装一体化</strong>：检测到新版本后，自动下载并提示安装</li>\n</ul><blockquote>\n<p><strong>注意</strong>：自动更新功能需要能够访问 GitHub 网站。如遇网络限制，您也可以前往项目发布页面手动下载最新版本。</p>\n</blockquote><p>Github仓库链接：<a href=\"https://github.com/hnugreycrow/Eideticlip\">https://github.com/hnugreycrow/Eideticlip</a></p></section>","metadata":{"headings":[{"depth":2,"slug":"核心功能亮点","text":"核心功能亮点#"},{"depth":3,"slug":"-智能历史记录","text":"📋 智能历史记录#"},{"depth":3,"slug":"️-高效操作体验","text":"⌨️ 高效操作体验#"},{"depth":3,"slug":"-个性化定制","text":"🎨 个性化定制#"},{"depth":2,"slug":"界面展示","text":"界面展示#"},{"depth":3,"slug":"主界面","text":"主界面#"},{"depth":3,"slug":"设置界面","text":"设置界面#"},{"depth":2,"slug":"更新机制","text":"更新机制#"}],"localImagePaths":["./image-20251107213300571.png","./image-20251107211934334.png"],"remoteImagePaths":[],"frontmatter":{"title":"一个剪贴板管理工具","published":"2025-11-07T00:00:00.000Z","tags":["Electron","vue"],"minutes":3,"words":585,"excerpt":"Eideticlip 是一款基于 Electron 和 Vue 3 开发的智能剪贴板管理工具。它能够自动记录您复制的所有文本内容，构建完整的剪贴板历史，让您随时回溯、查找并重用之前的复制记录。"},"imagePaths":["./image-20251107213300571.png","./image-20251107211934334.png"]}},"collection":"posts"}],"2025-09-01":[{"id":"bug/electron中导入better-sqlite3","data":{"title":"Electron中导入better-sqlite3：为什么import不行，require却可以？","published":"2025-09-01T00:00:00.000Z","draft":false,"description":"","image":"","tags":["Electron","ESM","CommonJS"],"category":"技术踩坑","lang":"","pinned":false,"author":"","sourceLink":"","licenseName":"","licenseUrl":"","encrypted":false,"password":"","prevTitle":"Vue3 笔记：透传 Attributes","prevSlug":"vue/vue3-透传attributes","nextTitle":"一个剪贴板管理工具","nextSlug":"eideticlip/eideticlip"},"body":"在Electron开发过程中，我遇到一个有趣的问题：使用`import Database from \"better-sqlite3\"`导入模块时，不仅出现类型声明文件缺失的警告，还会报`__filename is not defined`的运行时错误。而换成`const Database = require(\"better-sqlite3\")`后，一切正常。这个现象背后，其实是JavaScript两种主流模块系统——ESM与CommonJS的差异在作祟。\n\n## 问题现象与直接原因\n\n当使用ES模块语法导入better-sqlite3时，会遇到两个问题：\n\n1. 类型检查错误：`无法找到模块“better-sqlite3”的声明文件`\n2. 运行时错误：`ReferenceError: __filename is not defined`\n\n而切换到CommonJS的require语法后，这两个问题都消失了。要理解其中的原因，我们需要先深入了解ESM与CommonJS这两种模块系统的核心差异。\n\n## 模块化的两种 \"流派\"：ESM 和 CommonJS\n\nJavaScript 一开始是没有 \"模块\" 概念的，后来为了让代码更好管理，才出现了两种主流的模块系统：\n\n### 1. CommonJS：Node.js 的 \"老规矩\"\n\n**诞生背景**：2009 年前后，Node.js 刚出来，需要一套规则管理服务器端的代码（比如读取文件、操作数据库），于是 CommonJS 就成了 Node.js 的 \"默认规范\"。\n\n**核心特点**：\n\n- 用`require`导入模块，用`module.exports`导出模块\n\n- 比如：\n\n  ```javascript\n  // 导出（math.js）\n  function add(a, b) { return a + b; }\n  module.exports = { add };\n  \n  // 导入（app.js）\n  const math = require('./math'); // 可以省略.js后缀\n  math.add(1, 2); // 结果是3\n  ```\n\n- 运行时才加载模块，支持 \"动态导入\"（比如在`if`条件里加载不同模块）\n\n- 每个模块里自带几个 \"全局变量\"：`__filename`（当前文件路径）、`__dirname`（当前文件夹路径），方便处理文件路径\n\n### 2. ESM：浏览器和 Node.js 通用的 \"新规范\"\n\n**诞生背景**：后来前端项目越来越大，也需要模块化。2015 年 ES6 推出了 ESM（ES Modules），想统一浏览器和服务器的模块化标准。\n\n**核心特点**：\n\n- 用`import`导入模块，用`export`导出模块\n\n- 比如：\n\n  ```javascript\n  // 导出（math.js）\n  export function add(a, b) { return a + b; }\n  \n  // 导入（app.js）\n  import { add } from './math.js'; // 必须写全.js后缀\n  add(1, 2); // 结果是3\n  ```\n\n- 加载前先分析依赖（编译时静态分析），不支持在`if`里动态导入\n\n- 没有`__filename`、`__dirname`这些变量（设计上更 \"纯粹\"，不绑定 Node.js 的文件系统）\n\n## 关键差异：为什么这些区别会导致报错？\n\n回到开头的问题：`better-sqlite3`为啥认`require`不认`import`？\n\n关键就在 **CommonJS 的 \"全局变量\"** 上。\n\n`better-sqlite3`是一个 \"Node.js 原生扩展\"（底层用 C++ 写的，需要操作本地文件），它的代码里可能直接用了`__filename`来处理路径（比如找数据库文件的位置）。\n\n当你用`import`时：\n\n- 代码会按 ESM 规范运行，环境里没有`__filename`这个变量\n- `better-sqlite3`找不到这个变量，就会报`ReferenceError`\n\n当你用`require`时：\n\n- 代码会按 CommonJS 规范运行，`__filename`这些变量自动存在\n- `better-sqlite3`能正常找到需要的变量，自然就不报错了\n\n在我的 Electron + Vue + Vite 项目中，整个项目采用 ES 模块（ESM）规范开发，并通过`package.json`中配置`\"type\": \"module\"`实现了统一的模块化管理。\n\n针对`better-sqlite3`这类依赖 CommonJS 环境的模块，我们通过以下方式解决了 ESM 下的导入兼容问题：\n\n```typescript\n// 在ES模块中模拟CommonJS的require功能（因为Electron有时需要使用CommonJS模块）\nconst require = createRequire(import.meta.url);\nconst Database = require(\"better-sqlite3\");\n```\n\n通过`createRequire`从当前模块的`import.meta.url`创建一个兼容 CommonJS 的`require`函数，既保留了项目整体的 ESM 规范，又能顺利导入`better-sqlite3`这类依赖传统 CommonJS 特性的模块，确保了项目的正常运行。\n\n## 类型声明问题：另一个小插曲\n\n开头还提到 \"找不到声明文件\" 的警告，这是 TypeScript 的 \"小脾气\"：\n\n- `better-sqlite3`本身是用 JavaScript/C++ 写的，没有自带 TypeScript 的类型说明\n\n- 解决办法很简单：安装社区提供的类型声明文件\n\n  ```bash\n  npm install @types/better-sqlite3 --save-dev\n  ```\n\n  （但这只能解决类型提示问题，解决不了`__filename`的报错，因为那是运行时问题）\n\n## 总结：该用 import 还是 require？\n\n简单说，看模块 \"脾气\"：\n\n1. 像`better-sqlite3`这种依赖 Node.js 原生特性（比如`__filename`）的模块，优先用`require`\n2. 纯 JavaScript 写的现代模块（尤其是前端库），可以用`import`\n3. 如果项目里两种模块都有，可以混合使用（Electron 支持这种混合模式）\n\nESM 是未来的趋势（浏览器和 Node.js 都在推广），但很多 Node.js 原生模块还依赖 CommonJS 的特性。了解这两种规范的区别，能帮你少踩很多 \"导入报错\" 的坑～","filePath":"src/content/posts/bug/Electron中导入better-sqlite3.md","digest":"f959415033ae46e6","rendered":{"html":"<p>在Electron开发过程中，我遇到一个有趣的问题：使用<code>import Database from \"better-sqlite3\"</code>导入模块时，不仅出现类型声明文件缺失的警告，还会报<code>__filename is not defined</code>的运行时错误。而换成<code>const Database = require(\"better-sqlite3\")</code>后，一切正常。这个现象背后，其实是JavaScript两种主流模块系统——ESM与CommonJS的差异在作祟。</p>\n<section><h2 id=\"问题现象与直接原因\">问题现象与直接原因<a class=\"anchor\" href=\"#问题现象与直接原因\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h2><p>当使用ES模块语法导入better-sqlite3时，会遇到两个问题：</p><ol>\n<li>类型检查错误：<code>无法找到模块“better-sqlite3”的声明文件</code></li>\n<li>运行时错误：<code>ReferenceError: __filename is not defined</code></li>\n</ol><p>而切换到CommonJS的require语法后，这两个问题都消失了。要理解其中的原因，我们需要先深入了解ESM与CommonJS这两种模块系统的核心差异。</p></section>\n<section><h2 id=\"模块化的两种-流派esm-和-commonjs\">模块化的两种 “流派”：ESM 和 CommonJS<a class=\"anchor\" href=\"#模块化的两种-流派esm-和-commonjs\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h2><p>JavaScript 一开始是没有 “模块” 概念的，后来为了让代码更好管理，才出现了两种主流的模块系统：</p><section><h3 id=\"1-commonjsnodejs-的-老规矩\">1. CommonJS：Node.js 的 “老规矩”<a class=\"anchor\" href=\"#1-commonjsnodejs-的-老规矩\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h3><p><strong>诞生背景</strong>：2009 年前后，Node.js 刚出来，需要一套规则管理服务器端的代码（比如读取文件、操作数据库），于是 CommonJS 就成了 Node.js 的 “默认规范”。</p><p><strong>核心特点</strong>：</p><ul>\n<li>\n<p>用<code>require</code>导入模块，用<code>module.exports</code>导出模块</p>\n</li>\n<li>\n<p>比如：</p>\n<div class=\"expressive-code\"><link rel=\"stylesheet\" href=\"/_astro/ec.xyvso.css\"><script type=\"module\" src=\"/_astro/ec.g1fg5.js\">\x3C/script><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"javascript\" class=\"wrap\" style=\"--ecMaxLine:44ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#616972;--1:#99A0A6\">// 导出（math.js）</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">2</div></div><div class=\"code\"><span style=\"--0:#BF3441;--1:#F97583\">function</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#6F42C1;--1:#B392F0\">add</span><span style=\"--0:#24292E;--1:#E1E4E8\">(</span><span style=\"--0:#AE4B07;--1:#FFAB70\">a</span><span style=\"--0:#24292E;--1:#E1E4E8\">, </span><span style=\"--0:#AE4B07;--1:#FFAB70\">b</span><span style=\"--0:#24292E;--1:#E1E4E8\">) { </span><span style=\"--0:#BF3441;--1:#F97583\">return</span><span style=\"--0:#24292E;--1:#E1E4E8\"> a </span><span style=\"--0:#BF3441;--1:#F97583\">+</span><span style=\"--0:#24292E;--1:#E1E4E8\"> b; }</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">3</div></div><div class=\"code\"><span style=\"--0:#005CC5;--1:#79B8FF\">module</span><span style=\"--0:#24292E;--1:#E1E4E8\">.</span><span style=\"--0:#005CC5;--1:#79B8FF\">exports</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#BF3441;--1:#F97583\">=</span><span style=\"--0:#24292E;--1:#E1E4E8\"> { add };</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">4</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">5</div></div><div class=\"code\"><span style=\"--0:#616972;--1:#99A0A6\">// 导入（app.js）</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">6</div></div><div class=\"code\"><span style=\"--0:#BF3441;--1:#F97583\">const</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">math</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#BF3441;--1:#F97583\">=</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#6F42C1;--1:#B392F0\">require</span><span style=\"--0:#24292E;--1:#E1E4E8\">(</span><span style=\"--0:#032F62;--1:#9ECBFF\">'./math'</span><span style=\"--0:#24292E;--1:#E1E4E8\">); </span><span style=\"--0:#616972;--1:#99A0A6\">// 可以省略.js后缀</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">7</div></div><div class=\"code\"><span style=\"--0:#24292E;--1:#E1E4E8\">math.</span><span style=\"--0:#6F42C1;--1:#B392F0\">add</span><span style=\"--0:#24292E;--1:#E1E4E8\">(</span><span style=\"--0:#005CC5;--1:#79B8FF\">1</span><span style=\"--0:#24292E;--1:#E1E4E8\">, </span><span style=\"--0:#005CC5;--1:#79B8FF\">2</span><span style=\"--0:#24292E;--1:#E1E4E8\">); </span><span style=\"--0:#616972;--1:#99A0A6\">// 结果是3</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div>\n</li>\n<li>\n<p>运行时才加载模块，支持 “动态导入”（比如在<code>if</code>条件里加载不同模块）</p>\n</li>\n<li>\n<p>每个模块里自带几个 “全局变量”：<code>__filename</code>（当前文件路径）、<code>__dirname</code>（当前文件夹路径），方便处理文件路径</p>\n</li>\n</ul></section><section><h3 id=\"2-esm浏览器和-nodejs-通用的-新规范\">2. ESM：浏览器和 Node.js 通用的 “新规范”<a class=\"anchor\" href=\"#2-esm浏览器和-nodejs-通用的-新规范\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h3><p><strong>诞生背景</strong>：后来前端项目越来越大，也需要模块化。2015 年 ES6 推出了 ESM（ES Modules），想统一浏览器和服务器的模块化标准。</p><p><strong>核心特点</strong>：</p><ul>\n<li>\n<p>用<code>import</code>导入模块，用<code>export</code>导出模块</p>\n</li>\n<li>\n<p>比如：</p>\n<div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"javascript\" class=\"wrap\" style=\"--ecMaxLine:45ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#616972;--1:#99A0A6\">// 导出（math.js）</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">2</div></div><div class=\"code\"><span style=\"--0:#BF3441;--1:#F97583\">export</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#BF3441;--1:#F97583\">function</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#6F42C1;--1:#B392F0\">add</span><span style=\"--0:#24292E;--1:#E1E4E8\">(</span><span style=\"--0:#AE4B07;--1:#FFAB70\">a</span><span style=\"--0:#24292E;--1:#E1E4E8\">, </span><span style=\"--0:#AE4B07;--1:#FFAB70\">b</span><span style=\"--0:#24292E;--1:#E1E4E8\">) { </span><span style=\"--0:#BF3441;--1:#F97583\">return</span><span style=\"--0:#24292E;--1:#E1E4E8\"> a </span><span style=\"--0:#BF3441;--1:#F97583\">+</span><span style=\"--0:#24292E;--1:#E1E4E8\"> b; }</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">3</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">4</div></div><div class=\"code\"><span style=\"--0:#616972;--1:#99A0A6\">// 导入（app.js）</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">5</div></div><div class=\"code\"><span style=\"--0:#BF3441;--1:#F97583\">import</span><span style=\"--0:#24292E;--1:#E1E4E8\"> { add } </span><span style=\"--0:#BF3441;--1:#F97583\">from</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">'./math.js'</span><span style=\"--0:#24292E;--1:#E1E4E8\">; </span><span style=\"--0:#616972;--1:#99A0A6\">// 必须写全.js后缀</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">6</div></div><div class=\"code\"><span style=\"--0:#6F42C1;--1:#B392F0\">add</span><span style=\"--0:#24292E;--1:#E1E4E8\">(</span><span style=\"--0:#005CC5;--1:#79B8FF\">1</span><span style=\"--0:#24292E;--1:#E1E4E8\">, </span><span style=\"--0:#005CC5;--1:#79B8FF\">2</span><span style=\"--0:#24292E;--1:#E1E4E8\">); </span><span style=\"--0:#616972;--1:#99A0A6\">// 结果是3</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div>\n</li>\n<li>\n<p>加载前先分析依赖（编译时静态分析），不支持在<code>if</code>里动态导入</p>\n</li>\n<li>\n<p>没有<code>__filename</code>、<code>__dirname</code>这些变量（设计上更 “纯粹”，不绑定 Node.js 的文件系统）</p>\n</li>\n</ul></section></section>\n<section><h2 id=\"关键差异为什么这些区别会导致报错\">关键差异：为什么这些区别会导致报错？<a class=\"anchor\" href=\"#关键差异为什么这些区别会导致报错\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h2><p>回到开头的问题：<code>better-sqlite3</code>为啥认<code>require</code>不认<code>import</code>？</p><p>关键就在 <strong>CommonJS 的 “全局变量”</strong> 上。</p><p><code>better-sqlite3</code>是一个 “Node.js 原生扩展”（底层用 C++ 写的，需要操作本地文件），它的代码里可能直接用了<code>__filename</code>来处理路径（比如找数据库文件的位置）。</p><p>当你用<code>import</code>时：</p><ul>\n<li>代码会按 ESM 规范运行，环境里没有<code>__filename</code>这个变量</li>\n<li><code>better-sqlite3</code>找不到这个变量，就会报<code>ReferenceError</code></li>\n</ul><p>当你用<code>require</code>时：</p><ul>\n<li>代码会按 CommonJS 规范运行，<code>__filename</code>这些变量自动存在</li>\n<li><code>better-sqlite3</code>能正常找到需要的变量，自然就不报错了</li>\n</ul><p>在我的 Electron + Vue + Vite 项目中，整个项目采用 ES 模块（ESM）规范开发，并通过<code>package.json</code>中配置<code>\"type\": \"module\"</code>实现了统一的模块化管理。</p><p>针对<code>better-sqlite3</code>这类依赖 CommonJS 环境的模块，我们通过以下方式解决了 ESM 下的导入兼容问题：</p><div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"typescript\" class=\"wrap\" style=\"--ecMaxLine:57ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#616972;--1:#99A0A6\">// 在ES模块中模拟CommonJS的require功能（因为Electron有时需要使用CommonJS模块）</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">2</div></div><div class=\"code\"><span style=\"--0:#BF3441;--1:#F97583\">const</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">require</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#BF3441;--1:#F97583\">=</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#6F42C1;--1:#B392F0\">createRequire</span><span style=\"--0:#24292E;--1:#E1E4E8\">(</span><span style=\"--0:#BF3441;--1:#F97583\">import</span><span style=\"--0:#24292E;--1:#E1E4E8\">.</span><span style=\"--0:#005CC5;--1:#79B8FF\">meta</span><span style=\"--0:#24292E;--1:#E1E4E8\">.url);</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">3</div></div><div class=\"code\"><span style=\"--0:#BF3441;--1:#F97583\">const</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">Database</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#BF3441;--1:#F97583\">=</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#6F42C1;--1:#B392F0\">require</span><span style=\"--0:#24292E;--1:#E1E4E8\">(</span><span style=\"--0:#032F62;--1:#9ECBFF\">\"better-sqlite3\"</span><span style=\"--0:#24292E;--1:#E1E4E8\">);</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div><p>通过<code>createRequire</code>从当前模块的<code>import.meta.url</code>创建一个兼容 CommonJS 的<code>require</code>函数，既保留了项目整体的 ESM 规范，又能顺利导入<code>better-sqlite3</code>这类依赖传统 CommonJS 特性的模块，确保了项目的正常运行。</p></section>\n<section><h2 id=\"类型声明问题另一个小插曲\">类型声明问题：另一个小插曲<a class=\"anchor\" href=\"#类型声明问题另一个小插曲\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h2><p>开头还提到 “找不到声明文件” 的警告，这是 TypeScript 的 “小脾气”：</p><ul>\n<li>\n<p><code>better-sqlite3</code>本身是用 JavaScript/C++ 写的，没有自带 TypeScript 的类型说明</p>\n</li>\n<li>\n<p>解决办法很简单：安装社区提供的类型声明文件</p>\n<div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"bash\" class=\"wrap\" style=\"--ecMaxLine:44ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#6F42C1;--1:#B392F0\">npm</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">install</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">@types/better-sqlite3</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">--save-dev</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div>\n<p>（但这只能解决类型提示问题，解决不了<code>__filename</code>的报错，因为那是运行时问题）</p>\n</li>\n</ul></section>\n<section><h2 id=\"总结该用-import-还是-require\">总结：该用 import 还是 require？<a class=\"anchor\" href=\"#总结该用-import-还是-require\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h2><p>简单说，看模块 “脾气”：</p><ol>\n<li>像<code>better-sqlite3</code>这种依赖 Node.js 原生特性（比如<code>__filename</code>）的模块，优先用<code>require</code></li>\n<li>纯 JavaScript 写的现代模块（尤其是前端库），可以用<code>import</code></li>\n<li>如果项目里两种模块都有，可以混合使用（Electron 支持这种混合模式）</li>\n</ol><p>ESM 是未来的趋势（浏览器和 Node.js 都在推广），但很多 Node.js 原生模块还依赖 CommonJS 的特性。了解这两种规范的区别，能帮你少踩很多 “导入报错” 的坑～</p></section>","metadata":{"headings":[{"depth":2,"slug":"问题现象与直接原因","text":"问题现象与直接原因#"},{"depth":2,"slug":"模块化的两种-流派esm-和-commonjs","text":"模块化的两种 “流派”：ESM 和 CommonJS#"},{"depth":3,"slug":"1-commonjsnodejs-的-老规矩","text":"1. CommonJS：Node.js 的 “老规矩”#"},{"depth":3,"slug":"2-esm浏览器和-nodejs-通用的-新规范","text":"2. ESM：浏览器和 Node.js 通用的 “新规范”#"},{"depth":2,"slug":"关键差异为什么这些区别会导致报错","text":"关键差异：为什么这些区别会导致报错？#"},{"depth":2,"slug":"类型声明问题另一个小插曲","text":"类型声明问题：另一个小插曲#"},{"depth":2,"slug":"总结该用-import-还是-require","text":"总结：该用 import 还是 require？#"}],"localImagePaths":[],"remoteImagePaths":[],"frontmatter":{"title":"Electron中导入better-sqlite3：为什么import不行，require却可以？","published":"2025-09-01T00:00:00.000Z","category":"技术踩坑","tags":["Electron","ESM","CommonJS"],"minutes":6,"words":1191,"excerpt":"在Electron开发过程中，我遇到一个有趣的问题：使用import Database from \"better-sqlite3\"导入模块时，不仅出现类型声明文件缺失的警告，还会报__filename is not defined的运行时错误。而换成const Database = require(\"better-sqlite3\")后，一切正常。这个现象背后，其实是JavaScript两种主流模块系统——ESM与CommonJS的差异在作祟。"},"imagePaths":[]}},"collection":"posts"}],"2025-08-22":[{"id":"vue/vue3-透传attributes","data":{"title":"Vue3 笔记：透传 Attributes","published":"2025-08-22T00:00:00.000Z","draft":false,"description":"","image":"./vue.png","tags":["Vue","学习笔记"],"category":"Vue","lang":"","pinned":false,"author":"","sourceLink":"","licenseName":"","licenseUrl":"","encrypted":false,"password":"","prevTitle":"Vue3 笔记：深入响应式系统","prevSlug":"vue/vue3-深入响应式系统","nextTitle":"Electron中导入better-sqlite3：为什么import不行，require却可以？","nextSlug":"bug/electron中导入better-sqlite3"},"body":"在 Vue 组件开发中，属性传递是核心场景之一。props 适用于明确声明的属性，但当需要灵活传递未声明的属性或事件、封装第三方组件时，**透传 Attributes** 成为更高效的解决方案。\n\n## 一、什么是透传 Attributes？\n\n官方定义：**透传 Attributes 指传递给组件但未被声明为 props 或 emits 的 attribute 或 v-on 事件监听器**，最常见的包括 `class`、`style`、`id` 以及自定义事件等。\n\n在 Vue3 中，透传 Attributes 会被收集到组件实例的 `$attrs` 中，可通过 `useAttrs()`（script setup）或 `this.$attrs`（选项式 API）访问。\n\n### 访问 $attrs 的两种方式\n\n1. script setup 中：useAttrs ()\n\n    ```javascript\n    import { useAttrs } from 'vue';\n    const attrs = useAttrs();\n    ```\n\n2. 选项式 API 中：this.$attrs\n\n    ```javascript\n    export default {\n      mounted() {\n        console.log(this.$attrs); // 直接通过实例访问\n      }\n    };\n    ```\n\n官方明确指出，`$attrs` **不是响应式对象**（出于性能优化考虑）。虽然它会随着父组件传递的属性变化而更新（始终反映最新状态），但无法通过 `watch` 或 `watchEffect` 直接监听其变化。\n\n例如，以下代码无法触发监听逻辑：\n\n```javascript\nimport { useAttrs, watch } from 'vue';\nconst attrs = useAttrs();\n\n// 无效：无法监听 $attrs 的变化\nwatch(attrs, (newVal) => {\n  console.log('attrs 变化了', newVal);\n});\n```\n\n若需要在 `$attrs` 变化时执行副作用，官方推荐两种方案：\n\n1. **使用 props**：将需要响应的属性通过 `defineProps` 声明（props 是响应式的）；\n\n2. 使用 `onUpdated` 钩子：在组件更新时（`$attrs`已同步最新值）执行逻辑：\n\n   ```javascript\n   import { useAttrs, onUpdated } from 'vue';\n   const attrs = useAttrs();\n   \n   onUpdated(() => {\n     // 每次更新时获取最新的 attrs\n     console.log('最新的 attrs', attrs);\n   });\n   ```\n\n## 二、透传 Attributes 的基础特性\n\n### 1. 自动收集未声明属性\n\n父组件传递的属性中，未被子组件通过 `defineProps` 声明的部分，会自动归入 `$attrs`：\n\n```html\n<!-- 父组件 Parent.vue -->\n<template>\n  <Child id=\"user-card\" class=\"card\" title=\"用户信息\" />\n</template>\n\n<!-- 子组件 Child.vue -->\n<template>\n  <div>{{ title }}</div>\n</template>\n<script setup>\nimport { useAttrs, onMounted } from 'vue';\n\n// 仅声明 title 为 props\nconst props = defineProps(['title']);\n// 获取透传的剩余属性\nconst attrs = useAttrs();\n\nonMounted(() => {\n  console.log(attrs); // { id: 'user-card', class: 'card' }\n});\n\x3C/script>\n```\n\n### 2. 自动绑定到根元素\n\n默认情况下，子组件的 **根元素会自动绑定 `$attrs`**。上述示例中，Child 组件的根元素 `<div>` 会被渲染为：\n\n```html\n<div id=\"user-card\" class=\"card\">用户信息</div>\n```\n\n这一特性在封装基础组件时尤为实用，无需手动转发属性。\n\n### 3. class 与 style 的特殊处理\n\n`class`和`style`是特殊的透传Attributes：当子组件根元素已有自身的`class`和`style`时，会与透传的`class`和`style`自动合并，而非覆盖：\n\n```html\n<!-- 子组件 Child.vue -->\n<template>\n  <!-- 根元素自身有 class -->\n  <div class=\"base\">用户信息</div>\n</template>\n\n<!-- 父组件传递 class=\"card\" 后，渲染结果： -->\n<div class=\"base card\">用户信息</div>\n```\n\n## 三、控制透传行为：inheritAttrs 选项\n\n默认情况下，`$attrs` 会自动绑定到根元素。若需自定义绑定目标（如非根元素），可通过 `defineOptions` 设置 `inheritAttrs: false` 禁用自动绑定，再手动绑定 `$attrs`。\n\n### 1. 绑定到非根元素\n\n```html\n<!-- 子组件 Child.vue -->\n<template>\n  <div class=\"wrapper\">\n    <!-- 手动将 $attrs 绑定到内部元素 -->\n    <div class=\"content\" v-bind=\"$attrs\">\n      {{ title }}\n    </div>\n  </div>\n</template>\n<script setup>\nimport { useAttrs, defineOptions } from 'vue';\n\n// 禁用根元素自动绑定\ndefineOptions({ inheritAttrs: false });\n\nconst props = defineProps(['title']);\nconst attrs = useAttrs(); // 仍可访问 $attrs，仅禁用自动绑定\n\x3C/script>\n```\n\n渲染结果：`id` 和 `class` 仅绑定到 `.content`，而非根元素 `.wrapper`。\n\n### 2. 多根节点组件的强制手动绑定\n\nVue3 支持多根节点组件，但此时 **`$attrs` 不会自动绑定到任何节点**，必须手动指定绑定位置，否则会触发警告：\n\n```html\n<!-- 多根节点组件（正确示例） -->\n<template>\n  <div>节点1</div>\n  <!-- 手动绑定 $attrs 到需要的节点 -->\n  <div v-bind=\"$attrs\">节点2（接收透传属性）</div>\n</template>\n<script setup>\n// 若未手动绑定，会触发警告：\n// [Vue warn]: Extraneous non-props attributes were passed but could not be inherited\n\x3C/script>\n```\n\n## 四、嵌套组件的透传\n\n当组件层级超过两层（如 Parent → Middle → Child）时，`$attrs` **不会自动传递给深层子组件**，需中间组件手动转发。\n\n### 1. 未转发导致的属性丢失\n\n```html\n<!-- 三层结构：Parent → Middle → Child -->\n<!-- Parent.vue 传递属性：id、class、title -->\n<!-- Middle.vue（未转发 $attrs） -->\n<template>\n  <div>\n    <h3>中间组件</h3>\n    <Child /> <!-- 未绑定 $attrs，Child 无法接收属性 -->\n  </div>\n</template>\n```\n\n此时 Child 组件的 `$attrs` 为空，无法获取 Parent 传递的属性。\n\n### 2. 手动转发的两种方式\n\n#### （1）全量转发（推荐）\n\n通过 `v-bind=\"$attrs\"` 将中间组件的 `$attrs` 全部转发给子组件：\n\n```html\n<!-- Middle.vue（全量转发） -->\n<template>\n  <div>\n    <h3>中间组件</h3>\n    <Child v-bind=\"$attrs\" /> <!-- 关键：转发所有透传属性 -->\n  </div>\n</template>\n```\n\n#### （2）选择性转发\n\n如需过滤或加工属性，可从 `$attrs` 中提取指定属性转发：\n\n```html\n<!-- Middle.vue（选择性转发） -->\n<template>\n  <div>\n    <h3>中间组件</h3>\n    <Child \n      :title=\"attrs.title?.toUpperCase()\" <!-- 加工后转发 -->\n      :desc=\"attrs.desc\" \n    />\n  </div>\n</template>\n<script setup>\nimport { useAttrs } from 'vue';\nconst attrs = useAttrs();\n\x3C/script>\n```\n\n### 3. 中间组件声明 props 后的透传规则\n\n若中间组件通过 `defineProps` 声明了部分属性，这些属性会从 `$attrs` 中移除，转发时仅包含未声明的剩余属性：\n\n```html\n<!-- Middle.vue（声明了 title 为 props） -->\n<script setup>\nconst props = defineProps(['title']); // title 被声明为 props\nconst attrs = useAttrs(); // attrs 仅包含未声明的 id、class、desc\n\x3C/script>\n```\n\n此时 `v-bind=\"$attrs\"` 仅转发 `id`、`class`、`desc`，若 Child 需要 `title`，需中间组件手动传递：`<Child :title=\"title\" v-bind=\"$attrs\" />`。\n\n## 五、v-on 监听器继承\n\nVue3 中，`$attrs` 不仅包含属性，还包含父组件传递的 **v-on 事件监听器**（事件以 `onXxx` 形式存在，如 `@click` 对应 `attrs.onClick`）。转发 `$attrs` 时，事件会自动同步传递。\n\n```html\n<!-- 父组件传递事件 -->\n<template>\n  <Child @click=\"handleClick\" @input=\"handleInput\" />\n</template>\n\n<!-- 子组件接收并转发事件 -->\n<template>\n  <button v-bind=\"$attrs\">点击我</button> <!-- 点击会触发父组件的 handleClick -->\n</template>\n<script setup>\nimport { useAttrs } from 'vue';\nconst attrs = useAttrs();\nconsole.log(attrs); // { onClick: ƒ, onInput: ƒ }\n\x3C/script>\n```\n\n> 与 Vue2 区别：Vue2 中事件需通过 `$listeners` 单独转发，Vue3 中事件统一归入 `$attrs`，简化了转发逻辑。\n\n## 六、适用场景与不适用场景\n\n### 适用场景\n\n1. **封装第三方组件**\n   无需声明第三方组件的所有属性，通过 `v-bind=\"$attrs\"` 自动转发，减少代码冗余：\n\n   ```html\n   <!-- 封装 Element Plus 的 ElInput -->\n   <template>\n     <el-input v-bind=\"$attrs\" v-model=\"modelValue\" />\n   </template>\n   <script setup>\n   const props = defineProps(['modelValue']);\n   \x3C/script>\n   ```\n\n2. **多层级属性透传**\n   超过 2 层的组件结构（如 Page→Card→Form→Input），用 `v-bind=\"$attrs\"` 转发比每层声明 props 更高效。\n\n3. **动态属性传递**\n   接收不确定的动态属性（如后端配置的表单属性），`$attrs` 可作为灵活的容器。\n\n### 不适用场景\n\n1. **需要类型校验**\n   `$attrs` 无类型校验，需严格校验时用 props：\n\n   ```javascript\n   // 推荐：用 props 做类型校验\n   const props = defineProps({\n     age: { type: Number, required: true }\n   });\n   ```\n\n2. **需要默认值**\n   `$attrs` 无法设置默认值，需默认值时用 props 的 `default` 选项。\n\n3. **属性需加工处理**\n   需修改属性值（如格式化）时，建议通过 props 接收后加工再传递。\n\n## 七、常见问题与解决方案\n\n### 1. 样式冲突（class/style 自动合并）\n\n**问题**：透传的 `class`/`style` 与子组件根元素样式冲突。\n**解决方案**：禁用自动绑定，手动控制绑定位置：\n\n```html\n<template>\n  <div class=\"parent\">\n    <!-- 仅将非样式属性转发给子组件 -->\n    <Child v-bind=\"filterAttrs\" />\n  </div>\n</template>\n<script setup>\nimport { useAttrs, computed, defineOptions } from 'vue';\ndefineOptions({ inheritAttrs: false }); // 禁用根元素自动绑定\n\nconst attrs = useAttrs();\n// 过滤 class 和 style\nconst filterAttrs = computed(() => {\n  const { class: _, style: __, ...rest } = attrs;\n  return rest;\n});\n\x3C/script>\n```\n\n### 2. 中间组件声明的 props 无法传递到子组件\n\n**问题**：中间组件声明的 props 不在 `$attrs` 中，导致子组件无法获取。\n**解决方案**：中间组件手动传递已声明的 props：\n\n```html\n<!-- Middle.vue -->\n<template>\n  <Child v-bind=\"$attrs\" :title=\"title\" /> <!-- 手动传递 title -->\n</template>\n<script setup>\nconst props = defineProps(['title']); // title 被声明为 props\n\x3C/script>\n```\n\n## 总结\n\n透传 Attributes（`$attrs`）是 Vue3 组件通信的重要补充，核心价值在于**简化未声明属性 / 事件的传递**。关键知识点：\n\n- `$attrs` 包含未被 props 声明的属性和事件，需通过 `useAttrs()` 或 `this.$attrs` 访问；\n- 单根组件默认自动绑定 `$attrs` 到根元素，`inheritAttrs: false` 可禁用此行为；\n- 多根组件必须手动绑定 `$attrs`，否则会触发警告；\n- 嵌套组件需通过 `v-bind=\"$attrs\"` 手动转发 `$attrs`；\n- 适合封装第三方组件、多层透传和动态属性场景，不适合需要类型校验或默认值的场景。\n\n通过合理使用 `$attrs`，可大幅提升组件的灵活性和开发效率。\n\n> 官方文档完整参考：[透传 Attributes | Vue.js](https://cn.vuejs.org/guide/components/attrs.html)","filePath":"src/content/posts/vue/Vue3-透传Attributes.md","digest":"c497448302e089a0","rendered":{"html":"<p>在 Vue 组件开发中，属性传递是核心场景之一。props 适用于明确声明的属性，但当需要灵活传递未声明的属性或事件、封装第三方组件时，<strong>透传 Attributes</strong> 成为更高效的解决方案。</p>\n<section><h2 id=\"一什么是透传-attributes\">一、什么是透传 Attributes？<a class=\"anchor\" href=\"#一什么是透传-attributes\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h2><p>官方定义：<strong>透传 Attributes 指传递给组件但未被声明为 props 或 emits 的 attribute 或 v-on 事件监听器</strong>，最常见的包括 <code>class</code>、<code>style</code>、<code>id</code> 以及自定义事件等。</p><p>在 Vue3 中，透传 Attributes 会被收集到组件实例的 <code>$attrs</code> 中，可通过 <code>useAttrs()</code>（script setup）或 <code>this.$attrs</code>（选项式 API）访问。</p><section><h3 id=\"访问-attrs-的两种方式\">访问 $attrs 的两种方式<a class=\"anchor\" href=\"#访问-attrs-的两种方式\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h3><ol>\n<li>\n<p>script setup 中：useAttrs ()</p>\n<div class=\"expressive-code\"><link rel=\"stylesheet\" href=\"/_astro/ec.xyvso.css\"><script type=\"module\" src=\"/_astro/ec.g1fg5.js\">\x3C/script><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"javascript\" class=\"wrap\" style=\"--ecMaxLine:31ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#BF3441;--1:#F97583\">import</span><span style=\"--0:#24292E;--1:#E1E4E8\"> { useAttrs } </span><span style=\"--0:#BF3441;--1:#F97583\">from</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">'vue'</span><span style=\"--0:#24292E;--1:#E1E4E8\">;</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">2</div></div><div class=\"code\"><span style=\"--0:#BF3441;--1:#F97583\">const</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">attrs</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#BF3441;--1:#F97583\">=</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#6F42C1;--1:#B392F0\">useAttrs</span><span style=\"--0:#24292E;--1:#E1E4E8\">();</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div>\n</li>\n<li>\n<p>选项式 API 中：this.$attrs</p>\n<div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"javascript\" class=\"wrap\" style=\"--ecMaxLine:41ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#BF3441;--1:#F97583\">export</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#BF3441;--1:#F97583\">default</span><span style=\"--0:#24292E;--1:#E1E4E8\"> {</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">2</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#6F42C1;--1:#B392F0\">mounted</span><span style=\"--0:#24292E;--1:#E1E4E8\">() {</span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">3</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">    </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">console.</span><span style=\"--0:#6F42C1;--1:#B392F0\">log</span><span style=\"--0:#24292E;--1:#E1E4E8\">(</span><span style=\"--0:#005CC5;--1:#79B8FF\">this</span><span style=\"--0:#24292E;--1:#E1E4E8\">.$attrs); </span><span style=\"--0:#616972;--1:#99A0A6\">// 直接通过实例访问</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">4</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">  </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">}</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">5</div></div><div class=\"code\"><span style=\"--0:#24292E;--1:#E1E4E8\">};</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div>\n</li>\n</ol><p>官方明确指出，<code>$attrs</code> <strong>不是响应式对象</strong>（出于性能优化考虑）。虽然它会随着父组件传递的属性变化而更新（始终反映最新状态），但无法通过 <code>watch</code> 或 <code>watchEffect</code> 直接监听其变化。</p><p>例如，以下代码无法触发监听逻辑：</p><div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"javascript\" class=\"wrap\" style=\"--ecMaxLine:38ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#BF3441;--1:#F97583\">import</span><span style=\"--0:#24292E;--1:#E1E4E8\"> { useAttrs, watch } </span><span style=\"--0:#BF3441;--1:#F97583\">from</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">'vue'</span><span style=\"--0:#24292E;--1:#E1E4E8\">;</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">2</div></div><div class=\"code\"><span style=\"--0:#BF3441;--1:#F97583\">const</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">attrs</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#BF3441;--1:#F97583\">=</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#6F42C1;--1:#B392F0\">useAttrs</span><span style=\"--0:#24292E;--1:#E1E4E8\">();</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">3</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">4</div></div><div class=\"code\"><span style=\"--0:#616972;--1:#99A0A6\">// 无效：无法监听 $attrs 的变化</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">5</div></div><div class=\"code\"><span style=\"--0:#6F42C1;--1:#B392F0\">watch</span><span style=\"--0:#24292E;--1:#E1E4E8\">(attrs, (</span><span style=\"--0:#AE4B07;--1:#FFAB70\">newVal</span><span style=\"--0:#24292E;--1:#E1E4E8\">) </span><span style=\"--0:#BF3441;--1:#F97583\">=></span><span style=\"--0:#24292E;--1:#E1E4E8\"> {</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">6</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">  </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">console.</span><span style=\"--0:#6F42C1;--1:#B392F0\">log</span><span style=\"--0:#24292E;--1:#E1E4E8\">(</span><span style=\"--0:#032F62;--1:#9ECBFF\">'attrs 变化了'</span><span style=\"--0:#24292E;--1:#E1E4E8\">, newVal);</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">7</div></div><div class=\"code\"><span style=\"--0:#24292E;--1:#E1E4E8\">});</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div><p>若需要在 <code>$attrs</code> 变化时执行副作用，官方推荐两种方案：</p><ol>\n<li>\n<p><strong>使用 props</strong>：将需要响应的属性通过 <code>defineProps</code> 声明（props 是响应式的）；</p>\n</li>\n<li>\n<p>使用 <code>onUpdated</code> 钩子：在组件更新时（<code>$attrs</code>已同步最新值）执行逻辑：</p>\n<div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"javascript\" class=\"wrap\" style=\"--ecMaxLine:42ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#BF3441;--1:#F97583\">import</span><span style=\"--0:#24292E;--1:#E1E4E8\"> { useAttrs, onUpdated } </span><span style=\"--0:#BF3441;--1:#F97583\">from</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">'vue'</span><span style=\"--0:#24292E;--1:#E1E4E8\">;</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">2</div></div><div class=\"code\"><span style=\"--0:#BF3441;--1:#F97583\">const</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">attrs</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#BF3441;--1:#F97583\">=</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#6F42C1;--1:#B392F0\">useAttrs</span><span style=\"--0:#24292E;--1:#E1E4E8\">();</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">3</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">4</div></div><div class=\"code\"><span style=\"--0:#6F42C1;--1:#B392F0\">onUpdated</span><span style=\"--0:#24292E;--1:#E1E4E8\">(() </span><span style=\"--0:#BF3441;--1:#F97583\">=></span><span style=\"--0:#24292E;--1:#E1E4E8\"> {</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">5</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#616972;--1:#99A0A6\">// 每次更新时获取最新的 attrs</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">6</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">  </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">console.</span><span style=\"--0:#6F42C1;--1:#B392F0\">log</span><span style=\"--0:#24292E;--1:#E1E4E8\">(</span><span style=\"--0:#032F62;--1:#9ECBFF\">'最新的 attrs'</span><span style=\"--0:#24292E;--1:#E1E4E8\">, attrs);</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">7</div></div><div class=\"code\"><span style=\"--0:#24292E;--1:#E1E4E8\">});</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div>\n</li>\n</ol></section></section>\n<section><h2 id=\"二透传-attributes-的基础特性\">二、透传 Attributes 的基础特性<a class=\"anchor\" href=\"#二透传-attributes-的基础特性\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h2><section><h3 id=\"1-自动收集未声明属性\">1. 自动收集未声明属性<a class=\"anchor\" href=\"#1-自动收集未声明属性\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h3><p>父组件传递的属性中，未被子组件通过 <code>defineProps</code> 声明的部分，会自动归入 <code>$attrs</code>：</p><div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"html\" class=\"wrap\" style=\"--ecMaxLine:59ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#616972;--1:#99A0A6\">&#x3C;!-- 父组件 Parent.vue --></span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">2</div></div><div class=\"code\"><span style=\"--0:#24292E;--1:#E1E4E8\">&#x3C;</span><span style=\"--0:#1E7734;--1:#85E89D\">template</span><span style=\"--0:#24292E;--1:#E1E4E8\">></span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">3</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">  </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">&#x3C;</span><span style=\"--0:#B31D28;--0fs:italic;--1:#FDAEB7;--1fs:italic\">Child</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#6F42C1;--1:#B392F0\">id</span><span style=\"--0:#24292E;--1:#E1E4E8\">=</span><span style=\"--0:#032F62;--1:#9ECBFF\">\"user-card\"</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#6F42C1;--1:#B392F0\">class</span><span style=\"--0:#24292E;--1:#E1E4E8\">=</span><span style=\"--0:#032F62;--1:#9ECBFF\">\"card\"</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#6F42C1;--1:#B392F0\">title</span><span style=\"--0:#24292E;--1:#E1E4E8\">=</span><span style=\"--0:#032F62;--1:#9ECBFF\">\"用户信息\"</span><span style=\"--0:#24292E;--1:#E1E4E8\"> /></span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">4</div></div><div class=\"code\"><span style=\"--0:#24292E;--1:#E1E4E8\">&#x3C;/</span><span style=\"--0:#1E7734;--1:#85E89D\">template</span><span style=\"--0:#24292E;--1:#E1E4E8\">></span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">5</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">6</div></div><div class=\"code\"><span style=\"--0:#616972;--1:#99A0A6\">&#x3C;!-- 子组件 Child.vue --></span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">7</div></div><div class=\"code\"><span style=\"--0:#24292E;--1:#E1E4E8\">&#x3C;</span><span style=\"--0:#1E7734;--1:#85E89D\">template</span><span style=\"--0:#24292E;--1:#E1E4E8\">></span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">8</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">  </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">&#x3C;</span><span style=\"--0:#1E7734;--1:#85E89D\">div</span><span style=\"--0:#24292E;--1:#E1E4E8\">>{{ title }}&#x3C;/</span><span style=\"--0:#1E7734;--1:#85E89D\">div</span><span style=\"--0:#24292E;--1:#E1E4E8\">></span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">9</div></div><div class=\"code\"><span style=\"--0:#24292E;--1:#E1E4E8\">&#x3C;/</span><span style=\"--0:#1E7734;--1:#85E89D\">template</span><span style=\"--0:#24292E;--1:#E1E4E8\">></span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">10</div></div><div class=\"code\"><span style=\"--0:#24292E;--1:#E1E4E8\">&#x3C;</span><span style=\"--0:#1E7734;--1:#85E89D\">script</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#6F42C1;--1:#B392F0\">setup</span><span style=\"--0:#24292E;--1:#E1E4E8\">></span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">11</div></div><div class=\"code\"><span style=\"--0:#BF3441;--1:#F97583\">import</span><span style=\"--0:#24292E;--1:#E1E4E8\"> { useAttrs, onMounted } </span><span style=\"--0:#BF3441;--1:#F97583\">from</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">'vue'</span><span style=\"--0:#24292E;--1:#E1E4E8\">;</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">12</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">13</div></div><div class=\"code\"><span style=\"--0:#616972;--1:#99A0A6\">// 仅声明 title 为 props</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">14</div></div><div class=\"code\"><span style=\"--0:#BF3441;--1:#F97583\">const</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">props</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#BF3441;--1:#F97583\">=</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#6F42C1;--1:#B392F0\">defineProps</span><span style=\"--0:#24292E;--1:#E1E4E8\">([</span><span style=\"--0:#032F62;--1:#9ECBFF\">'title'</span><span style=\"--0:#24292E;--1:#E1E4E8\">]);</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">15</div></div><div class=\"code\"><span style=\"--0:#616972;--1:#99A0A6\">// 获取透传的剩余属性</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">16</div></div><div class=\"code\"><span style=\"--0:#BF3441;--1:#F97583\">const</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">attrs</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#BF3441;--1:#F97583\">=</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#6F42C1;--1:#B392F0\">useAttrs</span><span style=\"--0:#24292E;--1:#E1E4E8\">();</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">17</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">18</div></div><div class=\"code\"><span style=\"--0:#6F42C1;--1:#B392F0\">onMounted</span><span style=\"--0:#24292E;--1:#E1E4E8\">(() </span><span style=\"--0:#BF3441;--1:#F97583\">=></span><span style=\"--0:#24292E;--1:#E1E4E8\"> {</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">19</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">  </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">console.</span><span style=\"--0:#6F42C1;--1:#B392F0\">log</span><span style=\"--0:#24292E;--1:#E1E4E8\">(attrs); </span><span style=\"--0:#616972;--1:#99A0A6\">// { id: 'user-card', class: 'card' }</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">20</div></div><div class=\"code\"><span style=\"--0:#24292E;--1:#E1E4E8\">});</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">21</div></div><div class=\"code\"><span style=\"--0:#24292E;--1:#E1E4E8\">&#x3C;/</span><span style=\"--0:#1E7734;--1:#85E89D\">script</span><span style=\"--0:#24292E;--1:#E1E4E8\">></span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div></section><section><h3 id=\"2-自动绑定到根元素\">2. 自动绑定到根元素<a class=\"anchor\" href=\"#2-自动绑定到根元素\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h3><p>默认情况下，子组件的 <strong>根元素会自动绑定 <code>$attrs</code></strong>。上述示例中，Child 组件的根元素 <code>&#x3C;div></code> 会被渲染为：</p><div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"html\" class=\"wrap\" style=\"--ecMaxLine:43ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#24292E;--1:#E1E4E8\">&#x3C;</span><span style=\"--0:#1E7734;--1:#85E89D\">div</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#6F42C1;--1:#B392F0\">id</span><span style=\"--0:#24292E;--1:#E1E4E8\">=</span><span style=\"--0:#032F62;--1:#9ECBFF\">\"user-card\"</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#6F42C1;--1:#B392F0\">class</span><span style=\"--0:#24292E;--1:#E1E4E8\">=</span><span style=\"--0:#032F62;--1:#9ECBFF\">\"card\"</span><span style=\"--0:#24292E;--1:#E1E4E8\">>用户信息&#x3C;/</span><span style=\"--0:#1E7734;--1:#85E89D\">div</span><span style=\"--0:#24292E;--1:#E1E4E8\">></span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div><p>这一特性在封装基础组件时尤为实用，无需手动转发属性。</p></section><section><h3 id=\"3-class-与-style-的特殊处理\">3. class 与 style 的特殊处理<a class=\"anchor\" href=\"#3-class-与-style-的特殊处理\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h3><p><code>class</code>和<code>style</code>是特殊的透传Attributes：当子组件根元素已有自身的<code>class</code>和<code>style</code>时，会与透传的<code>class</code>和<code>style</code>自动合并，而非覆盖：</p><div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"html\" class=\"wrap\" style=\"--ecMaxLine:35ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#616972;--1:#99A0A6\">&#x3C;!-- 子组件 Child.vue --></span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">2</div></div><div class=\"code\"><span style=\"--0:#24292E;--1:#E1E4E8\">&#x3C;</span><span style=\"--0:#1E7734;--1:#85E89D\">template</span><span style=\"--0:#24292E;--1:#E1E4E8\">></span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">3</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#616972;--1:#99A0A6\">&#x3C;!-- 根元素自身有 class --></span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">4</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">  </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">&#x3C;</span><span style=\"--0:#1E7734;--1:#85E89D\">div</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#6F42C1;--1:#B392F0\">class</span><span style=\"--0:#24292E;--1:#E1E4E8\">=</span><span style=\"--0:#032F62;--1:#9ECBFF\">\"base\"</span><span style=\"--0:#24292E;--1:#E1E4E8\">>用户信息&#x3C;/</span><span style=\"--0:#1E7734;--1:#85E89D\">div</span><span style=\"--0:#24292E;--1:#E1E4E8\">></span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">5</div></div><div class=\"code\"><span style=\"--0:#24292E;--1:#E1E4E8\">&#x3C;/</span><span style=\"--0:#1E7734;--1:#85E89D\">template</span><span style=\"--0:#24292E;--1:#E1E4E8\">></span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">6</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">7</div></div><div class=\"code\"><span style=\"--0:#616972;--1:#99A0A6\">&#x3C;!-- 父组件传递 class=\"card\" 后，渲染结果： --></span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">8</div></div><div class=\"code\"><span style=\"--0:#24292E;--1:#E1E4E8\">&#x3C;</span><span style=\"--0:#1E7734;--1:#85E89D\">div</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#6F42C1;--1:#B392F0\">class</span><span style=\"--0:#24292E;--1:#E1E4E8\">=</span><span style=\"--0:#032F62;--1:#9ECBFF\">\"base card\"</span><span style=\"--0:#24292E;--1:#E1E4E8\">>用户信息&#x3C;/</span><span style=\"--0:#1E7734;--1:#85E89D\">div</span><span style=\"--0:#24292E;--1:#E1E4E8\">></span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div></section></section>\n<section><h2 id=\"三控制透传行为inheritattrs-选项\">三、控制透传行为：inheritAttrs 选项<a class=\"anchor\" href=\"#三控制透传行为inheritattrs-选项\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h2><p>默认情况下，<code>$attrs</code> 会自动绑定到根元素。若需自定义绑定目标（如非根元素），可通过 <code>defineOptions</code> 设置 <code>inheritAttrs: false</code> 禁用自动绑定，再手动绑定 <code>$attrs</code>。</p><section><h3 id=\"1-绑定到非根元素\">1. 绑定到非根元素<a class=\"anchor\" href=\"#1-绑定到非根元素\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h3><div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"html\" class=\"wrap\" style=\"--ecMaxLine:48ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#616972;--1:#99A0A6\">&#x3C;!-- 子组件 Child.vue --></span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">2</div></div><div class=\"code\"><span style=\"--0:#24292E;--1:#E1E4E8\">&#x3C;</span><span style=\"--0:#1E7734;--1:#85E89D\">template</span><span style=\"--0:#24292E;--1:#E1E4E8\">></span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">3</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">  </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">&#x3C;</span><span style=\"--0:#1E7734;--1:#85E89D\">div</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#6F42C1;--1:#B392F0\">class</span><span style=\"--0:#24292E;--1:#E1E4E8\">=</span><span style=\"--0:#032F62;--1:#9ECBFF\">\"wrapper\"</span><span style=\"--0:#24292E;--1:#E1E4E8\">></span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">4</div></div><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#616972;--1:#99A0A6\">&#x3C;!-- 手动将 $attrs 绑定到内部元素 --></span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">5</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">    </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">&#x3C;</span><span style=\"--0:#1E7734;--1:#85E89D\">div</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#6F42C1;--1:#B392F0\">class</span><span style=\"--0:#24292E;--1:#E1E4E8\">=</span><span style=\"--0:#032F62;--1:#9ECBFF\">\"content\"</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#6F42C1;--1:#B392F0\">v-bind</span><span style=\"--0:#24292E;--1:#E1E4E8\">=</span><span style=\"--0:#032F62;--1:#9ECBFF\">\"$attrs\"</span><span style=\"--0:#24292E;--1:#E1E4E8\">></span></div></div><div class=\"ec-line\" style=\"--ecIndent:6ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">6</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">      </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">{{ title }}</span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">7</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">    </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">&#x3C;/</span><span style=\"--0:#1E7734;--1:#85E89D\">div</span><span style=\"--0:#24292E;--1:#E1E4E8\">></span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">8</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">  </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">&#x3C;/</span><span style=\"--0:#1E7734;--1:#85E89D\">div</span><span style=\"--0:#24292E;--1:#E1E4E8\">></span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">9</div></div><div class=\"code\"><span style=\"--0:#24292E;--1:#E1E4E8\">&#x3C;/</span><span style=\"--0:#1E7734;--1:#85E89D\">template</span><span style=\"--0:#24292E;--1:#E1E4E8\">></span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">10</div></div><div class=\"code\"><span style=\"--0:#24292E;--1:#E1E4E8\">&#x3C;</span><span style=\"--0:#1E7734;--1:#85E89D\">script</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#6F42C1;--1:#B392F0\">setup</span><span style=\"--0:#24292E;--1:#E1E4E8\">></span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">11</div></div><div class=\"code\"><span style=\"--0:#BF3441;--1:#F97583\">import</span><span style=\"--0:#24292E;--1:#E1E4E8\"> { useAttrs, defineOptions } </span><span style=\"--0:#BF3441;--1:#F97583\">from</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">'vue'</span><span style=\"--0:#24292E;--1:#E1E4E8\">;</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">12</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">13</div></div><div class=\"code\"><span style=\"--0:#616972;--1:#99A0A6\">// 禁用根元素自动绑定</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">14</div></div><div class=\"code\"><span style=\"--0:#6F42C1;--1:#B392F0\">defineOptions</span><span style=\"--0:#24292E;--1:#E1E4E8\">({ inheritAttrs: </span><span style=\"--0:#005CC5;--1:#79B8FF\">false</span><span style=\"--0:#24292E;--1:#E1E4E8\"> });</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">15</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">16</div></div><div class=\"code\"><span style=\"--0:#BF3441;--1:#F97583\">const</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">props</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#BF3441;--1:#F97583\">=</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#6F42C1;--1:#B392F0\">defineProps</span><span style=\"--0:#24292E;--1:#E1E4E8\">([</span><span style=\"--0:#032F62;--1:#9ECBFF\">'title'</span><span style=\"--0:#24292E;--1:#E1E4E8\">]);</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">17</div></div><div class=\"code\"><span style=\"--0:#BF3441;--1:#F97583\">const</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">attrs</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#BF3441;--1:#F97583\">=</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#6F42C1;--1:#B392F0\">useAttrs</span><span style=\"--0:#24292E;--1:#E1E4E8\">(); </span><span style=\"--0:#616972;--1:#99A0A6\">// 仍可访问 $attrs，仅禁用自动绑定</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">18</div></div><div class=\"code\"><span style=\"--0:#24292E;--1:#E1E4E8\">&#x3C;/</span><span style=\"--0:#1E7734;--1:#85E89D\">script</span><span style=\"--0:#24292E;--1:#E1E4E8\">></span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div><p>渲染结果：<code>id</code> 和 <code>class</code> 仅绑定到 <code>.content</code>，而非根元素 <code>.wrapper</code>。</p></section><section><h3 id=\"2-多根节点组件的强制手动绑定\">2. 多根节点组件的强制手动绑定<a class=\"anchor\" href=\"#2-多根节点组件的强制手动绑定\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h3><p>Vue3 支持多根节点组件，但此时 <strong><code>$attrs</code> 不会自动绑定到任何节点</strong>，必须手动指定绑定位置，否则会触发警告：</p><div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"html\" class=\"wrap\" style=\"--ecMaxLine:85ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#616972;--1:#99A0A6\">&#x3C;!-- 多根节点组件（正确示例） --></span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">2</div></div><div class=\"code\"><span style=\"--0:#24292E;--1:#E1E4E8\">&#x3C;</span><span style=\"--0:#1E7734;--1:#85E89D\">template</span><span style=\"--0:#24292E;--1:#E1E4E8\">></span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">3</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">  </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">&#x3C;</span><span style=\"--0:#1E7734;--1:#85E89D\">div</span><span style=\"--0:#24292E;--1:#E1E4E8\">>节点1&#x3C;/</span><span style=\"--0:#1E7734;--1:#85E89D\">div</span><span style=\"--0:#24292E;--1:#E1E4E8\">></span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">4</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#616972;--1:#99A0A6\">&#x3C;!-- 手动绑定 $attrs 到需要的节点 --></span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">5</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">  </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">&#x3C;</span><span style=\"--0:#1E7734;--1:#85E89D\">div</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#6F42C1;--1:#B392F0\">v-bind</span><span style=\"--0:#24292E;--1:#E1E4E8\">=</span><span style=\"--0:#032F62;--1:#9ECBFF\">\"$attrs\"</span><span style=\"--0:#24292E;--1:#E1E4E8\">>节点2（接收透传属性）&#x3C;/</span><span style=\"--0:#1E7734;--1:#85E89D\">div</span><span style=\"--0:#24292E;--1:#E1E4E8\">></span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">6</div></div><div class=\"code\"><span style=\"--0:#24292E;--1:#E1E4E8\">&#x3C;/</span><span style=\"--0:#1E7734;--1:#85E89D\">template</span><span style=\"--0:#24292E;--1:#E1E4E8\">></span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">7</div></div><div class=\"code\"><span style=\"--0:#24292E;--1:#E1E4E8\">&#x3C;</span><span style=\"--0:#1E7734;--1:#85E89D\">script</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#6F42C1;--1:#B392F0\">setup</span><span style=\"--0:#24292E;--1:#E1E4E8\">></span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">8</div></div><div class=\"code\"><span style=\"--0:#616972;--1:#99A0A6\">// 若未手动绑定，会触发警告：</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">9</div></div><div class=\"code\"><span style=\"--0:#616972;--1:#99A0A6\">// [Vue warn]: Extraneous non-props attributes were passed but could not be inherited</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">10</div></div><div class=\"code\"><span style=\"--0:#24292E;--1:#E1E4E8\">&#x3C;/</span><span style=\"--0:#1E7734;--1:#85E89D\">script</span><span style=\"--0:#24292E;--1:#E1E4E8\">></span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div></section></section>\n<section><h2 id=\"四嵌套组件的透传\">四、嵌套组件的透传<a class=\"anchor\" href=\"#四嵌套组件的透传\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h2><p>当组件层级超过两层（如 Parent → Middle → Child）时，<code>$attrs</code> <strong>不会自动传递给深层子组件</strong>，需中间组件手动转发。</p><section><h3 id=\"1-未转发导致的属性丢失\">1. 未转发导致的属性丢失<a class=\"anchor\" href=\"#1-未转发导致的属性丢失\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h3><div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"html\" class=\"wrap\" style=\"--ecMaxLine:46ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#616972;--1:#99A0A6\">&#x3C;!-- 三层结构：Parent → Middle → Child --></span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">2</div></div><div class=\"code\"><span style=\"--0:#616972;--1:#99A0A6\">&#x3C;!-- Parent.vue 传递属性：id、class、title --></span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">3</div></div><div class=\"code\"><span style=\"--0:#616972;--1:#99A0A6\">&#x3C;!-- Middle.vue（未转发 $attrs） --></span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">4</div></div><div class=\"code\"><span style=\"--0:#24292E;--1:#E1E4E8\">&#x3C;</span><span style=\"--0:#1E7734;--1:#85E89D\">template</span><span style=\"--0:#24292E;--1:#E1E4E8\">></span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">5</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">  </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">&#x3C;</span><span style=\"--0:#1E7734;--1:#85E89D\">div</span><span style=\"--0:#24292E;--1:#E1E4E8\">></span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">6</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">    </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">&#x3C;</span><span style=\"--0:#1E7734;--1:#85E89D\">h3</span><span style=\"--0:#24292E;--1:#E1E4E8\">>中间组件&#x3C;/</span><span style=\"--0:#1E7734;--1:#85E89D\">h3</span><span style=\"--0:#24292E;--1:#E1E4E8\">></span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">7</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">    </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">&#x3C;</span><span style=\"--0:#B31D28;--0fs:italic;--1:#FDAEB7;--1fs:italic\">Child</span><span style=\"--0:#24292E;--1:#E1E4E8\"> /> </span><span style=\"--0:#616972;--1:#99A0A6\">&#x3C;!-- 未绑定 $attrs，Child 无法接收属性 --></span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">8</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">  </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">&#x3C;/</span><span style=\"--0:#1E7734;--1:#85E89D\">div</span><span style=\"--0:#24292E;--1:#E1E4E8\">></span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">9</div></div><div class=\"code\"><span style=\"--0:#24292E;--1:#E1E4E8\">&#x3C;/</span><span style=\"--0:#1E7734;--1:#85E89D\">template</span><span style=\"--0:#24292E;--1:#E1E4E8\">></span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div><p>此时 Child 组件的 <code>$attrs</code> 为空，无法获取 Parent 传递的属性。</p></section><section><h3 id=\"2-手动转发的两种方式\">2. 手动转发的两种方式<a class=\"anchor\" href=\"#2-手动转发的两种方式\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h3><section><h4 id=\"1全量转发推荐\">（1）全量转发（推荐）<a class=\"anchor\" href=\"#1全量转发推荐\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h4><p>通过 <code>v-bind=\"$attrs\"</code> 将中间组件的 <code>$attrs</code> 全部转发给子组件：</p><div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"html\" class=\"wrap\" style=\"--ecMaxLine:50ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#616972;--1:#99A0A6\">&#x3C;!-- Middle.vue（全量转发） --></span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">2</div></div><div class=\"code\"><span style=\"--0:#24292E;--1:#E1E4E8\">&#x3C;</span><span style=\"--0:#1E7734;--1:#85E89D\">template</span><span style=\"--0:#24292E;--1:#E1E4E8\">></span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">3</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">  </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">&#x3C;</span><span style=\"--0:#1E7734;--1:#85E89D\">div</span><span style=\"--0:#24292E;--1:#E1E4E8\">></span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">4</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">    </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">&#x3C;</span><span style=\"--0:#1E7734;--1:#85E89D\">h3</span><span style=\"--0:#24292E;--1:#E1E4E8\">>中间组件&#x3C;/</span><span style=\"--0:#1E7734;--1:#85E89D\">h3</span><span style=\"--0:#24292E;--1:#E1E4E8\">></span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">5</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">    </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">&#x3C;</span><span style=\"--0:#B31D28;--0fs:italic;--1:#FDAEB7;--1fs:italic\">Child</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#6F42C1;--1:#B392F0\">v-bind</span><span style=\"--0:#24292E;--1:#E1E4E8\">=</span><span style=\"--0:#032F62;--1:#9ECBFF\">\"$attrs\"</span><span style=\"--0:#24292E;--1:#E1E4E8\"> /> </span><span style=\"--0:#616972;--1:#99A0A6\">&#x3C;!-- 关键：转发所有透传属性 --></span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">6</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">  </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">&#x3C;/</span><span style=\"--0:#1E7734;--1:#85E89D\">div</span><span style=\"--0:#24292E;--1:#E1E4E8\">></span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">7</div></div><div class=\"code\"><span style=\"--0:#24292E;--1:#E1E4E8\">&#x3C;/</span><span style=\"--0:#1E7734;--1:#85E89D\">template</span><span style=\"--0:#24292E;--1:#E1E4E8\">></span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div></section><section><h4 id=\"2选择性转发\">（2）选择性转发<a class=\"anchor\" href=\"#2选择性转发\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h4><p>如需过滤或加工属性，可从 <code>$attrs</code> 中提取指定属性转发：</p><div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"html\" class=\"wrap\" style=\"--ecMaxLine:56ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#616972;--1:#99A0A6\">&#x3C;!-- Middle.vue（选择性转发） --></span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">2</div></div><div class=\"code\"><span style=\"--0:#24292E;--1:#E1E4E8\">&#x3C;</span><span style=\"--0:#1E7734;--1:#85E89D\">template</span><span style=\"--0:#24292E;--1:#E1E4E8\">></span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">3</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">  </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">&#x3C;</span><span style=\"--0:#1E7734;--1:#85E89D\">div</span><span style=\"--0:#24292E;--1:#E1E4E8\">></span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">4</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">    </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">&#x3C;</span><span style=\"--0:#1E7734;--1:#85E89D\">h3</span><span style=\"--0:#24292E;--1:#E1E4E8\">>中间组件&#x3C;/</span><span style=\"--0:#1E7734;--1:#85E89D\">h3</span><span style=\"--0:#24292E;--1:#E1E4E8\">></span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">5</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">    </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">&#x3C;</span><span style=\"--0:#B31D28;--0fs:italic;--1:#FDAEB7;--1fs:italic\">Child</span></div></div><div class=\"ec-line\" style=\"--ecIndent:6ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">6</div></div><div class=\"code\"><span class=\"indent\">      </span><span style=\"--0:#6F42C1;--1:#B392F0\">:title</span><span style=\"--0:#24292E;--1:#E1E4E8\">=</span><span style=\"--0:#032F62;--1:#9ECBFF\">\"attrs.title?.toUpperCase()\"</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#B31D28;--0fs:italic;--1:#FDAEB7;--1fs:italic\">&#x3C;!--</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#6F42C1;--1:#B392F0\">加工后转发</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#6F42C1;--1:#B392F0\">--</span><span style=\"--0:#24292E;--1:#E1E4E8\">></span></div></div><div class=\"ec-line\" style=\"--ecIndent:6ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">7</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">      </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">:desc=\"attrs.desc\"</span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">8</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">    </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">/></span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">9</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">  </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">&#x3C;/</span><span style=\"--0:#1E7734;--1:#85E89D\">div</span><span style=\"--0:#24292E;--1:#E1E4E8\">></span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">10</div></div><div class=\"code\"><span style=\"--0:#24292E;--1:#E1E4E8\">&#x3C;/</span><span style=\"--0:#1E7734;--1:#85E89D\">template</span><span style=\"--0:#24292E;--1:#E1E4E8\">></span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">11</div></div><div class=\"code\"><span style=\"--0:#24292E;--1:#E1E4E8\">&#x3C;</span><span style=\"--0:#1E7734;--1:#85E89D\">script</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#6F42C1;--1:#B392F0\">setup</span><span style=\"--0:#24292E;--1:#E1E4E8\">></span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">12</div></div><div class=\"code\"><span style=\"--0:#BF3441;--1:#F97583\">import</span><span style=\"--0:#24292E;--1:#E1E4E8\"> { useAttrs } </span><span style=\"--0:#BF3441;--1:#F97583\">from</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">'vue'</span><span style=\"--0:#24292E;--1:#E1E4E8\">;</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">13</div></div><div class=\"code\"><span style=\"--0:#BF3441;--1:#F97583\">const</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">attrs</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#BF3441;--1:#F97583\">=</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#6F42C1;--1:#B392F0\">useAttrs</span><span style=\"--0:#24292E;--1:#E1E4E8\">();</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">14</div></div><div class=\"code\"><span style=\"--0:#24292E;--1:#E1E4E8\">&#x3C;/</span><span style=\"--0:#1E7734;--1:#85E89D\">script</span><span style=\"--0:#24292E;--1:#E1E4E8\">></span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div></section></section><section><h3 id=\"3-中间组件声明-props-后的透传规则\">3. 中间组件声明 props 后的透传规则<a class=\"anchor\" href=\"#3-中间组件声明-props-后的透传规则\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h3><p>若中间组件通过 <code>defineProps</code> 声明了部分属性，这些属性会从 <code>$attrs</code> 中移除，转发时仅包含未声明的剩余属性：</p><div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"html\" class=\"wrap\" style=\"--ecMaxLine:57ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#616972;--1:#99A0A6\">&#x3C;!-- Middle.vue（声明了 title 为 props） --></span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">2</div></div><div class=\"code\"><span style=\"--0:#24292E;--1:#E1E4E8\">&#x3C;</span><span style=\"--0:#1E7734;--1:#85E89D\">script</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#6F42C1;--1:#B392F0\">setup</span><span style=\"--0:#24292E;--1:#E1E4E8\">></span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">3</div></div><div class=\"code\"><span style=\"--0:#BF3441;--1:#F97583\">const</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">props</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#BF3441;--1:#F97583\">=</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#6F42C1;--1:#B392F0\">defineProps</span><span style=\"--0:#24292E;--1:#E1E4E8\">([</span><span style=\"--0:#032F62;--1:#9ECBFF\">'title'</span><span style=\"--0:#24292E;--1:#E1E4E8\">]); </span><span style=\"--0:#616972;--1:#99A0A6\">// title 被声明为 props</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">4</div></div><div class=\"code\"><span style=\"--0:#BF3441;--1:#F97583\">const</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">attrs</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#BF3441;--1:#F97583\">=</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#6F42C1;--1:#B392F0\">useAttrs</span><span style=\"--0:#24292E;--1:#E1E4E8\">(); </span><span style=\"--0:#616972;--1:#99A0A6\">// attrs 仅包含未声明的 id、class、desc</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">5</div></div><div class=\"code\"><span style=\"--0:#24292E;--1:#E1E4E8\">&#x3C;/</span><span style=\"--0:#1E7734;--1:#85E89D\">script</span><span style=\"--0:#24292E;--1:#E1E4E8\">></span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div><p>此时 <code>v-bind=\"$attrs\"</code> 仅转发 <code>id</code>、<code>class</code>、<code>desc</code>，若 Child 需要 <code>title</code>，需中间组件手动传递：<code>&#x3C;Child :title=\"title\" v-bind=\"$attrs\" /></code>。</p></section></section>\n<section><h2 id=\"五v-on-监听器继承\">五、v-on 监听器继承<a class=\"anchor\" href=\"#五v-on-监听器继承\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h2><p>Vue3 中，<code>$attrs</code> 不仅包含属性，还包含父组件传递的 <strong>v-on 事件监听器</strong>（事件以 <code>onXxx</code> 形式存在，如 <code>@click</code> 对应 <code>attrs.onClick</code>）。转发 <code>$attrs</code> 时，事件会自动同步传递。</p><div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"html\" class=\"wrap\" style=\"--ecMaxLine:69ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#616972;--1:#99A0A6\">&#x3C;!-- 父组件传递事件 --></span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">2</div></div><div class=\"code\"><span style=\"--0:#24292E;--1:#E1E4E8\">&#x3C;</span><span style=\"--0:#1E7734;--1:#85E89D\">template</span><span style=\"--0:#24292E;--1:#E1E4E8\">></span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">3</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">  </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">&#x3C;</span><span style=\"--0:#B31D28;--0fs:italic;--1:#FDAEB7;--1fs:italic\">Child</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#6F42C1;--1:#B392F0\">@click</span><span style=\"--0:#24292E;--1:#E1E4E8\">=</span><span style=\"--0:#032F62;--1:#9ECBFF\">\"handleClick\"</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#6F42C1;--1:#B392F0\">@input</span><span style=\"--0:#24292E;--1:#E1E4E8\">=</span><span style=\"--0:#032F62;--1:#9ECBFF\">\"handleInput\"</span><span style=\"--0:#24292E;--1:#E1E4E8\"> /></span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">4</div></div><div class=\"code\"><span style=\"--0:#24292E;--1:#E1E4E8\">&#x3C;/</span><span style=\"--0:#1E7734;--1:#85E89D\">template</span><span style=\"--0:#24292E;--1:#E1E4E8\">></span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">5</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">6</div></div><div class=\"code\"><span style=\"--0:#616972;--1:#99A0A6\">&#x3C;!-- 子组件接收并转发事件 --></span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">7</div></div><div class=\"code\"><span style=\"--0:#24292E;--1:#E1E4E8\">&#x3C;</span><span style=\"--0:#1E7734;--1:#85E89D\">template</span><span style=\"--0:#24292E;--1:#E1E4E8\">></span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">8</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">  </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">&#x3C;</span><span style=\"--0:#1E7734;--1:#85E89D\">button</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#6F42C1;--1:#B392F0\">v-bind</span><span style=\"--0:#24292E;--1:#E1E4E8\">=</span><span style=\"--0:#032F62;--1:#9ECBFF\">\"$attrs\"</span><span style=\"--0:#24292E;--1:#E1E4E8\">>点击我&#x3C;/</span><span style=\"--0:#1E7734;--1:#85E89D\">button</span><span style=\"--0:#24292E;--1:#E1E4E8\">> </span><span style=\"--0:#616972;--1:#99A0A6\">&#x3C;!-- 点击会触发父组件的 handleClick --></span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">9</div></div><div class=\"code\"><span style=\"--0:#24292E;--1:#E1E4E8\">&#x3C;/</span><span style=\"--0:#1E7734;--1:#85E89D\">template</span><span style=\"--0:#24292E;--1:#E1E4E8\">></span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">10</div></div><div class=\"code\"><span style=\"--0:#24292E;--1:#E1E4E8\">&#x3C;</span><span style=\"--0:#1E7734;--1:#85E89D\">script</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#6F42C1;--1:#B392F0\">setup</span><span style=\"--0:#24292E;--1:#E1E4E8\">></span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">11</div></div><div class=\"code\"><span style=\"--0:#BF3441;--1:#F97583\">import</span><span style=\"--0:#24292E;--1:#E1E4E8\"> { useAttrs } </span><span style=\"--0:#BF3441;--1:#F97583\">from</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">'vue'</span><span style=\"--0:#24292E;--1:#E1E4E8\">;</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">12</div></div><div class=\"code\"><span style=\"--0:#BF3441;--1:#F97583\">const</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">attrs</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#BF3441;--1:#F97583\">=</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#6F42C1;--1:#B392F0\">useAttrs</span><span style=\"--0:#24292E;--1:#E1E4E8\">();</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">13</div></div><div class=\"code\"><span style=\"--0:#24292E;--1:#E1E4E8\">console.</span><span style=\"--0:#6F42C1;--1:#B392F0\">log</span><span style=\"--0:#24292E;--1:#E1E4E8\">(attrs); </span><span style=\"--0:#616972;--1:#99A0A6\">// { onClick: ƒ, onInput: ƒ }</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">14</div></div><div class=\"code\"><span style=\"--0:#24292E;--1:#E1E4E8\">&#x3C;/</span><span style=\"--0:#1E7734;--1:#85E89D\">script</span><span style=\"--0:#24292E;--1:#E1E4E8\">></span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div><blockquote>\n<p>与 Vue2 区别：Vue2 中事件需通过 <code>$listeners</code> 单独转发，Vue3 中事件统一归入 <code>$attrs</code>，简化了转发逻辑。</p>\n</blockquote></section>\n<section><h2 id=\"六适用场景与不适用场景\">六、适用场景与不适用场景<a class=\"anchor\" href=\"#六适用场景与不适用场景\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h2><section><h3 id=\"适用场景\">适用场景<a class=\"anchor\" href=\"#适用场景\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h3><ol>\n<li>\n<p><strong>封装第三方组件</strong>\n无需声明第三方组件的所有属性，通过 <code>v-bind=\"$attrs\"</code> 自动转发，减少代码冗余：</p>\n<div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"html\" class=\"wrap\" style=\"--ecMaxLine:51ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#616972;--1:#99A0A6\">&#x3C;!-- 封装 Element Plus 的 ElInput --></span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">2</div></div><div class=\"code\"><span style=\"--0:#24292E;--1:#E1E4E8\">&#x3C;</span><span style=\"--0:#1E7734;--1:#85E89D\">template</span><span style=\"--0:#24292E;--1:#E1E4E8\">></span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">3</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">  </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">&#x3C;</span><span style=\"--0:#1E7734;--1:#85E89D\">el-input</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#6F42C1;--1:#B392F0\">v-bind</span><span style=\"--0:#24292E;--1:#E1E4E8\">=</span><span style=\"--0:#032F62;--1:#9ECBFF\">\"$attrs\"</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#6F42C1;--1:#B392F0\">v-model</span><span style=\"--0:#24292E;--1:#E1E4E8\">=</span><span style=\"--0:#032F62;--1:#9ECBFF\">\"modelValue\"</span><span style=\"--0:#24292E;--1:#E1E4E8\"> /></span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">4</div></div><div class=\"code\"><span style=\"--0:#24292E;--1:#E1E4E8\">&#x3C;/</span><span style=\"--0:#1E7734;--1:#85E89D\">template</span><span style=\"--0:#24292E;--1:#E1E4E8\">></span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">5</div></div><div class=\"code\"><span style=\"--0:#24292E;--1:#E1E4E8\">&#x3C;</span><span style=\"--0:#1E7734;--1:#85E89D\">script</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#6F42C1;--1:#B392F0\">setup</span><span style=\"--0:#24292E;--1:#E1E4E8\">></span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">6</div></div><div class=\"code\"><span style=\"--0:#BF3441;--1:#F97583\">const</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">props</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#BF3441;--1:#F97583\">=</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#6F42C1;--1:#B392F0\">defineProps</span><span style=\"--0:#24292E;--1:#E1E4E8\">([</span><span style=\"--0:#032F62;--1:#9ECBFF\">'modelValue'</span><span style=\"--0:#24292E;--1:#E1E4E8\">]);</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">7</div></div><div class=\"code\"><span style=\"--0:#24292E;--1:#E1E4E8\">&#x3C;/</span><span style=\"--0:#1E7734;--1:#85E89D\">script</span><span style=\"--0:#24292E;--1:#E1E4E8\">></span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div>\n</li>\n<li>\n<p><strong>多层级属性透传</strong>\n超过 2 层的组件结构（如 Page→Card→Form→Input），用 <code>v-bind=\"$attrs\"</code> 转发比每层声明 props 更高效。</p>\n</li>\n<li>\n<p><strong>动态属性传递</strong>\n接收不确定的动态属性（如后端配置的表单属性），<code>$attrs</code> 可作为灵活的容器。</p>\n</li>\n</ol></section><section><h3 id=\"不适用场景\">不适用场景<a class=\"anchor\" href=\"#不适用场景\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h3><ol>\n<li>\n<p><strong>需要类型校验</strong>\n<code>$attrs</code> 无类型校验，需严格校验时用 props：</p>\n<div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"javascript\" class=\"wrap\" style=\"--ecMaxLine:39ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#616972;--1:#99A0A6\">// 推荐：用 props 做类型校验</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">2</div></div><div class=\"code\"><span style=\"--0:#BF3441;--1:#F97583\">const</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">props</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#BF3441;--1:#F97583\">=</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#6F42C1;--1:#B392F0\">defineProps</span><span style=\"--0:#24292E;--1:#E1E4E8\">({</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">3</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">  </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">age: { type: Number, required: </span><span style=\"--0:#005CC5;--1:#79B8FF\">true</span><span style=\"--0:#24292E;--1:#E1E4E8\"> }</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">4</div></div><div class=\"code\"><span style=\"--0:#24292E;--1:#E1E4E8\">});</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div>\n</li>\n<li>\n<p><strong>需要默认值</strong>\n<code>$attrs</code> 无法设置默认值，需默认值时用 props 的 <code>default</code> 选项。</p>\n</li>\n<li>\n<p><strong>属性需加工处理</strong>\n需修改属性值（如格式化）时，建议通过 props 接收后加工再传递。</p>\n</li>\n</ol></section></section>\n<section><h2 id=\"七常见问题与解决方案\">七、常见问题与解决方案<a class=\"anchor\" href=\"#七常见问题与解决方案\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h2><section><h3 id=\"1-样式冲突classstyle-自动合并\">1. 样式冲突（class/style 自动合并）<a class=\"anchor\" href=\"#1-样式冲突classstyle-自动合并\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h3><p><strong>问题</strong>：透传的 <code>class</code>/<code>style</code> 与子组件根元素样式冲突。\n<strong>解决方案</strong>：禁用自动绑定，手动控制绑定位置：</p><div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"html\" class=\"wrap\" style=\"--ecMaxLine:56ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#24292E;--1:#E1E4E8\">&#x3C;</span><span style=\"--0:#1E7734;--1:#85E89D\">template</span><span style=\"--0:#24292E;--1:#E1E4E8\">></span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">2</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">  </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">&#x3C;</span><span style=\"--0:#1E7734;--1:#85E89D\">div</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#6F42C1;--1:#B392F0\">class</span><span style=\"--0:#24292E;--1:#E1E4E8\">=</span><span style=\"--0:#032F62;--1:#9ECBFF\">\"parent\"</span><span style=\"--0:#24292E;--1:#E1E4E8\">></span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">3</div></div><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#616972;--1:#99A0A6\">&#x3C;!-- 仅将非样式属性转发给子组件 --></span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">4</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">    </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">&#x3C;</span><span style=\"--0:#B31D28;--0fs:italic;--1:#FDAEB7;--1fs:italic\">Child</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#6F42C1;--1:#B392F0\">v-bind</span><span style=\"--0:#24292E;--1:#E1E4E8\">=</span><span style=\"--0:#032F62;--1:#9ECBFF\">\"filterAttrs\"</span><span style=\"--0:#24292E;--1:#E1E4E8\"> /></span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">5</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">  </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">&#x3C;/</span><span style=\"--0:#1E7734;--1:#85E89D\">div</span><span style=\"--0:#24292E;--1:#E1E4E8\">></span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">6</div></div><div class=\"code\"><span style=\"--0:#24292E;--1:#E1E4E8\">&#x3C;/</span><span style=\"--0:#1E7734;--1:#85E89D\">template</span><span style=\"--0:#24292E;--1:#E1E4E8\">></span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">7</div></div><div class=\"code\"><span style=\"--0:#24292E;--1:#E1E4E8\">&#x3C;</span><span style=\"--0:#1E7734;--1:#85E89D\">script</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#6F42C1;--1:#B392F0\">setup</span><span style=\"--0:#24292E;--1:#E1E4E8\">></span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">8</div></div><div class=\"code\"><span style=\"--0:#BF3441;--1:#F97583\">import</span><span style=\"--0:#24292E;--1:#E1E4E8\"> { useAttrs, computed, defineOptions } </span><span style=\"--0:#BF3441;--1:#F97583\">from</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">'vue'</span><span style=\"--0:#24292E;--1:#E1E4E8\">;</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">9</div></div><div class=\"code\"><span style=\"--0:#6F42C1;--1:#B392F0\">defineOptions</span><span style=\"--0:#24292E;--1:#E1E4E8\">({ inheritAttrs: </span><span style=\"--0:#005CC5;--1:#79B8FF\">false</span><span style=\"--0:#24292E;--1:#E1E4E8\"> }); </span><span style=\"--0:#616972;--1:#99A0A6\">// 禁用根元素自动绑定</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">10</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">11</div></div><div class=\"code\"><span style=\"--0:#BF3441;--1:#F97583\">const</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">attrs</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#BF3441;--1:#F97583\">=</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#6F42C1;--1:#B392F0\">useAttrs</span><span style=\"--0:#24292E;--1:#E1E4E8\">();</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">12</div></div><div class=\"code\"><span style=\"--0:#616972;--1:#99A0A6\">// 过滤 class 和 style</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">13</div></div><div class=\"code\"><span style=\"--0:#BF3441;--1:#F97583\">const</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">filterAttrs</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#BF3441;--1:#F97583\">=</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#6F42C1;--1:#B392F0\">computed</span><span style=\"--0:#24292E;--1:#E1E4E8\">(() </span><span style=\"--0:#BF3441;--1:#F97583\">=></span><span style=\"--0:#24292E;--1:#E1E4E8\"> {</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">14</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#BF3441;--1:#F97583\">const</span><span style=\"--0:#24292E;--1:#E1E4E8\"> { </span><span style=\"--0:#AE4B07;--1:#FFAB70\">class</span><span style=\"--0:#24292E;--1:#E1E4E8\">: </span><span style=\"--0:#005CC5;--1:#79B8FF\">_</span><span style=\"--0:#24292E;--1:#E1E4E8\">, </span><span style=\"--0:#AE4B07;--1:#FFAB70\">style</span><span style=\"--0:#24292E;--1:#E1E4E8\">: </span><span style=\"--0:#005CC5;--1:#79B8FF\">__</span><span style=\"--0:#24292E;--1:#E1E4E8\">, </span><span style=\"--0:#BF3441;--1:#F97583\">...</span><span style=\"--0:#005CC5;--1:#79B8FF\">rest</span><span style=\"--0:#24292E;--1:#E1E4E8\"> } </span><span style=\"--0:#BF3441;--1:#F97583\">=</span><span style=\"--0:#24292E;--1:#E1E4E8\"> attrs;</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">15</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#BF3441;--1:#F97583\">return</span><span style=\"--0:#24292E;--1:#E1E4E8\"> rest;</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">16</div></div><div class=\"code\"><span style=\"--0:#24292E;--1:#E1E4E8\">});</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">17</div></div><div class=\"code\"><span style=\"--0:#24292E;--1:#E1E4E8\">&#x3C;/</span><span style=\"--0:#1E7734;--1:#85E89D\">script</span><span style=\"--0:#24292E;--1:#E1E4E8\">></span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div></section><section><h3 id=\"2-中间组件声明的-props-无法传递到子组件\">2. 中间组件声明的 props 无法传递到子组件<a class=\"anchor\" href=\"#2-中间组件声明的-props-无法传递到子组件\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h3><p><strong>问题</strong>：中间组件声明的 props 不在 <code>$attrs</code> 中，导致子组件无法获取。\n<strong>解决方案</strong>：中间组件手动传递已声明的 props：</p><div class=\"expressive-code\"><figure class=\"frame has-title\"><figcaption class=\"header\"><span class=\"title\">Middle.vue</span></figcaption><pre data-language=\"html\" class=\"wrap\" style=\"--ecMaxLine:62ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#24292E;--1:#E1E4E8\">&#x3C;</span><span style=\"--0:#1E7734;--1:#85E89D\">template</span><span style=\"--0:#24292E;--1:#E1E4E8\">></span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">2</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">  </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">&#x3C;</span><span style=\"--0:#B31D28;--0fs:italic;--1:#FDAEB7;--1fs:italic\">Child</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#6F42C1;--1:#B392F0\">v-bind</span><span style=\"--0:#24292E;--1:#E1E4E8\">=</span><span style=\"--0:#032F62;--1:#9ECBFF\">\"$attrs\"</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#6F42C1;--1:#B392F0\">:title</span><span style=\"--0:#24292E;--1:#E1E4E8\">=</span><span style=\"--0:#032F62;--1:#9ECBFF\">\"title\"</span><span style=\"--0:#24292E;--1:#E1E4E8\"> /> </span><span style=\"--0:#616972;--1:#99A0A6\">&#x3C;!-- 手动传递 title --></span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">3</div></div><div class=\"code\"><span style=\"--0:#24292E;--1:#E1E4E8\">&#x3C;/</span><span style=\"--0:#1E7734;--1:#85E89D\">template</span><span style=\"--0:#24292E;--1:#E1E4E8\">></span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">4</div></div><div class=\"code\"><span style=\"--0:#24292E;--1:#E1E4E8\">&#x3C;</span><span style=\"--0:#1E7734;--1:#85E89D\">script</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#6F42C1;--1:#B392F0\">setup</span><span style=\"--0:#24292E;--1:#E1E4E8\">></span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">5</div></div><div class=\"code\"><span style=\"--0:#BF3441;--1:#F97583\">const</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">props</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#BF3441;--1:#F97583\">=</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#6F42C1;--1:#B392F0\">defineProps</span><span style=\"--0:#24292E;--1:#E1E4E8\">([</span><span style=\"--0:#032F62;--1:#9ECBFF\">'title'</span><span style=\"--0:#24292E;--1:#E1E4E8\">]); </span><span style=\"--0:#616972;--1:#99A0A6\">// title 被声明为 props</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">6</div></div><div class=\"code\"><span style=\"--0:#24292E;--1:#E1E4E8\">&#x3C;/</span><span style=\"--0:#1E7734;--1:#85E89D\">script</span><span style=\"--0:#24292E;--1:#E1E4E8\">></span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div></section></section>\n<section><h2 id=\"总结\">总结<a class=\"anchor\" href=\"#总结\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h2><p>透传 Attributes（<code>$attrs</code>）是 Vue3 组件通信的重要补充，核心价值在于<strong>简化未声明属性 / 事件的传递</strong>。关键知识点：</p><ul>\n<li><code>$attrs</code> 包含未被 props 声明的属性和事件，需通过 <code>useAttrs()</code> 或 <code>this.$attrs</code> 访问；</li>\n<li>单根组件默认自动绑定 <code>$attrs</code> 到根元素，<code>inheritAttrs: false</code> 可禁用此行为；</li>\n<li>多根组件必须手动绑定 <code>$attrs</code>，否则会触发警告；</li>\n<li>嵌套组件需通过 <code>v-bind=\"$attrs\"</code> 手动转发 <code>$attrs</code>；</li>\n<li>适合封装第三方组件、多层透传和动态属性场景，不适合需要类型校验或默认值的场景。</li>\n</ul><p>通过合理使用 <code>$attrs</code>，可大幅提升组件的灵活性和开发效率。</p><blockquote>\n<p>官方文档完整参考：<a href=\"https://cn.vuejs.org/guide/components/attrs.html\">透传 Attributes | Vue.js</a></p>\n</blockquote></section>","metadata":{"headings":[{"depth":2,"slug":"一什么是透传-attributes","text":"一、什么是透传 Attributes？#"},{"depth":3,"slug":"访问-attrs-的两种方式","text":"访问 $attrs 的两种方式#"},{"depth":2,"slug":"二透传-attributes-的基础特性","text":"二、透传 Attributes 的基础特性#"},{"depth":3,"slug":"1-自动收集未声明属性","text":"1. 自动收集未声明属性#"},{"depth":3,"slug":"2-自动绑定到根元素","text":"2. 自动绑定到根元素#"},{"depth":3,"slug":"3-class-与-style-的特殊处理","text":"3. class 与 style 的特殊处理#"},{"depth":2,"slug":"三控制透传行为inheritattrs-选项","text":"三、控制透传行为：inheritAttrs 选项#"},{"depth":3,"slug":"1-绑定到非根元素","text":"1. 绑定到非根元素#"},{"depth":3,"slug":"2-多根节点组件的强制手动绑定","text":"2. 多根节点组件的强制手动绑定#"},{"depth":2,"slug":"四嵌套组件的透传","text":"四、嵌套组件的透传#"},{"depth":3,"slug":"1-未转发导致的属性丢失","text":"1. 未转发导致的属性丢失#"},{"depth":3,"slug":"2-手动转发的两种方式","text":"2. 手动转发的两种方式#"},{"depth":4,"slug":"1全量转发推荐","text":"（1）全量转发（推荐）#"},{"depth":4,"slug":"2选择性转发","text":"（2）选择性转发#"},{"depth":3,"slug":"3-中间组件声明-props-后的透传规则","text":"3. 中间组件声明 props 后的透传规则#"},{"depth":2,"slug":"五v-on-监听器继承","text":"五、v-on 监听器继承#"},{"depth":2,"slug":"六适用场景与不适用场景","text":"六、适用场景与不适用场景#"},{"depth":3,"slug":"适用场景","text":"适用场景#"},{"depth":3,"slug":"不适用场景","text":"不适用场景#"},{"depth":2,"slug":"七常见问题与解决方案","text":"七、常见问题与解决方案#"},{"depth":3,"slug":"1-样式冲突classstyle-自动合并","text":"1. 样式冲突（class/style 自动合并）#"},{"depth":3,"slug":"2-中间组件声明的-props-无法传递到子组件","text":"2. 中间组件声明的 props 无法传递到子组件#"},{"depth":2,"slug":"总结","text":"总结#"}],"localImagePaths":[],"remoteImagePaths":[],"frontmatter":{"title":"Vue3 笔记：透传 Attributes","published":"2025-08-22T00:00:00.000Z","image":"./vue.png","category":"Vue","tags":["Vue","学习笔记"],"minutes":11,"words":2129,"excerpt":"在 Vue 组件开发中，属性传递是核心场景之一。props 适用于明确声明的属性，但当需要灵活传递未声明的属性或事件、封装第三方组件时，透传 Attributes 成为更高效的解决方案。"},"imagePaths":[]}},"collection":"posts"}],"2025-08-18":[{"id":"vue/vue3-深入响应式系统","data":{"title":"Vue3 笔记：深入响应式系统","published":"2025-08-18T00:00:00.000Z","draft":false,"description":"","image":"./vue.png","tags":["Vue","学习笔记"],"category":"Vue","lang":"","pinned":false,"author":"","sourceLink":"","licenseName":"","licenseUrl":"","encrypted":false,"password":"","prevTitle":"Vue3 笔记：响应式基础","prevSlug":"vue/vue3-响应式基础","nextTitle":"Vue3 笔记：透传 Attributes","nextSlug":"vue/vue3-透传attributes"},"body":"## 什么是响应性\n\n响应性是一种声明式处理变化的编程范式：当依赖数据变化时，依赖其计算的结果会自动更新。例如 Excel 中单元格通过公式关联，修改源单元格时目标单元格自动更新；而 JavaScript 默认不具备此特性，需通过特定机制实现。\n\n官方文档：[深入响应式系统 | Vue.js (vuejs.org)](https://cn.vuejs.org/guide/extras/reactivity-in-depth.html#runtime-vs-compile-time-reactivity)\n\n## Vue 中响应性的实现原理\n\nVue 通过拦截对象属性的读写操作，追踪依赖并在数据变化时触发更新，核心依赖**Proxy**（用于`reactive`）和**getter/setter**（用于`ref`）实现。\n\n### 1. 响应式对象的创建\n\n- **`reactive()`实现**：通过 Proxy 创建对象代理，拦截属性的`get`（读取）和`set`（修改）操作：\n\n  ```js\n  function reactive(obj) {\n    return new Proxy(obj, {\n      get(target, key) {\n        track(target, key); // 追踪依赖\n        return target[key];\n      },\n      set(target, key, value) {\n        target[key] = value;\n        trigger(target, key); // 触发更新\n      }\n    });\n  }\n  ```\n\n- **`ref()`实现**：通过对象的`getter/setter`拦截`value`属性的读写（用于原始值或非对象值）：\n\n  ```js\n  function ref(value) {\n    const refObject = {\n      get value() {\n        track(refObject, 'value'); // 追踪依赖\n        return value;\n      },\n      set value(newValue) {\n        value = newValue;\n        trigger(refObject, 'value'); // 触发更新\n      }\n    };\n    return refObject;\n  }\n  ```\n\n### 2. 依赖追踪（`track(target, key)`）与更新触发（`trigger(target, key)`）的详细机制\n\n在 Vue 的响应式系统中，`track()` 和 `trigger()` 是实现 “数据变化自动触发更新” 的核心函数。前者负责记录 “谁依赖了数据”，后者负责在数据变化时 “通知依赖者更新”，二者配合完成从数据追踪到副作用执行的闭环。\n\n#### （1）依赖追踪：`track(target, key)` 的作用与实现细节\n\n`track()` 的核心任务是：**当响应式数据的属性被读取时，记录当前正在运行的 “副作用”（effect），并将其与该属性关联起来**，以便后续数据变化时能精准触发这个副作用。\n\n- **触发时机**：`track()` 会在响应式对象的属性被访问（即触发 `get` 拦截器）时调用。例如：\n\n  - 访问 `reactive` 对象的属性（如 `obj.foo`）时，Proxy 的 `get` 方法会调用 `track(obj, 'foo')`。\n  - 访问 `ref` 的 `value` 属性（如 `count.value`）时，`get value()` 会调用 `track(refObject, 'value')`。\n\n- **核心逻辑**：\n\n  ```js\n  // 全局变量：当前正在运行的副作用（仅在副作用执行期间有效）\n  let activeEffect;\n  \n  function track(target, key) {\n    // 只有当存在活跃的副作用时才进行追踪\n    if (activeEffect) {\n      // 1. 查找目标对象 target 中 key 对应的副作用集合\n      const effects = getSubscribersForProperty(target, key);\n      // 2. 将当前活跃的副作用添加到该集合中\n      effects.add(activeEffect);\n    }\n  }\n  ```\n\n- **依赖存储结构**：`WeakMap<target, Map<key, Set<effect>>>`\n  `track()` 需要一个全局的数据结构来保存 “目标对象→属性→副作用集合” 的映射关系，具体结构为：\n\n  - **外层：`WeakMap<target, Map>`**：键是响应式对象（`target`），值是一个 Map（存储该对象所有属性的副作用）。\n  - **中层：`Map<key, Set<effect>>`**：键是对象的属性名（`key`），值是一个 Set（存储依赖该属性的所有副作用）。\n  - **内层：`Set<effect>`**：存储依赖该属性的所有副作用函数（确保副作用不重复）。\n\n  `getSubscribersForProperty(target, key)` 函数的作用就是根据这个结构查找或创建副作用集合：\n\n  ```js\n  // 伪代码：获取属性对应的副作用集合\n  function getSubscribersForProperty(target, key) {\n    // 1. 为目标对象创建一个 Map（若不存在）\n    const targetMap = globalWeakMap.get(target) || new Map();\n    if (!globalWeakMap.has(target)) {\n      globalWeakMap.set(target, targetMap);\n    }\n    // 2. 为属性创建一个 Set（若不存在）\n    const effectSet = targetMap.get(key) || new Set();\n    if (!targetMap.has(key)) {\n      targetMap.set(key, effectSet);\n    }\n    return effectSet;\n  }\n  ```\n\n- **关键：`activeEffect` 的作用**：`activeEffect` 是一个全局变量，仅在副作用函数执行期间被赋值为当前副作用。这使得 `track()` 能精准识别 “谁正在依赖这个属性”，并将其加入依赖集合。\n\n#### （2）更新触发：`trigger(target, key)` 的作用与实现细节\n\n`trigger()` 的核心任务是：**当响应式数据的属性被修改时，找到该属性的所有依赖副作用，并执行这些副作用**，从而实现 “数据变化→自动更新”。\n\n- **触发时机**：`trigger()` 会在响应式对象的属性被修改（即触发 `set` 拦截器）时调用。例如：\n\n  - 修改 `reactive` 对象的属性（如 `obj.foo = 2`）时，Proxy 的 `set` 方法会调用 `trigger(obj, 'foo')`。\n  - 修改 `ref` 的 `value` 属性（如 `count.value = 2`）时，`set value(newValue)` 会调用 `trigger(refObject, 'value')`。\n\n- **核心逻辑**：\n\n  ```js\n  function trigger(target, key) {\n    // 1. 查找目标对象 target 中 key 对应的副作用集合\n    const effects = getSubscribersForProperty(target, key);\n    // 2. 执行所有副作用（重新运行依赖该属性的代码）\n    effects.forEach((effect) => effect());\n  }\n  ```\n\n- **执行副作用的意义**：副作用函数通常包含依赖数据的计算或操作（如更新 DOM、计算属性值等）。当数据变化时，重新执行副作用能确保这些操作基于最新数据执行，从而保持视图或计算结果与数据的同步。例如，在组件渲染场景中，副作用函数是组件的渲染函数：当数据变化时，`trigger()` 会触发渲染函数重新执行，生成新的虚拟 DOM 并更新页面。\n\n#### （3）`track()` 与 `trigger()` 的协同流程示例\n\n以一个简单的响应式场景为例，完整流程如下：\n\n1. **初始化响应式数据**：\n\n   ```js\n   const count = ref(0); // 创建 ref，内部通过 getter/setter 拦截 value 访问\n   ```\n\n2. **创建响应式副作用**：\n\n   ```js\n   watchEffect(() => {\n     // 副作用函数：依赖 count.value，用于更新 DOM\n     document.body.innerHTML = `Count: ${count.value}`;\n   });\n   ```\n\n   - `watchEffect` 会包装副作用函数，执行前将其设为 `activeEffect`（`activeEffect = 当前副作用`）。\n   - 执行副作用时，访问 `count.value` 触发 `get` 拦截器，调用 `track(count, 'value')`。\n   - `track()` 发现 `activeEffect` 存在，将该副作用加入 `count` 的 `value` 属性对应的副作用集合中。\n\n3. **修改数据触发更新**：\n\n   ```js\n   count.value = 1; // 修改 value，触发 set 拦截器\n   ```\n\n   - `set` 拦截器调用 `trigger(count, 'value')`。\n   - `trigger()` 找到 `count.value` 对应的副作用集合，执行该副作用函数。\n   - 副作用函数重新执行，基于最新的 `count.value` 更新 DOM，页面显示 `Count: 1`。\n\n#### （4）关键特性与边界情况\n\n- **精准触发**：`track()` 只追踪当前活跃的副作用，`trigger()` 只执行被追踪的副作用，确保更新仅影响真正依赖数据的部分，避免不必要的性能消耗。\n- **去重处理**：使用 `Set` 存储副作用，避免同一副作用被重复添加，确保每次数据变化时副作用只执行一次。\n- **嵌套副作用**：若副作用函数内部又创建了新的副作用（如组件嵌套场景），`activeEffect` 会动态更新为当前执行的副作用，确保依赖关系正确嵌套。\n\n### 3. 响应式副作用\n\n- 副作用：依赖响应式数据、并在数据变化时需重新执行的函数（如更新 DOM、计算结果等）。\n\n- Vue 通过`watchEffect()`创建响应式副作用，其原理是包装副作用函数，执行前将自身设为 “活跃副作用”，使`track()`能识别并关联依赖：\n\n  ```js\n  function whenDepsChange(update) {\n    const effect = () => {\n      activeEffect = effect; // 标记当前活跃副作用\n      update(); // 执行副作用（触发依赖追踪）\n      activeEffect = null;\n    };\n    effect(); // 首次执行，建立依赖关系\n  }\n  ```\n  \n  示例：使用`watchEffect`自动更新计算结果：\n  \n  ```js\n  const A0 = ref(0);\n  const A1 = ref(1);\n  watchEffect(() => {\n    const A2 = A0.value + A1.value; // 追踪A0、A1\n  });\n  A0.value = 2; // 触发副作用，重新计算A2\n  ```\n\n### 4. 计算属性（`computed`）\n\n内部基于响应式副作用实现：当依赖变化时，自动重新计算结果，且会缓存计算值（依赖未变时直接返回缓存）。\n\n```js\nconst A2 = computed(() => A0.value + A1.value); // 依赖A0、A1，自动更新\n```\n\n## 核心逻辑总结\n\nVue 响应式系统通过 Proxy/getter 拦截属性读写，用`track()`记录依赖（副作用），用`trigger()`在数据变化时触发副作用重新执行，实现 “数据变化→自动更新” 的声明式效果。`reactive`用于对象，`ref`用于原始值，`watchEffect`和`computed`则是基于此机制的高层 API。通过`track()`和`trigger()`的配合，Vue 实现了 “数据驱动” 的核心特性：开发者只需关注数据变化，响应式系统会自动完成依赖追踪和更新触发，大幅简化了状态管理逻辑。","filePath":"src/content/posts/vue/Vue3-深入响应式系统.md","digest":"9779e97132df6547","rendered":{"html":"<section><h2 id=\"什么是响应性\">什么是响应性<a class=\"anchor\" href=\"#什么是响应性\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h2><p>响应性是一种声明式处理变化的编程范式：当依赖数据变化时，依赖其计算的结果会自动更新。例如 Excel 中单元格通过公式关联，修改源单元格时目标单元格自动更新；而 JavaScript 默认不具备此特性，需通过特定机制实现。</p><p>官方文档：<a href=\"https://cn.vuejs.org/guide/extras/reactivity-in-depth.html#runtime-vs-compile-time-reactivity\">深入响应式系统 | Vue.js (vuejs.org)</a></p></section>\n<section><h2 id=\"vue-中响应性的实现原理\">Vue 中响应性的实现原理<a class=\"anchor\" href=\"#vue-中响应性的实现原理\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h2><p>Vue 通过拦截对象属性的读写操作，追踪依赖并在数据变化时触发更新，核心依赖<strong>Proxy</strong>（用于<code>reactive</code>）和<strong>getter/setter</strong>（用于<code>ref</code>）实现。</p><section><h3 id=\"1-响应式对象的创建\">1. 响应式对象的创建<a class=\"anchor\" href=\"#1-响应式对象的创建\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h3><ul>\n<li>\n<p><strong><code>reactive()</code>实现</strong>：通过 Proxy 创建对象代理，拦截属性的<code>get</code>（读取）和<code>set</code>（修改）操作：</p>\n<div class=\"expressive-code\"><link rel=\"stylesheet\" href=\"/_astro/ec.xyvso.css\"><script type=\"module\" src=\"/_astro/ec.g1fg5.js\">\x3C/script><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"js\" class=\"wrap\" style=\"--ecMaxLine:35ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#BF3441;--1:#F97583\">function</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#6F42C1;--1:#B392F0\">reactive</span><span style=\"--0:#24292E;--1:#E1E4E8\">(</span><span style=\"--0:#AE4B07;--1:#FFAB70\">obj</span><span style=\"--0:#24292E;--1:#E1E4E8\">) {</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">2</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#BF3441;--1:#F97583\">return</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#BF3441;--1:#F97583\">new</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#6F42C1;--1:#B392F0\">Proxy</span><span style=\"--0:#24292E;--1:#E1E4E8\">(obj, {</span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">3</div></div><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#6F42C1;--1:#B392F0\">get</span><span style=\"--0:#24292E;--1:#E1E4E8\">(</span><span style=\"--0:#AE4B07;--1:#FFAB70\">target</span><span style=\"--0:#24292E;--1:#E1E4E8\">, </span><span style=\"--0:#AE4B07;--1:#FFAB70\">key</span><span style=\"--0:#24292E;--1:#E1E4E8\">) {</span></div></div><div class=\"ec-line\" style=\"--ecIndent:6ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">4</div></div><div class=\"code\"><span class=\"indent\">      </span><span style=\"--0:#6F42C1;--1:#B392F0\">track</span><span style=\"--0:#24292E;--1:#E1E4E8\">(target, key); </span><span style=\"--0:#616972;--1:#99A0A6\">// 追踪依赖</span></div></div><div class=\"ec-line\" style=\"--ecIndent:6ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">5</div></div><div class=\"code\"><span class=\"indent\">      </span><span style=\"--0:#BF3441;--1:#F97583\">return</span><span style=\"--0:#24292E;--1:#E1E4E8\"> target[key];</span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">6</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">    </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">},</span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">7</div></div><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#6F42C1;--1:#B392F0\">set</span><span style=\"--0:#24292E;--1:#E1E4E8\">(</span><span style=\"--0:#AE4B07;--1:#FFAB70\">target</span><span style=\"--0:#24292E;--1:#E1E4E8\">, </span><span style=\"--0:#AE4B07;--1:#FFAB70\">key</span><span style=\"--0:#24292E;--1:#E1E4E8\">, </span><span style=\"--0:#AE4B07;--1:#FFAB70\">value</span><span style=\"--0:#24292E;--1:#E1E4E8\">) {</span></div></div><div class=\"ec-line\" style=\"--ecIndent:6ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">8</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">      </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">target[key] </span><span style=\"--0:#BF3441;--1:#F97583\">=</span><span style=\"--0:#24292E;--1:#E1E4E8\"> value;</span></div></div><div class=\"ec-line\" style=\"--ecIndent:6ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">9</div></div><div class=\"code\"><span class=\"indent\">      </span><span style=\"--0:#6F42C1;--1:#B392F0\">trigger</span><span style=\"--0:#24292E;--1:#E1E4E8\">(target, key); </span><span style=\"--0:#616972;--1:#99A0A6\">// 触发更新</span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">10</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">    </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">}</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">11</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">  </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">});</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">12</div></div><div class=\"code\"><span style=\"--0:#24292E;--1:#E1E4E8\">}</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div>\n</li>\n<li>\n<p><strong><code>ref()</code>实现</strong>：通过对象的<code>getter/setter</code>拦截<code>value</code>属性的读写（用于原始值或非对象值）：</p>\n<div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"js\" class=\"wrap\" style=\"--ecMaxLine:42ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#BF3441;--1:#F97583\">function</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#6F42C1;--1:#B392F0\">ref</span><span style=\"--0:#24292E;--1:#E1E4E8\">(</span><span style=\"--0:#AE4B07;--1:#FFAB70\">value</span><span style=\"--0:#24292E;--1:#E1E4E8\">) {</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">2</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#BF3441;--1:#F97583\">const</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">refObject</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#BF3441;--1:#F97583\">=</span><span style=\"--0:#24292E;--1:#E1E4E8\"> {</span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">3</div></div><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#BF3441;--1:#F97583\">get</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#6F42C1;--1:#B392F0\">value</span><span style=\"--0:#24292E;--1:#E1E4E8\">() {</span></div></div><div class=\"ec-line\" style=\"--ecIndent:6ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">4</div></div><div class=\"code\"><span class=\"indent\">      </span><span style=\"--0:#6F42C1;--1:#B392F0\">track</span><span style=\"--0:#24292E;--1:#E1E4E8\">(refObject, </span><span style=\"--0:#032F62;--1:#9ECBFF\">'value'</span><span style=\"--0:#24292E;--1:#E1E4E8\">); </span><span style=\"--0:#616972;--1:#99A0A6\">// 追踪依赖</span></div></div><div class=\"ec-line\" style=\"--ecIndent:6ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">5</div></div><div class=\"code\"><span class=\"indent\">      </span><span style=\"--0:#BF3441;--1:#F97583\">return</span><span style=\"--0:#24292E;--1:#E1E4E8\"> value;</span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">6</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">    </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">},</span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">7</div></div><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#BF3441;--1:#F97583\">set</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#6F42C1;--1:#B392F0\">value</span><span style=\"--0:#24292E;--1:#E1E4E8\">(</span><span style=\"--0:#AE4B07;--1:#FFAB70\">newValue</span><span style=\"--0:#24292E;--1:#E1E4E8\">) {</span></div></div><div class=\"ec-line\" style=\"--ecIndent:6ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">8</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">      </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">value </span><span style=\"--0:#BF3441;--1:#F97583\">=</span><span style=\"--0:#24292E;--1:#E1E4E8\"> newValue;</span></div></div><div class=\"ec-line\" style=\"--ecIndent:6ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">9</div></div><div class=\"code\"><span class=\"indent\">      </span><span style=\"--0:#6F42C1;--1:#B392F0\">trigger</span><span style=\"--0:#24292E;--1:#E1E4E8\">(refObject, </span><span style=\"--0:#032F62;--1:#9ECBFF\">'value'</span><span style=\"--0:#24292E;--1:#E1E4E8\">); </span><span style=\"--0:#616972;--1:#99A0A6\">// 触发更新</span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">10</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">    </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">}</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">11</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">  </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">};</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">12</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#BF3441;--1:#F97583\">return</span><span style=\"--0:#24292E;--1:#E1E4E8\"> refObject;</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">13</div></div><div class=\"code\"><span style=\"--0:#24292E;--1:#E1E4E8\">}</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div>\n</li>\n</ul></section><section><h3 id=\"2-依赖追踪tracktarget-key与更新触发triggertarget-key的详细机制\">2. 依赖追踪（<code>track(target, key)</code>）与更新触发（<code>trigger(target, key)</code>）的详细机制<a class=\"anchor\" href=\"#2-依赖追踪tracktarget-key与更新触发triggertarget-key的详细机制\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h3><p>在 Vue 的响应式系统中，<code>track()</code> 和 <code>trigger()</code> 是实现 “数据变化自动触发更新” 的核心函数。前者负责记录 “谁依赖了数据”，后者负责在数据变化时 “通知依赖者更新”，二者配合完成从数据追踪到副作用执行的闭环。</p><section><h4 id=\"1依赖追踪tracktarget-key-的作用与实现细节\">（1）依赖追踪：<code>track(target, key)</code> 的作用与实现细节<a class=\"anchor\" href=\"#1依赖追踪tracktarget-key-的作用与实现细节\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h4><p><code>track()</code> 的核心任务是：<strong>当响应式数据的属性被读取时，记录当前正在运行的 “副作用”（effect），并将其与该属性关联起来</strong>，以便后续数据变化时能精准触发这个副作用。</p><ul>\n<li>\n<p><strong>触发时机</strong>：<code>track()</code> 会在响应式对象的属性被访问（即触发 <code>get</code> 拦截器）时调用。例如：</p>\n<ul>\n<li>访问 <code>reactive</code> 对象的属性（如 <code>obj.foo</code>）时，Proxy 的 <code>get</code> 方法会调用 <code>track(obj, 'foo')</code>。</li>\n<li>访问 <code>ref</code> 的 <code>value</code> 属性（如 <code>count.value</code>）时，<code>get value()</code> 会调用 <code>track(refObject, 'value')</code>。</li>\n</ul>\n</li>\n<li>\n<p><strong>核心逻辑</strong>：</p>\n<div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"js\" class=\"wrap\" style=\"--ecMaxLine:59ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#616972;--1:#99A0A6\">// 全局变量：当前正在运行的副作用（仅在副作用执行期间有效）</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">2</div></div><div class=\"code\"><span style=\"--0:#BF3441;--1:#F97583\">let</span><span style=\"--0:#24292E;--1:#E1E4E8\"> activeEffect;</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">3</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">4</div></div><div class=\"code\"><span style=\"--0:#BF3441;--1:#F97583\">function</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#6F42C1;--1:#B392F0\">track</span><span style=\"--0:#24292E;--1:#E1E4E8\">(</span><span style=\"--0:#AE4B07;--1:#FFAB70\">target</span><span style=\"--0:#24292E;--1:#E1E4E8\">, </span><span style=\"--0:#AE4B07;--1:#FFAB70\">key</span><span style=\"--0:#24292E;--1:#E1E4E8\">) {</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">5</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#616972;--1:#99A0A6\">// 只有当存在活跃的副作用时才进行追踪</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">6</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#BF3441;--1:#F97583\">if</span><span style=\"--0:#24292E;--1:#E1E4E8\"> (activeEffect) {</span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">7</div></div><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#616972;--1:#99A0A6\">// 1. 查找目标对象 target 中 key 对应的副作用集合</span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">8</div></div><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#BF3441;--1:#F97583\">const</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">effects</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#BF3441;--1:#F97583\">=</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#6F42C1;--1:#B392F0\">getSubscribersForProperty</span><span style=\"--0:#24292E;--1:#E1E4E8\">(target, key);</span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">9</div></div><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#616972;--1:#99A0A6\">// 2. 将当前活跃的副作用添加到该集合中</span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">10</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">    </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">effects.</span><span style=\"--0:#6F42C1;--1:#B392F0\">add</span><span style=\"--0:#24292E;--1:#E1E4E8\">(activeEffect);</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">11</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">  </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">}</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">12</div></div><div class=\"code\"><span style=\"--0:#24292E;--1:#E1E4E8\">}</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div>\n</li>\n<li>\n<p><strong>依赖存储结构</strong>：<code>WeakMap&#x3C;target, Map&#x3C;key, Set&#x3C;effect>>></code>\n<code>track()</code> 需要一个全局的数据结构来保存 “目标对象→属性→副作用集合” 的映射关系，具体结构为：</p>\n<ul>\n<li><strong>外层：<code>WeakMap&#x3C;target, Map></code></strong>：键是响应式对象（<code>target</code>），值是一个 Map（存储该对象所有属性的副作用）。</li>\n<li><strong>中层：<code>Map&#x3C;key, Set&#x3C;effect>></code></strong>：键是对象的属性名（<code>key</code>），值是一个 Set（存储依赖该属性的所有副作用）。</li>\n<li><strong>内层：<code>Set&#x3C;effect></code></strong>：存储依赖该属性的所有副作用函数（确保副作用不重复）。</li>\n</ul>\n<p><code>getSubscribersForProperty(target, key)</code> 函数的作用就是根据这个结构查找或创建副作用集合：</p>\n<div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"js\" class=\"wrap\" style=\"--ecMaxLine:59ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#616972;--1:#99A0A6\">// 伪代码：获取属性对应的副作用集合</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">2</div></div><div class=\"code\"><span style=\"--0:#BF3441;--1:#F97583\">function</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#6F42C1;--1:#B392F0\">getSubscribersForProperty</span><span style=\"--0:#24292E;--1:#E1E4E8\">(</span><span style=\"--0:#AE4B07;--1:#FFAB70\">target</span><span style=\"--0:#24292E;--1:#E1E4E8\">, </span><span style=\"--0:#AE4B07;--1:#FFAB70\">key</span><span style=\"--0:#24292E;--1:#E1E4E8\">) {</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">3</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#616972;--1:#99A0A6\">// 1. 为目标对象创建一个 Map（若不存在）</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">4</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#BF3441;--1:#F97583\">const</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">targetMap</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#BF3441;--1:#F97583\">=</span><span style=\"--0:#24292E;--1:#E1E4E8\"> globalWeakMap.</span><span style=\"--0:#6F42C1;--1:#B392F0\">get</span><span style=\"--0:#24292E;--1:#E1E4E8\">(target) </span><span style=\"--0:#BF3441;--1:#F97583\">||</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#BF3441;--1:#F97583\">new</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#6F42C1;--1:#B392F0\">Map</span><span style=\"--0:#24292E;--1:#E1E4E8\">();</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">5</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#BF3441;--1:#F97583\">if</span><span style=\"--0:#24292E;--1:#E1E4E8\"> (</span><span style=\"--0:#BF3441;--1:#F97583\">!</span><span style=\"--0:#24292E;--1:#E1E4E8\">globalWeakMap.</span><span style=\"--0:#6F42C1;--1:#B392F0\">has</span><span style=\"--0:#24292E;--1:#E1E4E8\">(target)) {</span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">6</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">    </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">globalWeakMap.</span><span style=\"--0:#6F42C1;--1:#B392F0\">set</span><span style=\"--0:#24292E;--1:#E1E4E8\">(target, targetMap);</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">7</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">  </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">}</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">8</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#616972;--1:#99A0A6\">// 2. 为属性创建一个 Set（若不存在）</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">9</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#BF3441;--1:#F97583\">const</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">effectSet</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#BF3441;--1:#F97583\">=</span><span style=\"--0:#24292E;--1:#E1E4E8\"> targetMap.</span><span style=\"--0:#6F42C1;--1:#B392F0\">get</span><span style=\"--0:#24292E;--1:#E1E4E8\">(key) </span><span style=\"--0:#BF3441;--1:#F97583\">||</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#BF3441;--1:#F97583\">new</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#6F42C1;--1:#B392F0\">Set</span><span style=\"--0:#24292E;--1:#E1E4E8\">();</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">10</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#BF3441;--1:#F97583\">if</span><span style=\"--0:#24292E;--1:#E1E4E8\"> (</span><span style=\"--0:#BF3441;--1:#F97583\">!</span><span style=\"--0:#24292E;--1:#E1E4E8\">targetMap.</span><span style=\"--0:#6F42C1;--1:#B392F0\">has</span><span style=\"--0:#24292E;--1:#E1E4E8\">(key)) {</span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">11</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">    </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">targetMap.</span><span style=\"--0:#6F42C1;--1:#B392F0\">set</span><span style=\"--0:#24292E;--1:#E1E4E8\">(key, effectSet);</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">12</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">  </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">}</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">13</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#BF3441;--1:#F97583\">return</span><span style=\"--0:#24292E;--1:#E1E4E8\"> effectSet;</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">14</div></div><div class=\"code\"><span style=\"--0:#24292E;--1:#E1E4E8\">}</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div>\n</li>\n<li>\n<p><strong>关键：<code>activeEffect</code> 的作用</strong>：<code>activeEffect</code> 是一个全局变量，仅在副作用函数执行期间被赋值为当前副作用。这使得 <code>track()</code> 能精准识别 “谁正在依赖这个属性”，并将其加入依赖集合。</p>\n</li>\n</ul></section><section><h4 id=\"2更新触发triggertarget-key-的作用与实现细节\">（2）更新触发：<code>trigger(target, key)</code> 的作用与实现细节<a class=\"anchor\" href=\"#2更新触发triggertarget-key-的作用与实现细节\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h4><p><code>trigger()</code> 的核心任务是：<strong>当响应式数据的属性被修改时，找到该属性的所有依赖副作用，并执行这些副作用</strong>，从而实现 “数据变化→自动更新”。</p><ul>\n<li>\n<p><strong>触发时机</strong>：<code>trigger()</code> 会在响应式对象的属性被修改（即触发 <code>set</code> 拦截器）时调用。例如：</p>\n<ul>\n<li>修改 <code>reactive</code> 对象的属性（如 <code>obj.foo = 2</code>）时，Proxy 的 <code>set</code> 方法会调用 <code>trigger(obj, 'foo')</code>。</li>\n<li>修改 <code>ref</code> 的 <code>value</code> 属性（如 <code>count.value = 2</code>）时，<code>set value(newValue)</code> 会调用 <code>trigger(refObject, 'value')</code>。</li>\n</ul>\n</li>\n<li>\n<p><strong>核心逻辑</strong>：</p>\n<div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"js\" class=\"wrap\" style=\"--ecMaxLine:57ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#BF3441;--1:#F97583\">function</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#6F42C1;--1:#B392F0\">trigger</span><span style=\"--0:#24292E;--1:#E1E4E8\">(</span><span style=\"--0:#AE4B07;--1:#FFAB70\">target</span><span style=\"--0:#24292E;--1:#E1E4E8\">, </span><span style=\"--0:#AE4B07;--1:#FFAB70\">key</span><span style=\"--0:#24292E;--1:#E1E4E8\">) {</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">2</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#616972;--1:#99A0A6\">// 1. 查找目标对象 target 中 key 对应的副作用集合</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">3</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#BF3441;--1:#F97583\">const</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">effects</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#BF3441;--1:#F97583\">=</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#6F42C1;--1:#B392F0\">getSubscribersForProperty</span><span style=\"--0:#24292E;--1:#E1E4E8\">(target, key);</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">4</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#616972;--1:#99A0A6\">// 2. 执行所有副作用（重新运行依赖该属性的代码）</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">5</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">  </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">effects.</span><span style=\"--0:#6F42C1;--1:#B392F0\">forEach</span><span style=\"--0:#24292E;--1:#E1E4E8\">((</span><span style=\"--0:#AE4B07;--1:#FFAB70\">effect</span><span style=\"--0:#24292E;--1:#E1E4E8\">) </span><span style=\"--0:#BF3441;--1:#F97583\">=></span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#6F42C1;--1:#B392F0\">effect</span><span style=\"--0:#24292E;--1:#E1E4E8\">());</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">6</div></div><div class=\"code\"><span style=\"--0:#24292E;--1:#E1E4E8\">}</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div>\n</li>\n<li>\n<p><strong>执行副作用的意义</strong>：副作用函数通常包含依赖数据的计算或操作（如更新 DOM、计算属性值等）。当数据变化时，重新执行副作用能确保这些操作基于最新数据执行，从而保持视图或计算结果与数据的同步。例如，在组件渲染场景中，副作用函数是组件的渲染函数：当数据变化时，<code>trigger()</code> 会触发渲染函数重新执行，生成新的虚拟 DOM 并更新页面。</p>\n</li>\n</ul></section><section><h4 id=\"3track-与-trigger-的协同流程示例\">（3）<code>track()</code> 与 <code>trigger()</code> 的协同流程示例<a class=\"anchor\" href=\"#3track-与-trigger-的协同流程示例\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h4><p>以一个简单的响应式场景为例，完整流程如下：</p><ol>\n<li>\n<p><strong>初始化响应式数据</strong>：</p>\n<div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"js\" class=\"wrap\" style=\"--ecMaxLine:62ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#BF3441;--1:#F97583\">const</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">count</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#BF3441;--1:#F97583\">=</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#6F42C1;--1:#B392F0\">ref</span><span style=\"--0:#24292E;--1:#E1E4E8\">(</span><span style=\"--0:#005CC5;--1:#79B8FF\">0</span><span style=\"--0:#24292E;--1:#E1E4E8\">); </span><span style=\"--0:#616972;--1:#99A0A6\">// 创建 ref，内部通过 getter/setter 拦截 value 访问</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div>\n</li>\n<li>\n<p><strong>创建响应式副作用</strong>：</p>\n<div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"js\" class=\"wrap\" style=\"--ecMaxLine:52ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#6F42C1;--1:#B392F0\">watchEffect</span><span style=\"--0:#24292E;--1:#E1E4E8\">(() </span><span style=\"--0:#BF3441;--1:#F97583\">=></span><span style=\"--0:#24292E;--1:#E1E4E8\"> {</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">2</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#616972;--1:#99A0A6\">// 副作用函数：依赖 count.value，用于更新 DOM</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">3</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">  </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">document.body.innerHTML </span><span style=\"--0:#BF3441;--1:#F97583\">=</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">`Count: ${</span><span style=\"--0:#24292E;--1:#E1E4E8\">count</span><span style=\"--0:#032F62;--1:#9ECBFF\">.</span><span style=\"--0:#24292E;--1:#E1E4E8\">value</span><span style=\"--0:#032F62;--1:#9ECBFF\">}`</span><span style=\"--0:#24292E;--1:#E1E4E8\">;</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">4</div></div><div class=\"code\"><span style=\"--0:#24292E;--1:#E1E4E8\">});</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div>\n<ul>\n<li><code>watchEffect</code> 会包装副作用函数，执行前将其设为 <code>activeEffect</code>（<code>activeEffect = 当前副作用</code>）。</li>\n<li>执行副作用时，访问 <code>count.value</code> 触发 <code>get</code> 拦截器，调用 <code>track(count, 'value')</code>。</li>\n<li><code>track()</code> 发现 <code>activeEffect</code> 存在，将该副作用加入 <code>count</code> 的 <code>value</code> 属性对应的副作用集合中。</li>\n</ul>\n</li>\n<li>\n<p><strong>修改数据触发更新</strong>：</p>\n<div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"js\" class=\"wrap\" style=\"--ecMaxLine:39ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#24292E;--1:#E1E4E8\">count.value </span><span style=\"--0:#BF3441;--1:#F97583\">=</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">1</span><span style=\"--0:#24292E;--1:#E1E4E8\">; </span><span style=\"--0:#616972;--1:#99A0A6\">// 修改 value，触发 set 拦截器</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div>\n<ul>\n<li><code>set</code> 拦截器调用 <code>trigger(count, 'value')</code>。</li>\n<li><code>trigger()</code> 找到 <code>count.value</code> 对应的副作用集合，执行该副作用函数。</li>\n<li>副作用函数重新执行，基于最新的 <code>count.value</code> 更新 DOM，页面显示 <code>Count: 1</code>。</li>\n</ul>\n</li>\n</ol></section><section><h4 id=\"4关键特性与边界情况\">（4）关键特性与边界情况<a class=\"anchor\" href=\"#4关键特性与边界情况\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h4><ul>\n<li><strong>精准触发</strong>：<code>track()</code> 只追踪当前活跃的副作用，<code>trigger()</code> 只执行被追踪的副作用，确保更新仅影响真正依赖数据的部分，避免不必要的性能消耗。</li>\n<li><strong>去重处理</strong>：使用 <code>Set</code> 存储副作用，避免同一副作用被重复添加，确保每次数据变化时副作用只执行一次。</li>\n<li><strong>嵌套副作用</strong>：若副作用函数内部又创建了新的副作用（如组件嵌套场景），<code>activeEffect</code> 会动态更新为当前执行的副作用，确保依赖关系正确嵌套。</li>\n</ul></section></section><section><h3 id=\"3-响应式副作用\">3. 响应式副作用<a class=\"anchor\" href=\"#3-响应式副作用\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h3><ul>\n<li>\n<p>副作用：依赖响应式数据、并在数据变化时需重新执行的函数（如更新 DOM、计算结果等）。</p>\n</li>\n<li>\n<p>Vue 通过<code>watchEffect()</code>创建响应式副作用，其原理是包装副作用函数，执行前将自身设为 “活跃副作用”，使<code>track()</code>能识别并关联依赖：</p>\n<div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"js\" class=\"wrap\" style=\"--ecMaxLine:39ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#BF3441;--1:#F97583\">function</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#6F42C1;--1:#B392F0\">whenDepsChange</span><span style=\"--0:#24292E;--1:#E1E4E8\">(</span><span style=\"--0:#AE4B07;--1:#FFAB70\">update</span><span style=\"--0:#24292E;--1:#E1E4E8\">) {</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">2</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#BF3441;--1:#F97583\">const</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#6F42C1;--1:#B392F0\">effect</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#BF3441;--1:#F97583\">=</span><span style=\"--0:#24292E;--1:#E1E4E8\"> () </span><span style=\"--0:#BF3441;--1:#F97583\">=></span><span style=\"--0:#24292E;--1:#E1E4E8\"> {</span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">3</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">    </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">activeEffect </span><span style=\"--0:#BF3441;--1:#F97583\">=</span><span style=\"--0:#24292E;--1:#E1E4E8\"> effect; </span><span style=\"--0:#616972;--1:#99A0A6\">// 标记当前活跃副作用</span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">4</div></div><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#6F42C1;--1:#B392F0\">update</span><span style=\"--0:#24292E;--1:#E1E4E8\">(); </span><span style=\"--0:#616972;--1:#99A0A6\">// 执行副作用（触发依赖追踪）</span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">5</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">    </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">activeEffect </span><span style=\"--0:#BF3441;--1:#F97583\">=</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">null</span><span style=\"--0:#24292E;--1:#E1E4E8\">;</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">6</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">  </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">};</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">7</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#6F42C1;--1:#B392F0\">effect</span><span style=\"--0:#24292E;--1:#E1E4E8\">(); </span><span style=\"--0:#616972;--1:#99A0A6\">// 首次执行，建立依赖关系</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">8</div></div><div class=\"code\"><span style=\"--0:#24292E;--1:#E1E4E8\">}</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div>\n<p>示例：使用<code>watchEffect</code>自动更新计算结果：</p>\n<div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"js\" class=\"wrap\" style=\"--ecMaxLine:44ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#BF3441;--1:#F97583\">const</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">A0</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#BF3441;--1:#F97583\">=</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#6F42C1;--1:#B392F0\">ref</span><span style=\"--0:#24292E;--1:#E1E4E8\">(</span><span style=\"--0:#005CC5;--1:#79B8FF\">0</span><span style=\"--0:#24292E;--1:#E1E4E8\">);</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">2</div></div><div class=\"code\"><span style=\"--0:#BF3441;--1:#F97583\">const</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">A1</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#BF3441;--1:#F97583\">=</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#6F42C1;--1:#B392F0\">ref</span><span style=\"--0:#24292E;--1:#E1E4E8\">(</span><span style=\"--0:#005CC5;--1:#79B8FF\">1</span><span style=\"--0:#24292E;--1:#E1E4E8\">);</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">3</div></div><div class=\"code\"><span style=\"--0:#6F42C1;--1:#B392F0\">watchEffect</span><span style=\"--0:#24292E;--1:#E1E4E8\">(() </span><span style=\"--0:#BF3441;--1:#F97583\">=></span><span style=\"--0:#24292E;--1:#E1E4E8\"> {</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">4</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#BF3441;--1:#F97583\">const</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">A2</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#BF3441;--1:#F97583\">=</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">A0</span><span style=\"--0:#24292E;--1:#E1E4E8\">.value </span><span style=\"--0:#BF3441;--1:#F97583\">+</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">A1</span><span style=\"--0:#24292E;--1:#E1E4E8\">.value; </span><span style=\"--0:#616972;--1:#99A0A6\">// 追踪A0、A1</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">5</div></div><div class=\"code\"><span style=\"--0:#24292E;--1:#E1E4E8\">});</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">6</div></div><div class=\"code\"><span style=\"--0:#005CC5;--1:#79B8FF\">A0</span><span style=\"--0:#24292E;--1:#E1E4E8\">.value </span><span style=\"--0:#BF3441;--1:#F97583\">=</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">2</span><span style=\"--0:#24292E;--1:#E1E4E8\">; </span><span style=\"--0:#616972;--1:#99A0A6\">// 触发副作用，重新计算A2</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div>\n</li>\n</ul></section><section><h3 id=\"4-计算属性computed\">4. 计算属性（<code>computed</code>）<a class=\"anchor\" href=\"#4-计算属性computed\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h3><p>内部基于响应式副作用实现：当依赖变化时，自动重新计算结果，且会缓存计算值（依赖未变时直接返回缓存）。</p><div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"js\" class=\"wrap\" style=\"--ecMaxLine:63ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#BF3441;--1:#F97583\">const</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">A2</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#BF3441;--1:#F97583\">=</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#6F42C1;--1:#B392F0\">computed</span><span style=\"--0:#24292E;--1:#E1E4E8\">(() </span><span style=\"--0:#BF3441;--1:#F97583\">=></span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">A0</span><span style=\"--0:#24292E;--1:#E1E4E8\">.value </span><span style=\"--0:#BF3441;--1:#F97583\">+</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">A1</span><span style=\"--0:#24292E;--1:#E1E4E8\">.value); </span><span style=\"--0:#616972;--1:#99A0A6\">// 依赖A0、A1，自动更新</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div></section></section>\n<section><h2 id=\"核心逻辑总结\">核心逻辑总结<a class=\"anchor\" href=\"#核心逻辑总结\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h2><p>Vue 响应式系统通过 Proxy/getter 拦截属性读写，用<code>track()</code>记录依赖（副作用），用<code>trigger()</code>在数据变化时触发副作用重新执行，实现 “数据变化→自动更新” 的声明式效果。<code>reactive</code>用于对象，<code>ref</code>用于原始值，<code>watchEffect</code>和<code>computed</code>则是基于此机制的高层 API。通过<code>track()</code>和<code>trigger()</code>的配合，Vue 实现了 “数据驱动” 的核心特性：开发者只需关注数据变化，响应式系统会自动完成依赖追踪和更新触发，大幅简化了状态管理逻辑。</p></section>","metadata":{"headings":[{"depth":2,"slug":"什么是响应性","text":"什么是响应性#"},{"depth":2,"slug":"vue-中响应性的实现原理","text":"Vue 中响应性的实现原理#"},{"depth":3,"slug":"1-响应式对象的创建","text":"1. 响应式对象的创建#"},{"depth":3,"slug":"2-依赖追踪tracktarget-key与更新触发triggertarget-key的详细机制","text":"2. 依赖追踪（track(target, key)）与更新触发（trigger(target, key)）的详细机制#"},{"depth":4,"slug":"1依赖追踪tracktarget-key-的作用与实现细节","text":"（1）依赖追踪：track(target, key) 的作用与实现细节#"},{"depth":4,"slug":"2更新触发triggertarget-key-的作用与实现细节","text":"（2）更新触发：trigger(target, key) 的作用与实现细节#"},{"depth":4,"slug":"3track-与-trigger-的协同流程示例","text":"（3）track() 与 trigger() 的协同流程示例#"},{"depth":4,"slug":"4关键特性与边界情况","text":"（4）关键特性与边界情况#"},{"depth":3,"slug":"3-响应式副作用","text":"3. 响应式副作用#"},{"depth":3,"slug":"4-计算属性computed","text":"4. 计算属性（computed）#"},{"depth":2,"slug":"核心逻辑总结","text":"核心逻辑总结#"}],"localImagePaths":[],"remoteImagePaths":[],"frontmatter":{"title":"Vue3 笔记：深入响应式系统","published":"2025-08-18T00:00:00.000Z","image":"./vue.png","category":"Vue","tags":["Vue","学习笔记"],"minutes":10,"words":2069,"excerpt":"响应性是一种声明式处理变化的编程范式：当依赖数据变化时，依赖其计算的结果会自动更新。例如 Excel 中单元格通过公式关联，修改源单元格时目标单元格自动更新；而 JavaScript 默认不具备此特性，需通过特定机制实现。"},"imagePaths":[]}},"collection":"posts"}],"2025-08-16":[{"id":"vue/vue3-响应式基础","data":{"title":"Vue3 笔记：响应式基础","published":"2025-08-16T00:00:00.000Z","draft":false,"description":"","image":"./vue.png","tags":["Vue","学习笔记"],"category":"Vue","lang":"","pinned":false,"author":"","sourceLink":"","licenseName":"","licenseUrl":"","encrypted":false,"password":"","prevTitle":"Docker学习笔记(二)：容器数据卷","prevSlug":"docker/docker学习笔记-二","nextTitle":"Vue3 笔记：深入响应式系统","nextSlug":"vue/vue3-深入响应式系统"},"body":"最近翻 Vue3 文档，重新过了一遍响应式的基础内容。之前用的时候总有些细节记不清，比如 ref 和 reactive 到底该怎么选、为什么有时候改了数据页面不更，这次特意整理了笔记（过程中也借助了大模型辅助梳理逻辑、补充细节😉），主要是给自己后续查着方便，内容以复习要点为主，可能有理解不到位的地方，先记下来慢慢修正。\n\n官方文档：[响应式基础 | Vue.js (vuejs.org)](https://cn.vuejs.org/guide/essentials/reactivity-fundamentals.html)\n\n## 一. 声明响应式状态\n\n### 1. 组合式 API：ref()\n\n定义：ref() 接收参数，并将其包裹在一个带有 .value 属性的 ref 对象中返回：\n\n```js\nimport { ref } from 'vue'\nconst count = ref(0)\ncount.value++ // 修改值\n```\n\n- 模板使用：无需 .value，自动解包；可直接在事件监听器中修改（如@click=\"count++\"）。\n- 优势：支持所有数据类型（原始值、对象等），可传递给函数并保持响应性。\n- 简化语法：在`<script setup>`中，顶层声明的ref和方法可直接在模板使用，无需手动暴露。\n\n> 注意：在 JavaScript 中需要 .value 来访问和修改 ref 的值。\n\n### 2. 组合式 API：reactive()\n\n定义：reactive()接收对象 / 数组等，返回其响应式代理（Proxy），直接通过属性访问 / 修改。\n\n```js\nimport { reactive } from 'vue'\nconst state = reactive({ count: 0 })\nstate.count++ // 修改值\n```\n\n特性：代理与原始对象不等价（reactive(raw) !== raw），同一原始对象多次调用reactive()返回同一代理。\n\n## 二. 核心特性\n\n### 1. 深层响应式\n\n默认行为：ref()和reactive()均默认实现深层响应性，嵌套对象 / 数组的修改会被追踪。\n\n```js\nconst obj = ref({ nested: { count: 0 } })\nobj.value.nested.count++ // 触发响应式更新\n```\n\n浅层响应性：可通过shallowRef（仅.value访问被追踪）或shallowReactive（仅顶层属性响应式）关闭深层响应性，优化性能。\n\n### 2. DOM 更新时机\n\n异步更新：Vue 会在“next tick”更新周期中缓冲所有状态的修改，以确保不管你进行了多少次状态修改，每个组件都只会被更新一次。\n等待更新：需在 DOM 更新后执行代码时，使用nextTick()：\n\n```js\nasync function increment() {\n  count.value++\n  await nextTick() // 此时DOM已更新\n}\n```\n\n## 三. reactive() 的局限性\n\nreactive() API 有一些局限性：\n\n- 有限的值类型：它只能用于对象类型 (对象、数组和如 Map、Set 这样的集合类型)。它不能持有如 string、number 或 boolean 这样的原始类型。\n\n- 不能替换整个对象：由于 Vue 的响应式跟踪是通过属性访问实现的，因此我们必须始终保持对响应式对象的相同引用。这意味着我们不能轻易地“替换”响应式对象，因为这样的话与第一个引用的响应性连接将丢失。\n\n- 对解构操作不友好：解构属性为本地变量或传递给函数时，响应性连接断开。\n\n> Vue官方建议：优先使用ref()作为响应式状态声明的主要 API。\n\n## 四. ref 解包细节\n\n作为 reactive 对象的属性：自动解包，行为类似普通属性。\n\n```js\nconst count = ref(0)\nconst state = reactive({ count })\nconsole.log(state.count) // 0（自动解包）\nstate.count = 1\nconsole.log(count.value) // 1\n```\n\n数组 / 集合中：不会自动解包，需显式使用.value。\n\n```js\nconst books = reactive([ref('Vue Guide')])\nconsole.log(books[0].value) // 需显式.value\n```\n\n模板中：仅顶级属性自动解包，嵌套属性需解构为顶级属性才能解包。\n\n```js\nconst object = { id: ref(1) }\nconst { id } = object // 解构为顶级属性\n```\n\n模板中`{{ id + 1 }}`生效（解包），而`{{ object.id + 1 }}`不生效（未解包）。\n\n如果 ref 是文本插值的最终计算值 (即 `{{ }}` 标签)，会自动解包。该特性仅仅是文本插值的一个便利特性，等价于 `{{ object.id.value }}`。\n\n## 五、关键问题\n\n### 为什么 ref 需要 .value 访问？\n\n因为在标准的 JavaScript 中，检测普通变量的访问和修改是行不通的。但可以通过 getter 和 setter 方法来拦截对象属性的 get 和 set 操作。\n\n而 ref 的设计思路是：用一个对象包裹原始值，这个对象只暴露一个 `.value` 属性。通过为 `.value` 定义 getter 和 setter，Vue 就能在你访问 `xxx.value` 时追踪依赖（收集谁在用这个值），在你修改 `xxx.value = ...` 时触发更新（通知用到这个值的地方重新渲染）。\n\n简单说，`.value` 是 Vue 为了让原始类型也能具备响应式，而 “绕的一小步”—— 通过对象属性的拦截能力，间接实现对原始值的追踪。\n\n### ref()和reactive()的核心区别是什么？\n\n① 支持类型：ref()支持所有数据类型（原始值、对象等），reactive()仅支持对象、数组等非原始类型；\n② 访问方式：ref()需通过.value访问 / 修改值，reactive()直接通过属性访问；\n③ 局限性：reactive()存在无法替换对象、解构丢失响应性等问题，ref()无这些限制；\n④ 解包规则：ref()在模板中自动解包，作为响应式对象属性时也自动解包，而reactive()无类似解包逻辑。\n\n### 为什么修改响应式状态后 DOM 没有立即更新？如何确保在 DOM 更新后执行代码？\n\nVue 会将所有状态修改缓冲到 “next tick” 更新周期中，确保每个组件只更新一次，提升性能。若需在 DOM 更新后执行代码，可使用nextTick()全局 API，它返回一个 Promise，在 DOM 更新完成后 resolve。示例：\n\n```js\nimport { nextTick } from 'vue'\nasync function update() {\n  count.value++\n  await nextTick()\n  // DOM已更新\n}\n```\n\n### 在模板中使用ref时，为什么有时需要显式.value，有时不需要？\n\n模板中ref的解包规则为：\n① 顶级属性自动解包（无需.value），如`const count = ref(0)`在模板中`{{ count }}`生效；\n② 嵌套属性（如`object.id`，其中id是ref）不会自动解包，需解构为顶级属性（`const { id } = object`）才能解包；\n③ 若ref是文本插值的最终值（如`{{ object.id }}`），会自动解包（等价于`{{ object.id.value }}`）。因此，非顶级嵌套ref在模板中参与计算时需先解构，否则需显式处理。\n\n### 浅层响应性的核心适用场景是什么？\n\n**核心适用场景：数据 “大而不变” 或 “仅需整体替换”**\n当数据满足以下特征时，用浅层响应性可以显著提升性能：\n\n**处理 “大型不可变数据”（如后端返回的海量列表）**\n**场景**：从后端获取的大型列表（如 1000 条以上数据），且业务中只需要展示、不需要修改其中的嵌套属性（仅可能整体替换列表）。\n**问题**：如果用普通ref或reactive，Vue 会递归地将所有嵌套属性转为响应式（创建大量 Proxy），导致初始化时性能开销大。\n**解决方案**：用shallowRef，只追踪.value的整体替换，不处理内部属性：\n\n```js\nimport { shallowRef } from 'vue'\n// 假设data是包含1000条数据的大型数组\nconst bigList = shallowRef(data) \n\n// ✅ 有效：整体替换时触发更新（符合业务需求）\nbigList.value = newData \n\n// ❌ 无效：修改内部属性不会触发更新（但业务本就不需要修改）\nbigList.value[0].name = '新名字' \n```\n\n**管理 “纯展示性的复杂对象”（如配置项、图表数据）**\n**场景**：页面中的配置对象（如表单布局配置、图表的 option），结构复杂但运行中不会修改嵌套属性，只会整体替换。\n**问题**：深层响应性会对嵌套的每个对象 / 数组创建 Proxy，而这些 Proxy 完全用不上，属于浪费。\n**解决方案**：用shallowReactive（对象）或shallowRef（整体替换）：\n\n```js\nimport { shallowReactive } from 'vue'\n// 复杂配置对象，仅用于展示，不修改内部属性\nconst chartOptions = shallowReactive({\n  xAxis: { type: 'category' },\n  series: [{ data: [1, 2, 3] }]\n})\n\n// ✅ 有效：修改顶层属性会触发更新（如果需要）\nchartOptions.xAxis = { type: 'value' }\n\n// ❌ 无效：修改嵌套属性不触发更新（业务不需要）\nchartOptions.series[0].data.push(4) \n```\n\n**手动控制更新时机（避免频繁触发）**\n**场景**：需要批量修改数据，且希望 “修改完所有内容后再统一更新 DOM”，而不是每改一个属性就更新一次。\n**问题**：普通响应式会在每次修改时触发更新，批量操作时可能导致多次无用渲染。\n**解决方案**：用shallowRef配合triggerRef（手动触发更新）：\n\n```js\nimport { shallowRef, triggerRef } from 'vue'\nconst formData = shallowRef({ name: '', age: 0 })\n\n// 批量修改（不会触发更新）\nformData.value.name = '张三'\nformData.value.age = 20\n// ...更多修改\n\n// 手动触发一次更新（减少渲染次数）\ntriggerRef(formData) \n```\n\n**不适用场景：警惕 “过度优化”**\n浅层响应性的 “性能优化” 是有代价的 —— 丢失了深层追踪能力，因此以下场景绝对不能用：\n\n- 数据需要修改嵌套属性（如用户信息对象{ user: { name: 'xxx' } }，需要修改name）；\n- 数据结构简单（如仅包含 1-2 层的小对象），此时深层响应性的性能开销可忽略，没必要用浅层；\n- 新手对响应式原理不熟悉，容易因 “修改不触发更新” 导致 bug。\n\n> 浅层响应性是 “按需关闭深层追踪” 的优化手段，核心适用场景是：\n> **数据结构复杂但仅需整体替换，或嵌套属性完全不需要修改。**\n> 它的设计不是为了 “替代” 普通响应式，而是在特定场景下（如处理大型数据）减少不必要的性能消耗，属于 “进阶优化技巧”，需结合具体业务判断是否使用。","filePath":"src/content/posts/vue/Vue3-响应式基础.md","digest":"d2a35e3b1553ef9e","rendered":{"html":"<p>最近翻 Vue3 文档，重新过了一遍响应式的基础内容。之前用的时候总有些细节记不清，比如 ref 和 reactive 到底该怎么选、为什么有时候改了数据页面不更，这次特意整理了笔记（过程中也借助了大模型辅助梳理逻辑、补充细节😉），主要是给自己后续查着方便，内容以复习要点为主，可能有理解不到位的地方，先记下来慢慢修正。</p>\n<p>官方文档：<a href=\"https://cn.vuejs.org/guide/essentials/reactivity-fundamentals.html\">响应式基础 | Vue.js (vuejs.org)</a></p>\n<section><h2 id=\"一-声明响应式状态\">一. 声明响应式状态<a class=\"anchor\" href=\"#一-声明响应式状态\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h2><section><h3 id=\"1-组合式-apiref\">1. 组合式 API：ref()<a class=\"anchor\" href=\"#1-组合式-apiref\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h3><p>定义：ref() 接收参数，并将其包裹在一个带有 .value 属性的 ref 对象中返回：</p><div class=\"expressive-code\"><link rel=\"stylesheet\" href=\"/_astro/ec.xyvso.css\"><script type=\"module\" src=\"/_astro/ec.g1fg5.js\">\x3C/script><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"js\" class=\"wrap\" style=\"--ecMaxLine:25ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#BF3441;--1:#F97583\">import</span><span style=\"--0:#24292E;--1:#E1E4E8\"> { ref } </span><span style=\"--0:#BF3441;--1:#F97583\">from</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">'vue'</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">2</div></div><div class=\"code\"><span style=\"--0:#BF3441;--1:#F97583\">const</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">count</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#BF3441;--1:#F97583\">=</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#6F42C1;--1:#B392F0\">ref</span><span style=\"--0:#24292E;--1:#E1E4E8\">(</span><span style=\"--0:#005CC5;--1:#79B8FF\">0</span><span style=\"--0:#24292E;--1:#E1E4E8\">)</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">3</div></div><div class=\"code\"><span style=\"--0:#24292E;--1:#E1E4E8\">count.value</span><span style=\"--0:#BF3441;--1:#F97583\">++</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#616972;--1:#99A0A6\">// 修改值</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div><ul>\n<li>模板使用：无需 .value，自动解包；可直接在事件监听器中修改（如@click=“count++”）。</li>\n<li>优势：支持所有数据类型（原始值、对象等），可传递给函数并保持响应性。</li>\n<li>简化语法：在<code>&#x3C;script setup></code>中，顶层声明的ref和方法可直接在模板使用，无需手动暴露。</li>\n</ul><blockquote>\n<p>注意：在 JavaScript 中需要 .value 来访问和修改 ref 的值。</p>\n</blockquote></section><section><h3 id=\"2-组合式-apireactive\">2. 组合式 API：reactive()<a class=\"anchor\" href=\"#2-组合式-apireactive\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h3><p>定义：reactive()接收对象 / 数组等，返回其响应式代理（Proxy），直接通过属性访问 / 修改。</p><div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"js\" class=\"wrap\" style=\"--ecMaxLine:36ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#BF3441;--1:#F97583\">import</span><span style=\"--0:#24292E;--1:#E1E4E8\"> { reactive } </span><span style=\"--0:#BF3441;--1:#F97583\">from</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">'vue'</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">2</div></div><div class=\"code\"><span style=\"--0:#BF3441;--1:#F97583\">const</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">state</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#BF3441;--1:#F97583\">=</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#6F42C1;--1:#B392F0\">reactive</span><span style=\"--0:#24292E;--1:#E1E4E8\">({ count: </span><span style=\"--0:#005CC5;--1:#79B8FF\">0</span><span style=\"--0:#24292E;--1:#E1E4E8\"> })</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">3</div></div><div class=\"code\"><span style=\"--0:#24292E;--1:#E1E4E8\">state.count</span><span style=\"--0:#BF3441;--1:#F97583\">++</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#616972;--1:#99A0A6\">// 修改值</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div><p>特性：代理与原始对象不等价（reactive(raw) !== raw），同一原始对象多次调用reactive()返回同一代理。</p></section></section>\n<section><h2 id=\"二-核心特性\">二. 核心特性<a class=\"anchor\" href=\"#二-核心特性\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h2><section><h3 id=\"1-深层响应式\">1. 深层响应式<a class=\"anchor\" href=\"#1-深层响应式\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h3><p>默认行为：ref()和reactive()均默认实现深层响应性，嵌套对象 / 数组的修改会被追踪。</p><div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"js\" class=\"wrap\" style=\"--ecMaxLine:41ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#BF3441;--1:#F97583\">const</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">obj</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#BF3441;--1:#F97583\">=</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#6F42C1;--1:#B392F0\">ref</span><span style=\"--0:#24292E;--1:#E1E4E8\">({ nested: { count: </span><span style=\"--0:#005CC5;--1:#79B8FF\">0</span><span style=\"--0:#24292E;--1:#E1E4E8\"> } })</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">2</div></div><div class=\"code\"><span style=\"--0:#24292E;--1:#E1E4E8\">obj.value.nested.count</span><span style=\"--0:#BF3441;--1:#F97583\">++</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#616972;--1:#99A0A6\">// 触发响应式更新</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div><p>浅层响应性：可通过shallowRef（仅.value访问被追踪）或shallowReactive（仅顶层属性响应式）关闭深层响应性，优化性能。</p></section><section><h3 id=\"2-dom-更新时机\">2. DOM 更新时机<a class=\"anchor\" href=\"#2-dom-更新时机\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h3><p>异步更新：Vue 会在“next tick”更新周期中缓冲所有状态的修改，以确保不管你进行了多少次状态修改，每个组件都只会被更新一次。\n等待更新：需在 DOM 更新后执行代码时，使用nextTick()：</p><div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"js\" class=\"wrap\" style=\"--ecMaxLine:30ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#BF3441;--1:#F97583\">async</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#BF3441;--1:#F97583\">function</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#6F42C1;--1:#B392F0\">increment</span><span style=\"--0:#24292E;--1:#E1E4E8\">() {</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">2</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">  </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">count.value</span><span style=\"--0:#BF3441;--1:#F97583\">++</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">3</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#BF3441;--1:#F97583\">await</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#6F42C1;--1:#B392F0\">nextTick</span><span style=\"--0:#24292E;--1:#E1E4E8\">() </span><span style=\"--0:#616972;--1:#99A0A6\">// 此时DOM已更新</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">4</div></div><div class=\"code\"><span style=\"--0:#24292E;--1:#E1E4E8\">}</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div></section></section>\n<section><h2 id=\"三-reactive-的局限性\">三. reactive() 的局限性<a class=\"anchor\" href=\"#三-reactive-的局限性\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h2><p>reactive() API 有一些局限性：</p><ul>\n<li>\n<p>有限的值类型：它只能用于对象类型 (对象、数组和如 Map、Set 这样的集合类型)。它不能持有如 string、number 或 boolean 这样的原始类型。</p>\n</li>\n<li>\n<p>不能替换整个对象：由于 Vue 的响应式跟踪是通过属性访问实现的，因此我们必须始终保持对响应式对象的相同引用。这意味着我们不能轻易地“替换”响应式对象，因为这样的话与第一个引用的响应性连接将丢失。</p>\n</li>\n<li>\n<p>对解构操作不友好：解构属性为本地变量或传递给函数时，响应性连接断开。</p>\n</li>\n</ul><blockquote>\n<p>Vue官方建议：优先使用ref()作为响应式状态声明的主要 API。</p>\n</blockquote></section>\n<section><h2 id=\"四-ref-解包细节\">四. ref 解包细节<a class=\"anchor\" href=\"#四-ref-解包细节\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h2><p>作为 reactive 对象的属性：自动解包，行为类似普通属性。</p><div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"js\" class=\"wrap\" style=\"--ecMaxLine:35ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#BF3441;--1:#F97583\">const</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">count</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#BF3441;--1:#F97583\">=</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#6F42C1;--1:#B392F0\">ref</span><span style=\"--0:#24292E;--1:#E1E4E8\">(</span><span style=\"--0:#005CC5;--1:#79B8FF\">0</span><span style=\"--0:#24292E;--1:#E1E4E8\">)</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">2</div></div><div class=\"code\"><span style=\"--0:#BF3441;--1:#F97583\">const</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">state</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#BF3441;--1:#F97583\">=</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#6F42C1;--1:#B392F0\">reactive</span><span style=\"--0:#24292E;--1:#E1E4E8\">({ count })</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">3</div></div><div class=\"code\"><span style=\"--0:#24292E;--1:#E1E4E8\">console.</span><span style=\"--0:#6F42C1;--1:#B392F0\">log</span><span style=\"--0:#24292E;--1:#E1E4E8\">(state.count) </span><span style=\"--0:#616972;--1:#99A0A6\">// 0（自动解包）</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">4</div></div><div class=\"code\"><span style=\"--0:#24292E;--1:#E1E4E8\">state.count </span><span style=\"--0:#BF3441;--1:#F97583\">=</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">1</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">5</div></div><div class=\"code\"><span style=\"--0:#24292E;--1:#E1E4E8\">console.</span><span style=\"--0:#6F42C1;--1:#B392F0\">log</span><span style=\"--0:#24292E;--1:#E1E4E8\">(count.value) </span><span style=\"--0:#616972;--1:#99A0A6\">// 1</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div><p>数组 / 集合中：不会自动解包，需显式使用.value。</p><div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"js\" class=\"wrap\" style=\"--ecMaxLine:42ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#BF3441;--1:#F97583\">const</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">books</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#BF3441;--1:#F97583\">=</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#6F42C1;--1:#B392F0\">reactive</span><span style=\"--0:#24292E;--1:#E1E4E8\">([</span><span style=\"--0:#6F42C1;--1:#B392F0\">ref</span><span style=\"--0:#24292E;--1:#E1E4E8\">(</span><span style=\"--0:#032F62;--1:#9ECBFF\">'Vue Guide'</span><span style=\"--0:#24292E;--1:#E1E4E8\">)])</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">2</div></div><div class=\"code\"><span style=\"--0:#24292E;--1:#E1E4E8\">console.</span><span style=\"--0:#6F42C1;--1:#B392F0\">log</span><span style=\"--0:#24292E;--1:#E1E4E8\">(books[</span><span style=\"--0:#005CC5;--1:#79B8FF\">0</span><span style=\"--0:#24292E;--1:#E1E4E8\">].value) </span><span style=\"--0:#616972;--1:#99A0A6\">// 需显式.value</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div><p>模板中：仅顶级属性自动解包，嵌套属性需解构为顶级属性才能解包。</p><div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"js\" class=\"wrap\" style=\"--ecMaxLine:32ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#BF3441;--1:#F97583\">const</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">object</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#BF3441;--1:#F97583\">=</span><span style=\"--0:#24292E;--1:#E1E4E8\"> { id: </span><span style=\"--0:#6F42C1;--1:#B392F0\">ref</span><span style=\"--0:#24292E;--1:#E1E4E8\">(</span><span style=\"--0:#005CC5;--1:#79B8FF\">1</span><span style=\"--0:#24292E;--1:#E1E4E8\">) }</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">2</div></div><div class=\"code\"><span style=\"--0:#BF3441;--1:#F97583\">const</span><span style=\"--0:#24292E;--1:#E1E4E8\"> { </span><span style=\"--0:#005CC5;--1:#79B8FF\">id</span><span style=\"--0:#24292E;--1:#E1E4E8\"> } </span><span style=\"--0:#BF3441;--1:#F97583\">=</span><span style=\"--0:#24292E;--1:#E1E4E8\"> object </span><span style=\"--0:#616972;--1:#99A0A6\">// 解构为顶级属性</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div><p>模板中<code>{{ id + 1 }}</code>生效（解包），而<code>{{ object.id + 1 }}</code>不生效（未解包）。</p><p>如果 ref 是文本插值的最终计算值 (即 <code>{{ }}</code> 标签)，会自动解包。该特性仅仅是文本插值的一个便利特性，等价于 <code>{{ object.id.value }}</code>。</p></section>\n<section><h2 id=\"五关键问题\">五、关键问题<a class=\"anchor\" href=\"#五关键问题\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h2><section><h3 id=\"为什么-ref-需要-value-访问\">为什么 ref 需要 .value 访问？<a class=\"anchor\" href=\"#为什么-ref-需要-value-访问\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h3><p>因为在标准的 JavaScript 中，检测普通变量的访问和修改是行不通的。但可以通过 getter 和 setter 方法来拦截对象属性的 get 和 set 操作。</p><p>而 ref 的设计思路是：用一个对象包裹原始值，这个对象只暴露一个 <code>.value</code> 属性。通过为 <code>.value</code> 定义 getter 和 setter，Vue 就能在你访问 <code>xxx.value</code> 时追踪依赖（收集谁在用这个值），在你修改 <code>xxx.value = ...</code> 时触发更新（通知用到这个值的地方重新渲染）。</p><p>简单说，<code>.value</code> 是 Vue 为了让原始类型也能具备响应式，而 “绕的一小步”—— 通过对象属性的拦截能力，间接实现对原始值的追踪。</p></section><section><h3 id=\"ref和reactive的核心区别是什么\">ref()和reactive()的核心区别是什么？<a class=\"anchor\" href=\"#ref和reactive的核心区别是什么\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h3><p>① 支持类型：ref()支持所有数据类型（原始值、对象等），reactive()仅支持对象、数组等非原始类型；\n② 访问方式：ref()需通过.value访问 / 修改值，reactive()直接通过属性访问；\n③ 局限性：reactive()存在无法替换对象、解构丢失响应性等问题，ref()无这些限制；\n④ 解包规则：ref()在模板中自动解包，作为响应式对象属性时也自动解包，而reactive()无类似解包逻辑。</p></section><section><h3 id=\"为什么修改响应式状态后-dom-没有立即更新如何确保在-dom-更新后执行代码\">为什么修改响应式状态后 DOM 没有立即更新？如何确保在 DOM 更新后执行代码？<a class=\"anchor\" href=\"#为什么修改响应式状态后-dom-没有立即更新如何确保在-dom-更新后执行代码\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h3><p>Vue 会将所有状态修改缓冲到 “next tick” 更新周期中，确保每个组件只更新一次，提升性能。若需在 DOM 更新后执行代码，可使用nextTick()全局 API，它返回一个 Promise，在 DOM 更新完成后 resolve。示例：</p><div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"js\" class=\"wrap\" style=\"--ecMaxLine:30ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#BF3441;--1:#F97583\">import</span><span style=\"--0:#24292E;--1:#E1E4E8\"> { nextTick } </span><span style=\"--0:#BF3441;--1:#F97583\">from</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">'vue'</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">2</div></div><div class=\"code\"><span style=\"--0:#BF3441;--1:#F97583\">async</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#BF3441;--1:#F97583\">function</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#6F42C1;--1:#B392F0\">update</span><span style=\"--0:#24292E;--1:#E1E4E8\">() {</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">3</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">  </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">count.value</span><span style=\"--0:#BF3441;--1:#F97583\">++</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">4</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#BF3441;--1:#F97583\">await</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#6F42C1;--1:#B392F0\">nextTick</span><span style=\"--0:#24292E;--1:#E1E4E8\">()</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">5</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#616972;--1:#99A0A6\">// DOM已更新</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">6</div></div><div class=\"code\"><span style=\"--0:#24292E;--1:#E1E4E8\">}</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div></section><section><h3 id=\"在模板中使用ref时为什么有时需要显式value有时不需要\">在模板中使用ref时，为什么有时需要显式.value，有时不需要？<a class=\"anchor\" href=\"#在模板中使用ref时为什么有时需要显式value有时不需要\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h3><p>模板中ref的解包规则为：\n① 顶级属性自动解包（无需.value），如<code>const count = ref(0)</code>在模板中<code>{{ count }}</code>生效；\n② 嵌套属性（如<code>object.id</code>，其中id是ref）不会自动解包，需解构为顶级属性（<code>const { id } = object</code>）才能解包；\n③ 若ref是文本插值的最终值（如<code>{{ object.id }}</code>），会自动解包（等价于<code>{{ object.id.value }}</code>）。因此，非顶级嵌套ref在模板中参与计算时需先解构，否则需显式处理。</p></section><section><h3 id=\"浅层响应性的核心适用场景是什么\">浅层响应性的核心适用场景是什么？<a class=\"anchor\" href=\"#浅层响应性的核心适用场景是什么\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h3><p><strong>核心适用场景：数据 “大而不变” 或 “仅需整体替换”</strong>\n当数据满足以下特征时，用浅层响应性可以显著提升性能：</p><p><strong>处理 “大型不可变数据”（如后端返回的海量列表）</strong>\n<strong>场景</strong>：从后端获取的大型列表（如 1000 条以上数据），且业务中只需要展示、不需要修改其中的嵌套属性（仅可能整体替换列表）。\n<strong>问题</strong>：如果用普通ref或reactive，Vue 会递归地将所有嵌套属性转为响应式（创建大量 Proxy），导致初始化时性能开销大。\n<strong>解决方案</strong>：用shallowRef，只追踪.value的整体替换，不处理内部属性：</p><div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"js\" class=\"wrap\" style=\"--ecMaxLine:32ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#BF3441;--1:#F97583\">import</span><span style=\"--0:#24292E;--1:#E1E4E8\"> { shallowRef } </span><span style=\"--0:#BF3441;--1:#F97583\">from</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">'vue'</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">2</div></div><div class=\"code\"><span style=\"--0:#616972;--1:#99A0A6\">// 假设data是包含1000条数据的大型数组</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">3</div></div><div class=\"code\"><span style=\"--0:#BF3441;--1:#F97583\">const</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">bigList</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#BF3441;--1:#F97583\">=</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#6F42C1;--1:#B392F0\">shallowRef</span><span style=\"--0:#24292E;--1:#E1E4E8\">(data)</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">4</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">5</div></div><div class=\"code\"><span style=\"--0:#616972;--1:#99A0A6\">// ✅ 有效：整体替换时触发更新（符合业务需求）</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">6</div></div><div class=\"code\"><span style=\"--0:#24292E;--1:#E1E4E8\">bigList.value </span><span style=\"--0:#BF3441;--1:#F97583\">=</span><span style=\"--0:#24292E;--1:#E1E4E8\"> newData</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">7</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">8</div></div><div class=\"code\"><span style=\"--0:#616972;--1:#99A0A6\">// ❌ 无效：修改内部属性不会触发更新（但业务本就不需要修改）</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">9</div></div><div class=\"code\"><span style=\"--0:#24292E;--1:#E1E4E8\">bigList.value[</span><span style=\"--0:#005CC5;--1:#79B8FF\">0</span><span style=\"--0:#24292E;--1:#E1E4E8\">].name </span><span style=\"--0:#BF3441;--1:#F97583\">=</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">'新名字'</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div><p><strong>管理 “纯展示性的复杂对象”（如配置项、图表数据）</strong>\n<strong>场景</strong>：页面中的配置对象（如表单布局配置、图表的 option），结构复杂但运行中不会修改嵌套属性，只会整体替换。\n<strong>问题</strong>：深层响应性会对嵌套的每个对象 / 数组创建 Proxy，而这些 Proxy 完全用不上，属于浪费。\n<strong>解决方案</strong>：用shallowReactive（对象）或shallowRef（整体替换）：</p><div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"js\" class=\"wrap\" style=\"--ecMaxLine:38ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#BF3441;--1:#F97583\">import</span><span style=\"--0:#24292E;--1:#E1E4E8\"> { shallowReactive } </span><span style=\"--0:#BF3441;--1:#F97583\">from</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">'vue'</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">2</div></div><div class=\"code\"><span style=\"--0:#616972;--1:#99A0A6\">// 复杂配置对象，仅用于展示，不修改内部属性</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">3</div></div><div class=\"code\"><span style=\"--0:#BF3441;--1:#F97583\">const</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">chartOptions</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#BF3441;--1:#F97583\">=</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#6F42C1;--1:#B392F0\">shallowReactive</span><span style=\"--0:#24292E;--1:#E1E4E8\">({</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">4</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">  </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">xAxis: { type: </span><span style=\"--0:#032F62;--1:#9ECBFF\">'category'</span><span style=\"--0:#24292E;--1:#E1E4E8\"> },</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">5</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">  </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">series: [{ data: [</span><span style=\"--0:#005CC5;--1:#79B8FF\">1</span><span style=\"--0:#24292E;--1:#E1E4E8\">, </span><span style=\"--0:#005CC5;--1:#79B8FF\">2</span><span style=\"--0:#24292E;--1:#E1E4E8\">, </span><span style=\"--0:#005CC5;--1:#79B8FF\">3</span><span style=\"--0:#24292E;--1:#E1E4E8\">] }]</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">6</div></div><div class=\"code\"><span style=\"--0:#24292E;--1:#E1E4E8\">})</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">7</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">8</div></div><div class=\"code\"><span style=\"--0:#616972;--1:#99A0A6\">// ✅ 有效：修改顶层属性会触发更新（如果需要）</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">9</div></div><div class=\"code\"><span style=\"--0:#24292E;--1:#E1E4E8\">chartOptions.xAxis </span><span style=\"--0:#BF3441;--1:#F97583\">=</span><span style=\"--0:#24292E;--1:#E1E4E8\"> { type: </span><span style=\"--0:#032F62;--1:#9ECBFF\">'value'</span><span style=\"--0:#24292E;--1:#E1E4E8\"> }</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">10</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">11</div></div><div class=\"code\"><span style=\"--0:#616972;--1:#99A0A6\">// ❌ 无效：修改嵌套属性不触发更新（业务不需要）</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">12</div></div><div class=\"code\"><span style=\"--0:#24292E;--1:#E1E4E8\">chartOptions.series[</span><span style=\"--0:#005CC5;--1:#79B8FF\">0</span><span style=\"--0:#24292E;--1:#E1E4E8\">].data.</span><span style=\"--0:#6F42C1;--1:#B392F0\">push</span><span style=\"--0:#24292E;--1:#E1E4E8\">(</span><span style=\"--0:#005CC5;--1:#79B8FF\">4</span><span style=\"--0:#24292E;--1:#E1E4E8\">)</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div><p><strong>手动控制更新时机（避免频繁触发）</strong>\n<strong>场景</strong>：需要批量修改数据，且希望 “修改完所有内容后再统一更新 DOM”，而不是每改一个属性就更新一次。\n<strong>问题</strong>：普通响应式会在每次修改时触发更新，批量操作时可能导致多次无用渲染。\n<strong>解决方案</strong>：用shallowRef配合triggerRef（手动触发更新）：</p><div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"js\" class=\"wrap\" style=\"--ecMaxLine:49ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#BF3441;--1:#F97583\">import</span><span style=\"--0:#24292E;--1:#E1E4E8\"> { shallowRef, triggerRef } </span><span style=\"--0:#BF3441;--1:#F97583\">from</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">'vue'</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">2</div></div><div class=\"code\"><span style=\"--0:#BF3441;--1:#F97583\">const</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">formData</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#BF3441;--1:#F97583\">=</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#6F42C1;--1:#B392F0\">shallowRef</span><span style=\"--0:#24292E;--1:#E1E4E8\">({ name: </span><span style=\"--0:#032F62;--1:#9ECBFF\">''</span><span style=\"--0:#24292E;--1:#E1E4E8\">, age: </span><span style=\"--0:#005CC5;--1:#79B8FF\">0</span><span style=\"--0:#24292E;--1:#E1E4E8\"> })</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">3</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">4</div></div><div class=\"code\"><span style=\"--0:#616972;--1:#99A0A6\">// 批量修改（不会触发更新）</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">5</div></div><div class=\"code\"><span style=\"--0:#24292E;--1:#E1E4E8\">formData.value.name </span><span style=\"--0:#BF3441;--1:#F97583\">=</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">'张三'</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">6</div></div><div class=\"code\"><span style=\"--0:#24292E;--1:#E1E4E8\">formData.value.age </span><span style=\"--0:#BF3441;--1:#F97583\">=</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">20</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">7</div></div><div class=\"code\"><span style=\"--0:#616972;--1:#99A0A6\">// ...更多修改</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">8</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">9</div></div><div class=\"code\"><span style=\"--0:#616972;--1:#99A0A6\">// 手动触发一次更新（减少渲染次数）</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">10</div></div><div class=\"code\"><span style=\"--0:#6F42C1;--1:#B392F0\">triggerRef</span><span style=\"--0:#24292E;--1:#E1E4E8\">(formData)</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div><p><strong>不适用场景：警惕 “过度优化”</strong>\n浅层响应性的 “性能优化” 是有代价的 —— 丢失了深层追踪能力，因此以下场景绝对不能用：</p><ul>\n<li>数据需要修改嵌套属性（如用户信息对象{ user: { name: ‘xxx’ } }，需要修改name）；</li>\n<li>数据结构简单（如仅包含 1-2 层的小对象），此时深层响应性的性能开销可忽略，没必要用浅层；</li>\n<li>新手对响应式原理不熟悉，容易因 “修改不触发更新” 导致 bug。</li>\n</ul><blockquote>\n<p>浅层响应性是 “按需关闭深层追踪” 的优化手段，核心适用场景是：\n<strong>数据结构复杂但仅需整体替换，或嵌套属性完全不需要修改。</strong>\n它的设计不是为了 “替代” 普通响应式，而是在特定场景下（如处理大型数据）减少不必要的性能消耗，属于 “进阶优化技巧”，需结合具体业务判断是否使用。</p>\n</blockquote></section></section>","metadata":{"headings":[{"depth":2,"slug":"一-声明响应式状态","text":"一. 声明响应式状态#"},{"depth":3,"slug":"1-组合式-apiref","text":"1. 组合式 API：ref()#"},{"depth":3,"slug":"2-组合式-apireactive","text":"2. 组合式 API：reactive()#"},{"depth":2,"slug":"二-核心特性","text":"二. 核心特性#"},{"depth":3,"slug":"1-深层响应式","text":"1. 深层响应式#"},{"depth":3,"slug":"2-dom-更新时机","text":"2. DOM 更新时机#"},{"depth":2,"slug":"三-reactive-的局限性","text":"三. reactive() 的局限性#"},{"depth":2,"slug":"四-ref-解包细节","text":"四. ref 解包细节#"},{"depth":2,"slug":"五关键问题","text":"五、关键问题#"},{"depth":3,"slug":"为什么-ref-需要-value-访问","text":"为什么 ref 需要 .value 访问？#"},{"depth":3,"slug":"ref和reactive的核心区别是什么","text":"ref()和reactive()的核心区别是什么？#"},{"depth":3,"slug":"为什么修改响应式状态后-dom-没有立即更新如何确保在-dom-更新后执行代码","text":"为什么修改响应式状态后 DOM 没有立即更新？如何确保在 DOM 更新后执行代码？#"},{"depth":3,"slug":"在模板中使用ref时为什么有时需要显式value有时不需要","text":"在模板中使用ref时，为什么有时需要显式.value，有时不需要？#"},{"depth":3,"slug":"浅层响应性的核心适用场景是什么","text":"浅层响应性的核心适用场景是什么？#"}],"localImagePaths":[],"remoteImagePaths":[],"frontmatter":{"title":"Vue3 笔记：响应式基础","published":"2025-08-16T00:00:00.000Z","image":"./vue.png","category":"Vue","tags":["Vue","学习笔记"],"minutes":12,"words":2451,"excerpt":"最近翻 Vue3 文档，重新过了一遍响应式的基础内容。之前用的时候总有些细节记不清，比如 ref 和 reactive 到底该怎么选、为什么有时候改了数据页面不更，这次特意整理了笔记（过程中也借助了大模型辅助梳理逻辑、补充细节😉），主要是给自己后续查着方便，内容以复习要点为主，可能有理解不到位的地方，先记下来慢慢修正。"},"imagePaths":[]}},"collection":"posts"}],"2025-08-14":[{"id":"docker/docker学习笔记-二","data":{"title":"Docker学习笔记(二)：容器数据卷","published":"2025-08-14T00:00:00.000Z","draft":false,"description":"","image":"","tags":["Docker","学习笔记"],"category":"","lang":"","pinned":false,"author":"","sourceLink":"","licenseName":"","licenseUrl":"","encrypted":false,"password":"","prevTitle":"Docker学习笔记(三)：部署MySQL","prevSlug":"docker/docker学习笔记-三","nextTitle":"Vue3 笔记：响应式基础","nextSlug":"vue/vue3-响应式基础"},"body":"## 一、数据卷核心概念\n\n### 1.1 定义\n\n**数据卷是宿主机文件系统中的一个目录或文件**，通过挂载机制与容器内指定路径关联，实现宿主机与容器的双向数据共享。\n\n### 1.2 本质\n\n- 类似Linux的`mount`命令，容器访问挂载路径时实际操作的是宿主机数据卷\n- 数据卷独立于容器生命周期，容器删除后数据仍保存在宿主机\n\n## 二、数据卷的三大核心作用\n\n数据卷的设计初衷，就是为了解决容器与数据分离的问题，其核心作用可以概括为三点：\n\n### 2.1 容器数据持久化\n\n- **场景**：数据库、日志文件等需要长期保存的数据\n- **案例**：MySQL容器挂载数据卷后，即使容器崩溃，数据库文件仍可通过数据卷恢复\n\n### 2.2 宿主机与容器双向交互\n\n- **实时同步特性**：\n  - 宿主机修改卷目录文件 → 容器内立即生效（如本地代码编辑后容器热更新）\n  - 容器生成数据（日志、配置）→ 实时同步到宿主机（方便本地查看分析）\n\n### 2.3 多容器数据共享\n\n- **场景**：前端容器与后端容器共享静态资源、多个服务共享配置文件\n- **案例**：Nginx（展示静态页）与Node.js（生成静态页）通过数据卷自动同步资源\n\n## 三、数据卷的基础操作实践\n\n### 3.1 创建并挂载数据卷（基础命令）\n\n使用docker run命令时，通过-v参数可以直接创建并挂载数据卷：\n\n```bash\n# 语法：docker run -v 宿主机路径:容器内路径 [其他参数] 镜像名\ndocker run -d \\\n  -p 8080:80 \\\n  -v /root/nginx/myapp:/usr/share/nginx/html \\  # 挂载数据卷\n  --name mynginx \\\n  nginx\n```\n\n上述命令的含义是：\n\n- 启动一个名为mynginx的 Nginx 容器；\n\n- 将宿主机的/root/nginx/myapp目录（若不存在会自动创建）挂载到容器内的/usr/share/nginx/html（Nginx 默认静态文件目录）；\n\n- 此时在宿主机/root/nginx/myapp中放入index.html，访问[http://localhost:8080](http://localhost:8080/)即可看到页面。\n\n### 3.2. 查看挂载详情\n\n通过docker inspect命令可以查看容器的挂载详情：​\n\n```bash\ndocker inspect mynginx​\n```\n\n在输出的 JSON 结果中，找到Mounts字段，会显示如下信息：\n\n```typescript\n\"Mounts\": [​\n    {​\n        \"Type\": \"bind\",​\n        \"Source\": \"/root/nginx/myapp\",  // 宿主机目录​\n        \"Destination\": \"/usr/share/nginx/html\",  // 容器内目录​\n        \"Mode\": \"\",\n        \"RW\": true,  // 读写权限（默认可读写）​\n        \"Propagation\": \"rprivate\"​\n    }​\n]​\n```\n\n## 四、数据卷容器：简化多容器共享场景\n\n当多个容器需要共享数据时，逐一为每个容器配置-v参数会显得繁琐。**数据卷容器**（Volume Container）正是为简化这种场景而生。\n\n### 4.1 什么是数据卷容器？\n\n- 专门用于管理数据卷的 \"中介容器\"，其他容器通过`--volumes-from`继承其挂载配置\n- 优势：简化多容器挂载配置，统一管理数据卷路径\n\n### 4.2 使用步骤\n\n#### 步骤 1：创建数据卷容器\n\n```bash\n# 创建仅用于挂载数据卷的容器（无需运行服务）\ndocker run -it \\\n  -v /data:/shared-data \\  # 定义数据卷\n  --name volume-container \\  # 命名数据卷容器\n  ubuntu /bin/bash\n```\n\n#### 步骤 2：其他容器继承挂载配置\n\n```bash\n# 容器A继承数据卷\ndocker run -it --volumes-from volume-container --name container-A ubuntu /bin/bash\n\n# 容器B继承数据卷（与A共享同一数据卷）\ndocker run -it --volumes-from volume-container --name container-B ubuntu /bin/bash\n```\n\n- **效果**：容器 A、B 与宿主机`/data`目录实时同步数据\n\n### 4.3 注意事项\n\n1. 数据卷容器停止 / 删除后，其他容器仍可正常使用数据卷\n2. 彻底清理数据卷需手动删除宿主机对应目录（如`/data`）\n3. 可多层继承（容器 A 继承自数据卷容器，容器 B 继承自容器 A）\n\n## 五、复习要点总结\n\n1. **核心目标**：解决 \"容器临时性\" 与 \"数据持久性\" 的矛盾\n2. **基础命令**：`-v`挂载、`docker inspect`查看、`--volumes-from`继承\n3. **关键区别**：\n   - 普通挂载：直接指定宿主机路径（适合单容器）\n   - 数据卷容器：通过中介容器管理（适合多容器共享）","filePath":"src/content/posts/docker/Docker学习笔记-二.md","digest":"6c52cffa974f01b1","rendered":{"html":"<section><h2 id=\"一数据卷核心概念\">一、数据卷核心概念<a class=\"anchor\" href=\"#一数据卷核心概念\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h2><section><h3 id=\"11-定义\">1.1 定义<a class=\"anchor\" href=\"#11-定义\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h3><p><strong>数据卷是宿主机文件系统中的一个目录或文件</strong>，通过挂载机制与容器内指定路径关联，实现宿主机与容器的双向数据共享。</p></section><section><h3 id=\"12-本质\">1.2 本质<a class=\"anchor\" href=\"#12-本质\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h3><ul>\n<li>类似Linux的<code>mount</code>命令，容器访问挂载路径时实际操作的是宿主机数据卷</li>\n<li>数据卷独立于容器生命周期，容器删除后数据仍保存在宿主机</li>\n</ul></section></section>\n<section><h2 id=\"二数据卷的三大核心作用\">二、数据卷的三大核心作用<a class=\"anchor\" href=\"#二数据卷的三大核心作用\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h2><p>数据卷的设计初衷，就是为了解决容器与数据分离的问题，其核心作用可以概括为三点：</p><section><h3 id=\"21-容器数据持久化\">2.1 容器数据持久化<a class=\"anchor\" href=\"#21-容器数据持久化\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h3><ul>\n<li><strong>场景</strong>：数据库、日志文件等需要长期保存的数据</li>\n<li><strong>案例</strong>：MySQL容器挂载数据卷后，即使容器崩溃，数据库文件仍可通过数据卷恢复</li>\n</ul></section><section><h3 id=\"22-宿主机与容器双向交互\">2.2 宿主机与容器双向交互<a class=\"anchor\" href=\"#22-宿主机与容器双向交互\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h3><ul>\n<li><strong>实时同步特性</strong>：\n<ul>\n<li>宿主机修改卷目录文件 → 容器内立即生效（如本地代码编辑后容器热更新）</li>\n<li>容器生成数据（日志、配置）→ 实时同步到宿主机（方便本地查看分析）</li>\n</ul>\n</li>\n</ul></section><section><h3 id=\"23-多容器数据共享\">2.3 多容器数据共享<a class=\"anchor\" href=\"#23-多容器数据共享\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h3><ul>\n<li><strong>场景</strong>：前端容器与后端容器共享静态资源、多个服务共享配置文件</li>\n<li><strong>案例</strong>：Nginx（展示静态页）与Node.js（生成静态页）通过数据卷自动同步资源</li>\n</ul></section></section>\n<section><h2 id=\"三数据卷的基础操作实践\">三、数据卷的基础操作实践<a class=\"anchor\" href=\"#三数据卷的基础操作实践\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h2><section><h3 id=\"31-创建并挂载数据卷基础命令\">3.1 创建并挂载数据卷（基础命令）<a class=\"anchor\" href=\"#31-创建并挂载数据卷基础命令\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h3><p>使用docker run命令时，通过-v参数可以直接创建并挂载数据卷：</p><div class=\"expressive-code\"><link rel=\"stylesheet\" href=\"/_astro/ec.xyvso.css\"><script type=\"module\" src=\"/_astro/ec.g1fg5.js\">\x3C/script><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"bash\" class=\"wrap\" style=\"--ecMaxLine:55ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#616972;--1:#99A0A6\"># 语法：docker run -v 宿主机路径:容器内路径 [其他参数] 镜像名</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">2</div></div><div class=\"code\"><span style=\"--0:#6F42C1;--1:#B392F0\">docker</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">run</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">-d</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">\\</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">3</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#005CC5;--1:#79B8FF\">-p</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">8080:80</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">\\</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">4</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#005CC5;--1:#79B8FF\">-v</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">/root/nginx/myapp:/usr/share/nginx/html</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">\\ </span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#616972;--1:#99A0A6\"># 挂载数据卷</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">5</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#6F42C1;--1:#B392F0\">--name</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">mynginx</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">\\</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">6</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#032F62;--1:#9ECBFF\">nginx</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div><p>上述命令的含义是：</p><ul>\n<li>\n<p>启动一个名为mynginx的 Nginx 容器；</p>\n</li>\n<li>\n<p>将宿主机的/root/nginx/myapp目录（若不存在会自动创建）挂载到容器内的/usr/share/nginx/html（Nginx 默认静态文件目录）；</p>\n</li>\n<li>\n<p>此时在宿主机/root/nginx/myapp中放入index.html，访问<a href=\"http://localhost:8080/\">http://localhost:8080</a>即可看到页面。</p>\n</li>\n</ul></section><section><h3 id=\"32-查看挂载详情\">3.2. 查看挂载详情<a class=\"anchor\" href=\"#32-查看挂载详情\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h3><p>通过docker inspect命令可以查看容器的挂载详情：​</p><div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"bash\" class=\"wrap\" style=\"--ecMaxLine:23ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#6F42C1;--1:#B392F0\">docker</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">inspect</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">mynginx​</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div><p>在输出的 JSON 结果中，找到Mounts字段，会显示如下信息：</p><div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"typescript\" class=\"wrap\" style=\"--ecMaxLine:58ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#032F62;--1:#9ECBFF\">\"Mounts\"</span><span style=\"--0:#24292E;--1:#E1E4E8\">: [​</span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">2</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">    </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">{​</span></div></div><div class=\"ec-line\" style=\"--ecIndent:8ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">3</div></div><div class=\"code\"><span class=\"indent\">        </span><span style=\"--0:#032F62;--1:#9ECBFF\">\"Type\"</span><span style=\"--0:#24292E;--1:#E1E4E8\">: </span><span style=\"--0:#032F62;--1:#9ECBFF\">\"bind\"</span><span style=\"--0:#24292E;--1:#E1E4E8\">,​</span></div></div><div class=\"ec-line\" style=\"--ecIndent:8ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">4</div></div><div class=\"code\"><span class=\"indent\">        </span><span style=\"--0:#032F62;--1:#9ECBFF\">\"Source\"</span><span style=\"--0:#24292E;--1:#E1E4E8\">: </span><span style=\"--0:#032F62;--1:#9ECBFF\">\"/root/nginx/myapp\"</span><span style=\"--0:#24292E;--1:#E1E4E8\">,  </span><span style=\"--0:#616972;--1:#99A0A6\">// 宿主机目录​</span></div></div><div class=\"ec-line\" style=\"--ecIndent:8ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">5</div></div><div class=\"code\"><span class=\"indent\">        </span><span style=\"--0:#032F62;--1:#9ECBFF\">\"Destination\"</span><span style=\"--0:#24292E;--1:#E1E4E8\">: </span><span style=\"--0:#032F62;--1:#9ECBFF\">\"/usr/share/nginx/html\"</span><span style=\"--0:#24292E;--1:#E1E4E8\">,  </span><span style=\"--0:#616972;--1:#99A0A6\">// 容器内目录​</span></div></div><div class=\"ec-line\" style=\"--ecIndent:8ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">6</div></div><div class=\"code\"><span class=\"indent\">        </span><span style=\"--0:#032F62;--1:#9ECBFF\">\"Mode\"</span><span style=\"--0:#24292E;--1:#E1E4E8\">: </span><span style=\"--0:#032F62;--1:#9ECBFF\">\"\"</span><span style=\"--0:#24292E;--1:#E1E4E8\">,</span></div></div><div class=\"ec-line\" style=\"--ecIndent:8ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">7</div></div><div class=\"code\"><span class=\"indent\">        </span><span style=\"--0:#032F62;--1:#9ECBFF\">\"RW\"</span><span style=\"--0:#24292E;--1:#E1E4E8\">: </span><span style=\"--0:#005CC5;--1:#79B8FF\">true</span><span style=\"--0:#24292E;--1:#E1E4E8\">,  </span><span style=\"--0:#616972;--1:#99A0A6\">// 读写权限（默认可读写）​</span></div></div><div class=\"ec-line\" style=\"--ecIndent:8ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">8</div></div><div class=\"code\"><span class=\"indent\">        </span><span style=\"--0:#032F62;--1:#9ECBFF\">\"Propagation\"</span><span style=\"--0:#24292E;--1:#E1E4E8\">: </span><span style=\"--0:#032F62;--1:#9ECBFF\">\"rprivate\"</span><span style=\"--0:#24292E;--1:#E1E4E8\">​</span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">9</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">    </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">}​</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">10</div></div><div class=\"code\"><span style=\"--0:#24292E;--1:#E1E4E8\">]​</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div></section></section>\n<section><h2 id=\"四数据卷容器简化多容器共享场景\">四、数据卷容器：简化多容器共享场景<a class=\"anchor\" href=\"#四数据卷容器简化多容器共享场景\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h2><p>当多个容器需要共享数据时，逐一为每个容器配置-v参数会显得繁琐。<strong>数据卷容器</strong>（Volume Container）正是为简化这种场景而生。</p><section><h3 id=\"41-什么是数据卷容器\">4.1 什么是数据卷容器？<a class=\"anchor\" href=\"#41-什么是数据卷容器\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h3><ul>\n<li>专门用于管理数据卷的 “中介容器”，其他容器通过<code>--volumes-from</code>继承其挂载配置</li>\n<li>优势：简化多容器挂载配置，统一管理数据卷路径</li>\n</ul></section><section><h3 id=\"42-使用步骤\">4.2 使用步骤<a class=\"anchor\" href=\"#42-使用步骤\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h3><section><h4 id=\"步骤-1创建数据卷容器\">步骤 1：创建数据卷容器<a class=\"anchor\" href=\"#步骤-1创建数据卷容器\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h4><div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"bash\" class=\"wrap\" style=\"--ecMaxLine:38ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#616972;--1:#99A0A6\"># 创建仅用于挂载数据卷的容器（无需运行服务）</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">2</div></div><div class=\"code\"><span style=\"--0:#6F42C1;--1:#B392F0\">docker</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">run</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">-it</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">\\</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">3</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#005CC5;--1:#79B8FF\">-v</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">/data:/shared-data</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">\\ </span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#616972;--1:#99A0A6\"># 定义数据卷</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">4</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#6F42C1;--1:#B392F0\">--name</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">volume-container</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">\\ </span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#616972;--1:#99A0A6\"># 命名数据卷容器</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">5</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#6F42C1;--1:#B392F0\">ubuntu</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">/bin/bash</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div></section><section><h4 id=\"步骤-2其他容器继承挂载配置\">步骤 2：其他容器继承挂载配置<a class=\"anchor\" href=\"#步骤-2其他容器继承挂载配置\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h4><div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"bash\" class=\"wrap\" style=\"--ecMaxLine:82ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#616972;--1:#99A0A6\"># 容器A继承数据卷</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">2</div></div><div class=\"code\"><span style=\"--0:#6F42C1;--1:#B392F0\">docker</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">run</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">-it</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">--volumes-from</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">volume-container</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">--name</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">container-A</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">ubuntu</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">/bin/bash</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">3</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">4</div></div><div class=\"code\"><span style=\"--0:#616972;--1:#99A0A6\"># 容器B继承数据卷（与A共享同一数据卷）</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">5</div></div><div class=\"code\"><span style=\"--0:#6F42C1;--1:#B392F0\">docker</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">run</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">-it</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">--volumes-from</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">volume-container</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">--name</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">container-B</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">ubuntu</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">/bin/bash</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div><ul>\n<li><strong>效果</strong>：容器 A、B 与宿主机<code>/data</code>目录实时同步数据</li>\n</ul></section></section><section><h3 id=\"43-注意事项\">4.3 注意事项<a class=\"anchor\" href=\"#43-注意事项\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h3><ol>\n<li>数据卷容器停止 / 删除后，其他容器仍可正常使用数据卷</li>\n<li>彻底清理数据卷需手动删除宿主机对应目录（如<code>/data</code>）</li>\n<li>可多层继承（容器 A 继承自数据卷容器，容器 B 继承自容器 A）</li>\n</ol></section></section>\n<section><h2 id=\"五复习要点总结\">五、复习要点总结<a class=\"anchor\" href=\"#五复习要点总结\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h2><ol>\n<li><strong>核心目标</strong>：解决 “容器临时性” 与 “数据持久性” 的矛盾</li>\n<li><strong>基础命令</strong>：<code>-v</code>挂载、<code>docker inspect</code>查看、<code>--volumes-from</code>继承</li>\n<li><strong>关键区别</strong>：\n<ul>\n<li>普通挂载：直接指定宿主机路径（适合单容器）</li>\n<li>数据卷容器：通过中介容器管理（适合多容器共享）</li>\n</ul>\n</li>\n</ol></section>","metadata":{"headings":[{"depth":2,"slug":"一数据卷核心概念","text":"一、数据卷核心概念#"},{"depth":3,"slug":"11-定义","text":"1.1 定义#"},{"depth":3,"slug":"12-本质","text":"1.2 本质#"},{"depth":2,"slug":"二数据卷的三大核心作用","text":"二、数据卷的三大核心作用#"},{"depth":3,"slug":"21-容器数据持久化","text":"2.1 容器数据持久化#"},{"depth":3,"slug":"22-宿主机与容器双向交互","text":"2.2 宿主机与容器双向交互#"},{"depth":3,"slug":"23-多容器数据共享","text":"2.3 多容器数据共享#"},{"depth":2,"slug":"三数据卷的基础操作实践","text":"三、数据卷的基础操作实践#"},{"depth":3,"slug":"31-创建并挂载数据卷基础命令","text":"3.1 创建并挂载数据卷（基础命令）#"},{"depth":3,"slug":"32-查看挂载详情","text":"3.2. 查看挂载详情#"},{"depth":2,"slug":"四数据卷容器简化多容器共享场景","text":"四、数据卷容器：简化多容器共享场景#"},{"depth":3,"slug":"41-什么是数据卷容器","text":"4.1 什么是数据卷容器？#"},{"depth":3,"slug":"42-使用步骤","text":"4.2 使用步骤#"},{"depth":4,"slug":"步骤-1创建数据卷容器","text":"步骤 1：创建数据卷容器#"},{"depth":4,"slug":"步骤-2其他容器继承挂载配置","text":"步骤 2：其他容器继承挂载配置#"},{"depth":3,"slug":"43-注意事项","text":"4.3 注意事项#"},{"depth":2,"slug":"五复习要点总结","text":"五、复习要点总结#"}],"localImagePaths":[],"remoteImagePaths":[],"frontmatter":{"title":"Docker学习笔记(二)：容器数据卷","published":"2025-08-14T00:00:00.000Z","tags":["Docker","学习笔记"],"minutes":5,"words":1028,"excerpt":"数据卷是宿主机文件系统中的一个目录或文件，通过挂载机制与容器内指定路径关联，实现宿主机与容器的双向数据共享。"},"imagePaths":[]}},"collection":"posts"},{"id":"docker/docker学习笔记-三","data":{"title":"Docker学习笔记(三)：部署MySQL","published":"2025-08-14T00:00:00.000Z","draft":false,"description":"","image":"","tags":["Docker","学习笔记"],"category":"","lang":"","pinned":false,"author":"","sourceLink":"","licenseName":"","licenseUrl":"","encrypted":false,"password":"","prevTitle":"Docker学习笔记(一)：Docker常用命令","prevSlug":"docker/docker学习笔记-一","nextTitle":"Docker学习笔记(二)：容器数据卷","nextSlug":"docker/docker学习笔记-二"},"body":"在之前的服务器环境中，手动安装并配置MySQL的过程较为繁琐，因此我转而采用Docker容器化方案进行部署，通过标准化镜像和持久化存储机制，实现了更高效的数据库环境管理与版本控制。\n\n这篇笔记就记录下用 Docker 部署 MySQL 的全过程，给自己留个存档。\n\n## 一、准备工作\n\n### 1. 搜索MySQL镜像（可选）\n\n```bash\ndocker search mysql\n```\n\n❌问题：搜索出现超时，配置了国内镜像源也没用\n\n### 2. 拉取MySQL 5.7镜像\n\n因为听说指定版本拉取更稳妥，避免后续出现版本兼容问题，所以我选择了 5.7 版本：\n\n```bash\ndocker pull mysql:5.7\n```\n\n### 3. 创建MySQL目录\n\n```bash\nmkdir -p ~/mysql/{log,data,conf}\n\n# 进入创建好的mysql目录\ncd ~/mysql\n```\n\n- log目录打算用来存 MySQL 的运行日志\n\n- data目录很重要，用来存数据库的数据，这样就算容器没了，数据也还在\n\n- conf目录用来放一些自定义的配置文件\n\n## 二、部署MySQL容器\n\n### 1. 运行MySQL容器\n\n```bash\ndocker run -p 3307:3306 --name mysql \\\n-v $PWD/log:/var/log/mysql \\\n-v $PWD/data:/var/lib/mysql \\\n-v $PWD/conf:/etc/mysql/conf.d \\\n-e MYSQL_ROOT_PASSWORD=123456 \\\n-d mysql:5.7\n```\n\n✅ **参数说明**：\n\n- -p 3307:3306`：端口映射（宿主机 3307 端口 → 容器 3306 端口，避免与宿主机本地 MySQL 冲突）\n- `--name mysql`：容器命名（便于后续操作）\n- `-v`：目录挂载（实现宿主机与容器文件共享，保障数据持久化）\n- `-e MYSQL_ROOT_PASSWORD=123456`：设置 root 用户密码\n- `-d`：后台运行容器\n- `mysql:5.7`：指定使用的镜像\n- **`$PWD`**它会动态记录你在终端中当前所在的目录的**绝对路径**，因为我们已经进入了mysql目录，所以这里是/root/mysql\n\n### 2. 连接MySQL容器\n\n在容器内部，使用 root 用户登录 MySQL：\n\n```bash\n# 进入运行中的容器\ndocker exec -it mysql bash\n\n# 在容器内登录MySQL（注意：密码输入时无回显，输入完成直接回车）\nmysql -u root -p\n# 输入密码：123456（之前设置的root密码）\n```\n\n⚠️ **注意**：密码参数`-p`后无空格，直接接密码\n\n## 三、创建远程访问用户并授权\n\n执行以下 SQL 命令创建一个允许远程访问的用户（以用户名 admin为例）：\n\n```sql\n-- 创建用户（允许所有IP访问）\nCREATE USER 'admin'@'%' IDENTIFIED BY 'your_password';\n\n-- 授予所有权限（根据需要调整权限范围）\nGRANT ALL PRIVILEGES ON *.* TO 'admin'@'%' WITH GRANT OPTION;\n\n-- 刷新权限使设置生效\nFLUSH PRIVILEGES;\n```\n\n**权限说明**：\n\n- '%' 表示允许从任何 IP 地址访问\n- 如果你想限制特定 IP，可以将 % 替换为具体 IP，例如 '192.168.1.100'\n- *.* 表示所有数据库的所有表，可根据需要限制为特定数据库，例如 appdb.*\n- ALL PRIVILEGES 可以替换为具体权限，如 SELECT,INSERT,UPDATE\n\n## 补充：容器与镜像意外删后的恢复方法\n\n在使用 Docker 的过程中，偶尔可能会误删容器或镜像，不必惊慌，只要我们做好了数据持久化，恢复工作会非常简单。以下是具体的恢复方法：\n\n### 1. 容器被误删后的恢复\n\n如果只是删除了容器（`docker rm`），但数据卷（volume）和镜像还在，恢复步骤如下：\n\n**步骤1：确认数据目录是否完好**\n\n```bash\n# 检查之前挂载的数据目录\nls -l ~/mysql/data\n```\n\n如果能看到数据库文件（如 ibdata1、ib_logfile0 等），说明数据没有丢失\n\n**步骤2：重新创建并启动容器**\n使用与之前相同的运行命令即可，Docker 会自动使用现有数据目录：\n\n```bash\ndocker run -p 3307:3306 --name mysql \\\n-v ~/mysql/log:/var/log/mysql \\\n-v ~/mysql/data:/var/lib/mysql \\\n-v ~/mysql/conf:/etc/mysql/conf.d \\\n-e MYSQL_ROOT_PASSWORD=123456 \\\n-d mysql:5.7\n```\n\n新容器会直接读取已有的数据文件，恢复到删除前的状态\n\n### 2. 镜像被误删后的恢复\n\nDocker 中，**镜像被删除的前提是关联容器已停止并删除**（否则会提示 “容器正在使用镜像”，无法删除）。因此镜像误删时，容器必然已不存在，需重新拉取镜像并重建容器。\n\n```bash\n(base) [root@iZ7xvcxkgs6i5l3z060714Z ~]# docker rmi mysql:5.7\nError response from daemon: conflict: unable to remove repository reference \"mysql:5.7\" (must force) - container 60d1ed6c60a6 is using its referenced image 5107333e08a8\n```\n\n恢复步骤：\n\n**步骤1：重新拉取相同版本的镜像**\n\n```bash\ndocker pull mysql:5.7\n```\n\n**步骤2：基于原有数据目录重建容器**\n\n### 3. 预防措施\n\n恢复的前提是 “数据未丢失”，因此提前预防比事后恢复更重要。建议做好以下 3 点：\n\n**3.1 定期备份数据目录**\n\n```bash\n# 压缩备份数据目录\n# 格式：tar -zcvf 备份文件名 目标目录\ntar -zcvf mysql_backup_$(date +%Y%m%d).tar.gz ~/mysql/data\n```\n\n**如何从备份恢复**？\n\n如果数据目录丢失，可从备份文件恢复：\n\n```bash\n# 解压备份到数据目录（确保目录存在）\ntar -zxvf ~/mysql_backup_20250815.tar.gz -C ~/mysql/\n# 解压后会自动覆盖~/mysql/data目录，再重建容器即可\n```\n\n**3.2 导出容器配置**\n\n```bash\n# 创建启动脚本\ncat > start_mysql.sh << 'EOF'\n#!/bin/bash\ndocker run -p 3307:3306 --name mysql \\\n-v ~/mysql/log:/var/log/mysql \\\n-v ~/mysql/data:/var/lib/mysql \\\n-v ~/mysql/conf:/etc/mysql/conf.d \\\n-e MYSQL_ROOT_PASSWORD=123456 \\\n-d mysql:5.7\nEOF\n\n# 赋予执行权限\nchmod +x start_mysql.sh\n```\n\n**3.3 慎用删除命令**\n执行删除操作前先确认：\n\n```bash\n# 查看所有容器（包括停止的）\ndocker ps -a\n# 查看所有镜像\ndocker images\n```\n\n## 四、小结\n\n通过Docker容器化部署MySQL，我成功解决了手动安装配置MySQL的繁琐问题，实现了数据库环境的快速部署与管理。同时，容器化还带来了环境隔离、版本控制、迁移方便等优势，为后续的应用开发提供了更可靠的基础。\n\n其他软件如Nginx、Redis、Tomcat等也可以采用类似的方式进行容器化部署，极大地简化了应用的运维管理。","filePath":"src/content/posts/docker/Docker学习笔记-三.md","digest":"be380b75e751b4ef","rendered":{"html":"<p>在之前的服务器环境中，手动安装并配置MySQL的过程较为繁琐，因此我转而采用Docker容器化方案进行部署，通过标准化镜像和持久化存储机制，实现了更高效的数据库环境管理与版本控制。</p>\n<p>这篇笔记就记录下用 Docker 部署 MySQL 的全过程，给自己留个存档。</p>\n<section><h2 id=\"一准备工作\">一、准备工作<a class=\"anchor\" href=\"#一准备工作\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h2><section><h3 id=\"1-搜索mysql镜像可选\">1. 搜索MySQL镜像（可选）<a class=\"anchor\" href=\"#1-搜索mysql镜像可选\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h3><div class=\"expressive-code\"><link rel=\"stylesheet\" href=\"/_astro/ec.xyvso.css\"><script type=\"module\" src=\"/_astro/ec.g1fg5.js\">\x3C/script><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"bash\" class=\"wrap\" style=\"--ecMaxLine:19ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#6F42C1;--1:#B392F0\">docker</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">search</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">mysql</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div><p>❌问题：搜索出现超时，配置了国内镜像源也没用</p></section><section><h3 id=\"2-拉取mysql-57镜像\">2. 拉取MySQL 5.7镜像<a class=\"anchor\" href=\"#2-拉取mysql-57镜像\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h3><p>因为听说指定版本拉取更稳妥，避免后续出现版本兼容问题，所以我选择了 5.7 版本：</p><div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"bash\" class=\"wrap\" style=\"--ecMaxLine:21ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#6F42C1;--1:#B392F0\">docker</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">pull</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">mysql:5.7</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div></section><section><h3 id=\"3-创建mysql目录\">3. 创建MySQL目录<a class=\"anchor\" href=\"#3-创建mysql目录\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h3><div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"bash\" class=\"wrap\" style=\"--ecMaxLine:32ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#6F42C1;--1:#B392F0\">mkdir</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">-p</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">~/mysql/{log,data,conf}</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">2</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">3</div></div><div class=\"code\"><span style=\"--0:#616972;--1:#99A0A6\"># 进入创建好的mysql目录</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">4</div></div><div class=\"code\"><span style=\"--0:#005CC5;--1:#79B8FF\">cd</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">~/mysql</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div><ul>\n<li>\n<p>log目录打算用来存 MySQL 的运行日志</p>\n</li>\n<li>\n<p>data目录很重要，用来存数据库的数据，这样就算容器没了，数据也还在</p>\n</li>\n<li>\n<p>conf目录用来放一些自定义的配置文件</p>\n</li>\n</ul></section></section>\n<section><h2 id=\"二部署mysql容器\">二、部署MySQL容器<a class=\"anchor\" href=\"#二部署mysql容器\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h2><section><h3 id=\"1-运行mysql容器\">1. 运行MySQL容器<a class=\"anchor\" href=\"#1-运行mysql容器\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h3><div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"bash\" class=\"wrap\" style=\"--ecMaxLine:38ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#6F42C1;--1:#B392F0\">docker</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">run</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">-p</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">3307:3306</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">--name</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">mysql</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">\\</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">2</div></div><div class=\"code\"><span style=\"--0:#24292E;--1:#E1E4E8\">-v $PWD</span><span style=\"--0:#032F62;--1:#9ECBFF\">/log:/var/log/mysql</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">\\</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">3</div></div><div class=\"code\"><span style=\"--0:#24292E;--1:#E1E4E8\">-v $PWD</span><span style=\"--0:#032F62;--1:#9ECBFF\">/data:/var/lib/mysql</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">\\</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">4</div></div><div class=\"code\"><span style=\"--0:#24292E;--1:#E1E4E8\">-v $PWD</span><span style=\"--0:#032F62;--1:#9ECBFF\">/conf:/etc/mysql/conf.d</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">\\</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">5</div></div><div class=\"code\"><span style=\"--0:#24292E;--1:#E1E4E8\">-e </span><span style=\"--0:#032F62;--1:#9ECBFF\">MYSQL_ROOT_PASSWORD=</span><span style=\"--0:#005CC5;--1:#79B8FF\">123456</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">\\</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">6</div></div><div class=\"code\"><span style=\"--0:#24292E;--1:#E1E4E8\">-d </span><span style=\"--0:#032F62;--1:#9ECBFF\">mysql:5.7</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div><p>✅ <strong>参数说明</strong>：</p><ul>\n<li>-p 3307:3306`：端口映射（宿主机 3307 端口 → 容器 3306 端口，避免与宿主机本地 MySQL 冲突）</li>\n<li><code>--name mysql</code>：容器命名（便于后续操作）</li>\n<li><code>-v</code>：目录挂载（实现宿主机与容器文件共享，保障数据持久化）</li>\n<li><code>-e MYSQL_ROOT_PASSWORD=123456</code>：设置 root 用户密码</li>\n<li><code>-d</code>：后台运行容器</li>\n<li><code>mysql:5.7</code>：指定使用的镜像</li>\n<li><strong><code>$PWD</code><strong>它会动态记录你在终端中当前所在的目录的</strong>绝对路径</strong>，因为我们已经进入了mysql目录，所以这里是/root/mysql</li>\n</ul></section><section><h3 id=\"2-连接mysql容器\">2. 连接MySQL容器<a class=\"anchor\" href=\"#2-连接mysql容器\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h3><p>在容器内部，使用 root 用户登录 MySQL：</p><div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"bash\" class=\"wrap\" style=\"--ecMaxLine:35ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#616972;--1:#99A0A6\"># 进入运行中的容器</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">2</div></div><div class=\"code\"><span style=\"--0:#6F42C1;--1:#B392F0\">docker</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">exec</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">-it</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">mysql</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">bash</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">3</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">4</div></div><div class=\"code\"><span style=\"--0:#616972;--1:#99A0A6\"># 在容器内登录MySQL（注意：密码输入时无回显，输入完成直接回车）</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">5</div></div><div class=\"code\"><span style=\"--0:#6F42C1;--1:#B392F0\">mysql</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">-u</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">root</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">-p</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">6</div></div><div class=\"code\"><span style=\"--0:#616972;--1:#99A0A6\"># 输入密码：123456（之前设置的root密码）</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div><p>⚠️ <strong>注意</strong>：密码参数<code>-p</code>后无空格，直接接密码</p></section></section>\n<section><h2 id=\"三创建远程访问用户并授权\">三、创建远程访问用户并授权<a class=\"anchor\" href=\"#三创建远程访问用户并授权\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h2><p>执行以下 SQL 命令创建一个允许远程访问的用户（以用户名 admin为例）：</p><div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"sql\" class=\"wrap\" style=\"--ecMaxLine:61ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#616972;--1:#99A0A6\">-- 创建用户（允许所有IP访问）</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">2</div></div><div class=\"code\"><span style=\"--0:#BF3441;--1:#F97583\">CREATE</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#BF3441;--1:#F97583\">USER</span><span style=\"--0:#24292E;--1:#E1E4E8\"> '</span><span style=\"--0:#6F42C1;--1:#B392F0\">admin</span><span style=\"--0:#24292E;--1:#E1E4E8\">'@</span><span style=\"--0:#032F62;--1:#9ECBFF\">'%'</span><span style=\"--0:#24292E;--1:#E1E4E8\"> IDENTIFIED </span><span style=\"--0:#BF3441;--1:#F97583\">BY</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">'your_password'</span><span style=\"--0:#24292E;--1:#E1E4E8\">;</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">3</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">4</div></div><div class=\"code\"><span style=\"--0:#616972;--1:#99A0A6\">-- 授予所有权限（根据需要调整权限范围）</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">5</div></div><div class=\"code\"><span style=\"--0:#BF3441;--1:#F97583\">GRANT</span><span style=\"--0:#24292E;--1:#E1E4E8\"> ALL PRIVILEGES </span><span style=\"--0:#BF3441;--1:#F97583\">ON</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#BF3441;--1:#F97583\">*</span><span style=\"--0:#24292E;--1:#E1E4E8\">.</span><span style=\"--0:#BF3441;--1:#F97583\">*</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#BF3441;--1:#F97583\">TO</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">'admin'</span><span style=\"--0:#24292E;--1:#E1E4E8\">@</span><span style=\"--0:#032F62;--1:#9ECBFF\">'%'</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#BF3441;--1:#F97583\">WITH</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#BF3441;--1:#F97583\">GRANT</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#BF3441;--1:#F97583\">OPTION</span><span style=\"--0:#24292E;--1:#E1E4E8\">;</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">6</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">7</div></div><div class=\"code\"><span style=\"--0:#616972;--1:#99A0A6\">-- 刷新权限使设置生效</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">8</div></div><div class=\"code\"><span style=\"--0:#24292E;--1:#E1E4E8\">FLUSH PRIVILEGES;</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div><p><strong>权限说明</strong>：</p><ul>\n<li>’%’ 表示允许从任何 IP 地址访问</li>\n<li>如果你想限制特定 IP，可以将 % 替换为具体 IP，例如 ‘192.168.1.100’</li>\n<li><em>.</em> 表示所有数据库的所有表，可根据需要限制为特定数据库，例如 appdb.*</li>\n<li>ALL PRIVILEGES 可以替换为具体权限，如 SELECT,INSERT,UPDATE</li>\n</ul></section>\n<section><h2 id=\"补充容器与镜像意外删后的恢复方法\">补充：容器与镜像意外删后的恢复方法<a class=\"anchor\" href=\"#补充容器与镜像意外删后的恢复方法\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h2><p>在使用 Docker 的过程中，偶尔可能会误删容器或镜像，不必惊慌，只要我们做好了数据持久化，恢复工作会非常简单。以下是具体的恢复方法：</p><section><h3 id=\"1-容器被误删后的恢复\">1. 容器被误删后的恢复<a class=\"anchor\" href=\"#1-容器被误删后的恢复\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h3><p>如果只是删除了容器（<code>docker rm</code>），但数据卷（volume）和镜像还在，恢复步骤如下：</p><p><strong>步骤1：确认数据目录是否完好</strong></p><div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"bash\" class=\"wrap\" style=\"--ecMaxLine:18ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#616972;--1:#99A0A6\"># 检查之前挂载的数据目录</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">2</div></div><div class=\"code\"><span style=\"--0:#6F42C1;--1:#B392F0\">ls</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">-l</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">~/mysql/data</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div><p>如果能看到数据库文件（如 ibdata1、ib_logfile0 等），说明数据没有丢失</p><p><strong>步骤2：重新创建并启动容器</strong>\n使用与之前相同的运行命令即可，Docker 会自动使用现有数据目录：</p><div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"bash\" class=\"wrap\" style=\"--ecMaxLine:38ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#6F42C1;--1:#B392F0\">docker</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">run</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">-p</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">3307:3306</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">--name</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">mysql</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">\\</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">2</div></div><div class=\"code\"><span style=\"--0:#24292E;--1:#E1E4E8\">-v </span><span style=\"--0:#032F62;--1:#9ECBFF\">~/mysql/log:/var/log/mysql</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">\\</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">3</div></div><div class=\"code\"><span style=\"--0:#24292E;--1:#E1E4E8\">-v </span><span style=\"--0:#032F62;--1:#9ECBFF\">~/mysql/data:/var/lib/mysql</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">\\</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">4</div></div><div class=\"code\"><span style=\"--0:#24292E;--1:#E1E4E8\">-v </span><span style=\"--0:#032F62;--1:#9ECBFF\">~/mysql/conf:/etc/mysql/conf.d</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">\\</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">5</div></div><div class=\"code\"><span style=\"--0:#24292E;--1:#E1E4E8\">-e </span><span style=\"--0:#032F62;--1:#9ECBFF\">MYSQL_ROOT_PASSWORD=</span><span style=\"--0:#005CC5;--1:#79B8FF\">123456</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">\\</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">6</div></div><div class=\"code\"><span style=\"--0:#24292E;--1:#E1E4E8\">-d </span><span style=\"--0:#032F62;--1:#9ECBFF\">mysql:5.7</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div><p>新容器会直接读取已有的数据文件，恢复到删除前的状态</p></section><section><h3 id=\"2-镜像被误删后的恢复\">2. 镜像被误删后的恢复<a class=\"anchor\" href=\"#2-镜像被误删后的恢复\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h3><p>Docker 中，<strong>镜像被删除的前提是关联容器已停止并删除</strong>（否则会提示 “容器正在使用镜像”，无法删除）。因此镜像误删时，容器必然已不存在，需重新拉取镜像并重建容器。</p><div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"bash\" class=\"wrap\" style=\"--ecMaxLine:168ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#24292E;--1:#E1E4E8\">(</span><span style=\"--0:#6F42C1;--1:#B392F0\">base</span><span style=\"--0:#24292E;--1:#E1E4E8\">) [root@iZ7xvcxkgs6i5l3z060714Z </span><span style=\"--0:#BF3441;--1:#F97583\">~</span><span style=\"--0:#24292E;--1:#E1E4E8\">]# docker rmi mysql:5.7</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">2</div></div><div class=\"code\"><span style=\"--0:#6F42C1;--1:#B392F0\">Error</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">response</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">from</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">daemon:</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">conflict:</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">unable</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">to</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">remove</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">repository</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">reference</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">\"mysql:5.7\"</span><span style=\"--0:#24292E;--1:#E1E4E8\"> (must </span><span style=\"--0:#032F62;--1:#9ECBFF\">force</span><span style=\"--0:#24292E;--1:#E1E4E8\">) - container 60d1ed6c60a6 is using its referenced image 5107333e08a8</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div><p>恢复步骤：</p><p><strong>步骤1：重新拉取相同版本的镜像</strong></p><div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"bash\" class=\"wrap\" style=\"--ecMaxLine:21ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#6F42C1;--1:#B392F0\">docker</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">pull</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">mysql:5.7</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div><p><strong>步骤2：基于原有数据目录重建容器</strong></p></section><section><h3 id=\"3-预防措施\">3. 预防措施<a class=\"anchor\" href=\"#3-预防措施\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h3><p>恢复的前提是 “数据未丢失”，因此提前预防比事后恢复更重要。建议做好以下 3 点：</p><p><strong>3.1 定期备份数据目录</strong></p><div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"bash\" class=\"wrap\" style=\"--ecMaxLine:58ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#616972;--1:#99A0A6\"># 压缩备份数据目录</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">2</div></div><div class=\"code\"><span style=\"--0:#616972;--1:#99A0A6\"># 格式：tar -zcvf 备份文件名 目标目录</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">3</div></div><div class=\"code\"><span style=\"--0:#6F42C1;--1:#B392F0\">tar</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">-zcvf</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">mysql_backup_</span><span style=\"--0:#24292E;--1:#E1E4E8\">$(</span><span style=\"--0:#6F42C1;--1:#B392F0\">date</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">+%Y%m%d</span><span style=\"--0:#24292E;--1:#E1E4E8\">)</span><span style=\"--0:#032F62;--1:#9ECBFF\">.tar.gz</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">~/mysql/data</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div><p><strong>如何从备份恢复</strong>？</p><p>如果数据目录丢失，可从备份文件恢复：</p><div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"bash\" class=\"wrap\" style=\"--ecMaxLine:52ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#616972;--1:#99A0A6\"># 解压备份到数据目录（确保目录存在）</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">2</div></div><div class=\"code\"><span style=\"--0:#6F42C1;--1:#B392F0\">tar</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">-zxvf</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">~/mysql_backup_20250815.tar.gz</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">-C</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">~/mysql/</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">3</div></div><div class=\"code\"><span style=\"--0:#616972;--1:#99A0A6\"># 解压后会自动覆盖~/mysql/data目录，再重建容器即可</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div><p><strong>3.2 导出容器配置</strong></p><div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"bash\" class=\"wrap\" style=\"--ecMaxLine:38ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#616972;--1:#99A0A6\"># 创建启动脚本</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">2</div></div><div class=\"code\"><span style=\"--0:#6F42C1;--1:#B392F0\">cat</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#BF3441;--1:#F97583\">></span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">start_mysql.sh</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#BF3441;--1:#F97583\">&#x3C;&#x3C;</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">'EOF'</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">3</div></div><div class=\"code\"><span style=\"--0:#032F62;--1:#9ECBFF\">#!/bin/bash</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">4</div></div><div class=\"code\"><span style=\"--0:#032F62;--1:#9ECBFF\">docker run -p 3307:3306 --name mysql \\</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">5</div></div><div class=\"code\"><span style=\"--0:#032F62;--1:#9ECBFF\">-v ~/mysql/log:/var/log/mysql \\</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">6</div></div><div class=\"code\"><span style=\"--0:#032F62;--1:#9ECBFF\">-v ~/mysql/data:/var/lib/mysql \\</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">7</div></div><div class=\"code\"><span style=\"--0:#032F62;--1:#9ECBFF\">-v ~/mysql/conf:/etc/mysql/conf.d \\</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">8</div></div><div class=\"code\"><span style=\"--0:#032F62;--1:#9ECBFF\">-e MYSQL_ROOT_PASSWORD=123456 \\</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">9</div></div><div class=\"code\"><span style=\"--0:#032F62;--1:#9ECBFF\">-d mysql:5.7</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">10</div></div><div class=\"code\"><span style=\"--0:#032F62;--1:#9ECBFF\">EOF</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">11</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">12</div></div><div class=\"code\"><span style=\"--0:#616972;--1:#99A0A6\"># 赋予执行权限</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">13</div></div><div class=\"code\"><span style=\"--0:#6F42C1;--1:#B392F0\">chmod</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">+x</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">start_mysql.sh</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div><p><strong>3.3 慎用删除命令</strong>\n执行删除操作前先确认：</p><div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"bash\" class=\"wrap\" style=\"--ecMaxLine:15ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#616972;--1:#99A0A6\"># 查看所有容器（包括停止的）</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">2</div></div><div class=\"code\"><span style=\"--0:#6F42C1;--1:#B392F0\">docker</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">ps</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">-a</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">3</div></div><div class=\"code\"><span style=\"--0:#616972;--1:#99A0A6\"># 查看所有镜像</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">4</div></div><div class=\"code\"><span style=\"--0:#6F42C1;--1:#B392F0\">docker</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">images</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div></section></section>\n<section><h2 id=\"四小结\">四、小结<a class=\"anchor\" href=\"#四小结\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h2><p>通过Docker容器化部署MySQL，我成功解决了手动安装配置MySQL的繁琐问题，实现了数据库环境的快速部署与管理。同时，容器化还带来了环境隔离、版本控制、迁移方便等优势，为后续的应用开发提供了更可靠的基础。</p><p>其他软件如Nginx、Redis、Tomcat等也可以采用类似的方式进行容器化部署，极大地简化了应用的运维管理。</p></section>","metadata":{"headings":[{"depth":2,"slug":"一准备工作","text":"一、准备工作#"},{"depth":3,"slug":"1-搜索mysql镜像可选","text":"1. 搜索MySQL镜像（可选）#"},{"depth":3,"slug":"2-拉取mysql-57镜像","text":"2. 拉取MySQL 5.7镜像#"},{"depth":3,"slug":"3-创建mysql目录","text":"3. 创建MySQL目录#"},{"depth":2,"slug":"二部署mysql容器","text":"二、部署MySQL容器#"},{"depth":3,"slug":"1-运行mysql容器","text":"1. 运行MySQL容器#"},{"depth":3,"slug":"2-连接mysql容器","text":"2. 连接MySQL容器#"},{"depth":2,"slug":"三创建远程访问用户并授权","text":"三、创建远程访问用户并授权#"},{"depth":2,"slug":"补充容器与镜像意外删后的恢复方法","text":"补充：容器与镜像意外删后的恢复方法#"},{"depth":3,"slug":"1-容器被误删后的恢复","text":"1. 容器被误删后的恢复#"},{"depth":3,"slug":"2-镜像被误删后的恢复","text":"2. 镜像被误删后的恢复#"},{"depth":3,"slug":"3-预防措施","text":"3. 预防措施#"},{"depth":2,"slug":"四小结","text":"四、小结#"}],"localImagePaths":[],"remoteImagePaths":[],"frontmatter":{"title":"Docker学习笔记(三)：部署MySQL","published":"2025-08-14T00:00:00.000Z","tags":["Docker","学习笔记"],"minutes":7,"words":1419,"excerpt":"在之前的服务器环境中，手动安装并配置MySQL的过程较为繁琐，因此我转而采用Docker容器化方案进行部署，通过标准化镜像和持久化存储机制，实现了更高效的数据库环境管理与版本控制。"},"imagePaths":[]}},"collection":"posts"}],"2025-08-13":[{"id":"docker/docker学习笔记-一","data":{"title":"Docker学习笔记(一)：Docker常用命令","published":"2025-08-13T00:00:00.000Z","draft":false,"description":"","image":"","tags":["Docker","学习笔记"],"category":"","lang":"","pinned":false,"author":"","sourceLink":"","licenseName":"","licenseUrl":"","encrypted":false,"password":"","prevTitle":"解决SpringBoot中Lombok注解失效的那些坑","prevSlug":"bug/解决springboot中lombok注解失效的那些坑","nextTitle":"Docker学习笔记(三)：部署MySQL","nextSlug":"docker/docker学习笔记-三"},"body":"整理了 Docker 核心命令的用法，从服务管理到容器操作，方便后续复习查阅。\n\n## 一、Docker服务基础操作（守护进程管理）\n\n### 1.1 服务启停控制\n\n- 启动：`systemctl start docker`  \n  ✅ 核心功能：启动Docker守护进程（dockerd），初始化镜像/容器管理环境  \n  ⚠️ 注意：启动失败用`journalctl -u docker`查日志  \n- 停止：`systemctl stop docker`  \n  ✅ 核心功能：终止守护进程及所有运行中容器  \n  ⚠️ 注意：先手动停止重要容器，避免数据未持久化  \n- 重启：`systemctl restart docker`  \n  ✅ 核心场景：修改配置文件（如`/etc/docker/daemon.json`）后生效  \n\n### 1.2 服务状态查询\n\n- 命令：`systemctl status docker`  \n  ✅ 核心功能：查看服务运行状态及最近日志  \n  🔍 状态解读：  \n  - 绿色`active (running)`：正常运行  \n  - 红色`inactive (dead)`：已停止  \n\n## 二、镜像操作命令（Image）\n\n### 2.1 镜像获取与搜索\n\n- 拉取镜像：`docker pull <镜像名:标签>`  \n  ✅ 核心功能：从远程仓库下载镜像（默认Docker Hub）  \n  🔍 格式示例：`docker pull mysql:8.0`（指定版本，推荐生产环境使用）  \n  ⚠️ 注意：`latest`标签可能随时间变化，避免生产环境直接使用  \n\n- 搜索镜像：`docker search <关键词>`  \n  ✅ 核心功能：在Docker Hub检索镜像  \n  🔍 结果解读：`OFFICIAL=OK`为官方镜像（安全性更高）  \n  ❌ 常见问题：网络超时（`i/o timeout`）→ 需配置国内镜像源  \n\n### 2.2 镜像管理与查询\n\n- 查看本地镜像：`docker images`  \n  ✅ 核心功能：列出本地所有镜像信息  \n  🔍 输出解读：`REPOSITORY`（仓库名）、`TAG`（版本）、`IMAGE ID`（唯一标识）  \n  ⚡ 快捷用法：`docker images -q`（仅输出镜像ID，用于批量操作）  \n\n- 查看镜像详情：`docker inspect <镜像ID/名称>`  \n  ✅ 核心功能：获取镜像完整元数据（构建历史、环境变量等）  \n\n### 2.3 镜像删除\n\n- 命令：`docker rmi <镜像ID/名称>`  \n  ✅ 核心功能：删除本地镜像  \n  ⚠️ 注意：若镜像被容器引用（即使容器已停止），需先删除容器  \n  ⚡ 强制删除：`docker rmi -f <镜像ID>`（不推荐，可能残留数据）  \n\n## 三、容器操作命令（Container）\n\n### 3.1 容器创建与启动\n\n- 新建并启动：`docker run [参数] <镜像名>`  \n  ✅ 核心功能：基于镜像创建并启动容器（= 新建+启动）  \n  ⚡ 必学参数：  \n  - `-d`：后台运行（不占用终端）  \n  - `-p 主机端口:容器端口`：端口映射（如`-p 8080:80`）  \n  - `--name <名称>`：指定容器名（避免随机名称）  \n  - `-it`：交互式终端（如`docker run -it ubuntu /bin/bash`）  \n\n- 启动已停止容器：`docker start <容器ID/名称>`  \n  ✅ 核心区别：`start`用于“启动已存在容器”，`run`用于“新建+启动”  \n\n### 3.2 容器查看与进入\n\n- 查看容器列表：  \n  - `docker ps`：查看运行中容器  \n  - `docker ps -a`：查看所有容器（含已停止）  \n  - `docker ps -q`：仅输出容器ID（批量操作如`docker stop $(docker ps -q)`）  \n\n- 进入运行中容器：`docker exec -it <容器ID/名称> <终端命令>`  \n  ✅ 示例：`docker exec -it my-nginx /bin/bash`（进入bash终端）  \n  ⚠️ 注意：需容器处于运行状态，`-it`参数缺一不可（保持交互）  \n\n### 3.3 容器停止与销毁\n\n- 停止容器：`docker stop <容器ID/名称>`  \n  ✅ 核心功能：优雅停止（发送SIGTERM信号，允许保存数据）  \n  ⚡ 强制停止：`docker kill <容器ID>`（发送SIGKILL，紧急情况使用）  \n\n- 删除容器：`docker rm <容器ID/名称>`  \n  ✅ 核心功能：删除已停止容器  \n  ⚠️ 注意：运行中容器需先停止，或用`docker rm -f <容器ID>`强制删除（谨慎使用）  \n\n### 3.4 容器详情查询\n\n- 命令：`docker inspect <容器ID/名称>`  \n  ✅ 核心用途：查看IP地址、挂载路径等关键信息（如`NetworkSettings.IPAddress`）  \n\n## 四、常见问题与易错点\n\n### 4.1 网络问题\n\n- 现象：拉取/搜索镜像超时（`i/o timeout`）  \n- 解决：配置国内镜像源（如阿里云、网易），修改`/etc/docker/daemon.json`后重启服务  \n\n### 4.2 命令混淆\n\n| 易混淆命令       | 核心区别                                  |\n|------------------|-------------------------------------------|\n| `docker run` vs `docker start` | `run`=新建+启动；`start`=启动已存在容器   |\n| `docker stop` vs `docker kill` | `stop`优雅停止；`kill`强制终止            |\n| `docker rmi` vs `docker rm`   | `rmi`删镜像；`rm`删容器                   |\n\n## 五、学习小结\n\n### 核心逻辑链\n\n服务（daemon）→ 镜像（模板）→ 容器（运行实例），操作需按“启动服务→管理镜像→操作容器”递进  \n\n### 后续重点\n\n1. 配置国内镜像源，解决网络问题  \n2. 学习数据卷（`volume`），解决容器数据持久化  \n3. 实战部署（Nginx/MySQL），练习命令组合使用","filePath":"src/content/posts/docker/Docker学习笔记-一.md","digest":"a0484de542acc88b","rendered":{"html":"<p>整理了 Docker 核心命令的用法，从服务管理到容器操作，方便后续复习查阅。</p>\n<section><h2 id=\"一docker服务基础操作守护进程管理\">一、Docker服务基础操作（守护进程管理）<a class=\"anchor\" href=\"#一docker服务基础操作守护进程管理\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h2><section><h3 id=\"11-服务启停控制\">1.1 服务启停控制<a class=\"anchor\" href=\"#11-服务启停控制\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h3><ul>\n<li>启动：<code>systemctl start docker</code><br>\n✅ 核心功能：启动Docker守护进程（dockerd），初始化镜像/容器管理环境<br>\n⚠️ 注意：启动失败用<code>journalctl -u docker</code>查日志</li>\n<li>停止：<code>systemctl stop docker</code><br>\n✅ 核心功能：终止守护进程及所有运行中容器<br>\n⚠️ 注意：先手动停止重要容器，避免数据未持久化</li>\n<li>重启：<code>systemctl restart docker</code><br>\n✅ 核心场景：修改配置文件（如<code>/etc/docker/daemon.json</code>）后生效</li>\n</ul></section><section><h3 id=\"12-服务状态查询\">1.2 服务状态查询<a class=\"anchor\" href=\"#12-服务状态查询\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h3><ul>\n<li>命令：<code>systemctl status docker</code><br>\n✅ 核心功能：查看服务运行状态及最近日志<br>\n🔍 状态解读：\n<ul>\n<li>绿色<code>active (running)</code>：正常运行</li>\n<li>红色<code>inactive (dead)</code>：已停止</li>\n</ul>\n</li>\n</ul></section></section>\n<section><h2 id=\"二镜像操作命令image\">二、镜像操作命令（Image）<a class=\"anchor\" href=\"#二镜像操作命令image\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h2><section><h3 id=\"21-镜像获取与搜索\">2.1 镜像获取与搜索<a class=\"anchor\" href=\"#21-镜像获取与搜索\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h3><ul>\n<li>\n<p>拉取镜像：<code>docker pull &#x3C;镜像名:标签></code><br>\n✅ 核心功能：从远程仓库下载镜像（默认Docker Hub）<br>\n🔍 格式示例：<code>docker pull mysql:8.0</code>（指定版本，推荐生产环境使用）<br>\n⚠️ 注意：<code>latest</code>标签可能随时间变化，避免生产环境直接使用</p>\n</li>\n<li>\n<p>搜索镜像：<code>docker search &#x3C;关键词></code><br>\n✅ 核心功能：在Docker Hub检索镜像<br>\n🔍 结果解读：<code>OFFICIAL=OK</code>为官方镜像（安全性更高）<br>\n❌ 常见问题：网络超时（<code>i/o timeout</code>）→ 需配置国内镜像源</p>\n</li>\n</ul></section><section><h3 id=\"22-镜像管理与查询\">2.2 镜像管理与查询<a class=\"anchor\" href=\"#22-镜像管理与查询\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h3><ul>\n<li>\n<p>查看本地镜像：<code>docker images</code><br>\n✅ 核心功能：列出本地所有镜像信息<br>\n🔍 输出解读：<code>REPOSITORY</code>（仓库名）、<code>TAG</code>（版本）、<code>IMAGE ID</code>（唯一标识）<br>\n⚡ 快捷用法：<code>docker images -q</code>（仅输出镜像ID，用于批量操作）</p>\n</li>\n<li>\n<p>查看镜像详情：<code>docker inspect &#x3C;镜像ID/名称></code><br>\n✅ 核心功能：获取镜像完整元数据（构建历史、环境变量等）</p>\n</li>\n</ul></section><section><h3 id=\"23-镜像删除\">2.3 镜像删除<a class=\"anchor\" href=\"#23-镜像删除\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h3><ul>\n<li>命令：<code>docker rmi &#x3C;镜像ID/名称></code><br>\n✅ 核心功能：删除本地镜像<br>\n⚠️ 注意：若镜像被容器引用（即使容器已停止），需先删除容器<br>\n⚡ 强制删除：<code>docker rmi -f &#x3C;镜像ID></code>（不推荐，可能残留数据）</li>\n</ul></section></section>\n<section><h2 id=\"三容器操作命令container\">三、容器操作命令（Container）<a class=\"anchor\" href=\"#三容器操作命令container\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h2><section><h3 id=\"31-容器创建与启动\">3.1 容器创建与启动<a class=\"anchor\" href=\"#31-容器创建与启动\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h3><ul>\n<li>\n<p>新建并启动：<code>docker run [参数] &#x3C;镜像名></code><br>\n✅ 核心功能：基于镜像创建并启动容器（= 新建+启动）<br>\n⚡ 必学参数：</p>\n<ul>\n<li><code>-d</code>：后台运行（不占用终端）</li>\n<li><code>-p 主机端口:容器端口</code>：端口映射（如<code>-p 8080:80</code>）</li>\n<li><code>--name &#x3C;名称></code>：指定容器名（避免随机名称）</li>\n<li><code>-it</code>：交互式终端（如<code>docker run -it ubuntu /bin/bash</code>）</li>\n</ul>\n</li>\n<li>\n<p>启动已停止容器：<code>docker start &#x3C;容器ID/名称></code><br>\n✅ 核心区别：<code>start</code>用于“启动已存在容器”，<code>run</code>用于“新建+启动”</p>\n</li>\n</ul></section><section><h3 id=\"32-容器查看与进入\">3.2 容器查看与进入<a class=\"anchor\" href=\"#32-容器查看与进入\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h3><ul>\n<li>\n<p>查看容器列表：</p>\n<ul>\n<li><code>docker ps</code>：查看运行中容器</li>\n<li><code>docker ps -a</code>：查看所有容器（含已停止）</li>\n<li><code>docker ps -q</code>：仅输出容器ID（批量操作如<code>docker stop $(docker ps -q)</code>）</li>\n</ul>\n</li>\n<li>\n<p>进入运行中容器：<code>docker exec -it &#x3C;容器ID/名称> &#x3C;终端命令></code><br>\n✅ 示例：<code>docker exec -it my-nginx /bin/bash</code>（进入bash终端）<br>\n⚠️ 注意：需容器处于运行状态，<code>-it</code>参数缺一不可（保持交互）</p>\n</li>\n</ul></section><section><h3 id=\"33-容器停止与销毁\">3.3 容器停止与销毁<a class=\"anchor\" href=\"#33-容器停止与销毁\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h3><ul>\n<li>\n<p>停止容器：<code>docker stop &#x3C;容器ID/名称></code><br>\n✅ 核心功能：优雅停止（发送SIGTERM信号，允许保存数据）<br>\n⚡ 强制停止：<code>docker kill &#x3C;容器ID></code>（发送SIGKILL，紧急情况使用）</p>\n</li>\n<li>\n<p>删除容器：<code>docker rm &#x3C;容器ID/名称></code><br>\n✅ 核心功能：删除已停止容器<br>\n⚠️ 注意：运行中容器需先停止，或用<code>docker rm -f &#x3C;容器ID></code>强制删除（谨慎使用）</p>\n</li>\n</ul></section><section><h3 id=\"34-容器详情查询\">3.4 容器详情查询<a class=\"anchor\" href=\"#34-容器详情查询\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h3><ul>\n<li>命令：<code>docker inspect &#x3C;容器ID/名称></code><br>\n✅ 核心用途：查看IP地址、挂载路径等关键信息（如<code>NetworkSettings.IPAddress</code>）</li>\n</ul></section></section>\n<section><h2 id=\"四常见问题与易错点\">四、常见问题与易错点<a class=\"anchor\" href=\"#四常见问题与易错点\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h2><section><h3 id=\"41-网络问题\">4.1 网络问题<a class=\"anchor\" href=\"#41-网络问题\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h3><ul>\n<li>现象：拉取/搜索镜像超时（<code>i/o timeout</code>）</li>\n<li>解决：配置国内镜像源（如阿里云、网易），修改<code>/etc/docker/daemon.json</code>后重启服务</li>\n</ul></section><section><h3 id=\"42-命令混淆\">4.2 命令混淆<a class=\"anchor\" href=\"#42-命令混淆\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h3>\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n<table><thead><tr><th>易混淆命令</th><th>核心区别</th></tr></thead><tbody><tr><td><code>docker run</code> vs <code>docker start</code></td><td><code>run</code>=新建+启动；<code>start</code>=启动已存在容器</td></tr><tr><td><code>docker stop</code> vs <code>docker kill</code></td><td><code>stop</code>优雅停止；<code>kill</code>强制终止</td></tr><tr><td><code>docker rmi</code> vs <code>docker rm</code></td><td><code>rmi</code>删镜像；<code>rm</code>删容器</td></tr></tbody></table></section></section>\n<section><h2 id=\"五学习小结\">五、学习小结<a class=\"anchor\" href=\"#五学习小结\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h2><section><h3 id=\"核心逻辑链\">核心逻辑链<a class=\"anchor\" href=\"#核心逻辑链\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h3><p>服务（daemon）→ 镜像（模板）→ 容器（运行实例），操作需按“启动服务→管理镜像→操作容器”递进</p></section><section><h3 id=\"后续重点\">后续重点<a class=\"anchor\" href=\"#后续重点\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h3><ol>\n<li>配置国内镜像源，解决网络问题</li>\n<li>学习数据卷（<code>volume</code>），解决容器数据持久化</li>\n<li>实战部署（Nginx/MySQL），练习命令组合使用</li>\n</ol></section></section>","metadata":{"headings":[{"depth":2,"slug":"一docker服务基础操作守护进程管理","text":"一、Docker服务基础操作（守护进程管理）#"},{"depth":3,"slug":"11-服务启停控制","text":"1.1 服务启停控制#"},{"depth":3,"slug":"12-服务状态查询","text":"1.2 服务状态查询#"},{"depth":2,"slug":"二镜像操作命令image","text":"二、镜像操作命令（Image）#"},{"depth":3,"slug":"21-镜像获取与搜索","text":"2.1 镜像获取与搜索#"},{"depth":3,"slug":"22-镜像管理与查询","text":"2.2 镜像管理与查询#"},{"depth":3,"slug":"23-镜像删除","text":"2.3 镜像删除#"},{"depth":2,"slug":"三容器操作命令container","text":"三、容器操作命令（Container）#"},{"depth":3,"slug":"31-容器创建与启动","text":"3.1 容器创建与启动#"},{"depth":3,"slug":"32-容器查看与进入","text":"3.2 容器查看与进入#"},{"depth":3,"slug":"33-容器停止与销毁","text":"3.3 容器停止与销毁#"},{"depth":3,"slug":"34-容器详情查询","text":"3.4 容器详情查询#"},{"depth":2,"slug":"四常见问题与易错点","text":"四、常见问题与易错点#"},{"depth":3,"slug":"41-网络问题","text":"4.1 网络问题#"},{"depth":3,"slug":"42-命令混淆","text":"4.2 命令混淆#"},{"depth":2,"slug":"五学习小结","text":"五、学习小结#"},{"depth":3,"slug":"核心逻辑链","text":"核心逻辑链#"},{"depth":3,"slug":"后续重点","text":"后续重点#"}],"localImagePaths":[],"remoteImagePaths":[],"frontmatter":{"title":"Docker学习笔记(一)：Docker常用命令","published":"2025-08-13T00:00:00.000Z","tags":["Docker","学习笔记"],"minutes":6,"words":1127,"excerpt":"整理了 Docker 核心命令的用法，从服务管理到容器操作，方便后续复习查阅。"},"imagePaths":[]}},"collection":"posts"},{"id":"bug/解决springboot中lombok注解失效的那些坑","data":{"title":"解决SpringBoot中Lombok注解失效的那些坑","published":"2025-08-13T00:00:00.000Z","draft":false,"description":"","image":"","tags":["SpringBoot","Lombok","Bug"],"category":"技术踩坑","lang":"","pinned":false,"author":"","sourceLink":"","licenseName":"","licenseUrl":"","encrypted":false,"password":"","prevTitle":"Markdown Tutorial","prevSlug":"markdown-tutorial","nextTitle":"Docker学习笔记(一)：Docker常用命令","nextSlug":"docker/docker学习笔记-一"},"body":"在 SpringBoot 项目开发中，Lombok 注解突然失效是一个很常见的问题，表现为明明添加了 @Data 等注解，却在编译时出现 “找不到符号”（如缺失 getter/setter 方法）的错误。本文记录了我在项目中遇到该问题的排查过程，分析了 Lombok 注解失效与 Maven 编译插件（maven-compiler-plugin）配置、版本管理之间的关系，并总结了可行的解决方案和最佳实践。\n<!-- more -->\n\n在开发SpringBoot项目时，相信很多同学都遇到过Lombok注解突然失效的问题：代码里明明加了`@Data`注解，编译时却报\"找不到符号\"（比如缺失getter/setter方法）。最近我在项目中就遇到了类似问题，通过排查终于找到原因，在这里记录一下整个过程和解决方案。\n\n## 问题现象\n\n项目中使用了Lombok的`@Data`、`@Getter`等注解，但编译时出现一系列\"找不到符号\"错误：\n\n``` cmd\njava: 找不到符号\n  符号:   变量 log\n  位置: 类 org.hnu.tablerecognition.common.interceptor.JwtTokenInterceptor\n\njava: 找不到符号\n  符号:   方法 getRoleId()\n  位置: 类型为xxx.UpdateRoleMenuDto的变量 updateRoleMenuDto\n```\n\n检查代码发现实体类确实添加了`@Data`注解，依赖也已引入，这就让人很困惑了。\n\n## 项目环境与配置\n\n先看看我的项目依赖配置（pom.xml关键部分）：\n\n```xml\n<parent>\n  <groupId>org.springframework.boot</groupId>\n  <artifactId>spring-boot-starter-parent</artifactId>\n  <version>3.4.4</version>\n</parent>\n\n<dependencies>\n  <!-- Lombok依赖 -->\n  <dependency>\n    <groupId>org.projectlombok</groupId>\n    <artifactId>lombok</artifactId>\n    <optional>true</optional>\n  </dependency>\n  <!-- 其他依赖... -->\n</dependencies>\n\n<build>\n  <plugins>\n    <!-- 显式配置的编译插件 -->\n    <plugin>\n      <groupId>org.apache.maven.plugins</groupId>\n      <artifactId>maven-compiler-plugin</artifactId>\n      <configuration>\n        <annotationProcessorPaths>\n          <path>\n            <groupId>org.projectlombok</groupId>\n            <artifactId>lombok</artifactId>\n            <!-- 注意这里没有指定version -->\n          </path>\n        </annotationProcessorPaths>\n      </configuration>\n    </plugin>\n    <plugin>\n      <groupId>org.springframework.boot</groupId>\n      <artifactId>spring-boot-maven-plugin</artifactId>\n      <!-- 配置... -->\n    </plugin>\n  </plugins>\n</build>\n```\n\n## 问题分析\n\n经过排查，发现问题主要出在三个方面：\n\n### 1. Lombok版本管理问题\n\nSpringBoot的`spring-boot-starter-parent`会统一管理大部分官方 starters 的版本，但**Lombok并非SpringBoot官方组件**，所以其版本不会被parent默认管理。\n\n当在pom.xml中不指定Lombok版本时，Maven会尝试从依赖链中查找版本，但如果没有其他依赖间接引入Lombok，会导致：\n\n- 依赖版本缺失\n- 引入低版本或不兼容版本\n\n这会直接导致编译时无法解析Lombok注解，出现\"找不到符号\"错误。\n\n### 2. maven-compiler-plugin的配置冲突\n\n`maven-compiler-plugin`是Maven的编译插件，负责将Java源代码编译为字节码。我的问题就出在显式配置了这个插件，但存在两个问题：\n\n- 在`<annotationProcessorPaths>`中指定了Lombok却没有显式声明版本\n- 手动配置覆盖了SpringBoot父工程的默认配置\n\n### 3. Lombok的工作原理\n\nLombok通过**Java注解处理器（Annotation Processor）** 在编译时动态生成代码（如getter/setter）。要使其生效，编译器必须能找到Lombok的注解处理器（包含在lombok.jar中）。\n\nMaven中有两种方式指定注解处理器：\n\n- 显式配置：通过`maven-compiler-plugin`的`<annotationProcessorPaths>`指定\n- 默认机制：自动从项目依赖中寻找包含注解处理器的JAR包\n\n## 解决方案\n\n**方法一：显式指定Lombok版本（推荐）**\n\n在依赖和编译插件中**明确声明Lombok版本**，确保版本一致性：\n\n```xml\n<parent>\n  <groupId>org.springframework.boot</groupId>\n  <artifactId>spring-boot-starter-parent</artifactId>\n  <version>3.4.4</version>\n</parent>\n\n<dependencies>\n  <!-- Lombok依赖 -->\n  <dependency>\n    <groupId>org.projectlombok</groupId>\n    <artifactId>lombok</artifactId>\n    <optional>true</optional>\n    <version>1.18.24</version>\n  </dependency>\n  <!-- 其他依赖... -->\n</dependencies>\n\n<build>\n  <plugins>\n    <!-- 显式配置的编译插件 -->\n    <plugin>\n      <groupId>org.apache.maven.plugins</groupId>\n      <artifactId>maven-compiler-plugin</artifactId>\n      <configuration>\n        <annotationProcessorPaths>\n          <path>\n            <groupId>org.projectlombok</groupId>\n            <artifactId>lombok</artifactId>\n            <version>1.18.24</version>\n          </path>\n        </annotationProcessorPaths>\n      </configuration>\n    </plugin>\n    <plugin>\n      <groupId>org.springframework.boot</groupId>\n      <artifactId>spring-boot-maven-plugin</artifactId>\n      <!-- 配置... -->\n    </plugin>\n  </plugins>\n</build>\n```\n\n**核心要点**：若手动配置了`maven-compiler-plugin`，必须在`<annotationProcessorPaths>`中**同时指定版本**，否则Maven无法解析。\n\n**方法二：注释掉手动配置的`maven-compiler-plugin`**\n\n```xml\n<build>\n  <plugins>\n    <!-- 注释掉手动配置的编译插件 -->\n    <!-- <plugin>\n      <groupId>org.apache.maven.plugins</groupId>\n      <artifactId>maven-compiler-plugin</artifactId>\n      <configuration>\n        <annotationProcessorPaths>\n          <path>\n            <groupId>org.projectlombok</groupId>\n            <artifactId>lombok</artifactId>\n          </path>\n        </annotationProcessorPaths>\n      </configuration>\n    </plugin> -->\n    <plugin>\n      <groupId>org.springframework.boot</groupId>\n      <artifactId>spring-boot-maven-plugin</artifactId>\n      <!-- 配置... -->\n    </plugin>\n  </plugins>\n</build>\n```\n\n为什么这样就行？因为：\n\n1. **SpringBoot父工程已包含默认配置**：`spring-boot-starter-parent`已经内置了`maven-compiler-plugin`的默认配置，包括对注解处理器的支持\n\n2. **默认机制会自动发现Lombok**：Lombok的JAR包中包含`META-INF/services/javax.annotation.processing.Processor`文件，声明了它是注解处理器，父工程的默认配置会自动扫描并使用\n\n3. **避免了版本冲突**：注释掉手动配置后，Maven会使用依赖中声明的Lombok版本，不会出现版本不匹配问题\n\n## 最佳实践\n\n为了避免类似问题，总结几个最佳实践：\n\n1. **明确指定Lombok版本**：即使依赖管理正常，显式指定版本也能提高项目稳定性\n\n    ```xml\n    <dependency>\n      <groupId>org.projectlombok</groupId>\n      <artifactId>lombok</artifactId>\n      <version>1.18.24</version> <!-- 明确版本 -->\n      <optional>true</optional>\n    </dependency>\n    ```\n\n2. **正确配置IDE**：确保IDEA安装了Lombok插件并启用注解处理器\n   - 安装插件：`File -> Settings -> Plugins`搜索Lombok\n   - 启用注解处理：`File -> Settings -> Build, Execution, Deployment -> Compiler -> Annotation Processors`勾选`Enable annotation processing`\n3. **合理使用父工程配置**：对于SpringBoot项目，优先使用`spring-boot-starter-parent`提供的默认配置，除非有特殊需求，否则不要重复声明`maven-compiler-plugin`\n4. **需要自定义编译配置时**：如果必须手动配置`maven-compiler-plugin`，确保注解处理器路径配置完整\n\n```xml\n<plugin>\n  <groupId>org.apache.maven.plugins</groupId>\n  <artifactId>maven-compiler-plugin</artifactId>\n  <configuration>\n    <annotationProcessorPaths>\n      <path>\n        <groupId>org.projectlombok</groupId>\n        <artifactId>lombok</artifactId>\n        <version>1.18.24</version> <!-- 与依赖版本一致 -->\n      </path>\n    </annotationProcessorPaths>\n  </configuration>\n</plugin>\n```\n\n## 总结\n\nLombok注解失效的本质是**编译期注解处理器未被正确加载**。理解Maven依赖机制、SpringBoot父工程配置以及Lombok的工作原理后，问题便迎刃而解。","filePath":"src/content/posts/bug/解决SpringBoot中Lombok注解失效的那些坑.md","digest":"93945aa9416344d7","rendered":{"html":"<p>在 SpringBoot 项目开发中，Lombok 注解突然失效是一个很常见的问题，表现为明明添加了 @Data 等注解，却在编译时出现 “找不到符号”（如缺失 getter/setter 方法）的错误。本文记录了我在项目中遇到该问题的排查过程，分析了 Lombok 注解失效与 Maven 编译插件（maven-compiler-plugin）配置、版本管理之间的关系，并总结了可行的解决方案和最佳实践。</p>\n<!-- more -->\n<p>在开发SpringBoot项目时，相信很多同学都遇到过Lombok注解突然失效的问题：代码里明明加了<code>@Data</code>注解，编译时却报”找不到符号”（比如缺失getter/setter方法）。最近我在项目中就遇到了类似问题，通过排查终于找到原因，在这里记录一下整个过程和解决方案。</p>\n<section><h2 id=\"问题现象\">问题现象<a class=\"anchor\" href=\"#问题现象\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h2><p>项目中使用了Lombok的<code>@Data</code>、<code>@Getter</code>等注解，但编译时出现一系列”找不到符号”错误：</p><div class=\"expressive-code\"><link rel=\"stylesheet\" href=\"/_astro/ec.xyvso.css\"><script type=\"module\" src=\"/_astro/ec.g1fg5.js\">\x3C/script><figure class=\"frame is-terminal\"><figcaption class=\"header\"><span class=\"title\"></span><span class=\"sr-only\">Terminal window</span></figcaption><pre data-language=\"cmd\" class=\"wrap\" style=\"--ecMaxLine:71ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#24292E;--1:#E1E4E8\">java: 找不到符号</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">2</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">  </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">符号:   变量 </span><span style=\"--0:#005CC5;--1:#79B8FF\">log</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">3</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">  </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">位置: 类 org.hnu.tablerecognition.common.interceptor.JwtTokenInterceptor</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">4</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">5</div></div><div class=\"code\"><span style=\"--0:#24292E;--1:#E1E4E8\">java: 找不到符号</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">6</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">  </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">符号:   方法 </span><span style=\"--0:#6F42C1;--1:#B392F0\">getRoleId</span><span style=\"--0:#24292E;--1:#E1E4E8\">()</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">7</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">  </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">位置: 类型为xxx.UpdateRoleMenuDto的变量 updateRoleMenuDto</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div><p>检查代码发现实体类确实添加了<code>@Data</code>注解，依赖也已引入，这就让人很困惑了。</p></section>\n<section><h2 id=\"项目环境与配置\">项目环境与配置<a class=\"anchor\" href=\"#项目环境与配置\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h2><p>先看看我的项目依赖配置（pom.xml关键部分）：</p><div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"xml\" class=\"wrap\" style=\"--ecMaxLine:55ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#24292E;--1:#E1E4E8\">&#x3C;</span><span style=\"--0:#1E7734;--1:#85E89D\">parent</span><span style=\"--0:#24292E;--1:#E1E4E8\">></span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">2</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">  </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">&#x3C;</span><span style=\"--0:#1E7734;--1:#85E89D\">groupId</span><span style=\"--0:#24292E;--1:#E1E4E8\">>org.springframework.boot&#x3C;/</span><span style=\"--0:#1E7734;--1:#85E89D\">groupId</span><span style=\"--0:#24292E;--1:#E1E4E8\">></span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">3</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">  </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">&#x3C;</span><span style=\"--0:#1E7734;--1:#85E89D\">artifactId</span><span style=\"--0:#24292E;--1:#E1E4E8\">>spring-boot-starter-parent&#x3C;/</span><span style=\"--0:#1E7734;--1:#85E89D\">artifactId</span><span style=\"--0:#24292E;--1:#E1E4E8\">></span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">4</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">  </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">&#x3C;</span><span style=\"--0:#1E7734;--1:#85E89D\">version</span><span style=\"--0:#24292E;--1:#E1E4E8\">>3.4.4&#x3C;/</span><span style=\"--0:#1E7734;--1:#85E89D\">version</span><span style=\"--0:#24292E;--1:#E1E4E8\">></span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">5</div></div><div class=\"code\"><span style=\"--0:#24292E;--1:#E1E4E8\">&#x3C;/</span><span style=\"--0:#1E7734;--1:#85E89D\">parent</span><span style=\"--0:#24292E;--1:#E1E4E8\">></span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">6</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">7</div></div><div class=\"code\"><span style=\"--0:#24292E;--1:#E1E4E8\">&#x3C;</span><span style=\"--0:#1E7734;--1:#85E89D\">dependencies</span><span style=\"--0:#24292E;--1:#E1E4E8\">></span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">8</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#616972;--1:#99A0A6\">&#x3C;!-- Lombok依赖 --></span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">9</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">  </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">&#x3C;</span><span style=\"--0:#1E7734;--1:#85E89D\">dependency</span><span style=\"--0:#24292E;--1:#E1E4E8\">></span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">10</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">    </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">&#x3C;</span><span style=\"--0:#1E7734;--1:#85E89D\">groupId</span><span style=\"--0:#24292E;--1:#E1E4E8\">>org.projectlombok&#x3C;/</span><span style=\"--0:#1E7734;--1:#85E89D\">groupId</span><span style=\"--0:#24292E;--1:#E1E4E8\">></span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">11</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">    </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">&#x3C;</span><span style=\"--0:#1E7734;--1:#85E89D\">artifactId</span><span style=\"--0:#24292E;--1:#E1E4E8\">>lombok&#x3C;/</span><span style=\"--0:#1E7734;--1:#85E89D\">artifactId</span><span style=\"--0:#24292E;--1:#E1E4E8\">></span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">12</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">    </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">&#x3C;</span><span style=\"--0:#1E7734;--1:#85E89D\">optional</span><span style=\"--0:#24292E;--1:#E1E4E8\">>true&#x3C;/</span><span style=\"--0:#1E7734;--1:#85E89D\">optional</span><span style=\"--0:#24292E;--1:#E1E4E8\">></span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">13</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">  </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">&#x3C;/</span><span style=\"--0:#1E7734;--1:#85E89D\">dependency</span><span style=\"--0:#24292E;--1:#E1E4E8\">></span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">14</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#616972;--1:#99A0A6\">&#x3C;!-- 其他依赖... --></span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">15</div></div><div class=\"code\"><span style=\"--0:#24292E;--1:#E1E4E8\">&#x3C;/</span><span style=\"--0:#1E7734;--1:#85E89D\">dependencies</span><span style=\"--0:#24292E;--1:#E1E4E8\">></span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">16</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">17</div></div><div class=\"code\"><span style=\"--0:#24292E;--1:#E1E4E8\">&#x3C;</span><span style=\"--0:#1E7734;--1:#85E89D\">build</span><span style=\"--0:#24292E;--1:#E1E4E8\">></span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">18</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">  </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">&#x3C;</span><span style=\"--0:#1E7734;--1:#85E89D\">plugins</span><span style=\"--0:#24292E;--1:#E1E4E8\">></span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">19</div></div><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#616972;--1:#99A0A6\">&#x3C;!-- 显式配置的编译插件 --></span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">20</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">    </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">&#x3C;</span><span style=\"--0:#1E7734;--1:#85E89D\">plugin</span><span style=\"--0:#24292E;--1:#E1E4E8\">></span></div></div><div class=\"ec-line\" style=\"--ecIndent:6ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">21</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">      </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">&#x3C;</span><span style=\"--0:#1E7734;--1:#85E89D\">groupId</span><span style=\"--0:#24292E;--1:#E1E4E8\">>org.apache.maven.plugins&#x3C;/</span><span style=\"--0:#1E7734;--1:#85E89D\">groupId</span><span style=\"--0:#24292E;--1:#E1E4E8\">></span></div></div><div class=\"ec-line\" style=\"--ecIndent:6ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">22</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">      </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">&#x3C;</span><span style=\"--0:#1E7734;--1:#85E89D\">artifactId</span><span style=\"--0:#24292E;--1:#E1E4E8\">>maven-compiler-plugin&#x3C;/</span><span style=\"--0:#1E7734;--1:#85E89D\">artifactId</span><span style=\"--0:#24292E;--1:#E1E4E8\">></span></div></div><div class=\"ec-line\" style=\"--ecIndent:6ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">23</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">      </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">&#x3C;</span><span style=\"--0:#1E7734;--1:#85E89D\">configuration</span><span style=\"--0:#24292E;--1:#E1E4E8\">></span></div></div><div class=\"ec-line\" style=\"--ecIndent:8ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">24</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">        </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">&#x3C;</span><span style=\"--0:#1E7734;--1:#85E89D\">annotationProcessorPaths</span><span style=\"--0:#24292E;--1:#E1E4E8\">></span></div></div><div class=\"ec-line\" style=\"--ecIndent:10ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">25</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">          </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">&#x3C;</span><span style=\"--0:#1E7734;--1:#85E89D\">path</span><span style=\"--0:#24292E;--1:#E1E4E8\">></span></div></div><div class=\"ec-line\" style=\"--ecIndent:12ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">26</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">            </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">&#x3C;</span><span style=\"--0:#1E7734;--1:#85E89D\">groupId</span><span style=\"--0:#24292E;--1:#E1E4E8\">>org.projectlombok&#x3C;/</span><span style=\"--0:#1E7734;--1:#85E89D\">groupId</span><span style=\"--0:#24292E;--1:#E1E4E8\">></span></div></div><div class=\"ec-line\" style=\"--ecIndent:12ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">27</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">            </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">&#x3C;</span><span style=\"--0:#1E7734;--1:#85E89D\">artifactId</span><span style=\"--0:#24292E;--1:#E1E4E8\">>lombok&#x3C;/</span><span style=\"--0:#1E7734;--1:#85E89D\">artifactId</span><span style=\"--0:#24292E;--1:#E1E4E8\">></span></div></div><div class=\"ec-line\" style=\"--ecIndent:12ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">28</div></div><div class=\"code\"><span class=\"indent\">            </span><span style=\"--0:#616972;--1:#99A0A6\">&#x3C;!-- 注意这里没有指定version --></span></div></div><div class=\"ec-line\" style=\"--ecIndent:10ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">29</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">          </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">&#x3C;/</span><span style=\"--0:#1E7734;--1:#85E89D\">path</span><span style=\"--0:#24292E;--1:#E1E4E8\">></span></div></div><div class=\"ec-line\" style=\"--ecIndent:8ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">30</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">        </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">&#x3C;/</span><span style=\"--0:#1E7734;--1:#85E89D\">annotationProcessorPaths</span><span style=\"--0:#24292E;--1:#E1E4E8\">></span></div></div><div class=\"ec-line\" style=\"--ecIndent:6ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">31</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">      </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">&#x3C;/</span><span style=\"--0:#1E7734;--1:#85E89D\">configuration</span><span style=\"--0:#24292E;--1:#E1E4E8\">></span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">32</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">    </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">&#x3C;/</span><span style=\"--0:#1E7734;--1:#85E89D\">plugin</span><span style=\"--0:#24292E;--1:#E1E4E8\">></span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">33</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">    </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">&#x3C;</span><span style=\"--0:#1E7734;--1:#85E89D\">plugin</span><span style=\"--0:#24292E;--1:#E1E4E8\">></span></div></div><div class=\"ec-line\" style=\"--ecIndent:6ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">34</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">      </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">&#x3C;</span><span style=\"--0:#1E7734;--1:#85E89D\">groupId</span><span style=\"--0:#24292E;--1:#E1E4E8\">>org.springframework.boot&#x3C;/</span><span style=\"--0:#1E7734;--1:#85E89D\">groupId</span><span style=\"--0:#24292E;--1:#E1E4E8\">></span></div></div><div class=\"ec-line\" style=\"--ecIndent:6ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">35</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">      </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">&#x3C;</span><span style=\"--0:#1E7734;--1:#85E89D\">artifactId</span><span style=\"--0:#24292E;--1:#E1E4E8\">>spring-boot-maven-plugin&#x3C;/</span><span style=\"--0:#1E7734;--1:#85E89D\">artifactId</span><span style=\"--0:#24292E;--1:#E1E4E8\">></span></div></div><div class=\"ec-line\" style=\"--ecIndent:6ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">36</div></div><div class=\"code\"><span class=\"indent\">      </span><span style=\"--0:#616972;--1:#99A0A6\">&#x3C;!-- 配置... --></span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">37</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">    </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">&#x3C;/</span><span style=\"--0:#1E7734;--1:#85E89D\">plugin</span><span style=\"--0:#24292E;--1:#E1E4E8\">></span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">38</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">  </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">&#x3C;/</span><span style=\"--0:#1E7734;--1:#85E89D\">plugins</span><span style=\"--0:#24292E;--1:#E1E4E8\">></span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">39</div></div><div class=\"code\"><span style=\"--0:#24292E;--1:#E1E4E8\">&#x3C;/</span><span style=\"--0:#1E7734;--1:#85E89D\">build</span><span style=\"--0:#24292E;--1:#E1E4E8\">></span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div></section>\n<section><h2 id=\"问题分析\">问题分析<a class=\"anchor\" href=\"#问题分析\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h2><p>经过排查，发现问题主要出在三个方面：</p><section><h3 id=\"1-lombok版本管理问题\">1. Lombok版本管理问题<a class=\"anchor\" href=\"#1-lombok版本管理问题\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h3><p>SpringBoot的<code>spring-boot-starter-parent</code>会统一管理大部分官方 starters 的版本，但<strong>Lombok并非SpringBoot官方组件</strong>，所以其版本不会被parent默认管理。</p><p>当在pom.xml中不指定Lombok版本时，Maven会尝试从依赖链中查找版本，但如果没有其他依赖间接引入Lombok，会导致：</p><ul>\n<li>依赖版本缺失</li>\n<li>引入低版本或不兼容版本</li>\n</ul><p>这会直接导致编译时无法解析Lombok注解，出现”找不到符号”错误。</p></section><section><h3 id=\"2-maven-compiler-plugin的配置冲突\">2. maven-compiler-plugin的配置冲突<a class=\"anchor\" href=\"#2-maven-compiler-plugin的配置冲突\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h3><p><code>maven-compiler-plugin</code>是Maven的编译插件，负责将Java源代码编译为字节码。我的问题就出在显式配置了这个插件，但存在两个问题：</p><ul>\n<li>在<code>&#x3C;annotationProcessorPaths></code>中指定了Lombok却没有显式声明版本</li>\n<li>手动配置覆盖了SpringBoot父工程的默认配置</li>\n</ul></section><section><h3 id=\"3-lombok的工作原理\">3. Lombok的工作原理<a class=\"anchor\" href=\"#3-lombok的工作原理\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h3><p>Lombok通过<strong>Java注解处理器（Annotation Processor）</strong> 在编译时动态生成代码（如getter/setter）。要使其生效，编译器必须能找到Lombok的注解处理器（包含在lombok.jar中）。</p><p>Maven中有两种方式指定注解处理器：</p><ul>\n<li>显式配置：通过<code>maven-compiler-plugin</code>的<code>&#x3C;annotationProcessorPaths></code>指定</li>\n<li>默认机制：自动从项目依赖中寻找包含注解处理器的JAR包</li>\n</ul></section></section>\n<section><h2 id=\"解决方案\">解决方案<a class=\"anchor\" href=\"#解决方案\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h2><p><strong>方法一：显式指定Lombok版本（推荐）</strong></p><p>在依赖和编译插件中<strong>明确声明Lombok版本</strong>，确保版本一致性：</p><div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"xml\" class=\"wrap\" style=\"--ecMaxLine:55ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#24292E;--1:#E1E4E8\">&#x3C;</span><span style=\"--0:#1E7734;--1:#85E89D\">parent</span><span style=\"--0:#24292E;--1:#E1E4E8\">></span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">2</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">  </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">&#x3C;</span><span style=\"--0:#1E7734;--1:#85E89D\">groupId</span><span style=\"--0:#24292E;--1:#E1E4E8\">>org.springframework.boot&#x3C;/</span><span style=\"--0:#1E7734;--1:#85E89D\">groupId</span><span style=\"--0:#24292E;--1:#E1E4E8\">></span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">3</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">  </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">&#x3C;</span><span style=\"--0:#1E7734;--1:#85E89D\">artifactId</span><span style=\"--0:#24292E;--1:#E1E4E8\">>spring-boot-starter-parent&#x3C;/</span><span style=\"--0:#1E7734;--1:#85E89D\">artifactId</span><span style=\"--0:#24292E;--1:#E1E4E8\">></span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">4</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">  </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">&#x3C;</span><span style=\"--0:#1E7734;--1:#85E89D\">version</span><span style=\"--0:#24292E;--1:#E1E4E8\">>3.4.4&#x3C;/</span><span style=\"--0:#1E7734;--1:#85E89D\">version</span><span style=\"--0:#24292E;--1:#E1E4E8\">></span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">5</div></div><div class=\"code\"><span style=\"--0:#24292E;--1:#E1E4E8\">&#x3C;/</span><span style=\"--0:#1E7734;--1:#85E89D\">parent</span><span style=\"--0:#24292E;--1:#E1E4E8\">></span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">6</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">7</div></div><div class=\"code\"><span style=\"--0:#24292E;--1:#E1E4E8\">&#x3C;</span><span style=\"--0:#1E7734;--1:#85E89D\">dependencies</span><span style=\"--0:#24292E;--1:#E1E4E8\">></span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">8</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#616972;--1:#99A0A6\">&#x3C;!-- Lombok依赖 --></span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">9</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">  </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">&#x3C;</span><span style=\"--0:#1E7734;--1:#85E89D\">dependency</span><span style=\"--0:#24292E;--1:#E1E4E8\">></span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">10</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">    </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">&#x3C;</span><span style=\"--0:#1E7734;--1:#85E89D\">groupId</span><span style=\"--0:#24292E;--1:#E1E4E8\">>org.projectlombok&#x3C;/</span><span style=\"--0:#1E7734;--1:#85E89D\">groupId</span><span style=\"--0:#24292E;--1:#E1E4E8\">></span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">11</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">    </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">&#x3C;</span><span style=\"--0:#1E7734;--1:#85E89D\">artifactId</span><span style=\"--0:#24292E;--1:#E1E4E8\">>lombok&#x3C;/</span><span style=\"--0:#1E7734;--1:#85E89D\">artifactId</span><span style=\"--0:#24292E;--1:#E1E4E8\">></span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">12</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">    </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">&#x3C;</span><span style=\"--0:#1E7734;--1:#85E89D\">optional</span><span style=\"--0:#24292E;--1:#E1E4E8\">>true&#x3C;/</span><span style=\"--0:#1E7734;--1:#85E89D\">optional</span><span style=\"--0:#24292E;--1:#E1E4E8\">></span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">13</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">    </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">&#x3C;</span><span style=\"--0:#1E7734;--1:#85E89D\">version</span><span style=\"--0:#24292E;--1:#E1E4E8\">>1.18.24&#x3C;/</span><span style=\"--0:#1E7734;--1:#85E89D\">version</span><span style=\"--0:#24292E;--1:#E1E4E8\">></span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">14</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">  </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">&#x3C;/</span><span style=\"--0:#1E7734;--1:#85E89D\">dependency</span><span style=\"--0:#24292E;--1:#E1E4E8\">></span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">15</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#616972;--1:#99A0A6\">&#x3C;!-- 其他依赖... --></span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">16</div></div><div class=\"code\"><span style=\"--0:#24292E;--1:#E1E4E8\">&#x3C;/</span><span style=\"--0:#1E7734;--1:#85E89D\">dependencies</span><span style=\"--0:#24292E;--1:#E1E4E8\">></span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">17</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">18</div></div><div class=\"code\"><span style=\"--0:#24292E;--1:#E1E4E8\">&#x3C;</span><span style=\"--0:#1E7734;--1:#85E89D\">build</span><span style=\"--0:#24292E;--1:#E1E4E8\">></span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">19</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">  </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">&#x3C;</span><span style=\"--0:#1E7734;--1:#85E89D\">plugins</span><span style=\"--0:#24292E;--1:#E1E4E8\">></span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">20</div></div><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#616972;--1:#99A0A6\">&#x3C;!-- 显式配置的编译插件 --></span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">21</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">    </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">&#x3C;</span><span style=\"--0:#1E7734;--1:#85E89D\">plugin</span><span style=\"--0:#24292E;--1:#E1E4E8\">></span></div></div><div class=\"ec-line\" style=\"--ecIndent:6ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">22</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">      </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">&#x3C;</span><span style=\"--0:#1E7734;--1:#85E89D\">groupId</span><span style=\"--0:#24292E;--1:#E1E4E8\">>org.apache.maven.plugins&#x3C;/</span><span style=\"--0:#1E7734;--1:#85E89D\">groupId</span><span style=\"--0:#24292E;--1:#E1E4E8\">></span></div></div><div class=\"ec-line\" style=\"--ecIndent:6ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">23</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">      </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">&#x3C;</span><span style=\"--0:#1E7734;--1:#85E89D\">artifactId</span><span style=\"--0:#24292E;--1:#E1E4E8\">>maven-compiler-plugin&#x3C;/</span><span style=\"--0:#1E7734;--1:#85E89D\">artifactId</span><span style=\"--0:#24292E;--1:#E1E4E8\">></span></div></div><div class=\"ec-line\" style=\"--ecIndent:6ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">24</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">      </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">&#x3C;</span><span style=\"--0:#1E7734;--1:#85E89D\">configuration</span><span style=\"--0:#24292E;--1:#E1E4E8\">></span></div></div><div class=\"ec-line\" style=\"--ecIndent:8ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">25</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">        </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">&#x3C;</span><span style=\"--0:#1E7734;--1:#85E89D\">annotationProcessorPaths</span><span style=\"--0:#24292E;--1:#E1E4E8\">></span></div></div><div class=\"ec-line\" style=\"--ecIndent:10ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">26</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">          </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">&#x3C;</span><span style=\"--0:#1E7734;--1:#85E89D\">path</span><span style=\"--0:#24292E;--1:#E1E4E8\">></span></div></div><div class=\"ec-line\" style=\"--ecIndent:12ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">27</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">            </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">&#x3C;</span><span style=\"--0:#1E7734;--1:#85E89D\">groupId</span><span style=\"--0:#24292E;--1:#E1E4E8\">>org.projectlombok&#x3C;/</span><span style=\"--0:#1E7734;--1:#85E89D\">groupId</span><span style=\"--0:#24292E;--1:#E1E4E8\">></span></div></div><div class=\"ec-line\" style=\"--ecIndent:12ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">28</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">            </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">&#x3C;</span><span style=\"--0:#1E7734;--1:#85E89D\">artifactId</span><span style=\"--0:#24292E;--1:#E1E4E8\">>lombok&#x3C;/</span><span style=\"--0:#1E7734;--1:#85E89D\">artifactId</span><span style=\"--0:#24292E;--1:#E1E4E8\">></span></div></div><div class=\"ec-line\" style=\"--ecIndent:12ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">29</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">            </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">&#x3C;</span><span style=\"--0:#1E7734;--1:#85E89D\">version</span><span style=\"--0:#24292E;--1:#E1E4E8\">>1.18.24&#x3C;/</span><span style=\"--0:#1E7734;--1:#85E89D\">version</span><span style=\"--0:#24292E;--1:#E1E4E8\">></span></div></div><div class=\"ec-line\" style=\"--ecIndent:10ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">30</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">          </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">&#x3C;/</span><span style=\"--0:#1E7734;--1:#85E89D\">path</span><span style=\"--0:#24292E;--1:#E1E4E8\">></span></div></div><div class=\"ec-line\" style=\"--ecIndent:8ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">31</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">        </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">&#x3C;/</span><span style=\"--0:#1E7734;--1:#85E89D\">annotationProcessorPaths</span><span style=\"--0:#24292E;--1:#E1E4E8\">></span></div></div><div class=\"ec-line\" style=\"--ecIndent:6ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">32</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">      </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">&#x3C;/</span><span style=\"--0:#1E7734;--1:#85E89D\">configuration</span><span style=\"--0:#24292E;--1:#E1E4E8\">></span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">33</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">    </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">&#x3C;/</span><span style=\"--0:#1E7734;--1:#85E89D\">plugin</span><span style=\"--0:#24292E;--1:#E1E4E8\">></span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">34</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">    </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">&#x3C;</span><span style=\"--0:#1E7734;--1:#85E89D\">plugin</span><span style=\"--0:#24292E;--1:#E1E4E8\">></span></div></div><div class=\"ec-line\" style=\"--ecIndent:6ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">35</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">      </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">&#x3C;</span><span style=\"--0:#1E7734;--1:#85E89D\">groupId</span><span style=\"--0:#24292E;--1:#E1E4E8\">>org.springframework.boot&#x3C;/</span><span style=\"--0:#1E7734;--1:#85E89D\">groupId</span><span style=\"--0:#24292E;--1:#E1E4E8\">></span></div></div><div class=\"ec-line\" style=\"--ecIndent:6ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">36</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">      </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">&#x3C;</span><span style=\"--0:#1E7734;--1:#85E89D\">artifactId</span><span style=\"--0:#24292E;--1:#E1E4E8\">>spring-boot-maven-plugin&#x3C;/</span><span style=\"--0:#1E7734;--1:#85E89D\">artifactId</span><span style=\"--0:#24292E;--1:#E1E4E8\">></span></div></div><div class=\"ec-line\" style=\"--ecIndent:6ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">37</div></div><div class=\"code\"><span class=\"indent\">      </span><span style=\"--0:#616972;--1:#99A0A6\">&#x3C;!-- 配置... --></span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">38</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">    </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">&#x3C;/</span><span style=\"--0:#1E7734;--1:#85E89D\">plugin</span><span style=\"--0:#24292E;--1:#E1E4E8\">></span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">39</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">  </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">&#x3C;/</span><span style=\"--0:#1E7734;--1:#85E89D\">plugins</span><span style=\"--0:#24292E;--1:#E1E4E8\">></span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">40</div></div><div class=\"code\"><span style=\"--0:#24292E;--1:#E1E4E8\">&#x3C;/</span><span style=\"--0:#1E7734;--1:#85E89D\">build</span><span style=\"--0:#24292E;--1:#E1E4E8\">></span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div><p><strong>核心要点</strong>：若手动配置了<code>maven-compiler-plugin</code>，必须在<code>&#x3C;annotationProcessorPaths></code>中<strong>同时指定版本</strong>，否则Maven无法解析。</p><p><strong>方法二：注释掉手动配置的<code>maven-compiler-plugin</code></strong></p><div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"xml\" class=\"wrap\" style=\"--ecMaxLine:55ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#24292E;--1:#E1E4E8\">&#x3C;</span><span style=\"--0:#1E7734;--1:#85E89D\">build</span><span style=\"--0:#24292E;--1:#E1E4E8\">></span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">2</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">  </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">&#x3C;</span><span style=\"--0:#1E7734;--1:#85E89D\">plugins</span><span style=\"--0:#24292E;--1:#E1E4E8\">></span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">3</div></div><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#616972;--1:#99A0A6\">&#x3C;!-- 注释掉手动配置的编译插件 --></span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">4</div></div><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#616972;--1:#99A0A6\">&#x3C;!-- &#x3C;plugin></span></div></div><div class=\"ec-line\" style=\"--ecIndent:6ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">5</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#616972;--1:#99A0A6\">      </span></span><span style=\"--0:#616972;--1:#99A0A6\">&#x3C;groupId>org.apache.maven.plugins&#x3C;/groupId></span></div></div><div class=\"ec-line\" style=\"--ecIndent:6ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">6</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#616972;--1:#99A0A6\">      </span></span><span style=\"--0:#616972;--1:#99A0A6\">&#x3C;artifactId>maven-compiler-plugin&#x3C;/artifactId></span></div></div><div class=\"ec-line\" style=\"--ecIndent:6ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">7</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#616972;--1:#99A0A6\">      </span></span><span style=\"--0:#616972;--1:#99A0A6\">&#x3C;configuration></span></div></div><div class=\"ec-line\" style=\"--ecIndent:8ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">8</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#616972;--1:#99A0A6\">        </span></span><span style=\"--0:#616972;--1:#99A0A6\">&#x3C;annotationProcessorPaths></span></div></div><div class=\"ec-line\" style=\"--ecIndent:10ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">9</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#616972;--1:#99A0A6\">          </span></span><span style=\"--0:#616972;--1:#99A0A6\">&#x3C;path></span></div></div><div class=\"ec-line\" style=\"--ecIndent:12ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">10</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#616972;--1:#99A0A6\">            </span></span><span style=\"--0:#616972;--1:#99A0A6\">&#x3C;groupId>org.projectlombok&#x3C;/groupId></span></div></div><div class=\"ec-line\" style=\"--ecIndent:12ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">11</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#616972;--1:#99A0A6\">            </span></span><span style=\"--0:#616972;--1:#99A0A6\">&#x3C;artifactId>lombok&#x3C;/artifactId></span></div></div><div class=\"ec-line\" style=\"--ecIndent:10ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">12</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#616972;--1:#99A0A6\">          </span></span><span style=\"--0:#616972;--1:#99A0A6\">&#x3C;/path></span></div></div><div class=\"ec-line\" style=\"--ecIndent:8ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">13</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#616972;--1:#99A0A6\">        </span></span><span style=\"--0:#616972;--1:#99A0A6\">&#x3C;/annotationProcessorPaths></span></div></div><div class=\"ec-line\" style=\"--ecIndent:6ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">14</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#616972;--1:#99A0A6\">      </span></span><span style=\"--0:#616972;--1:#99A0A6\">&#x3C;/configuration></span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">15</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#616972;--1:#99A0A6\">    </span></span><span style=\"--0:#616972;--1:#99A0A6\">&#x3C;/plugin> --></span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">16</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">    </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">&#x3C;</span><span style=\"--0:#1E7734;--1:#85E89D\">plugin</span><span style=\"--0:#24292E;--1:#E1E4E8\">></span></div></div><div class=\"ec-line\" style=\"--ecIndent:6ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">17</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">      </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">&#x3C;</span><span style=\"--0:#1E7734;--1:#85E89D\">groupId</span><span style=\"--0:#24292E;--1:#E1E4E8\">>org.springframework.boot&#x3C;/</span><span style=\"--0:#1E7734;--1:#85E89D\">groupId</span><span style=\"--0:#24292E;--1:#E1E4E8\">></span></div></div><div class=\"ec-line\" style=\"--ecIndent:6ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">18</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">      </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">&#x3C;</span><span style=\"--0:#1E7734;--1:#85E89D\">artifactId</span><span style=\"--0:#24292E;--1:#E1E4E8\">>spring-boot-maven-plugin&#x3C;/</span><span style=\"--0:#1E7734;--1:#85E89D\">artifactId</span><span style=\"--0:#24292E;--1:#E1E4E8\">></span></div></div><div class=\"ec-line\" style=\"--ecIndent:6ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">19</div></div><div class=\"code\"><span class=\"indent\">      </span><span style=\"--0:#616972;--1:#99A0A6\">&#x3C;!-- 配置... --></span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">20</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">    </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">&#x3C;/</span><span style=\"--0:#1E7734;--1:#85E89D\">plugin</span><span style=\"--0:#24292E;--1:#E1E4E8\">></span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">21</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">  </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">&#x3C;/</span><span style=\"--0:#1E7734;--1:#85E89D\">plugins</span><span style=\"--0:#24292E;--1:#E1E4E8\">></span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">22</div></div><div class=\"code\"><span style=\"--0:#24292E;--1:#E1E4E8\">&#x3C;/</span><span style=\"--0:#1E7734;--1:#85E89D\">build</span><span style=\"--0:#24292E;--1:#E1E4E8\">></span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div><p>为什么这样就行？因为：</p><ol>\n<li>\n<p><strong>SpringBoot父工程已包含默认配置</strong>：<code>spring-boot-starter-parent</code>已经内置了<code>maven-compiler-plugin</code>的默认配置，包括对注解处理器的支持</p>\n</li>\n<li>\n<p><strong>默认机制会自动发现Lombok</strong>：Lombok的JAR包中包含<code>META-INF/services/javax.annotation.processing.Processor</code>文件，声明了它是注解处理器，父工程的默认配置会自动扫描并使用</p>\n</li>\n<li>\n<p><strong>避免了版本冲突</strong>：注释掉手动配置后，Maven会使用依赖中声明的Lombok版本，不会出现版本不匹配问题</p>\n</li>\n</ol></section>\n<section><h2 id=\"最佳实践\">最佳实践<a class=\"anchor\" href=\"#最佳实践\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h2><p>为了避免类似问题，总结几个最佳实践：</p><ol>\n<li>\n<p><strong>明确指定Lombok版本</strong>：即使依赖管理正常，显式指定版本也能提高项目稳定性</p>\n<div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"xml\" class=\"wrap\" style=\"--ecMaxLine:42ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#24292E;--1:#E1E4E8\">&#x3C;</span><span style=\"--0:#1E7734;--1:#85E89D\">dependency</span><span style=\"--0:#24292E;--1:#E1E4E8\">></span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">2</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">  </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">&#x3C;</span><span style=\"--0:#1E7734;--1:#85E89D\">groupId</span><span style=\"--0:#24292E;--1:#E1E4E8\">>org.projectlombok&#x3C;/</span><span style=\"--0:#1E7734;--1:#85E89D\">groupId</span><span style=\"--0:#24292E;--1:#E1E4E8\">></span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">3</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">  </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">&#x3C;</span><span style=\"--0:#1E7734;--1:#85E89D\">artifactId</span><span style=\"--0:#24292E;--1:#E1E4E8\">>lombok&#x3C;/</span><span style=\"--0:#1E7734;--1:#85E89D\">artifactId</span><span style=\"--0:#24292E;--1:#E1E4E8\">></span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">4</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">  </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">&#x3C;</span><span style=\"--0:#1E7734;--1:#85E89D\">version</span><span style=\"--0:#24292E;--1:#E1E4E8\">>1.18.24&#x3C;/</span><span style=\"--0:#1E7734;--1:#85E89D\">version</span><span style=\"--0:#24292E;--1:#E1E4E8\">> </span><span style=\"--0:#616972;--1:#99A0A6\">&#x3C;!-- 明确版本 --></span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">5</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">  </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">&#x3C;</span><span style=\"--0:#1E7734;--1:#85E89D\">optional</span><span style=\"--0:#24292E;--1:#E1E4E8\">>true&#x3C;/</span><span style=\"--0:#1E7734;--1:#85E89D\">optional</span><span style=\"--0:#24292E;--1:#E1E4E8\">></span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">6</div></div><div class=\"code\"><span style=\"--0:#24292E;--1:#E1E4E8\">&#x3C;/</span><span style=\"--0:#1E7734;--1:#85E89D\">dependency</span><span style=\"--0:#24292E;--1:#E1E4E8\">></span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div>\n</li>\n<li>\n<p><strong>正确配置IDE</strong>：确保IDEA安装了Lombok插件并启用注解处理器</p>\n<ul>\n<li>安装插件：<code>File -> Settings -> Plugins</code>搜索Lombok</li>\n<li>启用注解处理：<code>File -> Settings -> Build, Execution, Deployment -> Compiler -> Annotation Processors</code>勾选<code>Enable annotation processing</code></li>\n</ul>\n</li>\n<li>\n<p><strong>合理使用父工程配置</strong>：对于SpringBoot项目，优先使用<code>spring-boot-starter-parent</code>提供的默认配置，除非有特殊需求，否则不要重复声明<code>maven-compiler-plugin</code></p>\n</li>\n<li>\n<p><strong>需要自定义编译配置时</strong>：如果必须手动配置<code>maven-compiler-plugin</code>，确保注解处理器路径配置完整</p>\n</li>\n</ol><div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"xml\" class=\"wrap\" style=\"--ecMaxLine:51ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#24292E;--1:#E1E4E8\">&#x3C;</span><span style=\"--0:#1E7734;--1:#85E89D\">plugin</span><span style=\"--0:#24292E;--1:#E1E4E8\">></span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">2</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">  </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">&#x3C;</span><span style=\"--0:#1E7734;--1:#85E89D\">groupId</span><span style=\"--0:#24292E;--1:#E1E4E8\">>org.apache.maven.plugins&#x3C;/</span><span style=\"--0:#1E7734;--1:#85E89D\">groupId</span><span style=\"--0:#24292E;--1:#E1E4E8\">></span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">3</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">  </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">&#x3C;</span><span style=\"--0:#1E7734;--1:#85E89D\">artifactId</span><span style=\"--0:#24292E;--1:#E1E4E8\">>maven-compiler-plugin&#x3C;/</span><span style=\"--0:#1E7734;--1:#85E89D\">artifactId</span><span style=\"--0:#24292E;--1:#E1E4E8\">></span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">4</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">  </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">&#x3C;</span><span style=\"--0:#1E7734;--1:#85E89D\">configuration</span><span style=\"--0:#24292E;--1:#E1E4E8\">></span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">5</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">    </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">&#x3C;</span><span style=\"--0:#1E7734;--1:#85E89D\">annotationProcessorPaths</span><span style=\"--0:#24292E;--1:#E1E4E8\">></span></div></div><div class=\"ec-line\" style=\"--ecIndent:6ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">6</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">      </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">&#x3C;</span><span style=\"--0:#1E7734;--1:#85E89D\">path</span><span style=\"--0:#24292E;--1:#E1E4E8\">></span></div></div><div class=\"ec-line\" style=\"--ecIndent:8ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">7</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">        </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">&#x3C;</span><span style=\"--0:#1E7734;--1:#85E89D\">groupId</span><span style=\"--0:#24292E;--1:#E1E4E8\">>org.projectlombok&#x3C;/</span><span style=\"--0:#1E7734;--1:#85E89D\">groupId</span><span style=\"--0:#24292E;--1:#E1E4E8\">></span></div></div><div class=\"ec-line\" style=\"--ecIndent:8ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">8</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">        </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">&#x3C;</span><span style=\"--0:#1E7734;--1:#85E89D\">artifactId</span><span style=\"--0:#24292E;--1:#E1E4E8\">>lombok&#x3C;/</span><span style=\"--0:#1E7734;--1:#85E89D\">artifactId</span><span style=\"--0:#24292E;--1:#E1E4E8\">></span></div></div><div class=\"ec-line\" style=\"--ecIndent:8ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">9</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">        </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">&#x3C;</span><span style=\"--0:#1E7734;--1:#85E89D\">version</span><span style=\"--0:#24292E;--1:#E1E4E8\">>1.18.24&#x3C;/</span><span style=\"--0:#1E7734;--1:#85E89D\">version</span><span style=\"--0:#24292E;--1:#E1E4E8\">> </span><span style=\"--0:#616972;--1:#99A0A6\">&#x3C;!-- 与依赖版本一致 --></span></div></div><div class=\"ec-line\" style=\"--ecIndent:6ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">10</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">      </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">&#x3C;/</span><span style=\"--0:#1E7734;--1:#85E89D\">path</span><span style=\"--0:#24292E;--1:#E1E4E8\">></span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">11</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">    </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">&#x3C;/</span><span style=\"--0:#1E7734;--1:#85E89D\">annotationProcessorPaths</span><span style=\"--0:#24292E;--1:#E1E4E8\">></span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">12</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">  </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">&#x3C;/</span><span style=\"--0:#1E7734;--1:#85E89D\">configuration</span><span style=\"--0:#24292E;--1:#E1E4E8\">></span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">13</div></div><div class=\"code\"><span style=\"--0:#24292E;--1:#E1E4E8\">&#x3C;/</span><span style=\"--0:#1E7734;--1:#85E89D\">plugin</span><span style=\"--0:#24292E;--1:#E1E4E8\">></span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div></section>\n<section><h2 id=\"总结\">总结<a class=\"anchor\" href=\"#总结\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h2><p>Lombok注解失效的本质是<strong>编译期注解处理器未被正确加载</strong>。理解Maven依赖机制、SpringBoot父工程配置以及Lombok的工作原理后，问题便迎刃而解。</p></section>","metadata":{"headings":[{"depth":2,"slug":"问题现象","text":"问题现象#"},{"depth":2,"slug":"项目环境与配置","text":"项目环境与配置#"},{"depth":2,"slug":"问题分析","text":"问题分析#"},{"depth":3,"slug":"1-lombok版本管理问题","text":"1. Lombok版本管理问题#"},{"depth":3,"slug":"2-maven-compiler-plugin的配置冲突","text":"2. maven-compiler-plugin的配置冲突#"},{"depth":3,"slug":"3-lombok的工作原理","text":"3. Lombok的工作原理#"},{"depth":2,"slug":"解决方案","text":"解决方案#"},{"depth":2,"slug":"最佳实践","text":"最佳实践#"},{"depth":2,"slug":"总结","text":"总结#"}],"localImagePaths":[],"remoteImagePaths":[],"frontmatter":{"title":"解决SpringBoot中Lombok注解失效的那些坑","published":"2025-08-13T00:00:00.000Z","category":"技术踩坑","tags":["SpringBoot","Lombok","Bug"],"minutes":7,"words":1313,"excerpt":"在 SpringBoot 项目开发中，Lombok 注解突然失效是一个很常见的问题，表现为明明添加了 @Data 等注解，却在编译时出现 “找不到符号”（如缺失 getter/setter 方法）的错误。本文记录了我在项目中遇到该问题的排查过程，分析了 Lombok 注解失效与 Maven 编译插件（maven-compiler-plugin）配置、版本管理之间的关系，并总结了可行的解决方案和最佳实践。"},"imagePaths":[]}},"collection":"posts"}],"2025-01-20":[{"id":"markdown-tutorial","data":{"title":"Markdown Tutorial","published":"2025-01-20T00:00:00.000Z","draft":false,"description":"A simple example of a Markdown blog post.","image":"","tags":["Markdown","Blogging"],"category":"Examples","lang":"","pinned":false,"author":"emn178","sourceLink":"https://github.com/emn178/markdown","licenseName":"Unlicensed","licenseUrl":"","encrypted":false,"password":"","prevTitle":"Markdown Extended Features","prevSlug":"markdown-extended","nextTitle":"解决SpringBoot中Lombok注解失效的那些坑","nextSlug":"bug/解决springboot中lombok注解失效的那些坑"},"body":"# Markdown Tutorial\n\nA markdown example shows how to write a markdown file. This document integrates core syntax and extensions (GMF).\n\n- [Block Elements](#block-elements)\n  - [Paragraphs and Line Breaks](#paragraphs-and-line-breaks)\n  - [Headers](#headers)\n  - [Blockquotes](#blockquotes)\n  - [Lists](#lists)\n  - [Code Blocks](#code-blocks)\n  - [Horizontal Rules](#horizontal-rules)\n  - [Table](#table)\n- [Span Elements](#span-elements)\n  - [Links](#links)\n  - [Emphasis](#emphasis)\n  - [Code](#code)\n  - [Images](#images)\n  - [Strikethrough](#strikethrough)\n- [Miscellaneous](#miscellaneous)\n  - [Automatic Links](#automatic-links)\n  - [Backslash Escapes](#backslash-escapes)\n- [Inline HTML](#inline-html)\n\n## Block Elements\n\n### Paragraphs and Line Breaks\n\n#### Paragraphs\n\nHTML Tag: `<p>`\n\nOne or more blank lines. (A blank line is a line containing nothing but **spaces** or **tabs** is considered blank.)\n\nCode:\n\n    This will be\n    inline.\n\n    This is second paragraph.\n\nPreview:\n\n---\n\nThis will be\ninline.\n\nThis is second paragraph.\n\n---\n\n#### Line Breaks\n\nHTML Tag: `<br />`\n\nEnd a line with **two or more spaces**.\n\nCode:\n\n    This will be not\n    inline.\n\nPreview:\n\n---\n\nThis will be not  \ninline.\n\n---\n\n### Headers\n\nMarkdown supports two styles of headers, Setext and atx.\n\n#### Setext\n\nHTML Tags: `<h1>`, `<h2>`\n\n\"Underlined\" using **equal signs (=)** as `<h1>` and **dashes (-)** as `<h2>` in any number.\n\nCode:\n\n    This is an H1\n    =============\n    This is an H2\n    -------------\n\nPreview:\n\n---\n\n# This is an H1\n\n## This is an H2\n\n---\n\n#### atx\n\nHTML Tags: `<h1>`, `<h2>`, `<h3>`, `<h4>`, `<h5>`, `<h6>`\n\nUses 1-6 **hash characters (#)** at the start of the line, corresponding to `<h1>` - `<h6>`.\n\nCode:\n\n    # This is an H1\n    ## This is an H2\n    ###### This is an H6\n\nPreview:\n\n---\n\n# This is an H1\n\n## This is an H2\n\n###### This is an H6\n\n---\n\nOptionally, you may \"close\" atx-style headers. The closing hashes **don't need to match** the number of hashes used to open the header.\n\nCode:\n\n    # This is an H1 #\n    ## This is an H2 ##\n    ### This is an H3 ######\n\nPreview:\n\n---\n\n# This is an H1\n\n## This is an H2\n\n### This is an H3\n\n---\n\n### Blockquotes\n\nHTML Tag: `<blockquote>`\n\nMarkdown uses email-style **>** characters for blockquoting. It looks best if you hard wrap the text and put a > before every line.\n\nCode:\n\n    > This is a blockquote with two paragraphs. Lorem ipsum dolor sit amet,\n    > consectetuer adipiscing elit. Aliquam hendrerit mi posuere lectus.\n    > Vestibulum enim wisi, viverra nec, fringilla in, laoreet vitae, risus.\n    >\n    > Donec sit amet nisl. Aliquam semper ipsum sit amet velit. Suspendisse\n    > id sem consectetuer libero luctus adipiscing.\n\nPreview:\n\n---\n\n> This is a blockquote with two paragraphs. Lorem ipsum dolor sit amet,\n> consectetuer adipiscing elit. Aliquam hendrerit mi posuere lectus.\n> Vestibulum enim wisi, viverra nec, fringilla in, laoreet vitae, risus.\n>\n> Donec sit amet nisl. Aliquam semper ipsum sit amet velit. Suspendisse\n> id sem consectetuer libero luctus adipiscing.\n\n---\n\nMarkdown allows you to be lazy and only put the > before the first line of a hard-wrapped paragraph.\n\nCode:\n\n    > This is a blockquote with two paragraphs. Lorem ipsum dolor sit amet,\n    consectetuer adipiscing elit. Aliquam hendrerit mi posuere lectus.\n    Vestibulum enim wisi, viverra nec, fringilla in, laoreet vitae, risus.\n\n    > Donec sit amet nisl. Aliquam semper ipsum sit amet velit. Suspendisse\n    id sem consectetuer libero luctus adipiscing.\n\nPreview:\n\n---\n\n> This is a blockquote with two paragraphs. Lorem ipsum dolor sit amet,\n> consectetuer adipiscing elit. Aliquam hendrerit mi posuere lectus.\n> Vestibulum enim wisi, viverra nec, fringilla in, laoreet vitae, risus.\n\n> Donec sit amet nisl. Aliquam semper ipsum sit amet velit. Suspendisse\n> id sem consectetuer libero luctus adipiscing.\n\n---\n\nBlockquotes can be nested (i.e. a blockquote-in-a-blockquote) by adding additional levels of >.\n\nCode:\n\n    > This is the first level of quoting.\n    >\n    > > This is nested blockquote.\n    >\n    > Back to the first level.\n\nPreview:\n\n---\n\n> This is the first level of quoting.\n>\n> > This is nested blockquote.\n>\n> Back to the first level.\n\n---\n\nBlockquotes can contain other Markdown elements, including headers, lists, and code blocks.\n\nCode:\n\n    > ## This is a header.\n    >\n    > 1.   This is the first list item.\n    > 2.   This is the second list item.\n    >\n    > Here's some example code:\n    >\n    >     return shell_exec(\"echo $input | $markdown_script\");\n\nPreview:\n\n---\n\n> ## This is a header.\n>\n> 1.  This is the first list item.\n> 2.  This is the second list item.\n>\n> Here's some example code:\n>\n>     return shell_exec(\"echo $input | $markdown_script\");\n\n---\n\n### Lists\n\nMarkdown supports ordered (numbered) and unordered (bulleted) lists.\n\n#### Unordered\n\nHTML Tag: `<ul>`\n\nUnordered lists use **asterisks (\\*)**, **pluses (+)**, and **hyphens (-)**.\n\nCode:\n\n    *   Red\n    *   Green\n    *   Blue\n\nPreview:\n\n---\n\n- Red\n- Green\n- Blue\n\n---\n\nis equivalent to:\n\nCode:\n\n    +   Red\n    +   Green\n    +   Blue\n\nand:\n\nCode:\n\n    -   Red\n    -   Green\n    -   Blue\n\n#### Ordered\n\nHTML Tag: `<ol>`\n\nOrdered lists use numbers followed by periods:\n\nCode:\n\n    1.  Bird\n    2.  McHale\n    3.  Parish\n\nPreview:\n\n---\n\n1.  Bird\n2.  McHale\n3.  Parish\n\n---\n\nIt's possible to trigger an ordered list by accident, by writing something like this:\n\nCode:\n\n    1986. What a great season.\n\nPreview:\n\n---\n\n1986. What a great season.\n\n---\n\nYou can **backslash-escape (\\\\)** the period:\n\nCode:\n\n    1986\\. What a great season.\n\nPreview:\n\n---\n\n1986\\. What a great season.\n\n---\n\n#### Indented\n\n##### Blockquote\n\nTo put a blockquote within a list item, the blockquote's > delimiters need to be indented:\n\nCode:\n\n    *   A list item with a blockquote:\n\n        > This is a blockquote\n        > inside a list item.\n\nPreview:\n\n---\n\n- A list item with a blockquote:\n\n  > This is a blockquote\n  > inside a list item.\n\n---\n\n##### Code Block\n\nTo put a code block within a list item, the code block needs to be indented twice — **8 spaces** or **two tabs**:\n\nCode:\n\n    *   A list item with a code block:\n\n            <code goes here>\n\nPreview:\n\n---\n\n- A list item with a code block:\n\n      <code goes here>\n\n---\n\n##### Nested List\n\nCode:\n\n    * A\n      * A1\n      * A2\n    * B\n    * C\n\nPreview:\n\n---\n\n- A\n  - A1\n  - A2\n- B\n- C\n\n---\n\n### Code Blocks\n\nHTML Tag: `<pre>`\n\nIndent every line of the block by at least **4 spaces** or **1 tab**.\n\nCode:\n\n    This is a normal paragraph:\n\n        This is a code block.\n\nPreview:\n\n---\n\nThis is a normal paragraph:\n\n    This is a code block.\n\n---\n\nA code block continues until it reaches a line that is not indented (or the end of the article).\n\nWithin a code block, **_ampersands (&)_** and angle **brackets (< and >)** are automatically converted into HTML entities.\n\nCode:\n\n        <div class=\"footer\">\n            &copy; 2004 Foo Corporation\n        </div>\n\nPreview:\n\n---\n\n    <div class=\"footer\">\n        &copy; 2004 Foo Corporation\n    </div>\n\n---\n\nFollowing sections Fenced Code Blocks and Syntax Highlighting are extensions, you can use the other way to write the code block.\n\n#### Fenced Code Blocks\n\nJust wrap your code in ` ``` ` (as shown below) and you won't need to indent it by four spaces.\n\nCode:\n\n    Here's an example:\n\n    ```\n    function test() {\n      console.log(\"notice the blank line before this function?\");\n    }\n    ```\n\nPreview:\n\n---\n\nHere's an example:\n\n```\nfunction test() {\n  console.log(\"notice the blank line before this function?\");\n}\n```\n\n---\n\n#### Syntax Highlighting\n\nIn your fenced block, add an optional language identifier and we'll run it through syntax highlighting ([Support Languages](https://github.com/github/linguist/blob/master/lib/linguist/languages.yml)).\n\nCode:\n\n    ```ruby\n    require 'redcarpet'\n    markdown = Redcarpet.new(\"Hello World!\")\n    puts markdown.to_html\n    ```\n\nPreview:\n\n---\n\n```ruby\nrequire 'redcarpet'\nmarkdown = Redcarpet.new(\"Hello World!\")\nputs markdown.to_html\n```\n\n---\n\n### Horizontal Rules\n\nHTML Tag: `<hr />`\nPlaces **three or more hyphens (-), asterisks (\\*), or underscores (\\_)** on a line by themselves. You may use spaces between the hyphens or asterisks.\n\nCode:\n\n    * * *\n    ***\n    *****\n    - - -\n    ---------------------------------------\n    ___\n\nPreview:\n\n---\n\n---\n\n---\n\n---\n\n---\n\n---\n\n---\n\n---\n\n### Table\n\nHTML Tag: `<table>`\n\nIt's an extension.\n\nSeparates column by **pipe (|)** and header by **dashes (-)**, and uses **colon (:)** for alignment.\n\nThe outer **pipes (|)** and alignment are optional. There are **3 delimiters** each cell at least for separating header.\n\nCode:\n\n```\n| Left | Center | Right |\n|:-----|:------:|------:|\n|aaa   |bbb     |ccc    |\n|ddd   |eee     |fff    |\n\n A | B\n---|---\n123|456\n\n\nA |B\n--|--\n12|45\n```\n\nPreview:\n\n---\n\n| Left | Center | Right |\n| :--- | :----: | ----: |\n| aaa  |  bbb   |   ccc |\n| ddd  |  eee   |   fff |\n\n| A   | B   |\n| --- | --- |\n| 123 | 456 |\n\n| A   | B   |\n| --- | --- |\n| 12  | 45  |\n\n---\n\n## Span Elements\n\n### Links\n\nHTML Tag: `<a>`\n\nMarkdown supports two style of links: inline and reference.\n\n#### Inline\n\nInline link format like this: `[Link Text](URL \"Title\")`\n\nTitle is optional.\n\nCode:\n\n    This is [an example](http://example.com/ \"Title\") inline link.\n\n    [This link](http://example.net/) has no title attribute.\n\nPreview:\n\n---\n\nThis is [an example](http://example.com/ \"Title\") inline link.\n\n[This link](http://example.net/) has no title attribute.\n\n---\n\nIf you're referring to a local resource on the same server, you can use relative paths:\n\nCode:\n\n    See my [About](/about/) page for details.\n\nPreview:\n\n---\n\nSee my [About](/about/) page for details.\n\n---\n\n#### Reference\n\nYou could predefine link references. Format like this: `[id]: URL \"Title\"`\n\nTitle is also optional. And the you refer the link, format like this: `[Link Text][id]`\n\nCode:\n\n    [id]: http://example.com/  \"Optional Title Here\"\n    This is [an example][id] reference-style link.\n\nPreview:\n\n---\n\n[id]: http://example.com/ \"Optional Title Here\"\n\nThis is [an example][id] reference-style link.\n\n---\n\nThat is:\n\n- Square brackets containing the link identifier (**not case sensitive**, optionally indented from the left margin using up to three spaces);\n- followed by a colon;\n- followed by one or more spaces (or tabs);\n- followed by the URL for the link;\n- The link URL may, optionally, be surrounded by angle brackets.\n- optionally followed by a title attribute for the link, enclosed in double or single quotes, or enclosed in parentheses.\n\nThe following three link definitions are equivalent:\n\nCode:\n\n    [foo]: http://example.com/  \"Optional Title Here\"\n    [foo]: http://example.com/  'Optional Title Here'\n    [foo]: http://example.com/  (Optional Title Here)\n    [foo]: <http://example.com/>  \"Optional Title Here\"\n\nUses an empty set of square brackets, the link text itself is used as the name.\n\nCode:\n\n    [Google]: http://google.com/\n    [Google][]\n\nPreview:\n\n---\n\n[Google]: http://google.com/\n\n[Google][]\n\n---\n\n### Emphasis\n\nHTML Tags: `<em>`, `<strong>`\n\nMarkdown treats **asterisks (\\*)** and **underscores (\\_)** as indicators of emphasis. **One delimiter** will be `<em>`; \\*_double delimiters_ will be `<strong>`.\n\nCode:\n\n    *single asterisks*\n\n    _single underscores_\n\n    **double asterisks**\n\n    __double underscores__\n\nPreview:\n\n---\n\n_single asterisks_\n\n_single underscores_\n\n**double asterisks**\n\n**double underscores**\n\n---\n\nBut if you surround an \\* or \\_ with spaces, it'll be treated as a literal asterisk or underscore.\n\nYou can backslash escape it:\n\nCode:\n\n    \\*this text is surrounded by literal asterisks\\*\n\nPreview:\n\n---\n\n\\*this text is surrounded by literal asterisks\\*\n\n---\n\n### Code\n\nHTML Tag: `<code>`\n\nWraps it with **backtick quotes (`)**.\n\nCode:\n\n    Use the `printf()` function.\n\nPreview:\n\n---\n\nUse the `printf()` function.\n\n---\n\nTo include a literal backtick character within a code span, you can use **multiple backticks** as the opening and closing delimiters:\n\nCode:\n\n    ``There is a literal backtick (`) here.``\n\nPreview:\n\n---\n\n``There is a literal backtick (`) here.``\n\n---\n\nThe backtick delimiters surrounding a code span may include spaces — one after the opening, one before the closing. This allows you to place literal backtick characters at the beginning or end of a code span:\n\nCode:\n\n    A single backtick in a code span: `` ` ``\n\n    A backtick-delimited string in a code span: `` `foo` ``\n\nPreview:\n\n---\n\nA single backtick in a code span: `` ` ``\n\nA backtick-delimited string in a code span: `` `foo` ``\n\n---\n\n### Images\n\nHTML Tag: `<img />`\n\nMarkdown uses an image syntax that is intended to resemble the syntax for links, allowing for two styles: inline and reference.\n\n#### Inline\n\nInline image syntax looks like this: `![Alt text](URL \"Title\")`\n\nTitle is optional.\n\nCode:\n\n    ![Alt text](/path/to/img.jpg)\n\n    ![Alt text](/path/to/img.jpg \"Optional title\")\n\nPreview:\n\n---\n\n![Alt text](https://s2.loli.net/2024/08/20/5fszgXeOxmL3Wdv.webp)\n\n![Alt text](https://s2.loli.net/2024/08/20/5fszgXeOxmL3Wdv.webp \"Optional title\")\n\n---\n\nThat is:\n\n- An exclamation mark: !;\n- followed by a set of square brackets, containing the alt attribute text for the image;\n- followed by a set of parentheses, containing the URL or path to the image, and an optional title attribute enclosed in double or single quotes.\n\n#### Reference\n\nReference-style image syntax looks like this: `![Alt text][id]`\n\nCode:\n\n    [img id]: https://s2.loli.net/2024/08/20/5fszgXeOxmL3Wdv.webp  \"Optional title attribute\"\n    ![Alt text][img id]\n\nPreview:\n\n---\n\n[img id]: https://s2.loli.net/2024/08/20/5fszgXeOxmL3Wdv.webp \"Optional title attribute\"\n\n![Alt text][img id]\n\n---\n\n### Strikethrough\n\nHTML Tag: `<del>`\n\nIt's an extension.\n\nGFM adds syntax to strikethrough text.\n\nCode:\n\n```\n~~Mistaken text.~~\n```\n\nPreview:\n\n---\n\n~~Mistaken text.~~\n\n---\n\n## Miscellaneous\n\n### Automatic Links\n\nMarkdown supports a shortcut style for creating \"automatic\" links for URLs and email addresses: simply surround the URL or email address with angle brackets.\n\nCode:\n\n    <http://example.com/>\n\n    <address@example.com>\n\nPreview:\n\n---\n\n<http://example.com/>\n\n<address@example.com>\n\n---\n\nGFM will autolink standard URLs.\n\nCode:\n\n```\nhttps://github.com/emn178/markdown\n```\n\nPreview:\n\n---\n\nhttps://github.com/emn178/markdown\n\n---\n\n### Backslash Escapes\n\nMarkdown allows you to use backslash escapes to generate literal characters which would otherwise have special meaning in Markdown's formatting syntax.\n\nCode:\n\n    \\*literal asterisks\\*\n\nPreview:\n\n---\n\n\\*literal asterisks\\*\n\n---\n\nMarkdown provides backslash escapes for the following characters:\n\nCode:\n\n    \\   backslash\n    `   backtick\n    *   asterisk\n    _   underscore\n    {}  curly braces\n    []  square brackets\n    ()  parentheses\n    #   hash mark\n    +   plus sign\n    -   minus sign (hyphen)\n    .   dot\n    !   exclamation mark\n\n## Inline HTML\n\nFor any markup that is not covered by Markdown's syntax, you simply use HTML itself. There's no need to preface it or delimit it to indicate that you're switching from Markdown to HTML; you just use the tags.\n\nCode:\n\n    This is a regular paragraph.\n\n    <table>\n        <tr>\n            <td>Foo</td>\n        </tr>\n    </table>\n\n    This is another regular paragraph.\n\nPreview:\n\n---\n\nThis is a regular paragraph.\n\n<table>\n    <tr>\n        <td>Foo</td>\n    </tr>\n</table>\n\nThis is another regular paragraph.\n\n---\n\nNote that Markdown formatting syntax is **not processed within block-level HTML tags**.\n\nUnlike block-level HTML tags, Markdown syntax is **processed within span-level tags**.\n\nCode:\n\n    <span>**Work**</span>\n\n    <div>\n        **No Work**\n    </div>\n\nPreview:\n\n---\n\n<span>**Work**</span>\n\n<div>\n  **No Work**\n</div>\n***","filePath":"src/content/posts/markdown-tutorial.md","digest":"ba8003fe477022f0","rendered":{"html":"<section><h1 id=\"markdown-tutorial\">Markdown Tutorial<a class=\"anchor\" href=\"#markdown-tutorial\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h1><p>A markdown example shows how to write a markdown file. This document integrates core syntax and extensions (GMF).</p><ul>\n<li><a href=\"#block-elements\">Block Elements</a>\n<ul>\n<li><a href=\"#paragraphs-and-line-breaks\">Paragraphs and Line Breaks</a></li>\n<li><a href=\"#headers\">Headers</a></li>\n<li><a href=\"#blockquotes\">Blockquotes</a></li>\n<li><a href=\"#lists\">Lists</a></li>\n<li><a href=\"#code-blocks\">Code Blocks</a></li>\n<li><a href=\"#horizontal-rules\">Horizontal Rules</a></li>\n<li><a href=\"#table\">Table</a></li>\n</ul>\n</li>\n<li><a href=\"#span-elements\">Span Elements</a>\n<ul>\n<li><a href=\"#links\">Links</a></li>\n<li><a href=\"#emphasis\">Emphasis</a></li>\n<li><a href=\"#code\">Code</a></li>\n<li><a href=\"#images\">Images</a></li>\n<li><a href=\"#strikethrough\">Strikethrough</a></li>\n</ul>\n</li>\n<li><a href=\"#miscellaneous\">Miscellaneous</a>\n<ul>\n<li><a href=\"#automatic-links\">Automatic Links</a></li>\n<li><a href=\"#backslash-escapes\">Backslash Escapes</a></li>\n</ul>\n</li>\n<li><a href=\"#inline-html\">Inline HTML</a></li>\n</ul><section><h2 id=\"block-elements\">Block Elements<a class=\"anchor\" href=\"#block-elements\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h2><section><h3 id=\"paragraphs-and-line-breaks\">Paragraphs and Line Breaks<a class=\"anchor\" href=\"#paragraphs-and-line-breaks\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h3><section><h4 id=\"paragraphs\">Paragraphs<a class=\"anchor\" href=\"#paragraphs\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h4><p>HTML Tag: <code>&#x3C;p></code></p><p>One or more blank lines. (A blank line is a line containing nothing but <strong>spaces</strong> or <strong>tabs</strong> is considered blank.)</p><p>Code:</p><div class=\"expressive-code\"><link rel=\"stylesheet\" href=\"/_astro/ec.xyvso.css\"><script type=\"module\" src=\"/_astro/ec.g1fg5.js\">\x3C/script><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"plaintext\" class=\"wrap\" style=\"--ecMaxLine:25ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">This will be</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">2</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">inline.</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">3</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">4</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">This is second paragraph.</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div><p>Preview:</p><hr><p>This will be\ninline.</p><p>This is second paragraph.</p><hr></section><section><h4 id=\"line-breaks\">Line Breaks<a class=\"anchor\" href=\"#line-breaks\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h4><p>HTML Tag: <code>&#x3C;br /></code></p><p>End a line with <strong>two or more spaces</strong>.</p><p>Code:</p><div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"plaintext\" class=\"wrap\" style=\"--ecMaxLine:16ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">This will be not</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">2</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">inline.</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div><p>Preview:</p><hr><p>This will be not<br>\ninline.</p><hr></section></section><section><h3 id=\"headers\">Headers<a class=\"anchor\" href=\"#headers\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h3><p>Markdown supports two styles of headers, Setext and atx.</p><section><h4 id=\"setext\">Setext<a class=\"anchor\" href=\"#setext\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h4><p>HTML Tags: <code>&#x3C;h1></code>, <code>&#x3C;h2></code></p><p>“Underlined” using <strong>equal signs (=)</strong> as <code>&#x3C;h1></code> and <strong>dashes (-)</strong> as <code>&#x3C;h2></code> in any number.</p><p>Code:</p><div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"plaintext\" class=\"wrap\" style=\"--ecMaxLine:13ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">This is an H1</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">2</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">=============</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">3</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">This is an H2</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">4</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">-------------</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div><p>Preview:</p><hr></section></section></section></section>\n<section><h1 id=\"this-is-an-h1\">This is an H1<a class=\"anchor\" href=\"#this-is-an-h1\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h1><section><h2 id=\"this-is-an-h2\">This is an H2<a class=\"anchor\" href=\"#this-is-an-h2\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h2><hr><section><h4 id=\"atx\">atx<a class=\"anchor\" href=\"#atx\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h4><p>HTML Tags: <code>&#x3C;h1></code>, <code>&#x3C;h2></code>, <code>&#x3C;h3></code>, <code>&#x3C;h4></code>, <code>&#x3C;h5></code>, <code>&#x3C;h6></code></p><p>Uses 1-6 <strong>hash characters (#)</strong> at the start of the line, corresponding to <code>&#x3C;h1></code> - <code>&#x3C;h6></code>.</p><p>Code:</p><div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"plaintext\" class=\"wrap\" style=\"--ecMaxLine:20ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\"># This is an H1</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">2</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">## This is an H2</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">3</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">###### This is an H6</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div><p>Preview:</p><hr></section></section></section>\n<section><h1 id=\"this-is-an-h1-1\">This is an H1<a class=\"anchor\" href=\"#this-is-an-h1-1\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h1><section><h2 id=\"this-is-an-h2-1\">This is an H2<a class=\"anchor\" href=\"#this-is-an-h2-1\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h2><section><h6 id=\"this-is-an-h6\">This is an H6<a class=\"anchor\" href=\"#this-is-an-h6\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h6><hr><p>Optionally, you may “close” atx-style headers. The closing hashes <strong>don’t need to match</strong> the number of hashes used to open the header.</p><p>Code:</p><div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"plaintext\" class=\"wrap\" style=\"--ecMaxLine:24ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\"># This is an H1 #</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">2</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">## This is an H2 ##</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">3</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">### This is an H3 ######</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div><p>Preview:</p><hr></section></section></section>\n<section><h1 id=\"this-is-an-h1-2\">This is an H1<a class=\"anchor\" href=\"#this-is-an-h1-2\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h1><section><h2 id=\"this-is-an-h2-2\">This is an H2<a class=\"anchor\" href=\"#this-is-an-h2-2\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h2><section><h3 id=\"this-is-an-h3\">This is an H3<a class=\"anchor\" href=\"#this-is-an-h3\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h3><hr></section><section><h3 id=\"blockquotes\">Blockquotes<a class=\"anchor\" href=\"#blockquotes\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h3><p>HTML Tag: <code>&#x3C;blockquote></code></p><p>Markdown uses email-style <strong>></strong> characters for blockquoting. It looks best if you hard wrap the text and put a > before every line.</p><p>Code:</p><div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"plaintext\" class=\"wrap\" style=\"--ecMaxLine:72ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">> This is a blockquote with two paragraphs. Lorem ipsum dolor sit amet,</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">2</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">> consectetuer adipiscing elit. Aliquam hendrerit mi posuere lectus.</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">3</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">> Vestibulum enim wisi, viverra nec, fringilla in, laoreet vitae, risus.</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">4</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">></span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">5</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">> Donec sit amet nisl. Aliquam semper ipsum sit amet velit. Suspendisse</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">6</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">> id sem consectetuer libero luctus adipiscing.</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div><p>Preview:</p><hr><blockquote>\n<p>This is a blockquote with two paragraphs. Lorem ipsum dolor sit amet,\nconsectetuer adipiscing elit. Aliquam hendrerit mi posuere lectus.\nVestibulum enim wisi, viverra nec, fringilla in, laoreet vitae, risus.</p>\n<p>Donec sit amet nisl. Aliquam semper ipsum sit amet velit. Suspendisse\nid sem consectetuer libero luctus adipiscing.</p>\n</blockquote><hr><p>Markdown allows you to be lazy and only put the > before the first line of a hard-wrapped paragraph.</p><p>Code:</p><div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"plaintext\" class=\"wrap\" style=\"--ecMaxLine:71ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">> This is a blockquote with two paragraphs. Lorem ipsum dolor sit amet,</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">2</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">consectetuer adipiscing elit. Aliquam hendrerit mi posuere lectus.</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">3</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">Vestibulum enim wisi, viverra nec, fringilla in, laoreet vitae, risus.</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">4</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">5</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">> Donec sit amet nisl. Aliquam semper ipsum sit amet velit. Suspendisse</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">6</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">id sem consectetuer libero luctus adipiscing.</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div><p>Preview:</p><hr><blockquote>\n<p>This is a blockquote with two paragraphs. Lorem ipsum dolor sit amet,\nconsectetuer adipiscing elit. Aliquam hendrerit mi posuere lectus.\nVestibulum enim wisi, viverra nec, fringilla in, laoreet vitae, risus.</p>\n</blockquote><blockquote>\n<p>Donec sit amet nisl. Aliquam semper ipsum sit amet velit. Suspendisse\nid sem consectetuer libero luctus adipiscing.</p>\n</blockquote><hr><p>Blockquotes can be nested (i.e. a blockquote-in-a-blockquote) by adding additional levels of >.</p><p>Code:</p><div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"plaintext\" class=\"wrap\" style=\"--ecMaxLine:37ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">> This is the first level of quoting.</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">2</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">></span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">3</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">> > This is nested blockquote.</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">4</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">></span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">5</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">> Back to the first level.</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div><p>Preview:</p><hr><blockquote>\n<p>This is the first level of quoting.</p>\n<blockquote>\n<p>This is nested blockquote.</p>\n</blockquote>\n<p>Back to the first level.</p>\n</blockquote><hr><p>Blockquotes can contain other Markdown elements, including headers, lists, and code blocks.</p><p>Code:</p><div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"plaintext\" class=\"wrap\" style=\"--ecMaxLine:58ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">> ## This is a header.</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">2</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">></span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">3</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">> 1.   This is the first list item.</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">4</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">> 2.   This is the second list item.</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">5</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">></span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">6</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">> Here's some example code:</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">7</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">></span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">8</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">>     return shell_exec(\"echo $input | $markdown_script\");</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div><p>Preview:</p><hr><blockquote>\n<h2 id=\"this-is-a-header\">This is a header.<a class=\"anchor\" href=\"#this-is-a-header\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h2>\n<ol>\n<li>This is the first list item.</li>\n<li>This is the second list item.</li>\n</ol>\n<p>Here’s some example code:</p>\n<div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"plaintext\" class=\"wrap\" style=\"--ecMaxLine:52ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">return shell_exec(\"echo $input | $markdown_script\");</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div>\n</blockquote><hr></section><section><h3 id=\"lists\">Lists<a class=\"anchor\" href=\"#lists\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h3><p>Markdown supports ordered (numbered) and unordered (bulleted) lists.</p><section><h4 id=\"unordered\">Unordered<a class=\"anchor\" href=\"#unordered\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h4><p>HTML Tag: <code>&#x3C;ul></code></p><p>Unordered lists use <strong>asterisks (*)</strong>, <strong>pluses (+)</strong>, and <strong>hyphens (-)</strong>.</p><p>Code:</p><div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"plaintext\" class=\"wrap\" style=\"--ecMaxLine:9ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">*   Red</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">2</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">*   Green</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">3</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">*   Blue</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div><p>Preview:</p><hr><ul>\n<li>Red</li>\n<li>Green</li>\n<li>Blue</li>\n</ul><hr><p>is equivalent to:</p><p>Code:</p><div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"plaintext\" class=\"wrap\" style=\"--ecMaxLine:9ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">+   Red</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">2</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">+   Green</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">3</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">+   Blue</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div><p>and:</p><p>Code:</p><div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"plaintext\" class=\"wrap\" style=\"--ecMaxLine:9ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">-   Red</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">2</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">-   Green</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">3</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">-   Blue</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div></section><section><h4 id=\"ordered\">Ordered<a class=\"anchor\" href=\"#ordered\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h4><p>HTML Tag: <code>&#x3C;ol></code></p><p>Ordered lists use numbers followed by periods:</p><p>Code:</p><div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"plaintext\" class=\"wrap\" style=\"--ecMaxLine:10ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">1.  Bird</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">2</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">2.  McHale</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">3</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">3.  Parish</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div><p>Preview:</p><hr><ol>\n<li>Bird</li>\n<li>McHale</li>\n<li>Parish</li>\n</ol><hr><p>It’s possible to trigger an ordered list by accident, by writing something like this:</p><p>Code:</p><div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"plaintext\" class=\"wrap\" style=\"--ecMaxLine:26ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">1986. What a great season.</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div><p>Preview:</p><hr><ol start=\"1986\">\n<li>What a great season.</li>\n</ol><hr><p>You can <strong>backslash-escape (\\)</strong> the period:</p><p>Code:</p><div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"plaintext\" class=\"wrap\" style=\"--ecMaxLine:27ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">1986\\. What a great season.</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div><p>Preview:</p><hr><p>1986. What a great season.</p><hr></section><section><h4 id=\"indented\">Indented<a class=\"anchor\" href=\"#indented\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h4><section><h5 id=\"blockquote\">Blockquote<a class=\"anchor\" href=\"#blockquote\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h5><p>To put a blockquote within a list item, the blockquote’s > delimiters need to be indented:</p><p>Code:</p><div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"plaintext\" class=\"wrap\" style=\"--ecMaxLine:34ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">*   A list item with a blockquote:</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">2</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">3</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292e;--1:#e1e4e8\">    </span></span><span style=\"--0:#24292e;--1:#e1e4e8\">> This is a blockquote</span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">4</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292e;--1:#e1e4e8\">    </span></span><span style=\"--0:#24292e;--1:#e1e4e8\">> inside a list item.</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div><p>Preview:</p><hr><ul>\n<li>\n<p>A list item with a blockquote:</p>\n<blockquote>\n<p>This is a blockquote\ninside a list item.</p>\n</blockquote>\n</li>\n</ul><hr></section><section><h5 id=\"code-block\">Code Block<a class=\"anchor\" href=\"#code-block\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h5><p>To put a code block within a list item, the code block needs to be indented twice — <strong>8 spaces</strong> or <strong>two tabs</strong>:</p><p>Code:</p><div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"plaintext\" class=\"wrap\" style=\"--ecMaxLine:34ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">*   A list item with a code block:</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">2</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\" style=\"--ecIndent:8ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">3</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292e;--1:#e1e4e8\">        </span></span><span style=\"--0:#24292e;--1:#e1e4e8\">&#x3C;code goes here></span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div><p>Preview:</p><hr><ul>\n<li>\n<p>A list item with a code block:</p>\n<div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"plaintext\" class=\"wrap\" style=\"--ecMaxLine:16ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">&#x3C;code goes here></span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div>\n</li>\n</ul><hr></section><section><h5 id=\"nested-list\">Nested List<a class=\"anchor\" href=\"#nested-list\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h5><p>Code:</p><div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"plaintext\" class=\"wrap\" style=\"--ecMaxLine:6ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">* A</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">2</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292e;--1:#e1e4e8\">  </span></span><span style=\"--0:#24292e;--1:#e1e4e8\">* A1</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">3</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292e;--1:#e1e4e8\">  </span></span><span style=\"--0:#24292e;--1:#e1e4e8\">* A2</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">4</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">* B</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">5</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">* C</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div><p>Preview:</p><hr><ul>\n<li>A\n<ul>\n<li>A1</li>\n<li>A2</li>\n</ul>\n</li>\n<li>B</li>\n<li>C</li>\n</ul><hr></section></section></section><section><h3 id=\"code-blocks\">Code Blocks<a class=\"anchor\" href=\"#code-blocks\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h3><p>HTML Tag: <code>&#x3C;pre></code></p><p>Indent every line of the block by at least <strong>4 spaces</strong> or <strong>1 tab</strong>.</p><p>Code:</p><div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"plaintext\" class=\"wrap\" style=\"--ecMaxLine:27ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">This is a normal paragraph:</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">2</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">3</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292e;--1:#e1e4e8\">    </span></span><span style=\"--0:#24292e;--1:#e1e4e8\">This is a code block.</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div><p>Preview:</p><hr><p>This is a normal paragraph:</p><div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"plaintext\" class=\"wrap\" style=\"--ecMaxLine:21ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">This is a code block.</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div><hr><p>A code block continues until it reaches a line that is not indented (or the end of the article).</p><p>Within a code block, <strong><em>ampersands (&#x26;)</em></strong> and angle <strong>brackets (&#x3C; and >)</strong> are automatically converted into HTML entities.</p><p>Code:</p><div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"plaintext\" class=\"wrap\" style=\"--ecMaxLine:35ch\"><code><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292e;--1:#e1e4e8\">    </span></span><span style=\"--0:#24292e;--1:#e1e4e8\">&#x3C;div class=\"footer\"></span></div></div><div class=\"ec-line\" style=\"--ecIndent:8ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">2</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292e;--1:#e1e4e8\">        </span></span><span style=\"--0:#24292e;--1:#e1e4e8\">&#x26;copy; 2004 Foo Corporation</span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">3</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292e;--1:#e1e4e8\">    </span></span><span style=\"--0:#24292e;--1:#e1e4e8\">&#x3C;/div></span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div><p>Preview:</p><hr><div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"plaintext\" class=\"wrap\" style=\"--ecMaxLine:31ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">&#x3C;div class=\"footer\"></span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">2</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292e;--1:#e1e4e8\">    </span></span><span style=\"--0:#24292e;--1:#e1e4e8\">&#x26;copy; 2004 Foo Corporation</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">3</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">&#x3C;/div></span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div><hr><p>Following sections Fenced Code Blocks and Syntax Highlighting are extensions, you can use the other way to write the code block.</p><section><h4 id=\"fenced-code-blocks\">Fenced Code Blocks<a class=\"anchor\" href=\"#fenced-code-blocks\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h4><p>Just wrap your code in <code>```</code> (as shown below) and you won’t need to indent it by four spaces.</p><p>Code:</p><div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"plaintext\" class=\"wrap\" style=\"--ecMaxLine:61ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">Here's an example:</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">2</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">3</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">```</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">4</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">function test() {</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">5</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292e;--1:#e1e4e8\">  </span></span><span style=\"--0:#24292e;--1:#e1e4e8\">console.log(\"notice the blank line before this function?\");</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">6</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">}</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">7</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">```</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div><p>Preview:</p><hr><p>Here’s an example:</p><div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"plaintext\" class=\"wrap\" style=\"--ecMaxLine:61ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">function test() {</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">2</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292e;--1:#e1e4e8\">  </span></span><span style=\"--0:#24292e;--1:#e1e4e8\">console.log(\"notice the blank line before this function?\");</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">3</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">}</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div><hr></section><section><h4 id=\"syntax-highlighting\">Syntax Highlighting<a class=\"anchor\" href=\"#syntax-highlighting\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h4><p>In your fenced block, add an optional language identifier and we’ll run it through syntax highlighting (<a href=\"https://github.com/github/linguist/blob/master/lib/linguist/languages.yml\">Support Languages</a>).</p><p>Code:</p><div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"plaintext\" class=\"wrap\" style=\"--ecMaxLine:40ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">```ruby</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">2</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">require 'redcarpet'</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">3</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">markdown = Redcarpet.new(\"Hello World!\")</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">4</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">puts markdown.to_html</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">5</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">```</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div><p>Preview:</p><hr><div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"ruby\" class=\"wrap\" style=\"--ecMaxLine:40ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#BF3441;--1:#F97583\">require</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">'redcarpet'</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">2</div></div><div class=\"code\"><span style=\"--0:#AE4B07;--1:#FFAB70\">markdown</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#BF3441;--1:#F97583\">=</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">Redcarpet</span><span style=\"--0:#24292E;--1:#E1E4E8\">.</span><span style=\"--0:#BF3441;--1:#F97583\">new</span><span style=\"--0:#24292E;--1:#E1E4E8\">(</span><span style=\"--0:#032F62;--1:#9ECBFF\">\"Hello World!\"</span><span style=\"--0:#24292E;--1:#E1E4E8\">)</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">3</div></div><div class=\"code\"><span style=\"--0:#005CC5;--1:#79B8FF\">puts</span><span style=\"--0:#24292E;--1:#E1E4E8\"> markdown.</span><span style=\"--0:#6F42C1;--1:#B392F0\">to_html</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div><hr></section></section><section><h3 id=\"horizontal-rules\">Horizontal Rules<a class=\"anchor\" href=\"#horizontal-rules\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h3><p>HTML Tag: <code>&#x3C;hr /></code>\nPlaces <strong>three or more hyphens (-), asterisks (*), or underscores (_)</strong> on a line by themselves. You may use spaces between the hyphens or asterisks.</p><p>Code:</p><div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"plaintext\" class=\"wrap\" style=\"--ecMaxLine:39ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">* * *</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">2</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">***</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">3</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">*****</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">4</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">- - -</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">5</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">---------------------------------------</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">6</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">___</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div><p>Preview:</p><hr><hr><hr><hr><hr><hr><hr><hr></section><section><h3 id=\"table\">Table<a class=\"anchor\" href=\"#table\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h3><p>HTML Tag: <code>&#x3C;table></code></p><p>It’s an extension.</p><p>Separates column by <strong>pipe (|)</strong> and header by <strong>dashes (-)</strong>, and uses <strong>colon (:)</strong> for alignment.</p><p>The outer <strong>pipes (|)</strong> and alignment are optional. There are <strong>3 delimiters</strong> each cell at least for separating header.</p><p>Code:</p><div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"plaintext\" class=\"wrap\" style=\"--ecMaxLine:25ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">| Left | Center | Right |</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">2</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">|:-----|:------:|------:|</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">3</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">|aaa   |bbb     |ccc    |</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">4</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">|ddd   |eee     |fff    |</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">5</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\" style=\"--ecIndent:1ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">6</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292e;--1:#e1e4e8\"> </span></span><span style=\"--0:#24292e;--1:#e1e4e8\">A | B</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">7</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">---|---</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">8</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">123|456</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">9</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">10</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">11</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">A |B</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">12</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">--|--</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">13</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">12|45</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div><p>Preview:</p><hr>\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n<table><thead><tr><th align=\"left\">Left</th><th align=\"center\">Center</th><th align=\"right\">Right</th></tr></thead><tbody><tr><td align=\"left\">aaa</td><td align=\"center\">bbb</td><td align=\"right\">ccc</td></tr><tr><td align=\"left\">ddd</td><td align=\"center\">eee</td><td align=\"right\">fff</td></tr></tbody></table>\n\n\n\n\n\n\n\n\n\n\n\n\n<table><thead><tr><th>A</th><th>B</th></tr></thead><tbody><tr><td>123</td><td>456</td></tr></tbody></table>\n\n\n\n\n\n\n\n\n\n\n\n\n<table><thead><tr><th>A</th><th>B</th></tr></thead><tbody><tr><td>12</td><td>45</td></tr></tbody></table><hr></section></section><section><h2 id=\"span-elements\">Span Elements<a class=\"anchor\" href=\"#span-elements\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h2><section><h3 id=\"links\">Links<a class=\"anchor\" href=\"#links\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h3><p>HTML Tag: <code>&#x3C;a></code></p><p>Markdown supports two style of links: inline and reference.</p><section><h4 id=\"inline\">Inline<a class=\"anchor\" href=\"#inline\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h4><p>Inline link format like this: <code>[Link Text](URL \"Title\")</code></p><p>Title is optional.</p><p>Code:</p><div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"plaintext\" class=\"wrap\" style=\"--ecMaxLine:62ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">This is [an example](http://example.com/ \"Title\") inline link.</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">2</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">3</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">[This link](http://example.net/) has no title attribute.</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div><p>Preview:</p><hr><p>This is <a href=\"http://example.com/\" title=\"Title\">an example</a> inline link.</p><p><a href=\"http://example.net/\">This link</a> has no title attribute.</p><hr><p>If you’re referring to a local resource on the same server, you can use relative paths:</p><p>Code:</p><div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"plaintext\" class=\"wrap\" style=\"--ecMaxLine:41ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">See my [About](/about/) page for details.</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div><p>Preview:</p><hr><p>See my <a href=\"/about/\">About</a> page for details.</p><hr></section><section><h4 id=\"reference\">Reference<a class=\"anchor\" href=\"#reference\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h4><p>You could predefine link references. Format like this: <code>[id]: URL \"Title\"</code></p><p>Title is also optional. And the you refer the link, format like this: <code>[Link Text][id]</code></p><p>Code:</p><div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"plaintext\" class=\"wrap\" style=\"--ecMaxLine:48ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">[id]: http://example.com/  \"Optional Title Here\"</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">2</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">This is [an example][id] reference-style link.</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div><p>Preview:</p><hr><p>This is <a href=\"http://example.com/\" title=\"Optional Title Here\">an example</a> reference-style link.</p><hr><p>That is:</p><ul>\n<li>Square brackets containing the link identifier (<strong>not case sensitive</strong>, optionally indented from the left margin using up to three spaces);</li>\n<li>followed by a colon;</li>\n<li>followed by one or more spaces (or tabs);</li>\n<li>followed by the URL for the link;</li>\n<li>The link URL may, optionally, be surrounded by angle brackets.</li>\n<li>optionally followed by a title attribute for the link, enclosed in double or single quotes, or enclosed in parentheses.</li>\n</ul><p>The following three link definitions are equivalent:</p><p>Code:</p><div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"plaintext\" class=\"wrap\" style=\"--ecMaxLine:51ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">[foo]: http://example.com/  \"Optional Title Here\"</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">2</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">[foo]: http://example.com/  'Optional Title Here'</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">3</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">[foo]: http://example.com/  (Optional Title Here)</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">4</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">[foo]: &#x3C;http://example.com/>  \"Optional Title Here\"</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div><p>Uses an empty set of square brackets, the link text itself is used as the name.</p><p>Code:</p><div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"plaintext\" class=\"wrap\" style=\"--ecMaxLine:28ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">[Google]: http://google.com/</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">2</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">[Google][]</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div><p>Preview:</p><hr><p><a href=\"http://google.com/\">Google</a></p><hr></section></section><section><h3 id=\"emphasis\">Emphasis<a class=\"anchor\" href=\"#emphasis\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h3><p>HTML Tags: <code>&#x3C;em></code>, <code>&#x3C;strong></code></p><p>Markdown treats <strong>asterisks (*)</strong> and <strong>underscores (_)</strong> as indicators of emphasis. <strong>One delimiter</strong> will be <code>&#x3C;em></code>; *<em>double delimiters</em> will be <code>&#x3C;strong></code>.</p><p>Code:</p><div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"plaintext\" class=\"wrap\" style=\"--ecMaxLine:22ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">*single asterisks*</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">2</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">3</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">_single underscores_</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">4</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">5</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">**double asterisks**</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">6</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">7</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">__double underscores__</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div><p>Preview:</p><hr><p><em>single asterisks</em></p><p><em>single underscores</em></p><p><strong>double asterisks</strong></p><p><strong>double underscores</strong></p><hr><p>But if you surround an * or _ with spaces, it’ll be treated as a literal asterisk or underscore.</p><p>You can backslash escape it:</p><p>Code:</p><div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"plaintext\" class=\"wrap\" style=\"--ecMaxLine:48ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">\\*this text is surrounded by literal asterisks\\*</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div><p>Preview:</p><hr><p>*this text is surrounded by literal asterisks*</p><hr></section><section><h3 id=\"code\">Code<a class=\"anchor\" href=\"#code\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h3><p>HTML Tag: <code>&#x3C;code></code></p><p>Wraps it with <strong>backtick quotes (`)</strong>.</p><p>Code:</p><div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"plaintext\" class=\"wrap\" style=\"--ecMaxLine:28ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">Use the `printf()` function.</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div><p>Preview:</p><hr><p>Use the <code>printf()</code> function.</p><hr><p>To include a literal backtick character within a code span, you can use <strong>multiple backticks</strong> as the opening and closing delimiters:</p><p>Code:</p><div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"plaintext\" class=\"wrap\" style=\"--ecMaxLine:41ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">``There is a literal backtick (`) here.``</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div><p>Preview:</p><hr><p><code>There is a literal backtick (`) here.</code></p><hr><p>The backtick delimiters surrounding a code span may include spaces — one after the opening, one before the closing. This allows you to place literal backtick characters at the beginning or end of a code span:</p><p>Code:</p><div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"plaintext\" class=\"wrap\" style=\"--ecMaxLine:55ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">A single backtick in a code span: `` ` ``</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">2</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">3</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">A backtick-delimited string in a code span: `` `foo` ``</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div><p>Preview:</p><hr><p>A single backtick in a code span: <code>`</code></p><p>A backtick-delimited string in a code span: <code>`foo`</code></p><hr></section><section><h3 id=\"images\">Images<a class=\"anchor\" href=\"#images\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h3><p>HTML Tag: <code>&#x3C;img /></code></p><p>Markdown uses an image syntax that is intended to resemble the syntax for links, allowing for two styles: inline and reference.</p><section><h4 id=\"inline-1\">Inline<a class=\"anchor\" href=\"#inline-1\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h4><p>Inline image syntax looks like this: <code>![Alt text](URL \"Title\")</code></p><p>Title is optional.</p><p>Code:</p><div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"plaintext\" class=\"wrap\" style=\"--ecMaxLine:46ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">![Alt text](/path/to/img.jpg)</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">2</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">3</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">![Alt text](/path/to/img.jpg \"Optional title\")</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div><p>Preview:</p><hr><p><img src=\"https://s2.loli.net/2024/08/20/5fszgXeOxmL3Wdv.webp\" alt=\"Alt text\"></p><p><img src=\"https://s2.loli.net/2024/08/20/5fszgXeOxmL3Wdv.webp\" alt=\"Alt text\" title=\"Optional title\"></p><hr><p>That is:</p><ul>\n<li>An exclamation mark: !;</li>\n<li>followed by a set of square brackets, containing the alt attribute text for the image;</li>\n<li>followed by a set of parentheses, containing the URL or path to the image, and an optional title attribute enclosed in double or single quotes.</li>\n</ul></section><section><h4 id=\"reference-1\">Reference<a class=\"anchor\" href=\"#reference-1\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h4><p>Reference-style image syntax looks like this: <code>![Alt text][id]</code></p><p>Code:</p><div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"plaintext\" class=\"wrap\" style=\"--ecMaxLine:89ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">[img id]: https://s2.loli.net/2024/08/20/5fszgXeOxmL3Wdv.webp  \"Optional title attribute\"</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">2</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">![Alt text][img id]</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div><p>Preview:</p><hr><p><img src=\"https://s2.loli.net/2024/08/20/5fszgXeOxmL3Wdv.webp\" alt=\"Alt text\" title=\"Optional title attribute\"></p><hr></section></section><section><h3 id=\"strikethrough\">Strikethrough<a class=\"anchor\" href=\"#strikethrough\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h3><p>HTML Tag: <code>&#x3C;del></code></p><p>It’s an extension.</p><p>GFM adds syntax to strikethrough text.</p><p>Code:</p><div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"plaintext\" class=\"wrap\" style=\"--ecMaxLine:18ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">~~Mistaken text.~~</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div><p>Preview:</p><hr><p><del>Mistaken text.</del></p><hr></section></section><section><h2 id=\"miscellaneous\">Miscellaneous<a class=\"anchor\" href=\"#miscellaneous\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h2><section><h3 id=\"automatic-links\">Automatic Links<a class=\"anchor\" href=\"#automatic-links\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h3><p>Markdown supports a shortcut style for creating “automatic” links for URLs and email addresses: simply surround the URL or email address with angle brackets.</p><p>Code:</p><div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"plaintext\" class=\"wrap\" style=\"--ecMaxLine:21ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">&#x3C;http://example.com/></span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">2</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">3</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">&#x3C;address@example.com></span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div><p>Preview:</p><hr><p><a href=\"http://example.com/\">http://example.com/</a></p><p><a href=\"mailto:address@example.com\">address@example.com</a></p><hr><p>GFM will autolink standard URLs.</p><p>Code:</p><div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"plaintext\" class=\"wrap\" style=\"--ecMaxLine:34ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">https://github.com/emn178/markdown</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div><p>Preview:</p><hr><p><a href=\"https://github.com/emn178/markdown\">https://github.com/emn178/markdown</a></p><hr></section><section><h3 id=\"backslash-escapes\">Backslash Escapes<a class=\"anchor\" href=\"#backslash-escapes\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h3><p>Markdown allows you to use backslash escapes to generate literal characters which would otherwise have special meaning in Markdown’s formatting syntax.</p><p>Code:</p><div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"plaintext\" class=\"wrap\" style=\"--ecMaxLine:21ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">\\*literal asterisks\\*</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div><p>Preview:</p><hr><p>*literal asterisks*</p><hr><p>Markdown provides backslash escapes for the following characters:</p><p>Code:</p><div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"plaintext\" class=\"wrap\" style=\"--ecMaxLine:23ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">\\   backslash</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">2</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">`   backtick</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">3</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">*   asterisk</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">4</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">_   underscore</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">5</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">{}  curly braces</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">6</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">[]  square brackets</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">7</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">()  parentheses</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">8</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">#   hash mark</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">9</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">+   plus sign</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">10</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">-   minus sign (hyphen)</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">11</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">.   dot</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">12</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">!   exclamation mark</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div></section></section><section><h2 id=\"inline-html\">Inline HTML<a class=\"anchor\" href=\"#inline-html\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h2><p>For any markup that is not covered by Markdown’s syntax, you simply use HTML itself. There’s no need to preface it or delimit it to indicate that you’re switching from Markdown to HTML; you just use the tags.</p><p>Code:</p><div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"plaintext\" class=\"wrap\" style=\"--ecMaxLine:34ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">This is a regular paragraph.</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">2</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">3</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">&#x3C;table></span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">4</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292e;--1:#e1e4e8\">    </span></span><span style=\"--0:#24292e;--1:#e1e4e8\">&#x3C;tr></span></div></div><div class=\"ec-line\" style=\"--ecIndent:8ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">5</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292e;--1:#e1e4e8\">        </span></span><span style=\"--0:#24292e;--1:#e1e4e8\">&#x3C;td>Foo&#x3C;/td></span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">6</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292e;--1:#e1e4e8\">    </span></span><span style=\"--0:#24292e;--1:#e1e4e8\">&#x3C;/tr></span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">7</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">&#x3C;/table></span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">8</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">9</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">This is another regular paragraph.</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div><p>Preview:</p><hr><p>This is a regular paragraph.</p><table>\n    <tbody><tr>\n        <td>Foo</td>\n    </tr>\n</tbody></table><p>This is another regular paragraph.</p><hr><p>Note that Markdown formatting syntax is <strong>not processed within block-level HTML tags</strong>.</p><p>Unlike block-level HTML tags, Markdown syntax is <strong>processed within span-level tags</strong>.</p><p>Code:</p><div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"plaintext\" class=\"wrap\" style=\"--ecMaxLine:21ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">&#x3C;span>**Work**&#x3C;/span></span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">2</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">3</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">&#x3C;div></span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">4</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292e;--1:#e1e4e8\">    </span></span><span style=\"--0:#24292e;--1:#e1e4e8\">**No Work**</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">5</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">&#x3C;/div></span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div><p>Preview:</p><hr><p><span><strong>Work</strong></span></p><div>\n  **No Work**\n</div>\n***</section></section>","metadata":{"headings":[{"depth":1,"slug":"markdown-tutorial","text":"Markdown Tutorial#"},{"depth":2,"slug":"block-elements","text":"Block Elements#"},{"depth":3,"slug":"paragraphs-and-line-breaks","text":"Paragraphs and Line Breaks#"},{"depth":4,"slug":"paragraphs","text":"Paragraphs#"},{"depth":4,"slug":"line-breaks","text":"Line Breaks#"},{"depth":3,"slug":"headers","text":"Headers#"},{"depth":4,"slug":"setext","text":"Setext#"},{"depth":1,"slug":"this-is-an-h1","text":"This is an H1#"},{"depth":2,"slug":"this-is-an-h2","text":"This is an H2#"},{"depth":4,"slug":"atx","text":"atx#"},{"depth":1,"slug":"this-is-an-h1-1","text":"This is an H1#"},{"depth":2,"slug":"this-is-an-h2-1","text":"This is an H2#"},{"depth":6,"slug":"this-is-an-h6","text":"This is an H6#"},{"depth":1,"slug":"this-is-an-h1-2","text":"This is an H1#"},{"depth":2,"slug":"this-is-an-h2-2","text":"This is an H2#"},{"depth":3,"slug":"this-is-an-h3","text":"This is an H3#"},{"depth":3,"slug":"blockquotes","text":"Blockquotes#"},{"depth":2,"slug":"this-is-a-header","text":"This is a header.#"},{"depth":3,"slug":"lists","text":"Lists#"},{"depth":4,"slug":"unordered","text":"Unordered#"},{"depth":4,"slug":"ordered","text":"Ordered#"},{"depth":4,"slug":"indented","text":"Indented#"},{"depth":5,"slug":"blockquote","text":"Blockquote#"},{"depth":5,"slug":"code-block","text":"Code Block#"},{"depth":5,"slug":"nested-list","text":"Nested List#"},{"depth":3,"slug":"code-blocks","text":"Code Blocks#"},{"depth":4,"slug":"fenced-code-blocks","text":"Fenced Code Blocks#"},{"depth":4,"slug":"syntax-highlighting","text":"Syntax Highlighting#"},{"depth":3,"slug":"horizontal-rules","text":"Horizontal Rules#"},{"depth":3,"slug":"table","text":"Table#"},{"depth":2,"slug":"span-elements","text":"Span Elements#"},{"depth":3,"slug":"links","text":"Links#"},{"depth":4,"slug":"inline","text":"Inline#"},{"depth":4,"slug":"reference","text":"Reference#"},{"depth":3,"slug":"emphasis","text":"Emphasis#"},{"depth":3,"slug":"code","text":"Code#"},{"depth":3,"slug":"images","text":"Images#"},{"depth":4,"slug":"inline-1","text":"Inline#"},{"depth":4,"slug":"reference-1","text":"Reference#"},{"depth":3,"slug":"strikethrough","text":"Strikethrough#"},{"depth":2,"slug":"miscellaneous","text":"Miscellaneous#"},{"depth":3,"slug":"automatic-links","text":"Automatic Links#"},{"depth":3,"slug":"backslash-escapes","text":"Backslash Escapes#"},{"depth":2,"slug":"inline-html","text":"Inline HTML#"}],"localImagePaths":[],"remoteImagePaths":[],"frontmatter":{"title":"Markdown Tutorial","published":"2025-01-20T00:00:00.000Z","pinned":false,"description":"A simple example of a Markdown blog post.","tags":["Markdown","Blogging"],"category":"Examples","licenseName":"Unlicensed","author":"emn178","sourceLink":"https://github.com/emn178/markdown","draft":false,"minutes":9,"words":1700,"excerpt":"A markdown example shows how to write a markdown file. This document integrates core syntax and extensions (GMF)."},"imagePaths":[]}},"collection":"posts"}],"2024-05-01":[{"id":"markdown-extended","data":{"title":"Markdown Extended Features","published":"2024-05-01T00:00:00.000Z","updated":"2024-11-29T00:00:00.000Z","draft":false,"description":"Read more about Markdown features in Mizuki","image":"","tags":["Demo","Example","Markdown","mizuki"],"category":"Examples","lang":"","pinned":false,"author":"","sourceLink":"","licenseName":"","licenseUrl":"","encrypted":false,"password":"","prevTitle":"Simple Guides for Mizuki","prevSlug":"guide","nextTitle":"Markdown Tutorial","nextSlug":"markdown-tutorial"},"body":"## GitHub Repository Cards\nYou can add dynamic cards that link to GitHub repositories, on page load, the repository information is pulled from the GitHub API. \n\n::github{repo=\"matsuzaka-yuki/Mizuki\"}\n\nCreate a GitHub repository card with the code `::github{repo=\"matsuzaka-yuki/Mizuki\"}`.\n\n```markdown\n::github{repo=\"matsuzaka-yuki/Mizuki\"}\n```\n\n## Admonitions\n\nFollowing types of admonitions are supported: `note` `tip` `important` `warning` `caution`\n\n:::note\nHighlights information that users should take into account, even when skimming.\n:::\n\n:::tip\nOptional information to help a user be more successful.\n:::\n\n:::important\nCrucial information necessary for users to succeed.\n:::\n\n:::warning\nCritical content demanding immediate user attention due to potential risks.\n:::\n\n:::caution\nNegative potential consequences of an action.\n:::\n\n### Basic Syntax\n\n```markdown\n:::note\nHighlights information that users should take into account, even when skimming.\n:::\n\n:::tip\nOptional information to help a user be more successful.\n:::\n```\n\n### Custom Titles\n\nThe title of the admonition can be customized.\n\n:::note[MY CUSTOM TITLE]\nThis is a note with a custom title.\n:::\n\n```markdown\n:::note[MY CUSTOM TITLE]\nThis is a note with a custom title.\n:::\n```\n\n### GitHub Syntax\n\n> [!TIP]\n> [The GitHub syntax](https://github.com/orgs/community/discussions/16925) is also supported.\n\n```\n> [!NOTE]\n> The GitHub syntax is also supported.\n\n> [!TIP]\n> The GitHub syntax is also supported.\n```\n\n### Spoiler\n\nYou can add spoilers to your text. The text also supports **Markdown** syntax.\n\nThe content :spoiler[is hidden **ayyy**]!\n\n```markdown\nThe content :spoiler[is hidden **ayyy**]!","filePath":"src/content/posts/markdown-extended.md","digest":"d8ebd636c64dcb46","rendered":{"html":"<section><h2 id=\"github-repository-cards\">GitHub Repository Cards<a class=\"anchor\" href=\"#github-repository-cards\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h2><p>You can add dynamic cards that link to GitHub repositories, on page load, the repository information is pulled from the GitHub API.</p><a id=\"GCgobuwj-card\" class=\"card-github fetch-waiting no-styling\" href=\"https://github.com/matsuzaka-yuki/Mizuki\" target=\"_blank\" repo=\"matsuzaka-yuki/Mizuki\"><div class=\"gc-titlebar\"><div class=\"gc-titlebar-left\"><div class=\"gc-owner\"><div id=\"GCgobuwj-avatar\" class=\"gc-avatar\"></div><div class=\"gc-user\">matsuzaka-yuki</div></div><div class=\"gc-divider\">/</div><div class=\"gc-repo\">Mizuki</div></div><div class=\"github-logo\"></div></div><div id=\"GCgobuwj-description\" class=\"gc-description\">Waiting for api.github.com...</div><div class=\"gc-infobar\"><div id=\"GCgobuwj-stars\" class=\"gc-stars\">00K</div><div id=\"GCgobuwj-forks\" class=\"gc-forks\">0K</div><div id=\"GCgobuwj-license\" class=\"gc-license\">0K</div><span id=\"GCgobuwj-language\" class=\"gc-language\">Waiting...</span></div><script id=\"GCgobuwj-script\" type=\"text/javascript\" defer>\n      fetch('https://api.github.com/repos/matsuzaka-yuki/Mizuki', { referrerPolicy: \"no-referrer\" }).then(response => response.json()).then(data => {\n        document.getElementById('GCgobuwj-description').innerText = data.description?.replace(/:[a-zA-Z0-9_]+:/g, '') || \"Description not set\";\n        document.getElementById('GCgobuwj-language').innerText = data.language;\n        document.getElementById('GCgobuwj-forks').innerText = Intl.NumberFormat('en-us', { notation: \"compact\", maximumFractionDigits: 1 }).format(data.forks).replaceAll(\" \", '');\n        document.getElementById('GCgobuwj-stars').innerText = Intl.NumberFormat('en-us', { notation: \"compact\", maximumFractionDigits: 1 }).format(data.stargazers_count).replaceAll(\" \", '');\n        const avatarEl = document.getElementById('GCgobuwj-avatar');\n        avatarEl.style.backgroundImage = 'url(' + data.owner.avatar_url + ')';\n        avatarEl.style.backgroundColor = 'transparent';\n        document.getElementById('GCgobuwj-license').innerText = data.license?.spdx_id || \"no-license\";\n        document.getElementById('GCgobuwj-card').classList.remove(\"fetch-waiting\");\n        console.log(\"[GITHUB-CARD] Loaded card for matsuzaka-yuki/Mizuki | GCgobuwj.\")\n      }).catch(err => {\n        const c = document.getElementById('GCgobuwj-card');\n        c?.classList.add(\"fetch-error\");\n        console.warn(\"[GITHUB-CARD] (Error) Loading card for matsuzaka-yuki/Mizuki | GCgobuwj.\")\n      })\n    \x3C/script></a><p>Create a GitHub repository card with the code <code>::github{repo=\"matsuzaka-yuki/Mizuki\"}</code>.</p><div class=\"expressive-code\"><link rel=\"stylesheet\" href=\"/_astro/ec.xyvso.css\"><script type=\"module\" src=\"/_astro/ec.g1fg5.js\">\x3C/script><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"markdown\" class=\"wrap\" style=\"--ecMaxLine:38ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#24292E;--1:#E1E4E8\">::github{repo=\"matsuzaka-yuki/Mizuki\"}</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div></section>\n<section><h2 id=\"admonitions\">Admonitions<a class=\"anchor\" href=\"#admonitions\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h2><p>Following types of admonitions are supported: <code>note</code> <code>tip</code> <code>important</code> <code>warning</code> <code>caution</code></p><blockquote class=\"admonition bdm-note\"><span class=\"bdm-title\">NOTE</span><p>Highlights information that users should take into account, even when skimming.</p></blockquote><blockquote class=\"admonition bdm-tip\"><span class=\"bdm-title\">TIP</span><p>Optional information to help a user be more successful.</p></blockquote><blockquote class=\"admonition bdm-important\"><span class=\"bdm-title\">IMPORTANT</span><p>Crucial information necessary for users to succeed.</p></blockquote><blockquote class=\"admonition bdm-warning\"><span class=\"bdm-title\">WARNING</span><p>Critical content demanding immediate user attention due to potential risks.</p></blockquote><blockquote class=\"admonition bdm-caution\"><span class=\"bdm-title\">CAUTION</span><p>Negative potential consequences of an action.</p></blockquote><section><h3 id=\"basic-syntax\">Basic Syntax<a class=\"anchor\" href=\"#basic-syntax\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h3><div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"markdown\" class=\"wrap\" style=\"--ecMaxLine:79ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#24292E;--1:#E1E4E8\">:::note</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">2</div></div><div class=\"code\"><span style=\"--0:#24292E;--1:#E1E4E8\">Highlights information that users should take into account, even when skimming.</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">3</div></div><div class=\"code\"><span style=\"--0:#24292E;--1:#E1E4E8\">:::</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">4</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">5</div></div><div class=\"code\"><span style=\"--0:#24292E;--1:#E1E4E8\">:::tip</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">6</div></div><div class=\"code\"><span style=\"--0:#24292E;--1:#E1E4E8\">Optional information to help a user be more successful.</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">7</div></div><div class=\"code\"><span style=\"--0:#24292E;--1:#E1E4E8\">:::</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div></section><section><h3 id=\"custom-titles\">Custom Titles<a class=\"anchor\" href=\"#custom-titles\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h3><p>The title of the admonition can be customized.</p><blockquote class=\"admonition bdm-note\"><span class=\"bdm-title\"><div>MY CUSTOM TITLE</div></span><p>This is a note with a custom title.</p></blockquote><div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"markdown\" class=\"wrap\" style=\"--ecMaxLine:35ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#24292E;--1:#E1E4E8\">:::note[MY CUSTOM TITLE]</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">2</div></div><div class=\"code\"><span style=\"--0:#24292E;--1:#E1E4E8\">This is a note with a custom title.</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">3</div></div><div class=\"code\"><span style=\"--0:#24292E;--1:#E1E4E8\">:::</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div></section><section><h3 id=\"github-syntax\">GitHub Syntax<a class=\"anchor\" href=\"#github-syntax\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h3><blockquote class=\"admonition bdm-tip\"><span class=\"bdm-title\">TIP</span><p><a href=\"https://github.com/orgs/community/discussions/16925\">The GitHub syntax</a> is also supported.</p></blockquote><div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"plaintext\" class=\"wrap\" style=\"--ecMaxLine:38ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">> [!NOTE]</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">2</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">> The GitHub syntax is also supported.</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">3</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">4</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">> [!TIP]</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">5</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">> The GitHub syntax is also supported.</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div></section><section><h3 id=\"spoiler\">Spoiler<a class=\"anchor\" href=\"#spoiler\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h3><p>You can add spoilers to your text. The text also supports <strong>Markdown</strong> syntax.</p><p>The content <spoiler>is hidden <strong>ayyy</strong></spoiler>!</p><div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"markdown\" class=\"wrap\" style=\"--ecMaxLine:41ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#24292E;--1:#E1E4E8\">The content :spoiler[is hidden </span><span style=\"--0:#24292E;--0fw:bold;--1:#E1E4E8;--1fw:bold\">**ayyy**</span><span style=\"--0:#24292E;--1:#E1E4E8\">]!</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div></section></section>","metadata":{"headings":[{"depth":2,"slug":"github-repository-cards","text":"GitHub Repository Cards#"},{"depth":2,"slug":"admonitions","text":"Admonitions#"},{"depth":3,"slug":"basic-syntax","text":"Basic Syntax#"},{"depth":3,"slug":"custom-titles","text":"Custom Titles#"},{"depth":3,"slug":"github-syntax","text":"GitHub Syntax#"},{"depth":3,"slug":"spoiler","text":"Spoiler#"}],"localImagePaths":[],"remoteImagePaths":[],"frontmatter":{"title":"Markdown Extended Features","published":"2024-05-01T00:00:00.000Z","updated":"2024-11-29T00:00:00.000Z","description":"Read more about Markdown features in Mizuki","image":"","tags":["Demo","Example","Markdown","mizuki"],"category":"Examples","draft":false,"minutes":1,"words":176,"excerpt":"You can add dynamic cards that link to GitHub repositories, on page load, the repository information is pulled from the GitHub API."},"imagePaths":[]}},"collection":"posts"}],"2024-04-01":[{"id":"guide","data":{"title":"Simple Guides for Mizuki","published":"2024-04-01T00:00:00.000Z","draft":false,"description":"How to use this blog template.","image":"./cover.png","tags":["Mizuki","Blogging","Customization"],"category":"Guides","lang":"","pinned":false,"author":"","sourceLink":"","licenseName":"","licenseUrl":"","encrypted":false,"password":"","prevTitle":"Encrypted Post","prevSlug":"encrypted-post","nextTitle":"Markdown Extended Features","nextSlug":"markdown-extended"},"body":"This blog template is built with [Astro](https://astro.build/). For the things that are not mentioned in this guide, you may find the answers in the [Astro Docs](https://docs.astro.build/).\n\n## Front-matter of Posts\n\n```yaml\n---\ntitle: My First Blog Post\npublished: 2023-09-09\ndescription: This is the first post of my new Astro blog.\nimage: ./cover.jpg\ntags: [Foo, Bar]\ncategory: Front-end\ndraft: false\n---\n```\n\n\n\n\n| Attribute     | Description                                                                                                                                                                                                 |\n|---------------|-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|\n| `title`       | The title of the post.                                                                                                                                                                                      |\n| `published`   | The date the post was published.                                                                                                                                                                            |\n| `pinned`      | Whether this post is pinned to the top of the post list.                                                                                                                                                   |\n| `description` | A short description of the post. Displayed on index page.                                                                                                                                                   |\n| `image`       | The cover image path of the post.<br/>1. Start with `http://` or `https://`: Use web image<br/>2. Start with `/`: For image in `public` dir<br/>3. With none of the prefixes: Relative to the markdown file |\n| `tags`        | The tags of the post.                                                                                                                                                                                       |\n| `category`    | The category of the post.                                                                                                                                                                                   |\n| `licenseName` | The license name for the post content.                                                                                                                                                                      |\n| `author`      | The author of the post.                                                                                                                                                                                     |\n| `sourceLink`  | The source link or reference for the post content.                                                                                                                                                          |\n| `draft`       | If this post is still a draft, which won't be displayed.                                                                                                                                                    |\n\n## Where to Place the Post Files\n\n\n\nYour post files should be placed in `src/content/posts/` directory. You can also create sub-directories to better organize your posts and assets.\n\n```\nsrc/content/posts/\n├── post-1.md\n└── post-2/\n    ├── cover.png\n    └── index.md\n```","filePath":"src/content/posts/guide/index.md","digest":"0a690933be771c1d","rendered":{"html":"<p>This blog template is built with <a href=\"https://astro.build/\">Astro</a>. For the things that are not mentioned in this guide, you may find the answers in the <a href=\"https://docs.astro.build/\">Astro Docs</a>.</p>\n<section><h2 id=\"front-matter-of-posts\">Front-matter of Posts<a class=\"anchor\" href=\"#front-matter-of-posts\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h2><div class=\"expressive-code\"><link rel=\"stylesheet\" href=\"/_astro/ec.xyvso.css\"><script type=\"module\" src=\"/_astro/ec.g1fg5.js\">\x3C/script><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"yaml\" class=\"wrap\" style=\"--ecMaxLine:57ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#6F42C1;--1:#B392F0\">---</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">2</div></div><div class=\"code\"><span style=\"--0:#1E7734;--1:#85E89D\">title</span><span style=\"--0:#24292E;--1:#E1E4E8\">: </span><span style=\"--0:#032F62;--1:#9ECBFF\">My First Blog Post</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">3</div></div><div class=\"code\"><span style=\"--0:#1E7734;--1:#85E89D\">published</span><span style=\"--0:#24292E;--1:#E1E4E8\">: </span><span style=\"--0:#005CC5;--1:#79B8FF\">2023-09-09</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">4</div></div><div class=\"code\"><span style=\"--0:#1E7734;--1:#85E89D\">description</span><span style=\"--0:#24292E;--1:#E1E4E8\">: </span><span style=\"--0:#032F62;--1:#9ECBFF\">This is the first post of my new Astro blog.</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">5</div></div><div class=\"code\"><span style=\"--0:#1E7734;--1:#85E89D\">image</span><span style=\"--0:#24292E;--1:#E1E4E8\">: </span><span style=\"--0:#032F62;--1:#9ECBFF\">./cover.jpg</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">6</div></div><div class=\"code\"><span style=\"--0:#1E7734;--1:#85E89D\">tags</span><span style=\"--0:#24292E;--1:#E1E4E8\">: [</span><span style=\"--0:#032F62;--1:#9ECBFF\">Foo</span><span style=\"--0:#24292E;--1:#E1E4E8\">, </span><span style=\"--0:#032F62;--1:#9ECBFF\">Bar</span><span style=\"--0:#24292E;--1:#E1E4E8\">]</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">7</div></div><div class=\"code\"><span style=\"--0:#1E7734;--1:#85E89D\">category</span><span style=\"--0:#24292E;--1:#E1E4E8\">: </span><span style=\"--0:#032F62;--1:#9ECBFF\">Front-end</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">8</div></div><div class=\"code\"><span style=\"--0:#1E7734;--1:#85E89D\">draft</span><span style=\"--0:#24292E;--1:#E1E4E8\">: </span><span style=\"--0:#005CC5;--1:#79B8FF\">false</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">9</div></div><div class=\"code\"><span style=\"--0:#6F42C1;--1:#B392F0\">---</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div>\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n<table><thead><tr><th>Attribute</th><th>Description</th></tr></thead><tbody><tr><td><code>title</code></td><td>The title of the post.</td></tr><tr><td><code>published</code></td><td>The date the post was published.</td></tr><tr><td><code>pinned</code></td><td>Whether this post is pinned to the top of the post list.</td></tr><tr><td><code>description</code></td><td>A short description of the post. Displayed on index page.</td></tr><tr><td><code>image</code></td><td>The cover image path of the post.<br>1. Start with <code>http://</code> or <code>https://</code>: Use web image<br>2. Start with <code>/</code>: For image in <code>public</code> dir<br>3. With none of the prefixes: Relative to the markdown file</td></tr><tr><td><code>tags</code></td><td>The tags of the post.</td></tr><tr><td><code>category</code></td><td>The category of the post.</td></tr><tr><td><code>licenseName</code></td><td>The license name for the post content.</td></tr><tr><td><code>author</code></td><td>The author of the post.</td></tr><tr><td><code>sourceLink</code></td><td>The source link or reference for the post content.</td></tr><tr><td><code>draft</code></td><td>If this post is still a draft, which won’t be displayed.</td></tr></tbody></table></section>\n<section><h2 id=\"where-to-place-the-post-files\">Where to Place the Post Files<a class=\"anchor\" href=\"#where-to-place-the-post-files\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h2><p>Your post files should be placed in <code>src/content/posts/</code> directory. You can also create sub-directories to better organize your posts and assets.</p><div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"plaintext\" class=\"wrap\" style=\"--ecMaxLine:18ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">src/content/posts/</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">2</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">├── post-1.md</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">3</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">└── post-2/</span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">4</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292e;--1:#e1e4e8\">    </span></span><span style=\"--0:#24292e;--1:#e1e4e8\">├── cover.png</span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">5</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292e;--1:#e1e4e8\">    </span></span><span style=\"--0:#24292e;--1:#e1e4e8\">└── index.md</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div></section>","metadata":{"headings":[{"depth":2,"slug":"front-matter-of-posts","text":"Front-matter of Posts#"},{"depth":2,"slug":"where-to-place-the-post-files","text":"Where to Place the Post Files#"}],"localImagePaths":[],"remoteImagePaths":[],"frontmatter":{"title":"Simple Guides for Mizuki","published":"2024-04-01T00:00:00.000Z","description":"How to use this blog template.","image":"./cover.png","tags":["Mizuki","Blogging","Customization"],"category":"Guides","draft":false,"minutes":1,"words":186,"excerpt":"This blog template is built with Astro. For the things that are not mentioned in this guide, you may find the answers in the Astro Docs."},"imagePaths":[]}},"collection":"posts"}],"2024-01-15":[{"id":"encrypted-post","data":{"title":"Encrypted Post","published":"2024-01-15T00:00:00.000Z","draft":false,"description":"This is an article for testing the page encryption feature","image":"","tags":["Test","Encryption"],"category":"Technology","lang":"","pinned":false,"author":"","sourceLink":"","licenseName":"","licenseUrl":"","encrypted":true,"password":"123456","permalink":"encrypted-example","prevTitle":"Markdown Mermaid","prevSlug":"markdown-mermaid","nextTitle":"Simple Guides for Mizuki","nextSlug":"guide"},"body":"This blog template is built with [Astro](https://astro.build/). For the things that are not mentioned in this guide, you may find the answers in the [Astro Docs](https://docs.astro.build/).\n\n## Front-matter of Posts\n\n```yaml\n---\ntitle: My First Blog Post\npublished: 2023-09-09\ndescription: This is the first post of my new Astro blog.\nimage: ./cover.jpg\ntags: [Foo, Bar]\ncategory: Front-end\ndraft: false\n---\n```\n\n\n\n\n\n| Attribute     | Description                                                                                                                                                                                                 |\n|---------------|-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|\n| `title`       | The title of the post.                                                                                                                                                                                      |\n| `published`   | The date the post was published.                                                                                                                                                                            |\n| `pinned`      | Whether this post is pinned to the top of the post list.                                                                                                                                                   |\n| `description` | A short description of the post. Displayed on index page.                                                                                                                                                   |\n| `image`       | The cover image path of the post.<br/>1. Start with `http://` or `https://`: Use web image<br/>2. Start with `/`: For image in `public` dir<br/>3. With none of the prefixes: Relative to the markdown file |\n| `tags`        | The tags of the post.                                                                                                                                                                                       |\n| `category`    | The category of the post.                                                                                                                                                                                   |\n| `permalink`   | Custom permalink for the post. The post will be accessible at `/posts/{permalink}/`. Example: `my-special-article` (will be available at `/posts/my-special-article/`)                                   |\n| `licenseName` | The license name for the post content.                                                                                                                                                                      |\n| `author`      | The author of the post.                                                                                                                                                                                     |\n| `sourceLink`  | The source link or reference for the post content.                                                                                                                                                          |\n| `draft`       | If this post is still a draft, which won't be displayed.                                                                                                                                                    |\n\n## Where to Place the Post Files\n\n\n\nYour post files should be placed in `src/content/posts/` directory. You can also create sub-directories to better organize your posts and assets.\n\n```\nsrc/content/posts/\n├── post-1.md\n└── post-2/\n    ├── cover.png\n    └── index.md\n```\n\n## Custom Permalink\n\nYou can set a custom permalink for any post by adding the `permalink` field to the front-matter:\n\n```yaml\n---\ntitle: My Special Article\npublished: 2024-01-15\npermalink: \"my-special-article\"\ntags: [\"Example\"]\ncategory: \"Technology\"\n---\n```\n\nWhen a custom permalink is set:\n- The post will be accessible at the custom URL (e.g., `/posts/my-special-article/`)\n- The default `/posts/{slug}/` URL will still work\n- RSS/Atom feeds will use the custom permalink\n- All internal links will automatically use the custom permalink\n\n**Important Notes:**\n- Permalinks should NOT include `/posts/` prefix (it will be added automatically)\n- Avoid special characters and spaces in permalinks\n- Use lowercase letters and hyphens for best SEO practices\n- Make sure permalinks are unique across all posts\n- Don't include leading or trailing slashes\n\n\n## How It Works\n\n```mermaid\ngraph LR\n    A[User Password] --> B[bcrypt Hash]\n    B --> C[Password Hash]\n    C --> D[Extract First 32 Characters]\n    D --> E[Encryption Key]\n    E --> F[AES Encryption]\n    F --> G[Encrypted Content]\n```","filePath":"src/content/posts/encrypted-post.md","digest":"b5d083b3a42a8119","rendered":{"html":"<p>This blog template is built with <a href=\"https://astro.build/\">Astro</a>. For the things that are not mentioned in this guide, you may find the answers in the <a href=\"https://docs.astro.build/\">Astro Docs</a>.</p>\n<section><h2 id=\"front-matter-of-posts\">Front-matter of Posts<a class=\"anchor\" href=\"#front-matter-of-posts\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h2><div class=\"expressive-code\"><link rel=\"stylesheet\" href=\"/_astro/ec.xyvso.css\"><script type=\"module\" src=\"/_astro/ec.g1fg5.js\">\x3C/script><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"yaml\" class=\"wrap\" style=\"--ecMaxLine:57ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#6F42C1;--1:#B392F0\">---</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">2</div></div><div class=\"code\"><span style=\"--0:#1E7734;--1:#85E89D\">title</span><span style=\"--0:#24292E;--1:#E1E4E8\">: </span><span style=\"--0:#032F62;--1:#9ECBFF\">My First Blog Post</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">3</div></div><div class=\"code\"><span style=\"--0:#1E7734;--1:#85E89D\">published</span><span style=\"--0:#24292E;--1:#E1E4E8\">: </span><span style=\"--0:#005CC5;--1:#79B8FF\">2023-09-09</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">4</div></div><div class=\"code\"><span style=\"--0:#1E7734;--1:#85E89D\">description</span><span style=\"--0:#24292E;--1:#E1E4E8\">: </span><span style=\"--0:#032F62;--1:#9ECBFF\">This is the first post of my new Astro blog.</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">5</div></div><div class=\"code\"><span style=\"--0:#1E7734;--1:#85E89D\">image</span><span style=\"--0:#24292E;--1:#E1E4E8\">: </span><span style=\"--0:#032F62;--1:#9ECBFF\">./cover.jpg</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">6</div></div><div class=\"code\"><span style=\"--0:#1E7734;--1:#85E89D\">tags</span><span style=\"--0:#24292E;--1:#E1E4E8\">: [</span><span style=\"--0:#032F62;--1:#9ECBFF\">Foo</span><span style=\"--0:#24292E;--1:#E1E4E8\">, </span><span style=\"--0:#032F62;--1:#9ECBFF\">Bar</span><span style=\"--0:#24292E;--1:#E1E4E8\">]</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">7</div></div><div class=\"code\"><span style=\"--0:#1E7734;--1:#85E89D\">category</span><span style=\"--0:#24292E;--1:#E1E4E8\">: </span><span style=\"--0:#032F62;--1:#9ECBFF\">Front-end</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">8</div></div><div class=\"code\"><span style=\"--0:#1E7734;--1:#85E89D\">draft</span><span style=\"--0:#24292E;--1:#E1E4E8\">: </span><span style=\"--0:#005CC5;--1:#79B8FF\">false</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">9</div></div><div class=\"code\"><span style=\"--0:#6F42C1;--1:#B392F0\">---</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div>\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n<table><thead><tr><th>Attribute</th><th>Description</th></tr></thead><tbody><tr><td><code>title</code></td><td>The title of the post.</td></tr><tr><td><code>published</code></td><td>The date the post was published.</td></tr><tr><td><code>pinned</code></td><td>Whether this post is pinned to the top of the post list.</td></tr><tr><td><code>description</code></td><td>A short description of the post. Displayed on index page.</td></tr><tr><td><code>image</code></td><td>The cover image path of the post.<br>1. Start with <code>http://</code> or <code>https://</code>: Use web image<br>2. Start with <code>/</code>: For image in <code>public</code> dir<br>3. With none of the prefixes: Relative to the markdown file</td></tr><tr><td><code>tags</code></td><td>The tags of the post.</td></tr><tr><td><code>category</code></td><td>The category of the post.</td></tr><tr><td><code>permalink</code></td><td>Custom permalink for the post. The post will be accessible at <code>/posts/{permalink}/</code>. Example: <code>my-special-article</code> (will be available at <code>/posts/my-special-article/</code>)</td></tr><tr><td><code>licenseName</code></td><td>The license name for the post content.</td></tr><tr><td><code>author</code></td><td>The author of the post.</td></tr><tr><td><code>sourceLink</code></td><td>The source link or reference for the post content.</td></tr><tr><td><code>draft</code></td><td>If this post is still a draft, which won’t be displayed.</td></tr></tbody></table></section>\n<section><h2 id=\"where-to-place-the-post-files\">Where to Place the Post Files<a class=\"anchor\" href=\"#where-to-place-the-post-files\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h2><p>Your post files should be placed in <code>src/content/posts/</code> directory. You can also create sub-directories to better organize your posts and assets.</p><div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"plaintext\" class=\"wrap\" style=\"--ecMaxLine:18ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">src/content/posts/</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">2</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">├── post-1.md</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">3</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">└── post-2/</span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">4</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292e;--1:#e1e4e8\">    </span></span><span style=\"--0:#24292e;--1:#e1e4e8\">├── cover.png</span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">5</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292e;--1:#e1e4e8\">    </span></span><span style=\"--0:#24292e;--1:#e1e4e8\">└── index.md</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div></section>\n<section><h2 id=\"custom-permalink\">Custom Permalink<a class=\"anchor\" href=\"#custom-permalink\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h2><p>You can set a custom permalink for any post by adding the <code>permalink</code> field to the front-matter:</p><div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"yaml\" class=\"wrap\" style=\"--ecMaxLine:31ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#6F42C1;--1:#B392F0\">---</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">2</div></div><div class=\"code\"><span style=\"--0:#1E7734;--1:#85E89D\">title</span><span style=\"--0:#24292E;--1:#E1E4E8\">: </span><span style=\"--0:#032F62;--1:#9ECBFF\">My Special Article</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">3</div></div><div class=\"code\"><span style=\"--0:#1E7734;--1:#85E89D\">published</span><span style=\"--0:#24292E;--1:#E1E4E8\">: </span><span style=\"--0:#005CC5;--1:#79B8FF\">2024-01-15</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">4</div></div><div class=\"code\"><span style=\"--0:#1E7734;--1:#85E89D\">permalink</span><span style=\"--0:#24292E;--1:#E1E4E8\">: </span><span style=\"--0:#032F62;--1:#9ECBFF\">\"my-special-article\"</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">5</div></div><div class=\"code\"><span style=\"--0:#1E7734;--1:#85E89D\">tags</span><span style=\"--0:#24292E;--1:#E1E4E8\">: [</span><span style=\"--0:#032F62;--1:#9ECBFF\">\"Example\"</span><span style=\"--0:#24292E;--1:#E1E4E8\">]</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">6</div></div><div class=\"code\"><span style=\"--0:#1E7734;--1:#85E89D\">category</span><span style=\"--0:#24292E;--1:#E1E4E8\">: </span><span style=\"--0:#032F62;--1:#9ECBFF\">\"Technology\"</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">7</div></div><div class=\"code\"><span style=\"--0:#6F42C1;--1:#B392F0\">---</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div><p>When a custom permalink is set:</p><ul>\n<li>The post will be accessible at the custom URL (e.g., <code>/posts/my-special-article/</code>)</li>\n<li>The default <code>/posts/{slug}/</code> URL will still work</li>\n<li>RSS/Atom feeds will use the custom permalink</li>\n<li>All internal links will automatically use the custom permalink</li>\n</ul><p><strong>Important Notes:</strong></p><ul>\n<li>Permalinks should NOT include <code>/posts/</code> prefix (it will be added automatically)</li>\n<li>Avoid special characters and spaces in permalinks</li>\n<li>Use lowercase letters and hyphens for best SEO practices</li>\n<li>Make sure permalinks are unique across all posts</li>\n<li>Don’t include leading or trailing slashes</li>\n</ul></section>\n<section><h2 id=\"how-it-works\">How It Works<a class=\"anchor\" href=\"#how-it-works\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h2><div class=\"mermaid-diagram-container\"><div class=\"mermaid-wrapper\" id=\"mermaid-ookv0k\"><div class=\"mermaid\" data-mermaid-code=\"graph LR\n    A[User Password] --> B[bcrypt Hash]\n    B --> C[Password Hash]\n    C --> D[Extract First 32 Characters]\n    D --> E[Encryption Key]\n    E --> F[AES Encryption]\n    F --> G[Encrypted Content]\">graph LR\n    A[User Password] --> B[bcrypt Hash]\n    B --> C[Password Hash]\n    C --> D[Extract First 32 Characters]\n    D --> E[Encryption Key]\n    E --> F[AES Encryption]\n    F --> G[Encrypted Content]</div></div><script type=\"text/javascript\">(() => {\n\t// 单例模式：检查是否已经初始化过\n\tif (window.mermaidInitialized) {\n\t\treturn;\n\t}\n\n\twindow.mermaidInitialized = true;\n\n\t// 记录当前主题状态，避免不必要的重新渲染\n\tlet currentTheme = null;\n\tlet isRendering = false; // 防止并发渲染\n\tlet retryCount = 0;\n\tconst MAX_RETRIES = 3;\n\tconst RETRY_DELAY = 1000; // 1秒\n\n\t// 检查主题是否真的发生了变化\n\tfunction hasThemeChanged() {\n\t\tconst isDark = document.documentElement.classList.contains(\"dark\");\n\t\tconst newTheme = isDark ? \"dark\" : \"default\";\n\n\t\tif (currentTheme !== newTheme) {\n\t\t\tcurrentTheme = newTheme;\n\t\t\treturn true;\n\t\t}\n\t\treturn false;\n\t}\n\n\t// 等待 Mermaid 库加载完成\n\tfunction waitForMermaid(timeout = 10000) {\n\t\treturn new Promise((resolve, reject) => {\n\t\t\tconst startTime = Date.now();\n\n\t\t\tfunction check() {\n\t\t\t\tif (window.mermaid && typeof window.mermaid.initialize === \"function\") {\n\t\t\t\t\tresolve(window.mermaid);\n\t\t\t\t} else if (Date.now() - startTime > timeout) {\n\t\t\t\t\treject(new Error(\"Mermaid library failed to load within timeout\"));\n\t\t\t\t} else {\n\t\t\t\t\tsetTimeout(check, 100);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tcheck();\n\t\t});\n\t}\n\n\t// 设置 MutationObserver 监听 html 元素的 class 属性变化\n\tfunction setupMutationObserver() {\n\t\tconst observer = new MutationObserver((mutations) => {\n\t\t\tmutations.forEach((mutation) => {\n\t\t\t\tif (\n\t\t\t\t\tmutation.type === \"attributes\" &&\n\t\t\t\t\tmutation.attributeName === \"class\"\n\t\t\t\t) {\n\t\t\t\t\t// 检查是否是 dark 类的变化\n\t\t\t\t\tconst target = mutation.target;\n\t\t\t\t\tconst wasDark = mutation.oldValue\n\t\t\t\t\t\t? mutation.oldValue.includes(\"dark\")\n\t\t\t\t\t\t: false;\n\t\t\t\t\tconst isDark = target.classList.contains(\"dark\");\n\n\t\t\t\t\tif (wasDark !== isDark) {\n\t\t\t\t\t\tif (hasThemeChanged()) {\n\t\t\t\t\t\t\t// 延迟渲染，避免主题切换时的闪烁\n\t\t\t\t\t\t\tsetTimeout(() => renderMermaidDiagrams(), 150);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t});\n\n\t\t// 开始观察 html 元素的 class 属性变化\n\t\tobserver.observe(document.documentElement, {\n\t\t\tattributes: true,\n\t\t\tattributeFilter: [\"class\"],\n\t\t\tattributeOldValue: true,\n\t\t});\n\t}\n\n    // 缩放平移\n    function attachZoomControls(element, svgElement) {\n        if (element.__zoomAttached) return;\n        element.__zoomAttached = true;\n\n        const wrapper = document.createElement('div');\n        wrapper.className = 'mermaid-zoom-wrapper';\n\n        const svgParent = svgElement.parentNode;\n        wrapper.appendChild(svgElement);\n        svgParent.appendChild(wrapper);\n\n        let scale = 1;\n        let tx = 0;\n        let ty = 0;\n        const MIN_SCALE = 0.2;\n        const MAX_SCALE = 6;\n\n        function applyTransform() {\n            wrapper.style.transform = `translate(${tx}px, ${ty}px) scale(${scale})`;\n        }\n        const controls = document.createElement('div');\n        controls.className = 'mermaid-zoom-controls';\n        controls.innerHTML = `\n\t\t\t<button class=\"btn-regular rounded-lg h-10 w-10 active:scale-90\" data-action=\"zoom-in\" title=\"Zoom in\">+</button>\n\t\t\t<button class=\"btn-regular rounded-lg h-10 w-10 active:scale-90\" data-action=\"zoom-out\" title=\"Zoom out\">−</button>\n\t\t\t<button class=\"btn-regular rounded-lg h-10 w-10 active:scale-90\" data-action=\"reset\" title=\"Reset\">⤾</button>\n\t\t`;\n        element.appendChild(controls);\n\n        controls.addEventListener('click', (ev) => {\n            const action = ev.target.getAttribute && ev.target.getAttribute('data-action');\n            if (!action) return;\n\n            switch (action) {\n                case 'zoom-in':\n                    scale = Math.min(MAX_SCALE, +(scale * 1.2).toFixed(3));\n                    applyTransform();\n                    break;\n                case 'zoom-out':\n                    scale = Math.max(MIN_SCALE, +(scale / 1.2).toFixed(3));\n                    applyTransform();\n                    break;\n                case 'reset':\n                    scale = 1;\n                    tx = 0;\n                    ty = 0;\n                    applyTransform();\n                    break;\n            }\n        });\n\n        let isPanning = false;\n        let startX = 0;\n        let startY = 0;\n        let startTx = 0;\n        let startTy = 0;\n\n        wrapper.style.touchAction = 'none';\n\n        wrapper.addEventListener('pointerdown', (ev) => {\n            if (ev.button !== 0) return; // 仅左键\n            isPanning = true;\n            wrapper.setPointerCapture(ev.pointerId);\n            startX = ev.clientX;\n            startY = ev.clientY;\n            startTx = tx;\n            startTy = ty;\n        });\n\n        wrapper.addEventListener('pointermove', (ev) => {\n            if (!isPanning) return;\n            const dx = ev.clientX - startX;\n            const dy = ev.clientY - startY;\n            tx = startTx + dx / scale; // 根据当前缩放调整灵敏度\n            ty = startTy + dy / scale;\n            applyTransform();\n        });\n\n        wrapper.addEventListener('pointerup', (ev) => {\n            isPanning = false;\n            try {\n                wrapper.releasePointerCapture(ev.pointerId);\n            } catch (e) {\n            }\n        });\n\n        wrapper.addEventListener('pointercancel', () => {\n            isPanning = false;\n        });\n\n        // 鼠标滚轮缩放\n        element.addEventListener('wheel', (ev) => {\n            ev.preventDefault();\n            const delta = -ev.deltaY;\n            const zoomFactor = delta > 0 ? 1.12 : 1 / 1.12;\n            const prevScale = scale;\n            scale = Math.min(MAX_SCALE, Math.max(MIN_SCALE, +(scale * zoomFactor).toFixed(3)));\n\n            const rect = wrapper.getBoundingClientRect();\n            const cx = ev.clientX - rect.left;\n            const cy = ev.clientY - rect.top;\n\n            const worldX = (cx / prevScale) - tx;\n            const worldY = (cy / prevScale) - ty;\n\n            tx = cx / scale - worldX;\n            ty = cy / scale - worldY;\n\n            applyTransform();\n        }, {passive: false});\n\n        // 双击重置\n        wrapper.addEventListener('dblclick', () => {\n            scale = 1;\n            tx = 0;\n            ty = 0;\n            applyTransform();\n        });\n        applyTransform();\n        let resizeTimer = null;\n        window.addEventListener('resize', () => {\n            clearTimeout(resizeTimer);\n            resizeTimer = setTimeout(() => {\n                applyTransform()\n            }, 200);\n        });\n    }\n\n    // 设置其他事件监听器\n\tfunction setupEventListeners() {\n\t\t// 监听页面切换\n\t\tdocument.addEventListener(\"astro:page-load\", () => {\n\t\t\t// 重新初始化主题状态\n\t\t\tcurrentTheme = null;\n\t\t\tretryCount = 0; // 重置重试计数\n\t\t\tif (hasThemeChanged()) {\n\t\t\t\tsetTimeout(() => renderMermaidDiagrams(), 100);\n\t\t\t}\n\t\t});\n\n\t\t// 监听页面可见性变化，页面重新可见时重新渲染\n\t\tdocument.addEventListener(\"visibilitychange\", () => {\n\t\t\tif (!document.hidden) {\n\t\t\t\tsetTimeout(() => renderMermaidDiagrams(), 200);\n\t\t\t}\n\t\t});\n\t}\n\n\tasync function initializeMermaid() {\n\t\ttry {\n\t\t\tawait waitForMermaid();\n\n\t\t\t// 初始化 Mermaid 配置\n\t\t\twindow.mermaid.initialize({\n\t\t\t\tstartOnLoad: false,\n\t\t\t\ttheme: \"default\",\n\t\t\t\tthemeVariables: {\n\t\t\t\t\tfontFamily: \"inherit\",\n\t\t\t\t\tfontSize: \"16px\",\n\t\t\t\t},\n\t\t\t\tsecurityLevel: \"loose\",\n\t\t\t\t// 添加错误处理配置\n\t\t\t\terrorLevel: \"warn\",\n\t\t\t\tlogLevel: \"error\",\n\t\t\t});\n\n\t\t\t// 渲染所有 Mermaid 图表\n\t\t\tawait renderMermaidDiagrams();\n\t\t} catch (error) {\n\t\t\tconsole.error(\"Failed to initialize Mermaid:\", error);\n\t\t\t// 如果初始化失败，尝试重新加载\n\t\t\tif (retryCount < MAX_RETRIES) {\n\t\t\t\tretryCount++;\n\t\t\t\tsetTimeout(() => initializeMermaid(), RETRY_DELAY * retryCount);\n\t\t\t}\n\t\t}\n\t}\n\n\tasync function renderMermaidDiagrams() {\n\t\t// 防止并发渲染\n\t\tif (isRendering) {\n\t\t\treturn;\n\t\t}\n\n\t\t// 检查 Mermaid 是否可用\n\t\tif (!window.mermaid || typeof window.mermaid.render !== \"function\") {\n\t\t\tconsole.warn(\"Mermaid not available, skipping render\");\n\t\t\treturn;\n\t\t}\n\n\t\tisRendering = true;\n\n\t\ttry {\n\t\t\tconst mermaidElements = document.querySelectorAll(\n\t\t\t\t\".mermaid[data-mermaid-code]\",\n\t\t\t);\n\n\t\t\tif (mermaidElements.length === 0) {\n\t\t\t\tisRendering = false;\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// 延迟检测主题，确保 DOM 已经更新\n\t\t\tawait new Promise((resolve) => setTimeout(resolve, 100));\n\n\t\t\tconst htmlElement = document.documentElement;\n\t\t\tconst isDark = htmlElement.classList.contains(\"dark\");\n\t\t\tconst theme = isDark ? \"dark\" : \"default\";\n\n\t\t\t// 更新 Mermaid 主题（只需要更新一次）\n\t\t\twindow.mermaid.initialize({\n\t\t\t\tstartOnLoad: false,\n\t\t\t\ttheme: theme,\n\t\t\t\tthemeVariables: {\n\t\t\t\t\tfontFamily: \"inherit\",\n\t\t\t\t\tfontSize: \"16px\",\n\t\t\t\t\t// 强制应用主题变量\n\t\t\t\t\tprimaryColor: isDark ? \"#ffffff\" : \"#000000\",\n\t\t\t\t\tprimaryTextColor: isDark ? \"#ffffff\" : \"#000000\",\n\t\t\t\t\tprimaryBorderColor: isDark ? \"#ffffff\" : \"#000000\",\n\t\t\t\t\tlineColor: isDark ? \"#ffffff\" : \"#000000\",\n\t\t\t\t\tsecondaryColor: isDark ? \"#333333\" : \"#f0f0f0\",\n\t\t\t\t\ttertiaryColor: isDark ? \"#555555\" : \"#e0e0e0\",\n\t\t\t\t},\n\t\t\t\tsecurityLevel: \"loose\",\n\t\t\t\terrorLevel: \"warn\",\n\t\t\t\tlogLevel: \"error\",\n\t\t\t});\n\n\t\t\t// 批量渲染所有图表，添加重试机制\n\t\t\tconst renderPromises = Array.from(mermaidElements).map(\n\t\t\t\tasync (element, index) => {\n\t\t\t\t\tlet attempts = 0;\n\t\t\t\t\tconst maxAttempts = 3;\n\n\t\t\t\t\twhile (attempts < maxAttempts) {\n\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\tconst code = element.getAttribute(\"data-mermaid-code\");\n\n\t\t\t\t\t\t\tif (!code) {\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t// 显示加载状态\n\t\t\t\t\t\t\telement.innerHTML =\n\t\t\t\t\t\t\t\t'<div class=\"mermaid-loading\">Rendering diagram...</div>';\n\n\t\t\t\t\t\t\t// 渲染图表\n\t\t\t\t\t\t\tconst { svg } = await window.mermaid.render(\n\t\t\t\t\t\t\t\t`mermaid-${Date.now()}-${index}-${attempts}`,\n\t\t\t\t\t\t\t\tcode,\n\t\t\t\t\t\t\t);\n\n                            const parser = new DOMParser();\n                            const doc = parser.parseFromString(svg, 'image/svg+xml');\n                            const svgElement = doc.documentElement;\n\n                            element.innerHTML = '';\n                            element.__zoomAttached = false;\n                            element.appendChild(svgElement);\n\n                            // 添加响应式支持\n                            const insertedSvg = element.querySelector('svg');\n                            if (insertedSvg) {\n                                insertedSvg.setAttribute('width', '100%');\n                                insertedSvg.removeAttribute('height');\n                                insertedSvg.style.maxWidth = '100%';\n                                insertedSvg.style.height = 'auto';\n                                //Todo 需要根据实际情况\n                                insertedSvg.style.minHeight = \"300px\";\n\n\t\t\t\t\t\t\t\t// 强制应用样式\n\t\t\t\t\t\t\t\tif (isDark) {\n\t\t\t\t\t\t\t\t\tsvgElement.style.filter = \"brightness(0.9) contrast(1.1)\";\n\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\tsvgElement.style.filter = \"none\";\n\t\t\t\t\t\t\t\t}\n                                attachZoomControls(element, insertedSvg);\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t// 渲染成功，跳出重试循环\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t} catch (error) {\n\t\t\t\t\t\t\tattempts++;\n\t\t\t\t\t\t\tconsole.warn(\n\t\t\t\t\t\t\t\t`Mermaid rendering attempt ${attempts} failed for element ${index}:`,\n\t\t\t\t\t\t\t\terror,\n\t\t\t\t\t\t\t);\n\n\t\t\t\t\t\t\tif (attempts >= maxAttempts) {\n\t\t\t\t\t\t\t\tconsole.error(\n\t\t\t\t\t\t\t\t\t`Failed to render Mermaid diagram after ${maxAttempts} attempts:`,\n\t\t\t\t\t\t\t\t\terror,\n\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\telement.innerHTML = `\n\t\t\t\t\t\t\t\t\t<div class=\"mermaid-error\">\n\t\t\t\t\t\t\t\t\t\t<p>Failed to render diagram after ${maxAttempts} attempts.</p>\n\t\t\t\t\t\t\t\t\t\t<button onclick=\"location.reload()\" style=\"margin-top: 8px; padding: 4px 8px; background: var(--primary); color: white; border: none; border-radius: 4px; cursor: pointer;\">\n\t\t\t\t\t\t\t\t\t\t\tRetry Page\n\t\t\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t`;\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t// 等待一段时间后重试\n\t\t\t\t\t\t\t\tawait new Promise((resolve) =>\n\t\t\t\t\t\t\t\t\tsetTimeout(resolve, 500 * attempts),\n\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t);\n\n\t\t\t// 等待所有渲染完成\n\t\t\tawait Promise.all(renderPromises);\n\t\t\tretryCount = 0; // 重置重试计数\n\t\t} catch (error) {\n\t\t\tconsole.error(\"Error in renderMermaidDiagrams:\", error);\n\n\t\t\t// 如果渲染失败，尝试重新渲染\n\t\t\tif (retryCount < MAX_RETRIES) {\n\t\t\t\tretryCount++;\n\t\t\t\tsetTimeout(() => renderMermaidDiagrams(), RETRY_DELAY * retryCount);\n\t\t\t}\n\t\t} finally {\n\t\t\tisRendering = false;\n\t\t}\n\t}\n\n\t// 初始化主题状态\n\tfunction initializeThemeState() {\n\t\tconst isDark = document.documentElement.classList.contains(\"dark\");\n\t\tcurrentTheme = isDark ? \"dark\" : \"default\";\n\t}\n\n\t// 加载 Mermaid 库\n\tasync function loadMermaid() {\n\t\tif (typeof window.mermaid !== \"undefined\") {\n\t\t\treturn Promise.resolve();\n\t\t}\n\n\t\treturn new Promise((resolve, reject) => {\n\t\t\tconst script = document.createElement(\"script\");\n\t\t\tscript.src =\n\t\t\t\t\"https://cdn.jsdelivr.net/npm/mermaid@11/dist/mermaid.min.js\";\n\n\t\t\tscript.onload = () => {\n\t\t\t\tconsole.log(\"Mermaid library loaded successfully\");\n\t\t\t\tresolve();\n\t\t\t};\n\n\t\t\tscript.onerror = (error) => {\n\t\t\t\tconsole.error(\"Failed to load Mermaid library:\", error);\n\t\t\t\t// 尝试备用 CDN\n\t\t\t\tconst fallbackScript = document.createElement(\"script\");\n\t\t\t\tfallbackScript.src = \"https://unpkg.com/mermaid@11/dist/mermaid.min.js\";\n\n\t\t\t\tfallbackScript.onload = () => {\n\t\t\t\t\tconsole.log(\"Mermaid library loaded from fallback CDN\");\n\t\t\t\t\tresolve();\n\t\t\t\t};\n\n\t\t\t\tfallbackScript.onerror = () => {\n\t\t\t\t\treject(\n\t\t\t\t\t\tnew Error(\n\t\t\t\t\t\t\t\"Failed to load Mermaid from both primary and fallback CDNs\",\n\t\t\t\t\t\t),\n\t\t\t\t\t);\n\t\t\t\t};\n\n\t\t\t\tdocument.head.appendChild(fallbackScript);\n\t\t\t};\n\n\t\t\tdocument.head.appendChild(script);\n\t\t});\n\t}\n\n\t// 主初始化函数\n\tasync function initialize() {\n\t\ttry {\n\t\t\t// 设置监听器\n\t\t\tsetupMutationObserver();\n\t\t\tsetupEventListeners();\n\n\t\t\t// 初始化主题状态\n\t\t\tinitializeThemeState();\n\n\t\t\t// 加载并初始化 Mermaid\n\t\t\tawait loadMermaid();\n\t\t\tawait initializeMermaid();\n\t\t} catch (error) {\n\t\t\tconsole.error(\"Failed to initialize Mermaid system:\", error);\n\t\t}\n\t}\n\n\t// 启动初始化\n\tif (document.readyState === \"loading\") {\n\t\tdocument.addEventListener(\"DOMContentLoaded\", initialize);\n\t} else {\n\t\tinitialize();\n\t}\n})();\n\x3C/script></div></section>","metadata":{"headings":[{"depth":2,"slug":"front-matter-of-posts","text":"Front-matter of Posts#"},{"depth":2,"slug":"where-to-place-the-post-files","text":"Where to Place the Post Files#"},{"depth":2,"slug":"custom-permalink","text":"Custom Permalink#"},{"depth":2,"slug":"how-it-works","text":"How It Works#"}],"localImagePaths":[],"remoteImagePaths":[],"frontmatter":{"title":"Encrypted Post","published":"2024-01-15T00:00:00.000Z","description":"This is an article for testing the page encryption feature","encrypted":true,"pinned":false,"password":"123456","permalink":"encrypted-example","tags":["Test","Encryption"],"category":"Technology","minutes":2,"words":336,"excerpt":"This blog template is built with Astro. For the things that are not mentioned in this guide, you may find the answers in the Astro Docs."},"imagePaths":[]}},"collection":"posts"}],"2023-10-01":[{"id":"markdown-mermaid","data":{"title":"Markdown Mermaid","published":"2023-10-01T00:00:00.000Z","draft":false,"description":"A simple example of a Markdown blog post with Mermaid.","image":"","tags":["Markdown","Blogging","Mermaid"],"category":"Examples","lang":"","pinned":false,"author":"","sourceLink":"","licenseName":"","licenseUrl":"","encrypted":false,"password":"","prevTitle":"Include Video in the Posts","prevSlug":"video","nextTitle":"Encrypted Post","nextSlug":"encrypted-post"},"body":"# Complete Guide to Markdown with Mermaid Diagrams\n\nThis article demonstrates how to create various complex diagrams using Mermaid in Markdown documents, including flowcharts, sequence diagrams, Gantt charts, class diagrams, and state diagrams.\n\n## Flowchart Example\n\nFlowcharts are excellent for representing processes or algorithm steps.\n\n\n\n\n```mermaid\ngraph TD\n    A[Start] --> B{Condition Check}\n    B -->|Yes| C[Process Step 1]\n    B -->|No| D[Process Step 2]\n    C --> E[Subprocess]\n    D --> E\n    subgraph E [Subprocess Details]\n        E1[Substep 1] --> E2[Substep 2]\n        E2 --> E3[Substep 3]\n    end\n    E --> F{Another Decision}\n    F -->|Option 1| G[Result 1]\n    F -->|Option 2| H[Result 2]\n    F -->|Option 3| I[Result 3]\n    G --> J[End]\n    H --> J\n    I --> J\n```\n\n## Sequence Diagram Example\n\nSequence diagrams show interactions between objects over time.\n\n```mermaid\nsequenceDiagram\n    participant User\n    participant WebApp\n    participant Server\n    participant Database\n\n    User->>WebApp: Submit Login Request\n    WebApp->>Server: Send Auth Request\n    Server->>Database: Query User Credentials\n    Database-->>Server: Return User Data\n    Server-->>WebApp: Return Auth Result\n    \n    alt Auth Successful\n        WebApp->>User: Show Welcome Page\n        WebApp->>Server: Request User Data\n        Server->>Database: Get User Preferences\n        Database-->>Server: Return Preferences\n        Server-->>WebApp: Return User Data\n        WebApp->>User: Load Personalized Interface\n    else Auth Failed\n        WebApp->>User: Show Error Message\n        WebApp->>User: Prompt Re-entry\n    end\n```\n\n## Gantt Chart Example\n\nGantt charts are perfect for displaying project schedules and timelines.\n\n```mermaid\ngantt\n    title Website Development Project Timeline\n    dateFormat  YYYY-MM-DD\n    axisFormat  %m/%d\n    \n    section Design Phase\n    Requirements Analysis      :a1, 2023-10-01, 7d\n    UI Design                 :a2, after a1, 10d\n    Prototype Creation        :a3, after a2, 5d\n    \n    section Development Phase\n    Frontend Development      :b1, 2023-10-20, 15d\n    Backend Development       :b2, after a2, 18d\n    Database Design           :b3, after a1, 12d\n    \n    section Testing Phase\n    Unit Testing              :c1, after b1, 8d\n    Integration Testing       :c2, after b2, 10d\n    User Acceptance Testing   :c3, after c2, 7d\n    \n    section Deployment\n    Production Deployment     :d1, after c3, 3d\n    Launch                    :milestone, after d1, 0d\n```\n\n## Class Diagram Example\n\nClass diagrams show the static structure of a system, including classes, attributes, methods, and their relationships.\n\n```mermaid\nclassDiagram\n    class User {\n        +String username\n        +String password\n        +String email\n        +Boolean active\n        +login()\n        +logout()\n        +updateProfile()\n    }\n    \n    class Article {\n        +String title\n        +String content\n        +Date publishDate\n        +Boolean published\n        +publish()\n        +edit()\n        +delete()\n    }\n    \n    class Comment {\n        +String content\n        +Date commentDate\n        +addComment()\n        +deleteComment()\n    }\n    \n    class Category {\n        +String name\n        +String description\n        +addArticle()\n        +removeArticle()\n    }\n    \n    User \"1\" -- \"*\" Article : writes\n    User \"1\" -- \"*\" Comment : posts\n    Article \"1\" -- \"*\" Comment : has\n    Article \"1\" -- \"*\" Category : belongs to\n```\n\n## State Diagram Example\n\nState diagrams show the sequence of states an object goes through during its life cycle.\n\n```mermaid\nstateDiagram-v2\n    [*] --> Draft\n    \n    Draft --> UnderReview : submit\n    UnderReview --> Draft : reject\n    UnderReview --> Approved : approve\n    Approved --> Published : publish\n    Published --> Archived : archive\n    Published --> Draft : retract\n    \n    state Published {\n        [*] --> Active\n        Active --> Hidden : temporarily hide\n        Hidden --> Active : restore\n        Active --> [*]\n        Hidden --> [*]\n    }\n    \n    Archived --> [*]\n```\n\n## Pie Chart Example\n\nPie charts are ideal for displaying proportions and percentage data.\n\n```mermaid\npie title Website Traffic Sources Analysis\n    \"Search Engines\" : 45.6\n    \"Direct Access\" : 30.1\n    \"Social Media\" : 15.3\n    \"Referral Links\" : 6.4\n    \"Other Sources\" : 2.6\n```\n\n## Conclusion\n\nMermaid is a powerful tool for creating various types of diagrams in Markdown documents. This article demonstrated how to use flowcharts, sequence diagrams, Gantt charts, class diagrams, state diagrams, and pie charts. These diagrams can help you express complex concepts, processes, and data structures more clearly.\n\nTo use Mermaid, simply specify the mermaid language in a code block and describe the diagram using concise text syntax. Mermaid will automatically convert these descriptions into beautiful visual diagrams.\n\nTry using Mermaid diagrams in your next technical blog post or project documentation - they will make your content more professional and easier to understand!","filePath":"src/content/posts/markdown-mermaid.md","digest":"4230c959b2bda94b","rendered":{"html":"<section><h1 id=\"complete-guide-to-markdown-with-mermaid-diagrams\">Complete Guide to Markdown with Mermaid Diagrams<a class=\"anchor\" href=\"#complete-guide-to-markdown-with-mermaid-diagrams\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h1><p>This article demonstrates how to create various complex diagrams using Mermaid in Markdown documents, including flowcharts, sequence diagrams, Gantt charts, class diagrams, and state diagrams.</p><section><h2 id=\"flowchart-example\">Flowchart Example<a class=\"anchor\" href=\"#flowchart-example\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h2><p>Flowcharts are excellent for representing processes or algorithm steps.</p><div class=\"mermaid-diagram-container\"><div class=\"mermaid-wrapper\" id=\"mermaid-2d77ke\"><div class=\"mermaid\" data-mermaid-code=\"graph TD\n    A[Start] --> B{Condition Check}\n    B -->|Yes| C[Process Step 1]\n    B -->|No| D[Process Step 2]\n    C --> E[Subprocess]\n    D --> E\n    subgraph E [Subprocess Details]\n        E1[Substep 1] --> E2[Substep 2]\n        E2 --> E3[Substep 3]\n    end\n    E --> F{Another Decision}\n    F -->|Option 1| G[Result 1]\n    F -->|Option 2| H[Result 2]\n    F -->|Option 3| I[Result 3]\n    G --> J[End]\n    H --> J\n    I --> J\">graph TD\n    A[Start] --> B{Condition Check}\n    B -->|Yes| C[Process Step 1]\n    B -->|No| D[Process Step 2]\n    C --> E[Subprocess]\n    D --> E\n    subgraph E [Subprocess Details]\n        E1[Substep 1] --> E2[Substep 2]\n        E2 --> E3[Substep 3]\n    end\n    E --> F{Another Decision}\n    F -->|Option 1| G[Result 1]\n    F -->|Option 2| H[Result 2]\n    F -->|Option 3| I[Result 3]\n    G --> J[End]\n    H --> J\n    I --> J</div></div><script type=\"text/javascript\">(() => {\n\t// 单例模式：检查是否已经初始化过\n\tif (window.mermaidInitialized) {\n\t\treturn;\n\t}\n\n\twindow.mermaidInitialized = true;\n\n\t// 记录当前主题状态，避免不必要的重新渲染\n\tlet currentTheme = null;\n\tlet isRendering = false; // 防止并发渲染\n\tlet retryCount = 0;\n\tconst MAX_RETRIES = 3;\n\tconst RETRY_DELAY = 1000; // 1秒\n\n\t// 检查主题是否真的发生了变化\n\tfunction hasThemeChanged() {\n\t\tconst isDark = document.documentElement.classList.contains(\"dark\");\n\t\tconst newTheme = isDark ? \"dark\" : \"default\";\n\n\t\tif (currentTheme !== newTheme) {\n\t\t\tcurrentTheme = newTheme;\n\t\t\treturn true;\n\t\t}\n\t\treturn false;\n\t}\n\n\t// 等待 Mermaid 库加载完成\n\tfunction waitForMermaid(timeout = 10000) {\n\t\treturn new Promise((resolve, reject) => {\n\t\t\tconst startTime = Date.now();\n\n\t\t\tfunction check() {\n\t\t\t\tif (window.mermaid && typeof window.mermaid.initialize === \"function\") {\n\t\t\t\t\tresolve(window.mermaid);\n\t\t\t\t} else if (Date.now() - startTime > timeout) {\n\t\t\t\t\treject(new Error(\"Mermaid library failed to load within timeout\"));\n\t\t\t\t} else {\n\t\t\t\t\tsetTimeout(check, 100);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tcheck();\n\t\t});\n\t}\n\n\t// 设置 MutationObserver 监听 html 元素的 class 属性变化\n\tfunction setupMutationObserver() {\n\t\tconst observer = new MutationObserver((mutations) => {\n\t\t\tmutations.forEach((mutation) => {\n\t\t\t\tif (\n\t\t\t\t\tmutation.type === \"attributes\" &&\n\t\t\t\t\tmutation.attributeName === \"class\"\n\t\t\t\t) {\n\t\t\t\t\t// 检查是否是 dark 类的变化\n\t\t\t\t\tconst target = mutation.target;\n\t\t\t\t\tconst wasDark = mutation.oldValue\n\t\t\t\t\t\t? mutation.oldValue.includes(\"dark\")\n\t\t\t\t\t\t: false;\n\t\t\t\t\tconst isDark = target.classList.contains(\"dark\");\n\n\t\t\t\t\tif (wasDark !== isDark) {\n\t\t\t\t\t\tif (hasThemeChanged()) {\n\t\t\t\t\t\t\t// 延迟渲染，避免主题切换时的闪烁\n\t\t\t\t\t\t\tsetTimeout(() => renderMermaidDiagrams(), 150);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t});\n\n\t\t// 开始观察 html 元素的 class 属性变化\n\t\tobserver.observe(document.documentElement, {\n\t\t\tattributes: true,\n\t\t\tattributeFilter: [\"class\"],\n\t\t\tattributeOldValue: true,\n\t\t});\n\t}\n\n    // 缩放平移\n    function attachZoomControls(element, svgElement) {\n        if (element.__zoomAttached) return;\n        element.__zoomAttached = true;\n\n        const wrapper = document.createElement('div');\n        wrapper.className = 'mermaid-zoom-wrapper';\n\n        const svgParent = svgElement.parentNode;\n        wrapper.appendChild(svgElement);\n        svgParent.appendChild(wrapper);\n\n        let scale = 1;\n        let tx = 0;\n        let ty = 0;\n        const MIN_SCALE = 0.2;\n        const MAX_SCALE = 6;\n\n        function applyTransform() {\n            wrapper.style.transform = `translate(${tx}px, ${ty}px) scale(${scale})`;\n        }\n        const controls = document.createElement('div');\n        controls.className = 'mermaid-zoom-controls';\n        controls.innerHTML = `\n\t\t\t<button class=\"btn-regular rounded-lg h-10 w-10 active:scale-90\" data-action=\"zoom-in\" title=\"Zoom in\">+</button>\n\t\t\t<button class=\"btn-regular rounded-lg h-10 w-10 active:scale-90\" data-action=\"zoom-out\" title=\"Zoom out\">−</button>\n\t\t\t<button class=\"btn-regular rounded-lg h-10 w-10 active:scale-90\" data-action=\"reset\" title=\"Reset\">⤾</button>\n\t\t`;\n        element.appendChild(controls);\n\n        controls.addEventListener('click', (ev) => {\n            const action = ev.target.getAttribute && ev.target.getAttribute('data-action');\n            if (!action) return;\n\n            switch (action) {\n                case 'zoom-in':\n                    scale = Math.min(MAX_SCALE, +(scale * 1.2).toFixed(3));\n                    applyTransform();\n                    break;\n                case 'zoom-out':\n                    scale = Math.max(MIN_SCALE, +(scale / 1.2).toFixed(3));\n                    applyTransform();\n                    break;\n                case 'reset':\n                    scale = 1;\n                    tx = 0;\n                    ty = 0;\n                    applyTransform();\n                    break;\n            }\n        });\n\n        let isPanning = false;\n        let startX = 0;\n        let startY = 0;\n        let startTx = 0;\n        let startTy = 0;\n\n        wrapper.style.touchAction = 'none';\n\n        wrapper.addEventListener('pointerdown', (ev) => {\n            if (ev.button !== 0) return; // 仅左键\n            isPanning = true;\n            wrapper.setPointerCapture(ev.pointerId);\n            startX = ev.clientX;\n            startY = ev.clientY;\n            startTx = tx;\n            startTy = ty;\n        });\n\n        wrapper.addEventListener('pointermove', (ev) => {\n            if (!isPanning) return;\n            const dx = ev.clientX - startX;\n            const dy = ev.clientY - startY;\n            tx = startTx + dx / scale; // 根据当前缩放调整灵敏度\n            ty = startTy + dy / scale;\n            applyTransform();\n        });\n\n        wrapper.addEventListener('pointerup', (ev) => {\n            isPanning = false;\n            try {\n                wrapper.releasePointerCapture(ev.pointerId);\n            } catch (e) {\n            }\n        });\n\n        wrapper.addEventListener('pointercancel', () => {\n            isPanning = false;\n        });\n\n        // 鼠标滚轮缩放\n        element.addEventListener('wheel', (ev) => {\n            ev.preventDefault();\n            const delta = -ev.deltaY;\n            const zoomFactor = delta > 0 ? 1.12 : 1 / 1.12;\n            const prevScale = scale;\n            scale = Math.min(MAX_SCALE, Math.max(MIN_SCALE, +(scale * zoomFactor).toFixed(3)));\n\n            const rect = wrapper.getBoundingClientRect();\n            const cx = ev.clientX - rect.left;\n            const cy = ev.clientY - rect.top;\n\n            const worldX = (cx / prevScale) - tx;\n            const worldY = (cy / prevScale) - ty;\n\n            tx = cx / scale - worldX;\n            ty = cy / scale - worldY;\n\n            applyTransform();\n        }, {passive: false});\n\n        // 双击重置\n        wrapper.addEventListener('dblclick', () => {\n            scale = 1;\n            tx = 0;\n            ty = 0;\n            applyTransform();\n        });\n        applyTransform();\n        let resizeTimer = null;\n        window.addEventListener('resize', () => {\n            clearTimeout(resizeTimer);\n            resizeTimer = setTimeout(() => {\n                applyTransform()\n            }, 200);\n        });\n    }\n\n    // 设置其他事件监听器\n\tfunction setupEventListeners() {\n\t\t// 监听页面切换\n\t\tdocument.addEventListener(\"astro:page-load\", () => {\n\t\t\t// 重新初始化主题状态\n\t\t\tcurrentTheme = null;\n\t\t\tretryCount = 0; // 重置重试计数\n\t\t\tif (hasThemeChanged()) {\n\t\t\t\tsetTimeout(() => renderMermaidDiagrams(), 100);\n\t\t\t}\n\t\t});\n\n\t\t// 监听页面可见性变化，页面重新可见时重新渲染\n\t\tdocument.addEventListener(\"visibilitychange\", () => {\n\t\t\tif (!document.hidden) {\n\t\t\t\tsetTimeout(() => renderMermaidDiagrams(), 200);\n\t\t\t}\n\t\t});\n\t}\n\n\tasync function initializeMermaid() {\n\t\ttry {\n\t\t\tawait waitForMermaid();\n\n\t\t\t// 初始化 Mermaid 配置\n\t\t\twindow.mermaid.initialize({\n\t\t\t\tstartOnLoad: false,\n\t\t\t\ttheme: \"default\",\n\t\t\t\tthemeVariables: {\n\t\t\t\t\tfontFamily: \"inherit\",\n\t\t\t\t\tfontSize: \"16px\",\n\t\t\t\t},\n\t\t\t\tsecurityLevel: \"loose\",\n\t\t\t\t// 添加错误处理配置\n\t\t\t\terrorLevel: \"warn\",\n\t\t\t\tlogLevel: \"error\",\n\t\t\t});\n\n\t\t\t// 渲染所有 Mermaid 图表\n\t\t\tawait renderMermaidDiagrams();\n\t\t} catch (error) {\n\t\t\tconsole.error(\"Failed to initialize Mermaid:\", error);\n\t\t\t// 如果初始化失败，尝试重新加载\n\t\t\tif (retryCount < MAX_RETRIES) {\n\t\t\t\tretryCount++;\n\t\t\t\tsetTimeout(() => initializeMermaid(), RETRY_DELAY * retryCount);\n\t\t\t}\n\t\t}\n\t}\n\n\tasync function renderMermaidDiagrams() {\n\t\t// 防止并发渲染\n\t\tif (isRendering) {\n\t\t\treturn;\n\t\t}\n\n\t\t// 检查 Mermaid 是否可用\n\t\tif (!window.mermaid || typeof window.mermaid.render !== \"function\") {\n\t\t\tconsole.warn(\"Mermaid not available, skipping render\");\n\t\t\treturn;\n\t\t}\n\n\t\tisRendering = true;\n\n\t\ttry {\n\t\t\tconst mermaidElements = document.querySelectorAll(\n\t\t\t\t\".mermaid[data-mermaid-code]\",\n\t\t\t);\n\n\t\t\tif (mermaidElements.length === 0) {\n\t\t\t\tisRendering = false;\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// 延迟检测主题，确保 DOM 已经更新\n\t\t\tawait new Promise((resolve) => setTimeout(resolve, 100));\n\n\t\t\tconst htmlElement = document.documentElement;\n\t\t\tconst isDark = htmlElement.classList.contains(\"dark\");\n\t\t\tconst theme = isDark ? \"dark\" : \"default\";\n\n\t\t\t// 更新 Mermaid 主题（只需要更新一次）\n\t\t\twindow.mermaid.initialize({\n\t\t\t\tstartOnLoad: false,\n\t\t\t\ttheme: theme,\n\t\t\t\tthemeVariables: {\n\t\t\t\t\tfontFamily: \"inherit\",\n\t\t\t\t\tfontSize: \"16px\",\n\t\t\t\t\t// 强制应用主题变量\n\t\t\t\t\tprimaryColor: isDark ? \"#ffffff\" : \"#000000\",\n\t\t\t\t\tprimaryTextColor: isDark ? \"#ffffff\" : \"#000000\",\n\t\t\t\t\tprimaryBorderColor: isDark ? \"#ffffff\" : \"#000000\",\n\t\t\t\t\tlineColor: isDark ? \"#ffffff\" : \"#000000\",\n\t\t\t\t\tsecondaryColor: isDark ? \"#333333\" : \"#f0f0f0\",\n\t\t\t\t\ttertiaryColor: isDark ? \"#555555\" : \"#e0e0e0\",\n\t\t\t\t},\n\t\t\t\tsecurityLevel: \"loose\",\n\t\t\t\terrorLevel: \"warn\",\n\t\t\t\tlogLevel: \"error\",\n\t\t\t});\n\n\t\t\t// 批量渲染所有图表，添加重试机制\n\t\t\tconst renderPromises = Array.from(mermaidElements).map(\n\t\t\t\tasync (element, index) => {\n\t\t\t\t\tlet attempts = 0;\n\t\t\t\t\tconst maxAttempts = 3;\n\n\t\t\t\t\twhile (attempts < maxAttempts) {\n\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\tconst code = element.getAttribute(\"data-mermaid-code\");\n\n\t\t\t\t\t\t\tif (!code) {\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t// 显示加载状态\n\t\t\t\t\t\t\telement.innerHTML =\n\t\t\t\t\t\t\t\t'<div class=\"mermaid-loading\">Rendering diagram...</div>';\n\n\t\t\t\t\t\t\t// 渲染图表\n\t\t\t\t\t\t\tconst { svg } = await window.mermaid.render(\n\t\t\t\t\t\t\t\t`mermaid-${Date.now()}-${index}-${attempts}`,\n\t\t\t\t\t\t\t\tcode,\n\t\t\t\t\t\t\t);\n\n                            const parser = new DOMParser();\n                            const doc = parser.parseFromString(svg, 'image/svg+xml');\n                            const svgElement = doc.documentElement;\n\n                            element.innerHTML = '';\n                            element.__zoomAttached = false;\n                            element.appendChild(svgElement);\n\n                            // 添加响应式支持\n                            const insertedSvg = element.querySelector('svg');\n                            if (insertedSvg) {\n                                insertedSvg.setAttribute('width', '100%');\n                                insertedSvg.removeAttribute('height');\n                                insertedSvg.style.maxWidth = '100%';\n                                insertedSvg.style.height = 'auto';\n                                //Todo 需要根据实际情况\n                                insertedSvg.style.minHeight = \"300px\";\n\n\t\t\t\t\t\t\t\t// 强制应用样式\n\t\t\t\t\t\t\t\tif (isDark) {\n\t\t\t\t\t\t\t\t\tsvgElement.style.filter = \"brightness(0.9) contrast(1.1)\";\n\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\tsvgElement.style.filter = \"none\";\n\t\t\t\t\t\t\t\t}\n                                attachZoomControls(element, insertedSvg);\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t// 渲染成功，跳出重试循环\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t} catch (error) {\n\t\t\t\t\t\t\tattempts++;\n\t\t\t\t\t\t\tconsole.warn(\n\t\t\t\t\t\t\t\t`Mermaid rendering attempt ${attempts} failed for element ${index}:`,\n\t\t\t\t\t\t\t\terror,\n\t\t\t\t\t\t\t);\n\n\t\t\t\t\t\t\tif (attempts >= maxAttempts) {\n\t\t\t\t\t\t\t\tconsole.error(\n\t\t\t\t\t\t\t\t\t`Failed to render Mermaid diagram after ${maxAttempts} attempts:`,\n\t\t\t\t\t\t\t\t\terror,\n\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\telement.innerHTML = `\n\t\t\t\t\t\t\t\t\t<div class=\"mermaid-error\">\n\t\t\t\t\t\t\t\t\t\t<p>Failed to render diagram after ${maxAttempts} attempts.</p>\n\t\t\t\t\t\t\t\t\t\t<button onclick=\"location.reload()\" style=\"margin-top: 8px; padding: 4px 8px; background: var(--primary); color: white; border: none; border-radius: 4px; cursor: pointer;\">\n\t\t\t\t\t\t\t\t\t\t\tRetry Page\n\t\t\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t`;\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t// 等待一段时间后重试\n\t\t\t\t\t\t\t\tawait new Promise((resolve) =>\n\t\t\t\t\t\t\t\t\tsetTimeout(resolve, 500 * attempts),\n\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t);\n\n\t\t\t// 等待所有渲染完成\n\t\t\tawait Promise.all(renderPromises);\n\t\t\tretryCount = 0; // 重置重试计数\n\t\t} catch (error) {\n\t\t\tconsole.error(\"Error in renderMermaidDiagrams:\", error);\n\n\t\t\t// 如果渲染失败，尝试重新渲染\n\t\t\tif (retryCount < MAX_RETRIES) {\n\t\t\t\tretryCount++;\n\t\t\t\tsetTimeout(() => renderMermaidDiagrams(), RETRY_DELAY * retryCount);\n\t\t\t}\n\t\t} finally {\n\t\t\tisRendering = false;\n\t\t}\n\t}\n\n\t// 初始化主题状态\n\tfunction initializeThemeState() {\n\t\tconst isDark = document.documentElement.classList.contains(\"dark\");\n\t\tcurrentTheme = isDark ? \"dark\" : \"default\";\n\t}\n\n\t// 加载 Mermaid 库\n\tasync function loadMermaid() {\n\t\tif (typeof window.mermaid !== \"undefined\") {\n\t\t\treturn Promise.resolve();\n\t\t}\n\n\t\treturn new Promise((resolve, reject) => {\n\t\t\tconst script = document.createElement(\"script\");\n\t\t\tscript.src =\n\t\t\t\t\"https://cdn.jsdelivr.net/npm/mermaid@11/dist/mermaid.min.js\";\n\n\t\t\tscript.onload = () => {\n\t\t\t\tconsole.log(\"Mermaid library loaded successfully\");\n\t\t\t\tresolve();\n\t\t\t};\n\n\t\t\tscript.onerror = (error) => {\n\t\t\t\tconsole.error(\"Failed to load Mermaid library:\", error);\n\t\t\t\t// 尝试备用 CDN\n\t\t\t\tconst fallbackScript = document.createElement(\"script\");\n\t\t\t\tfallbackScript.src = \"https://unpkg.com/mermaid@11/dist/mermaid.min.js\";\n\n\t\t\t\tfallbackScript.onload = () => {\n\t\t\t\t\tconsole.log(\"Mermaid library loaded from fallback CDN\");\n\t\t\t\t\tresolve();\n\t\t\t\t};\n\n\t\t\t\tfallbackScript.onerror = () => {\n\t\t\t\t\treject(\n\t\t\t\t\t\tnew Error(\n\t\t\t\t\t\t\t\"Failed to load Mermaid from both primary and fallback CDNs\",\n\t\t\t\t\t\t),\n\t\t\t\t\t);\n\t\t\t\t};\n\n\t\t\t\tdocument.head.appendChild(fallbackScript);\n\t\t\t};\n\n\t\t\tdocument.head.appendChild(script);\n\t\t});\n\t}\n\n\t// 主初始化函数\n\tasync function initialize() {\n\t\ttry {\n\t\t\t// 设置监听器\n\t\t\tsetupMutationObserver();\n\t\t\tsetupEventListeners();\n\n\t\t\t// 初始化主题状态\n\t\t\tinitializeThemeState();\n\n\t\t\t// 加载并初始化 Mermaid\n\t\t\tawait loadMermaid();\n\t\t\tawait initializeMermaid();\n\t\t} catch (error) {\n\t\t\tconsole.error(\"Failed to initialize Mermaid system:\", error);\n\t\t}\n\t}\n\n\t// 启动初始化\n\tif (document.readyState === \"loading\") {\n\t\tdocument.addEventListener(\"DOMContentLoaded\", initialize);\n\t} else {\n\t\tinitialize();\n\t}\n})();\n\x3C/script></div></section><section><h2 id=\"sequence-diagram-example\">Sequence Diagram Example<a class=\"anchor\" href=\"#sequence-diagram-example\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h2><p>Sequence diagrams show interactions between objects over time.</p><div class=\"mermaid-diagram-container\"><div class=\"mermaid-wrapper\" id=\"mermaid-ydsf1f\"><div class=\"mermaid\" data-mermaid-code=\"sequenceDiagram\n    participant User\n    participant WebApp\n    participant Server\n    participant Database\n\n    User->>WebApp: Submit Login Request\n    WebApp->>Server: Send Auth Request\n    Server->>Database: Query User Credentials\n    Database-->>Server: Return User Data\n    Server-->>WebApp: Return Auth Result\n    \n    alt Auth Successful\n        WebApp->>User: Show Welcome Page\n        WebApp->>Server: Request User Data\n        Server->>Database: Get User Preferences\n        Database-->>Server: Return Preferences\n        Server-->>WebApp: Return User Data\n        WebApp->>User: Load Personalized Interface\n    else Auth Failed\n        WebApp->>User: Show Error Message\n        WebApp->>User: Prompt Re-entry\n    end\">sequenceDiagram\n    participant User\n    participant WebApp\n    participant Server\n    participant Database\n\n    User->>WebApp: Submit Login Request\n    WebApp->>Server: Send Auth Request\n    Server->>Database: Query User Credentials\n    Database-->>Server: Return User Data\n    Server-->>WebApp: Return Auth Result\n    \n    alt Auth Successful\n        WebApp->>User: Show Welcome Page\n        WebApp->>Server: Request User Data\n        Server->>Database: Get User Preferences\n        Database-->>Server: Return Preferences\n        Server-->>WebApp: Return User Data\n        WebApp->>User: Load Personalized Interface\n    else Auth Failed\n        WebApp->>User: Show Error Message\n        WebApp->>User: Prompt Re-entry\n    end</div></div><script type=\"text/javascript\">(() => {\n\t// 单例模式：检查是否已经初始化过\n\tif (window.mermaidInitialized) {\n\t\treturn;\n\t}\n\n\twindow.mermaidInitialized = true;\n\n\t// 记录当前主题状态，避免不必要的重新渲染\n\tlet currentTheme = null;\n\tlet isRendering = false; // 防止并发渲染\n\tlet retryCount = 0;\n\tconst MAX_RETRIES = 3;\n\tconst RETRY_DELAY = 1000; // 1秒\n\n\t// 检查主题是否真的发生了变化\n\tfunction hasThemeChanged() {\n\t\tconst isDark = document.documentElement.classList.contains(\"dark\");\n\t\tconst newTheme = isDark ? \"dark\" : \"default\";\n\n\t\tif (currentTheme !== newTheme) {\n\t\t\tcurrentTheme = newTheme;\n\t\t\treturn true;\n\t\t}\n\t\treturn false;\n\t}\n\n\t// 等待 Mermaid 库加载完成\n\tfunction waitForMermaid(timeout = 10000) {\n\t\treturn new Promise((resolve, reject) => {\n\t\t\tconst startTime = Date.now();\n\n\t\t\tfunction check() {\n\t\t\t\tif (window.mermaid && typeof window.mermaid.initialize === \"function\") {\n\t\t\t\t\tresolve(window.mermaid);\n\t\t\t\t} else if (Date.now() - startTime > timeout) {\n\t\t\t\t\treject(new Error(\"Mermaid library failed to load within timeout\"));\n\t\t\t\t} else {\n\t\t\t\t\tsetTimeout(check, 100);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tcheck();\n\t\t});\n\t}\n\n\t// 设置 MutationObserver 监听 html 元素的 class 属性变化\n\tfunction setupMutationObserver() {\n\t\tconst observer = new MutationObserver((mutations) => {\n\t\t\tmutations.forEach((mutation) => {\n\t\t\t\tif (\n\t\t\t\t\tmutation.type === \"attributes\" &&\n\t\t\t\t\tmutation.attributeName === \"class\"\n\t\t\t\t) {\n\t\t\t\t\t// 检查是否是 dark 类的变化\n\t\t\t\t\tconst target = mutation.target;\n\t\t\t\t\tconst wasDark = mutation.oldValue\n\t\t\t\t\t\t? mutation.oldValue.includes(\"dark\")\n\t\t\t\t\t\t: false;\n\t\t\t\t\tconst isDark = target.classList.contains(\"dark\");\n\n\t\t\t\t\tif (wasDark !== isDark) {\n\t\t\t\t\t\tif (hasThemeChanged()) {\n\t\t\t\t\t\t\t// 延迟渲染，避免主题切换时的闪烁\n\t\t\t\t\t\t\tsetTimeout(() => renderMermaidDiagrams(), 150);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t});\n\n\t\t// 开始观察 html 元素的 class 属性变化\n\t\tobserver.observe(document.documentElement, {\n\t\t\tattributes: true,\n\t\t\tattributeFilter: [\"class\"],\n\t\t\tattributeOldValue: true,\n\t\t});\n\t}\n\n    // 缩放平移\n    function attachZoomControls(element, svgElement) {\n        if (element.__zoomAttached) return;\n        element.__zoomAttached = true;\n\n        const wrapper = document.createElement('div');\n        wrapper.className = 'mermaid-zoom-wrapper';\n\n        const svgParent = svgElement.parentNode;\n        wrapper.appendChild(svgElement);\n        svgParent.appendChild(wrapper);\n\n        let scale = 1;\n        let tx = 0;\n        let ty = 0;\n        const MIN_SCALE = 0.2;\n        const MAX_SCALE = 6;\n\n        function applyTransform() {\n            wrapper.style.transform = `translate(${tx}px, ${ty}px) scale(${scale})`;\n        }\n        const controls = document.createElement('div');\n        controls.className = 'mermaid-zoom-controls';\n        controls.innerHTML = `\n\t\t\t<button class=\"btn-regular rounded-lg h-10 w-10 active:scale-90\" data-action=\"zoom-in\" title=\"Zoom in\">+</button>\n\t\t\t<button class=\"btn-regular rounded-lg h-10 w-10 active:scale-90\" data-action=\"zoom-out\" title=\"Zoom out\">−</button>\n\t\t\t<button class=\"btn-regular rounded-lg h-10 w-10 active:scale-90\" data-action=\"reset\" title=\"Reset\">⤾</button>\n\t\t`;\n        element.appendChild(controls);\n\n        controls.addEventListener('click', (ev) => {\n            const action = ev.target.getAttribute && ev.target.getAttribute('data-action');\n            if (!action) return;\n\n            switch (action) {\n                case 'zoom-in':\n                    scale = Math.min(MAX_SCALE, +(scale * 1.2).toFixed(3));\n                    applyTransform();\n                    break;\n                case 'zoom-out':\n                    scale = Math.max(MIN_SCALE, +(scale / 1.2).toFixed(3));\n                    applyTransform();\n                    break;\n                case 'reset':\n                    scale = 1;\n                    tx = 0;\n                    ty = 0;\n                    applyTransform();\n                    break;\n            }\n        });\n\n        let isPanning = false;\n        let startX = 0;\n        let startY = 0;\n        let startTx = 0;\n        let startTy = 0;\n\n        wrapper.style.touchAction = 'none';\n\n        wrapper.addEventListener('pointerdown', (ev) => {\n            if (ev.button !== 0) return; // 仅左键\n            isPanning = true;\n            wrapper.setPointerCapture(ev.pointerId);\n            startX = ev.clientX;\n            startY = ev.clientY;\n            startTx = tx;\n            startTy = ty;\n        });\n\n        wrapper.addEventListener('pointermove', (ev) => {\n            if (!isPanning) return;\n            const dx = ev.clientX - startX;\n            const dy = ev.clientY - startY;\n            tx = startTx + dx / scale; // 根据当前缩放调整灵敏度\n            ty = startTy + dy / scale;\n            applyTransform();\n        });\n\n        wrapper.addEventListener('pointerup', (ev) => {\n            isPanning = false;\n            try {\n                wrapper.releasePointerCapture(ev.pointerId);\n            } catch (e) {\n            }\n        });\n\n        wrapper.addEventListener('pointercancel', () => {\n            isPanning = false;\n        });\n\n        // 鼠标滚轮缩放\n        element.addEventListener('wheel', (ev) => {\n            ev.preventDefault();\n            const delta = -ev.deltaY;\n            const zoomFactor = delta > 0 ? 1.12 : 1 / 1.12;\n            const prevScale = scale;\n            scale = Math.min(MAX_SCALE, Math.max(MIN_SCALE, +(scale * zoomFactor).toFixed(3)));\n\n            const rect = wrapper.getBoundingClientRect();\n            const cx = ev.clientX - rect.left;\n            const cy = ev.clientY - rect.top;\n\n            const worldX = (cx / prevScale) - tx;\n            const worldY = (cy / prevScale) - ty;\n\n            tx = cx / scale - worldX;\n            ty = cy / scale - worldY;\n\n            applyTransform();\n        }, {passive: false});\n\n        // 双击重置\n        wrapper.addEventListener('dblclick', () => {\n            scale = 1;\n            tx = 0;\n            ty = 0;\n            applyTransform();\n        });\n        applyTransform();\n        let resizeTimer = null;\n        window.addEventListener('resize', () => {\n            clearTimeout(resizeTimer);\n            resizeTimer = setTimeout(() => {\n                applyTransform()\n            }, 200);\n        });\n    }\n\n    // 设置其他事件监听器\n\tfunction setupEventListeners() {\n\t\t// 监听页面切换\n\t\tdocument.addEventListener(\"astro:page-load\", () => {\n\t\t\t// 重新初始化主题状态\n\t\t\tcurrentTheme = null;\n\t\t\tretryCount = 0; // 重置重试计数\n\t\t\tif (hasThemeChanged()) {\n\t\t\t\tsetTimeout(() => renderMermaidDiagrams(), 100);\n\t\t\t}\n\t\t});\n\n\t\t// 监听页面可见性变化，页面重新可见时重新渲染\n\t\tdocument.addEventListener(\"visibilitychange\", () => {\n\t\t\tif (!document.hidden) {\n\t\t\t\tsetTimeout(() => renderMermaidDiagrams(), 200);\n\t\t\t}\n\t\t});\n\t}\n\n\tasync function initializeMermaid() {\n\t\ttry {\n\t\t\tawait waitForMermaid();\n\n\t\t\t// 初始化 Mermaid 配置\n\t\t\twindow.mermaid.initialize({\n\t\t\t\tstartOnLoad: false,\n\t\t\t\ttheme: \"default\",\n\t\t\t\tthemeVariables: {\n\t\t\t\t\tfontFamily: \"inherit\",\n\t\t\t\t\tfontSize: \"16px\",\n\t\t\t\t},\n\t\t\t\tsecurityLevel: \"loose\",\n\t\t\t\t// 添加错误处理配置\n\t\t\t\terrorLevel: \"warn\",\n\t\t\t\tlogLevel: \"error\",\n\t\t\t});\n\n\t\t\t// 渲染所有 Mermaid 图表\n\t\t\tawait renderMermaidDiagrams();\n\t\t} catch (error) {\n\t\t\tconsole.error(\"Failed to initialize Mermaid:\", error);\n\t\t\t// 如果初始化失败，尝试重新加载\n\t\t\tif (retryCount < MAX_RETRIES) {\n\t\t\t\tretryCount++;\n\t\t\t\tsetTimeout(() => initializeMermaid(), RETRY_DELAY * retryCount);\n\t\t\t}\n\t\t}\n\t}\n\n\tasync function renderMermaidDiagrams() {\n\t\t// 防止并发渲染\n\t\tif (isRendering) {\n\t\t\treturn;\n\t\t}\n\n\t\t// 检查 Mermaid 是否可用\n\t\tif (!window.mermaid || typeof window.mermaid.render !== \"function\") {\n\t\t\tconsole.warn(\"Mermaid not available, skipping render\");\n\t\t\treturn;\n\t\t}\n\n\t\tisRendering = true;\n\n\t\ttry {\n\t\t\tconst mermaidElements = document.querySelectorAll(\n\t\t\t\t\".mermaid[data-mermaid-code]\",\n\t\t\t);\n\n\t\t\tif (mermaidElements.length === 0) {\n\t\t\t\tisRendering = false;\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// 延迟检测主题，确保 DOM 已经更新\n\t\t\tawait new Promise((resolve) => setTimeout(resolve, 100));\n\n\t\t\tconst htmlElement = document.documentElement;\n\t\t\tconst isDark = htmlElement.classList.contains(\"dark\");\n\t\t\tconst theme = isDark ? \"dark\" : \"default\";\n\n\t\t\t// 更新 Mermaid 主题（只需要更新一次）\n\t\t\twindow.mermaid.initialize({\n\t\t\t\tstartOnLoad: false,\n\t\t\t\ttheme: theme,\n\t\t\t\tthemeVariables: {\n\t\t\t\t\tfontFamily: \"inherit\",\n\t\t\t\t\tfontSize: \"16px\",\n\t\t\t\t\t// 强制应用主题变量\n\t\t\t\t\tprimaryColor: isDark ? \"#ffffff\" : \"#000000\",\n\t\t\t\t\tprimaryTextColor: isDark ? \"#ffffff\" : \"#000000\",\n\t\t\t\t\tprimaryBorderColor: isDark ? \"#ffffff\" : \"#000000\",\n\t\t\t\t\tlineColor: isDark ? \"#ffffff\" : \"#000000\",\n\t\t\t\t\tsecondaryColor: isDark ? \"#333333\" : \"#f0f0f0\",\n\t\t\t\t\ttertiaryColor: isDark ? \"#555555\" : \"#e0e0e0\",\n\t\t\t\t},\n\t\t\t\tsecurityLevel: \"loose\",\n\t\t\t\terrorLevel: \"warn\",\n\t\t\t\tlogLevel: \"error\",\n\t\t\t});\n\n\t\t\t// 批量渲染所有图表，添加重试机制\n\t\t\tconst renderPromises = Array.from(mermaidElements).map(\n\t\t\t\tasync (element, index) => {\n\t\t\t\t\tlet attempts = 0;\n\t\t\t\t\tconst maxAttempts = 3;\n\n\t\t\t\t\twhile (attempts < maxAttempts) {\n\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\tconst code = element.getAttribute(\"data-mermaid-code\");\n\n\t\t\t\t\t\t\tif (!code) {\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t// 显示加载状态\n\t\t\t\t\t\t\telement.innerHTML =\n\t\t\t\t\t\t\t\t'<div class=\"mermaid-loading\">Rendering diagram...</div>';\n\n\t\t\t\t\t\t\t// 渲染图表\n\t\t\t\t\t\t\tconst { svg } = await window.mermaid.render(\n\t\t\t\t\t\t\t\t`mermaid-${Date.now()}-${index}-${attempts}`,\n\t\t\t\t\t\t\t\tcode,\n\t\t\t\t\t\t\t);\n\n                            const parser = new DOMParser();\n                            const doc = parser.parseFromString(svg, 'image/svg+xml');\n                            const svgElement = doc.documentElement;\n\n                            element.innerHTML = '';\n                            element.__zoomAttached = false;\n                            element.appendChild(svgElement);\n\n                            // 添加响应式支持\n                            const insertedSvg = element.querySelector('svg');\n                            if (insertedSvg) {\n                                insertedSvg.setAttribute('width', '100%');\n                                insertedSvg.removeAttribute('height');\n                                insertedSvg.style.maxWidth = '100%';\n                                insertedSvg.style.height = 'auto';\n                                //Todo 需要根据实际情况\n                                insertedSvg.style.minHeight = \"300px\";\n\n\t\t\t\t\t\t\t\t// 强制应用样式\n\t\t\t\t\t\t\t\tif (isDark) {\n\t\t\t\t\t\t\t\t\tsvgElement.style.filter = \"brightness(0.9) contrast(1.1)\";\n\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\tsvgElement.style.filter = \"none\";\n\t\t\t\t\t\t\t\t}\n                                attachZoomControls(element, insertedSvg);\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t// 渲染成功，跳出重试循环\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t} catch (error) {\n\t\t\t\t\t\t\tattempts++;\n\t\t\t\t\t\t\tconsole.warn(\n\t\t\t\t\t\t\t\t`Mermaid rendering attempt ${attempts} failed for element ${index}:`,\n\t\t\t\t\t\t\t\terror,\n\t\t\t\t\t\t\t);\n\n\t\t\t\t\t\t\tif (attempts >= maxAttempts) {\n\t\t\t\t\t\t\t\tconsole.error(\n\t\t\t\t\t\t\t\t\t`Failed to render Mermaid diagram after ${maxAttempts} attempts:`,\n\t\t\t\t\t\t\t\t\terror,\n\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\telement.innerHTML = `\n\t\t\t\t\t\t\t\t\t<div class=\"mermaid-error\">\n\t\t\t\t\t\t\t\t\t\t<p>Failed to render diagram after ${maxAttempts} attempts.</p>\n\t\t\t\t\t\t\t\t\t\t<button onclick=\"location.reload()\" style=\"margin-top: 8px; padding: 4px 8px; background: var(--primary); color: white; border: none; border-radius: 4px; cursor: pointer;\">\n\t\t\t\t\t\t\t\t\t\t\tRetry Page\n\t\t\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t`;\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t// 等待一段时间后重试\n\t\t\t\t\t\t\t\tawait new Promise((resolve) =>\n\t\t\t\t\t\t\t\t\tsetTimeout(resolve, 500 * attempts),\n\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t);\n\n\t\t\t// 等待所有渲染完成\n\t\t\tawait Promise.all(renderPromises);\n\t\t\tretryCount = 0; // 重置重试计数\n\t\t} catch (error) {\n\t\t\tconsole.error(\"Error in renderMermaidDiagrams:\", error);\n\n\t\t\t// 如果渲染失败，尝试重新渲染\n\t\t\tif (retryCount < MAX_RETRIES) {\n\t\t\t\tretryCount++;\n\t\t\t\tsetTimeout(() => renderMermaidDiagrams(), RETRY_DELAY * retryCount);\n\t\t\t}\n\t\t} finally {\n\t\t\tisRendering = false;\n\t\t}\n\t}\n\n\t// 初始化主题状态\n\tfunction initializeThemeState() {\n\t\tconst isDark = document.documentElement.classList.contains(\"dark\");\n\t\tcurrentTheme = isDark ? \"dark\" : \"default\";\n\t}\n\n\t// 加载 Mermaid 库\n\tasync function loadMermaid() {\n\t\tif (typeof window.mermaid !== \"undefined\") {\n\t\t\treturn Promise.resolve();\n\t\t}\n\n\t\treturn new Promise((resolve, reject) => {\n\t\t\tconst script = document.createElement(\"script\");\n\t\t\tscript.src =\n\t\t\t\t\"https://cdn.jsdelivr.net/npm/mermaid@11/dist/mermaid.min.js\";\n\n\t\t\tscript.onload = () => {\n\t\t\t\tconsole.log(\"Mermaid library loaded successfully\");\n\t\t\t\tresolve();\n\t\t\t};\n\n\t\t\tscript.onerror = (error) => {\n\t\t\t\tconsole.error(\"Failed to load Mermaid library:\", error);\n\t\t\t\t// 尝试备用 CDN\n\t\t\t\tconst fallbackScript = document.createElement(\"script\");\n\t\t\t\tfallbackScript.src = \"https://unpkg.com/mermaid@11/dist/mermaid.min.js\";\n\n\t\t\t\tfallbackScript.onload = () => {\n\t\t\t\t\tconsole.log(\"Mermaid library loaded from fallback CDN\");\n\t\t\t\t\tresolve();\n\t\t\t\t};\n\n\t\t\t\tfallbackScript.onerror = () => {\n\t\t\t\t\treject(\n\t\t\t\t\t\tnew Error(\n\t\t\t\t\t\t\t\"Failed to load Mermaid from both primary and fallback CDNs\",\n\t\t\t\t\t\t),\n\t\t\t\t\t);\n\t\t\t\t};\n\n\t\t\t\tdocument.head.appendChild(fallbackScript);\n\t\t\t};\n\n\t\t\tdocument.head.appendChild(script);\n\t\t});\n\t}\n\n\t// 主初始化函数\n\tasync function initialize() {\n\t\ttry {\n\t\t\t// 设置监听器\n\t\t\tsetupMutationObserver();\n\t\t\tsetupEventListeners();\n\n\t\t\t// 初始化主题状态\n\t\t\tinitializeThemeState();\n\n\t\t\t// 加载并初始化 Mermaid\n\t\t\tawait loadMermaid();\n\t\t\tawait initializeMermaid();\n\t\t} catch (error) {\n\t\t\tconsole.error(\"Failed to initialize Mermaid system:\", error);\n\t\t}\n\t}\n\n\t// 启动初始化\n\tif (document.readyState === \"loading\") {\n\t\tdocument.addEventListener(\"DOMContentLoaded\", initialize);\n\t} else {\n\t\tinitialize();\n\t}\n})();\n\x3C/script></div></section><section><h2 id=\"gantt-chart-example\">Gantt Chart Example<a class=\"anchor\" href=\"#gantt-chart-example\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h2><p>Gantt charts are perfect for displaying project schedules and timelines.</p><div class=\"mermaid-diagram-container\"><div class=\"mermaid-wrapper\" id=\"mermaid-gg1ldm\"><div class=\"mermaid\" data-mermaid-code=\"gantt\n    title Website Development Project Timeline\n    dateFormat  YYYY-MM-DD\n    axisFormat  %m/%d\n    \n    section Design Phase\n    Requirements Analysis      :a1, 2023-10-01, 7d\n    UI Design                 :a2, after a1, 10d\n    Prototype Creation        :a3, after a2, 5d\n    \n    section Development Phase\n    Frontend Development      :b1, 2023-10-20, 15d\n    Backend Development       :b2, after a2, 18d\n    Database Design           :b3, after a1, 12d\n    \n    section Testing Phase\n    Unit Testing              :c1, after b1, 8d\n    Integration Testing       :c2, after b2, 10d\n    User Acceptance Testing   :c3, after c2, 7d\n    \n    section Deployment\n    Production Deployment     :d1, after c3, 3d\n    Launch                    :milestone, after d1, 0d\">gantt\n    title Website Development Project Timeline\n    dateFormat  YYYY-MM-DD\n    axisFormat  %m/%d\n    \n    section Design Phase\n    Requirements Analysis      :a1, 2023-10-01, 7d\n    UI Design                 :a2, after a1, 10d\n    Prototype Creation        :a3, after a2, 5d\n    \n    section Development Phase\n    Frontend Development      :b1, 2023-10-20, 15d\n    Backend Development       :b2, after a2, 18d\n    Database Design           :b3, after a1, 12d\n    \n    section Testing Phase\n    Unit Testing              :c1, after b1, 8d\n    Integration Testing       :c2, after b2, 10d\n    User Acceptance Testing   :c3, after c2, 7d\n    \n    section Deployment\n    Production Deployment     :d1, after c3, 3d\n    Launch                    :milestone, after d1, 0d</div></div><script type=\"text/javascript\">(() => {\n\t// 单例模式：检查是否已经初始化过\n\tif (window.mermaidInitialized) {\n\t\treturn;\n\t}\n\n\twindow.mermaidInitialized = true;\n\n\t// 记录当前主题状态，避免不必要的重新渲染\n\tlet currentTheme = null;\n\tlet isRendering = false; // 防止并发渲染\n\tlet retryCount = 0;\n\tconst MAX_RETRIES = 3;\n\tconst RETRY_DELAY = 1000; // 1秒\n\n\t// 检查主题是否真的发生了变化\n\tfunction hasThemeChanged() {\n\t\tconst isDark = document.documentElement.classList.contains(\"dark\");\n\t\tconst newTheme = isDark ? \"dark\" : \"default\";\n\n\t\tif (currentTheme !== newTheme) {\n\t\t\tcurrentTheme = newTheme;\n\t\t\treturn true;\n\t\t}\n\t\treturn false;\n\t}\n\n\t// 等待 Mermaid 库加载完成\n\tfunction waitForMermaid(timeout = 10000) {\n\t\treturn new Promise((resolve, reject) => {\n\t\t\tconst startTime = Date.now();\n\n\t\t\tfunction check() {\n\t\t\t\tif (window.mermaid && typeof window.mermaid.initialize === \"function\") {\n\t\t\t\t\tresolve(window.mermaid);\n\t\t\t\t} else if (Date.now() - startTime > timeout) {\n\t\t\t\t\treject(new Error(\"Mermaid library failed to load within timeout\"));\n\t\t\t\t} else {\n\t\t\t\t\tsetTimeout(check, 100);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tcheck();\n\t\t});\n\t}\n\n\t// 设置 MutationObserver 监听 html 元素的 class 属性变化\n\tfunction setupMutationObserver() {\n\t\tconst observer = new MutationObserver((mutations) => {\n\t\t\tmutations.forEach((mutation) => {\n\t\t\t\tif (\n\t\t\t\t\tmutation.type === \"attributes\" &&\n\t\t\t\t\tmutation.attributeName === \"class\"\n\t\t\t\t) {\n\t\t\t\t\t// 检查是否是 dark 类的变化\n\t\t\t\t\tconst target = mutation.target;\n\t\t\t\t\tconst wasDark = mutation.oldValue\n\t\t\t\t\t\t? mutation.oldValue.includes(\"dark\")\n\t\t\t\t\t\t: false;\n\t\t\t\t\tconst isDark = target.classList.contains(\"dark\");\n\n\t\t\t\t\tif (wasDark !== isDark) {\n\t\t\t\t\t\tif (hasThemeChanged()) {\n\t\t\t\t\t\t\t// 延迟渲染，避免主题切换时的闪烁\n\t\t\t\t\t\t\tsetTimeout(() => renderMermaidDiagrams(), 150);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t});\n\n\t\t// 开始观察 html 元素的 class 属性变化\n\t\tobserver.observe(document.documentElement, {\n\t\t\tattributes: true,\n\t\t\tattributeFilter: [\"class\"],\n\t\t\tattributeOldValue: true,\n\t\t});\n\t}\n\n    // 缩放平移\n    function attachZoomControls(element, svgElement) {\n        if (element.__zoomAttached) return;\n        element.__zoomAttached = true;\n\n        const wrapper = document.createElement('div');\n        wrapper.className = 'mermaid-zoom-wrapper';\n\n        const svgParent = svgElement.parentNode;\n        wrapper.appendChild(svgElement);\n        svgParent.appendChild(wrapper);\n\n        let scale = 1;\n        let tx = 0;\n        let ty = 0;\n        const MIN_SCALE = 0.2;\n        const MAX_SCALE = 6;\n\n        function applyTransform() {\n            wrapper.style.transform = `translate(${tx}px, ${ty}px) scale(${scale})`;\n        }\n        const controls = document.createElement('div');\n        controls.className = 'mermaid-zoom-controls';\n        controls.innerHTML = `\n\t\t\t<button class=\"btn-regular rounded-lg h-10 w-10 active:scale-90\" data-action=\"zoom-in\" title=\"Zoom in\">+</button>\n\t\t\t<button class=\"btn-regular rounded-lg h-10 w-10 active:scale-90\" data-action=\"zoom-out\" title=\"Zoom out\">−</button>\n\t\t\t<button class=\"btn-regular rounded-lg h-10 w-10 active:scale-90\" data-action=\"reset\" title=\"Reset\">⤾</button>\n\t\t`;\n        element.appendChild(controls);\n\n        controls.addEventListener('click', (ev) => {\n            const action = ev.target.getAttribute && ev.target.getAttribute('data-action');\n            if (!action) return;\n\n            switch (action) {\n                case 'zoom-in':\n                    scale = Math.min(MAX_SCALE, +(scale * 1.2).toFixed(3));\n                    applyTransform();\n                    break;\n                case 'zoom-out':\n                    scale = Math.max(MIN_SCALE, +(scale / 1.2).toFixed(3));\n                    applyTransform();\n                    break;\n                case 'reset':\n                    scale = 1;\n                    tx = 0;\n                    ty = 0;\n                    applyTransform();\n                    break;\n            }\n        });\n\n        let isPanning = false;\n        let startX = 0;\n        let startY = 0;\n        let startTx = 0;\n        let startTy = 0;\n\n        wrapper.style.touchAction = 'none';\n\n        wrapper.addEventListener('pointerdown', (ev) => {\n            if (ev.button !== 0) return; // 仅左键\n            isPanning = true;\n            wrapper.setPointerCapture(ev.pointerId);\n            startX = ev.clientX;\n            startY = ev.clientY;\n            startTx = tx;\n            startTy = ty;\n        });\n\n        wrapper.addEventListener('pointermove', (ev) => {\n            if (!isPanning) return;\n            const dx = ev.clientX - startX;\n            const dy = ev.clientY - startY;\n            tx = startTx + dx / scale; // 根据当前缩放调整灵敏度\n            ty = startTy + dy / scale;\n            applyTransform();\n        });\n\n        wrapper.addEventListener('pointerup', (ev) => {\n            isPanning = false;\n            try {\n                wrapper.releasePointerCapture(ev.pointerId);\n            } catch (e) {\n            }\n        });\n\n        wrapper.addEventListener('pointercancel', () => {\n            isPanning = false;\n        });\n\n        // 鼠标滚轮缩放\n        element.addEventListener('wheel', (ev) => {\n            ev.preventDefault();\n            const delta = -ev.deltaY;\n            const zoomFactor = delta > 0 ? 1.12 : 1 / 1.12;\n            const prevScale = scale;\n            scale = Math.min(MAX_SCALE, Math.max(MIN_SCALE, +(scale * zoomFactor).toFixed(3)));\n\n            const rect = wrapper.getBoundingClientRect();\n            const cx = ev.clientX - rect.left;\n            const cy = ev.clientY - rect.top;\n\n            const worldX = (cx / prevScale) - tx;\n            const worldY = (cy / prevScale) - ty;\n\n            tx = cx / scale - worldX;\n            ty = cy / scale - worldY;\n\n            applyTransform();\n        }, {passive: false});\n\n        // 双击重置\n        wrapper.addEventListener('dblclick', () => {\n            scale = 1;\n            tx = 0;\n            ty = 0;\n            applyTransform();\n        });\n        applyTransform();\n        let resizeTimer = null;\n        window.addEventListener('resize', () => {\n            clearTimeout(resizeTimer);\n            resizeTimer = setTimeout(() => {\n                applyTransform()\n            }, 200);\n        });\n    }\n\n    // 设置其他事件监听器\n\tfunction setupEventListeners() {\n\t\t// 监听页面切换\n\t\tdocument.addEventListener(\"astro:page-load\", () => {\n\t\t\t// 重新初始化主题状态\n\t\t\tcurrentTheme = null;\n\t\t\tretryCount = 0; // 重置重试计数\n\t\t\tif (hasThemeChanged()) {\n\t\t\t\tsetTimeout(() => renderMermaidDiagrams(), 100);\n\t\t\t}\n\t\t});\n\n\t\t// 监听页面可见性变化，页面重新可见时重新渲染\n\t\tdocument.addEventListener(\"visibilitychange\", () => {\n\t\t\tif (!document.hidden) {\n\t\t\t\tsetTimeout(() => renderMermaidDiagrams(), 200);\n\t\t\t}\n\t\t});\n\t}\n\n\tasync function initializeMermaid() {\n\t\ttry {\n\t\t\tawait waitForMermaid();\n\n\t\t\t// 初始化 Mermaid 配置\n\t\t\twindow.mermaid.initialize({\n\t\t\t\tstartOnLoad: false,\n\t\t\t\ttheme: \"default\",\n\t\t\t\tthemeVariables: {\n\t\t\t\t\tfontFamily: \"inherit\",\n\t\t\t\t\tfontSize: \"16px\",\n\t\t\t\t},\n\t\t\t\tsecurityLevel: \"loose\",\n\t\t\t\t// 添加错误处理配置\n\t\t\t\terrorLevel: \"warn\",\n\t\t\t\tlogLevel: \"error\",\n\t\t\t});\n\n\t\t\t// 渲染所有 Mermaid 图表\n\t\t\tawait renderMermaidDiagrams();\n\t\t} catch (error) {\n\t\t\tconsole.error(\"Failed to initialize Mermaid:\", error);\n\t\t\t// 如果初始化失败，尝试重新加载\n\t\t\tif (retryCount < MAX_RETRIES) {\n\t\t\t\tretryCount++;\n\t\t\t\tsetTimeout(() => initializeMermaid(), RETRY_DELAY * retryCount);\n\t\t\t}\n\t\t}\n\t}\n\n\tasync function renderMermaidDiagrams() {\n\t\t// 防止并发渲染\n\t\tif (isRendering) {\n\t\t\treturn;\n\t\t}\n\n\t\t// 检查 Mermaid 是否可用\n\t\tif (!window.mermaid || typeof window.mermaid.render !== \"function\") {\n\t\t\tconsole.warn(\"Mermaid not available, skipping render\");\n\t\t\treturn;\n\t\t}\n\n\t\tisRendering = true;\n\n\t\ttry {\n\t\t\tconst mermaidElements = document.querySelectorAll(\n\t\t\t\t\".mermaid[data-mermaid-code]\",\n\t\t\t);\n\n\t\t\tif (mermaidElements.length === 0) {\n\t\t\t\tisRendering = false;\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// 延迟检测主题，确保 DOM 已经更新\n\t\t\tawait new Promise((resolve) => setTimeout(resolve, 100));\n\n\t\t\tconst htmlElement = document.documentElement;\n\t\t\tconst isDark = htmlElement.classList.contains(\"dark\");\n\t\t\tconst theme = isDark ? \"dark\" : \"default\";\n\n\t\t\t// 更新 Mermaid 主题（只需要更新一次）\n\t\t\twindow.mermaid.initialize({\n\t\t\t\tstartOnLoad: false,\n\t\t\t\ttheme: theme,\n\t\t\t\tthemeVariables: {\n\t\t\t\t\tfontFamily: \"inherit\",\n\t\t\t\t\tfontSize: \"16px\",\n\t\t\t\t\t// 强制应用主题变量\n\t\t\t\t\tprimaryColor: isDark ? \"#ffffff\" : \"#000000\",\n\t\t\t\t\tprimaryTextColor: isDark ? \"#ffffff\" : \"#000000\",\n\t\t\t\t\tprimaryBorderColor: isDark ? \"#ffffff\" : \"#000000\",\n\t\t\t\t\tlineColor: isDark ? \"#ffffff\" : \"#000000\",\n\t\t\t\t\tsecondaryColor: isDark ? \"#333333\" : \"#f0f0f0\",\n\t\t\t\t\ttertiaryColor: isDark ? \"#555555\" : \"#e0e0e0\",\n\t\t\t\t},\n\t\t\t\tsecurityLevel: \"loose\",\n\t\t\t\terrorLevel: \"warn\",\n\t\t\t\tlogLevel: \"error\",\n\t\t\t});\n\n\t\t\t// 批量渲染所有图表，添加重试机制\n\t\t\tconst renderPromises = Array.from(mermaidElements).map(\n\t\t\t\tasync (element, index) => {\n\t\t\t\t\tlet attempts = 0;\n\t\t\t\t\tconst maxAttempts = 3;\n\n\t\t\t\t\twhile (attempts < maxAttempts) {\n\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\tconst code = element.getAttribute(\"data-mermaid-code\");\n\n\t\t\t\t\t\t\tif (!code) {\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t// 显示加载状态\n\t\t\t\t\t\t\telement.innerHTML =\n\t\t\t\t\t\t\t\t'<div class=\"mermaid-loading\">Rendering diagram...</div>';\n\n\t\t\t\t\t\t\t// 渲染图表\n\t\t\t\t\t\t\tconst { svg } = await window.mermaid.render(\n\t\t\t\t\t\t\t\t`mermaid-${Date.now()}-${index}-${attempts}`,\n\t\t\t\t\t\t\t\tcode,\n\t\t\t\t\t\t\t);\n\n                            const parser = new DOMParser();\n                            const doc = parser.parseFromString(svg, 'image/svg+xml');\n                            const svgElement = doc.documentElement;\n\n                            element.innerHTML = '';\n                            element.__zoomAttached = false;\n                            element.appendChild(svgElement);\n\n                            // 添加响应式支持\n                            const insertedSvg = element.querySelector('svg');\n                            if (insertedSvg) {\n                                insertedSvg.setAttribute('width', '100%');\n                                insertedSvg.removeAttribute('height');\n                                insertedSvg.style.maxWidth = '100%';\n                                insertedSvg.style.height = 'auto';\n                                //Todo 需要根据实际情况\n                                insertedSvg.style.minHeight = \"300px\";\n\n\t\t\t\t\t\t\t\t// 强制应用样式\n\t\t\t\t\t\t\t\tif (isDark) {\n\t\t\t\t\t\t\t\t\tsvgElement.style.filter = \"brightness(0.9) contrast(1.1)\";\n\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\tsvgElement.style.filter = \"none\";\n\t\t\t\t\t\t\t\t}\n                                attachZoomControls(element, insertedSvg);\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t// 渲染成功，跳出重试循环\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t} catch (error) {\n\t\t\t\t\t\t\tattempts++;\n\t\t\t\t\t\t\tconsole.warn(\n\t\t\t\t\t\t\t\t`Mermaid rendering attempt ${attempts} failed for element ${index}:`,\n\t\t\t\t\t\t\t\terror,\n\t\t\t\t\t\t\t);\n\n\t\t\t\t\t\t\tif (attempts >= maxAttempts) {\n\t\t\t\t\t\t\t\tconsole.error(\n\t\t\t\t\t\t\t\t\t`Failed to render Mermaid diagram after ${maxAttempts} attempts:`,\n\t\t\t\t\t\t\t\t\terror,\n\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\telement.innerHTML = `\n\t\t\t\t\t\t\t\t\t<div class=\"mermaid-error\">\n\t\t\t\t\t\t\t\t\t\t<p>Failed to render diagram after ${maxAttempts} attempts.</p>\n\t\t\t\t\t\t\t\t\t\t<button onclick=\"location.reload()\" style=\"margin-top: 8px; padding: 4px 8px; background: var(--primary); color: white; border: none; border-radius: 4px; cursor: pointer;\">\n\t\t\t\t\t\t\t\t\t\t\tRetry Page\n\t\t\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t`;\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t// 等待一段时间后重试\n\t\t\t\t\t\t\t\tawait new Promise((resolve) =>\n\t\t\t\t\t\t\t\t\tsetTimeout(resolve, 500 * attempts),\n\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t);\n\n\t\t\t// 等待所有渲染完成\n\t\t\tawait Promise.all(renderPromises);\n\t\t\tretryCount = 0; // 重置重试计数\n\t\t} catch (error) {\n\t\t\tconsole.error(\"Error in renderMermaidDiagrams:\", error);\n\n\t\t\t// 如果渲染失败，尝试重新渲染\n\t\t\tif (retryCount < MAX_RETRIES) {\n\t\t\t\tretryCount++;\n\t\t\t\tsetTimeout(() => renderMermaidDiagrams(), RETRY_DELAY * retryCount);\n\t\t\t}\n\t\t} finally {\n\t\t\tisRendering = false;\n\t\t}\n\t}\n\n\t// 初始化主题状态\n\tfunction initializeThemeState() {\n\t\tconst isDark = document.documentElement.classList.contains(\"dark\");\n\t\tcurrentTheme = isDark ? \"dark\" : \"default\";\n\t}\n\n\t// 加载 Mermaid 库\n\tasync function loadMermaid() {\n\t\tif (typeof window.mermaid !== \"undefined\") {\n\t\t\treturn Promise.resolve();\n\t\t}\n\n\t\treturn new Promise((resolve, reject) => {\n\t\t\tconst script = document.createElement(\"script\");\n\t\t\tscript.src =\n\t\t\t\t\"https://cdn.jsdelivr.net/npm/mermaid@11/dist/mermaid.min.js\";\n\n\t\t\tscript.onload = () => {\n\t\t\t\tconsole.log(\"Mermaid library loaded successfully\");\n\t\t\t\tresolve();\n\t\t\t};\n\n\t\t\tscript.onerror = (error) => {\n\t\t\t\tconsole.error(\"Failed to load Mermaid library:\", error);\n\t\t\t\t// 尝试备用 CDN\n\t\t\t\tconst fallbackScript = document.createElement(\"script\");\n\t\t\t\tfallbackScript.src = \"https://unpkg.com/mermaid@11/dist/mermaid.min.js\";\n\n\t\t\t\tfallbackScript.onload = () => {\n\t\t\t\t\tconsole.log(\"Mermaid library loaded from fallback CDN\");\n\t\t\t\t\tresolve();\n\t\t\t\t};\n\n\t\t\t\tfallbackScript.onerror = () => {\n\t\t\t\t\treject(\n\t\t\t\t\t\tnew Error(\n\t\t\t\t\t\t\t\"Failed to load Mermaid from both primary and fallback CDNs\",\n\t\t\t\t\t\t),\n\t\t\t\t\t);\n\t\t\t\t};\n\n\t\t\t\tdocument.head.appendChild(fallbackScript);\n\t\t\t};\n\n\t\t\tdocument.head.appendChild(script);\n\t\t});\n\t}\n\n\t// 主初始化函数\n\tasync function initialize() {\n\t\ttry {\n\t\t\t// 设置监听器\n\t\t\tsetupMutationObserver();\n\t\t\tsetupEventListeners();\n\n\t\t\t// 初始化主题状态\n\t\t\tinitializeThemeState();\n\n\t\t\t// 加载并初始化 Mermaid\n\t\t\tawait loadMermaid();\n\t\t\tawait initializeMermaid();\n\t\t} catch (error) {\n\t\t\tconsole.error(\"Failed to initialize Mermaid system:\", error);\n\t\t}\n\t}\n\n\t// 启动初始化\n\tif (document.readyState === \"loading\") {\n\t\tdocument.addEventListener(\"DOMContentLoaded\", initialize);\n\t} else {\n\t\tinitialize();\n\t}\n})();\n\x3C/script></div></section><section><h2 id=\"class-diagram-example\">Class Diagram Example<a class=\"anchor\" href=\"#class-diagram-example\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h2><p>Class diagrams show the static structure of a system, including classes, attributes, methods, and their relationships.</p><div class=\"mermaid-diagram-container\"><div class=\"mermaid-wrapper\" id=\"mermaid-smcrzn\"><div class=\"mermaid\" data-mermaid-code=\"classDiagram\n    class User {\n        +String username\n        +String password\n        +String email\n        +Boolean active\n        +login()\n        +logout()\n        +updateProfile()\n    }\n    \n    class Article {\n        +String title\n        +String content\n        +Date publishDate\n        +Boolean published\n        +publish()\n        +edit()\n        +delete()\n    }\n    \n    class Comment {\n        +String content\n        +Date commentDate\n        +addComment()\n        +deleteComment()\n    }\n    \n    class Category {\n        +String name\n        +String description\n        +addArticle()\n        +removeArticle()\n    }\n    \n    User &#x22;1&#x22; -- &#x22;*&#x22; Article : writes\n    User &#x22;1&#x22; -- &#x22;*&#x22; Comment : posts\n    Article &#x22;1&#x22; -- &#x22;*&#x22; Comment : has\n    Article &#x22;1&#x22; -- &#x22;*&#x22; Category : belongs to\">classDiagram\n    class User {\n        +String username\n        +String password\n        +String email\n        +Boolean active\n        +login()\n        +logout()\n        +updateProfile()\n    }\n    \n    class Article {\n        +String title\n        +String content\n        +Date publishDate\n        +Boolean published\n        +publish()\n        +edit()\n        +delete()\n    }\n    \n    class Comment {\n        +String content\n        +Date commentDate\n        +addComment()\n        +deleteComment()\n    }\n    \n    class Category {\n        +String name\n        +String description\n        +addArticle()\n        +removeArticle()\n    }\n    \n    User \"1\" -- \"*\" Article : writes\n    User \"1\" -- \"*\" Comment : posts\n    Article \"1\" -- \"*\" Comment : has\n    Article \"1\" -- \"*\" Category : belongs to</div></div><script type=\"text/javascript\">(() => {\n\t// 单例模式：检查是否已经初始化过\n\tif (window.mermaidInitialized) {\n\t\treturn;\n\t}\n\n\twindow.mermaidInitialized = true;\n\n\t// 记录当前主题状态，避免不必要的重新渲染\n\tlet currentTheme = null;\n\tlet isRendering = false; // 防止并发渲染\n\tlet retryCount = 0;\n\tconst MAX_RETRIES = 3;\n\tconst RETRY_DELAY = 1000; // 1秒\n\n\t// 检查主题是否真的发生了变化\n\tfunction hasThemeChanged() {\n\t\tconst isDark = document.documentElement.classList.contains(\"dark\");\n\t\tconst newTheme = isDark ? \"dark\" : \"default\";\n\n\t\tif (currentTheme !== newTheme) {\n\t\t\tcurrentTheme = newTheme;\n\t\t\treturn true;\n\t\t}\n\t\treturn false;\n\t}\n\n\t// 等待 Mermaid 库加载完成\n\tfunction waitForMermaid(timeout = 10000) {\n\t\treturn new Promise((resolve, reject) => {\n\t\t\tconst startTime = Date.now();\n\n\t\t\tfunction check() {\n\t\t\t\tif (window.mermaid && typeof window.mermaid.initialize === \"function\") {\n\t\t\t\t\tresolve(window.mermaid);\n\t\t\t\t} else if (Date.now() - startTime > timeout) {\n\t\t\t\t\treject(new Error(\"Mermaid library failed to load within timeout\"));\n\t\t\t\t} else {\n\t\t\t\t\tsetTimeout(check, 100);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tcheck();\n\t\t});\n\t}\n\n\t// 设置 MutationObserver 监听 html 元素的 class 属性变化\n\tfunction setupMutationObserver() {\n\t\tconst observer = new MutationObserver((mutations) => {\n\t\t\tmutations.forEach((mutation) => {\n\t\t\t\tif (\n\t\t\t\t\tmutation.type === \"attributes\" &&\n\t\t\t\t\tmutation.attributeName === \"class\"\n\t\t\t\t) {\n\t\t\t\t\t// 检查是否是 dark 类的变化\n\t\t\t\t\tconst target = mutation.target;\n\t\t\t\t\tconst wasDark = mutation.oldValue\n\t\t\t\t\t\t? mutation.oldValue.includes(\"dark\")\n\t\t\t\t\t\t: false;\n\t\t\t\t\tconst isDark = target.classList.contains(\"dark\");\n\n\t\t\t\t\tif (wasDark !== isDark) {\n\t\t\t\t\t\tif (hasThemeChanged()) {\n\t\t\t\t\t\t\t// 延迟渲染，避免主题切换时的闪烁\n\t\t\t\t\t\t\tsetTimeout(() => renderMermaidDiagrams(), 150);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t});\n\n\t\t// 开始观察 html 元素的 class 属性变化\n\t\tobserver.observe(document.documentElement, {\n\t\t\tattributes: true,\n\t\t\tattributeFilter: [\"class\"],\n\t\t\tattributeOldValue: true,\n\t\t});\n\t}\n\n    // 缩放平移\n    function attachZoomControls(element, svgElement) {\n        if (element.__zoomAttached) return;\n        element.__zoomAttached = true;\n\n        const wrapper = document.createElement('div');\n        wrapper.className = 'mermaid-zoom-wrapper';\n\n        const svgParent = svgElement.parentNode;\n        wrapper.appendChild(svgElement);\n        svgParent.appendChild(wrapper);\n\n        let scale = 1;\n        let tx = 0;\n        let ty = 0;\n        const MIN_SCALE = 0.2;\n        const MAX_SCALE = 6;\n\n        function applyTransform() {\n            wrapper.style.transform = `translate(${tx}px, ${ty}px) scale(${scale})`;\n        }\n        const controls = document.createElement('div');\n        controls.className = 'mermaid-zoom-controls';\n        controls.innerHTML = `\n\t\t\t<button class=\"btn-regular rounded-lg h-10 w-10 active:scale-90\" data-action=\"zoom-in\" title=\"Zoom in\">+</button>\n\t\t\t<button class=\"btn-regular rounded-lg h-10 w-10 active:scale-90\" data-action=\"zoom-out\" title=\"Zoom out\">−</button>\n\t\t\t<button class=\"btn-regular rounded-lg h-10 w-10 active:scale-90\" data-action=\"reset\" title=\"Reset\">⤾</button>\n\t\t`;\n        element.appendChild(controls);\n\n        controls.addEventListener('click', (ev) => {\n            const action = ev.target.getAttribute && ev.target.getAttribute('data-action');\n            if (!action) return;\n\n            switch (action) {\n                case 'zoom-in':\n                    scale = Math.min(MAX_SCALE, +(scale * 1.2).toFixed(3));\n                    applyTransform();\n                    break;\n                case 'zoom-out':\n                    scale = Math.max(MIN_SCALE, +(scale / 1.2).toFixed(3));\n                    applyTransform();\n                    break;\n                case 'reset':\n                    scale = 1;\n                    tx = 0;\n                    ty = 0;\n                    applyTransform();\n                    break;\n            }\n        });\n\n        let isPanning = false;\n        let startX = 0;\n        let startY = 0;\n        let startTx = 0;\n        let startTy = 0;\n\n        wrapper.style.touchAction = 'none';\n\n        wrapper.addEventListener('pointerdown', (ev) => {\n            if (ev.button !== 0) return; // 仅左键\n            isPanning = true;\n            wrapper.setPointerCapture(ev.pointerId);\n            startX = ev.clientX;\n            startY = ev.clientY;\n            startTx = tx;\n            startTy = ty;\n        });\n\n        wrapper.addEventListener('pointermove', (ev) => {\n            if (!isPanning) return;\n            const dx = ev.clientX - startX;\n            const dy = ev.clientY - startY;\n            tx = startTx + dx / scale; // 根据当前缩放调整灵敏度\n            ty = startTy + dy / scale;\n            applyTransform();\n        });\n\n        wrapper.addEventListener('pointerup', (ev) => {\n            isPanning = false;\n            try {\n                wrapper.releasePointerCapture(ev.pointerId);\n            } catch (e) {\n            }\n        });\n\n        wrapper.addEventListener('pointercancel', () => {\n            isPanning = false;\n        });\n\n        // 鼠标滚轮缩放\n        element.addEventListener('wheel', (ev) => {\n            ev.preventDefault();\n            const delta = -ev.deltaY;\n            const zoomFactor = delta > 0 ? 1.12 : 1 / 1.12;\n            const prevScale = scale;\n            scale = Math.min(MAX_SCALE, Math.max(MIN_SCALE, +(scale * zoomFactor).toFixed(3)));\n\n            const rect = wrapper.getBoundingClientRect();\n            const cx = ev.clientX - rect.left;\n            const cy = ev.clientY - rect.top;\n\n            const worldX = (cx / prevScale) - tx;\n            const worldY = (cy / prevScale) - ty;\n\n            tx = cx / scale - worldX;\n            ty = cy / scale - worldY;\n\n            applyTransform();\n        }, {passive: false});\n\n        // 双击重置\n        wrapper.addEventListener('dblclick', () => {\n            scale = 1;\n            tx = 0;\n            ty = 0;\n            applyTransform();\n        });\n        applyTransform();\n        let resizeTimer = null;\n        window.addEventListener('resize', () => {\n            clearTimeout(resizeTimer);\n            resizeTimer = setTimeout(() => {\n                applyTransform()\n            }, 200);\n        });\n    }\n\n    // 设置其他事件监听器\n\tfunction setupEventListeners() {\n\t\t// 监听页面切换\n\t\tdocument.addEventListener(\"astro:page-load\", () => {\n\t\t\t// 重新初始化主题状态\n\t\t\tcurrentTheme = null;\n\t\t\tretryCount = 0; // 重置重试计数\n\t\t\tif (hasThemeChanged()) {\n\t\t\t\tsetTimeout(() => renderMermaidDiagrams(), 100);\n\t\t\t}\n\t\t});\n\n\t\t// 监听页面可见性变化，页面重新可见时重新渲染\n\t\tdocument.addEventListener(\"visibilitychange\", () => {\n\t\t\tif (!document.hidden) {\n\t\t\t\tsetTimeout(() => renderMermaidDiagrams(), 200);\n\t\t\t}\n\t\t});\n\t}\n\n\tasync function initializeMermaid() {\n\t\ttry {\n\t\t\tawait waitForMermaid();\n\n\t\t\t// 初始化 Mermaid 配置\n\t\t\twindow.mermaid.initialize({\n\t\t\t\tstartOnLoad: false,\n\t\t\t\ttheme: \"default\",\n\t\t\t\tthemeVariables: {\n\t\t\t\t\tfontFamily: \"inherit\",\n\t\t\t\t\tfontSize: \"16px\",\n\t\t\t\t},\n\t\t\t\tsecurityLevel: \"loose\",\n\t\t\t\t// 添加错误处理配置\n\t\t\t\terrorLevel: \"warn\",\n\t\t\t\tlogLevel: \"error\",\n\t\t\t});\n\n\t\t\t// 渲染所有 Mermaid 图表\n\t\t\tawait renderMermaidDiagrams();\n\t\t} catch (error) {\n\t\t\tconsole.error(\"Failed to initialize Mermaid:\", error);\n\t\t\t// 如果初始化失败，尝试重新加载\n\t\t\tif (retryCount < MAX_RETRIES) {\n\t\t\t\tretryCount++;\n\t\t\t\tsetTimeout(() => initializeMermaid(), RETRY_DELAY * retryCount);\n\t\t\t}\n\t\t}\n\t}\n\n\tasync function renderMermaidDiagrams() {\n\t\t// 防止并发渲染\n\t\tif (isRendering) {\n\t\t\treturn;\n\t\t}\n\n\t\t// 检查 Mermaid 是否可用\n\t\tif (!window.mermaid || typeof window.mermaid.render !== \"function\") {\n\t\t\tconsole.warn(\"Mermaid not available, skipping render\");\n\t\t\treturn;\n\t\t}\n\n\t\tisRendering = true;\n\n\t\ttry {\n\t\t\tconst mermaidElements = document.querySelectorAll(\n\t\t\t\t\".mermaid[data-mermaid-code]\",\n\t\t\t);\n\n\t\t\tif (mermaidElements.length === 0) {\n\t\t\t\tisRendering = false;\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// 延迟检测主题，确保 DOM 已经更新\n\t\t\tawait new Promise((resolve) => setTimeout(resolve, 100));\n\n\t\t\tconst htmlElement = document.documentElement;\n\t\t\tconst isDark = htmlElement.classList.contains(\"dark\");\n\t\t\tconst theme = isDark ? \"dark\" : \"default\";\n\n\t\t\t// 更新 Mermaid 主题（只需要更新一次）\n\t\t\twindow.mermaid.initialize({\n\t\t\t\tstartOnLoad: false,\n\t\t\t\ttheme: theme,\n\t\t\t\tthemeVariables: {\n\t\t\t\t\tfontFamily: \"inherit\",\n\t\t\t\t\tfontSize: \"16px\",\n\t\t\t\t\t// 强制应用主题变量\n\t\t\t\t\tprimaryColor: isDark ? \"#ffffff\" : \"#000000\",\n\t\t\t\t\tprimaryTextColor: isDark ? \"#ffffff\" : \"#000000\",\n\t\t\t\t\tprimaryBorderColor: isDark ? \"#ffffff\" : \"#000000\",\n\t\t\t\t\tlineColor: isDark ? \"#ffffff\" : \"#000000\",\n\t\t\t\t\tsecondaryColor: isDark ? \"#333333\" : \"#f0f0f0\",\n\t\t\t\t\ttertiaryColor: isDark ? \"#555555\" : \"#e0e0e0\",\n\t\t\t\t},\n\t\t\t\tsecurityLevel: \"loose\",\n\t\t\t\terrorLevel: \"warn\",\n\t\t\t\tlogLevel: \"error\",\n\t\t\t});\n\n\t\t\t// 批量渲染所有图表，添加重试机制\n\t\t\tconst renderPromises = Array.from(mermaidElements).map(\n\t\t\t\tasync (element, index) => {\n\t\t\t\t\tlet attempts = 0;\n\t\t\t\t\tconst maxAttempts = 3;\n\n\t\t\t\t\twhile (attempts < maxAttempts) {\n\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\tconst code = element.getAttribute(\"data-mermaid-code\");\n\n\t\t\t\t\t\t\tif (!code) {\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t// 显示加载状态\n\t\t\t\t\t\t\telement.innerHTML =\n\t\t\t\t\t\t\t\t'<div class=\"mermaid-loading\">Rendering diagram...</div>';\n\n\t\t\t\t\t\t\t// 渲染图表\n\t\t\t\t\t\t\tconst { svg } = await window.mermaid.render(\n\t\t\t\t\t\t\t\t`mermaid-${Date.now()}-${index}-${attempts}`,\n\t\t\t\t\t\t\t\tcode,\n\t\t\t\t\t\t\t);\n\n                            const parser = new DOMParser();\n                            const doc = parser.parseFromString(svg, 'image/svg+xml');\n                            const svgElement = doc.documentElement;\n\n                            element.innerHTML = '';\n                            element.__zoomAttached = false;\n                            element.appendChild(svgElement);\n\n                            // 添加响应式支持\n                            const insertedSvg = element.querySelector('svg');\n                            if (insertedSvg) {\n                                insertedSvg.setAttribute('width', '100%');\n                                insertedSvg.removeAttribute('height');\n                                insertedSvg.style.maxWidth = '100%';\n                                insertedSvg.style.height = 'auto';\n                                //Todo 需要根据实际情况\n                                insertedSvg.style.minHeight = \"300px\";\n\n\t\t\t\t\t\t\t\t// 强制应用样式\n\t\t\t\t\t\t\t\tif (isDark) {\n\t\t\t\t\t\t\t\t\tsvgElement.style.filter = \"brightness(0.9) contrast(1.1)\";\n\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\tsvgElement.style.filter = \"none\";\n\t\t\t\t\t\t\t\t}\n                                attachZoomControls(element, insertedSvg);\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t// 渲染成功，跳出重试循环\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t} catch (error) {\n\t\t\t\t\t\t\tattempts++;\n\t\t\t\t\t\t\tconsole.warn(\n\t\t\t\t\t\t\t\t`Mermaid rendering attempt ${attempts} failed for element ${index}:`,\n\t\t\t\t\t\t\t\terror,\n\t\t\t\t\t\t\t);\n\n\t\t\t\t\t\t\tif (attempts >= maxAttempts) {\n\t\t\t\t\t\t\t\tconsole.error(\n\t\t\t\t\t\t\t\t\t`Failed to render Mermaid diagram after ${maxAttempts} attempts:`,\n\t\t\t\t\t\t\t\t\terror,\n\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\telement.innerHTML = `\n\t\t\t\t\t\t\t\t\t<div class=\"mermaid-error\">\n\t\t\t\t\t\t\t\t\t\t<p>Failed to render diagram after ${maxAttempts} attempts.</p>\n\t\t\t\t\t\t\t\t\t\t<button onclick=\"location.reload()\" style=\"margin-top: 8px; padding: 4px 8px; background: var(--primary); color: white; border: none; border-radius: 4px; cursor: pointer;\">\n\t\t\t\t\t\t\t\t\t\t\tRetry Page\n\t\t\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t`;\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t// 等待一段时间后重试\n\t\t\t\t\t\t\t\tawait new Promise((resolve) =>\n\t\t\t\t\t\t\t\t\tsetTimeout(resolve, 500 * attempts),\n\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t);\n\n\t\t\t// 等待所有渲染完成\n\t\t\tawait Promise.all(renderPromises);\n\t\t\tretryCount = 0; // 重置重试计数\n\t\t} catch (error) {\n\t\t\tconsole.error(\"Error in renderMermaidDiagrams:\", error);\n\n\t\t\t// 如果渲染失败，尝试重新渲染\n\t\t\tif (retryCount < MAX_RETRIES) {\n\t\t\t\tretryCount++;\n\t\t\t\tsetTimeout(() => renderMermaidDiagrams(), RETRY_DELAY * retryCount);\n\t\t\t}\n\t\t} finally {\n\t\t\tisRendering = false;\n\t\t}\n\t}\n\n\t// 初始化主题状态\n\tfunction initializeThemeState() {\n\t\tconst isDark = document.documentElement.classList.contains(\"dark\");\n\t\tcurrentTheme = isDark ? \"dark\" : \"default\";\n\t}\n\n\t// 加载 Mermaid 库\n\tasync function loadMermaid() {\n\t\tif (typeof window.mermaid !== \"undefined\") {\n\t\t\treturn Promise.resolve();\n\t\t}\n\n\t\treturn new Promise((resolve, reject) => {\n\t\t\tconst script = document.createElement(\"script\");\n\t\t\tscript.src =\n\t\t\t\t\"https://cdn.jsdelivr.net/npm/mermaid@11/dist/mermaid.min.js\";\n\n\t\t\tscript.onload = () => {\n\t\t\t\tconsole.log(\"Mermaid library loaded successfully\");\n\t\t\t\tresolve();\n\t\t\t};\n\n\t\t\tscript.onerror = (error) => {\n\t\t\t\tconsole.error(\"Failed to load Mermaid library:\", error);\n\t\t\t\t// 尝试备用 CDN\n\t\t\t\tconst fallbackScript = document.createElement(\"script\");\n\t\t\t\tfallbackScript.src = \"https://unpkg.com/mermaid@11/dist/mermaid.min.js\";\n\n\t\t\t\tfallbackScript.onload = () => {\n\t\t\t\t\tconsole.log(\"Mermaid library loaded from fallback CDN\");\n\t\t\t\t\tresolve();\n\t\t\t\t};\n\n\t\t\t\tfallbackScript.onerror = () => {\n\t\t\t\t\treject(\n\t\t\t\t\t\tnew Error(\n\t\t\t\t\t\t\t\"Failed to load Mermaid from both primary and fallback CDNs\",\n\t\t\t\t\t\t),\n\t\t\t\t\t);\n\t\t\t\t};\n\n\t\t\t\tdocument.head.appendChild(fallbackScript);\n\t\t\t};\n\n\t\t\tdocument.head.appendChild(script);\n\t\t});\n\t}\n\n\t// 主初始化函数\n\tasync function initialize() {\n\t\ttry {\n\t\t\t// 设置监听器\n\t\t\tsetupMutationObserver();\n\t\t\tsetupEventListeners();\n\n\t\t\t// 初始化主题状态\n\t\t\tinitializeThemeState();\n\n\t\t\t// 加载并初始化 Mermaid\n\t\t\tawait loadMermaid();\n\t\t\tawait initializeMermaid();\n\t\t} catch (error) {\n\t\t\tconsole.error(\"Failed to initialize Mermaid system:\", error);\n\t\t}\n\t}\n\n\t// 启动初始化\n\tif (document.readyState === \"loading\") {\n\t\tdocument.addEventListener(\"DOMContentLoaded\", initialize);\n\t} else {\n\t\tinitialize();\n\t}\n})();\n\x3C/script></div></section><section><h2 id=\"state-diagram-example\">State Diagram Example<a class=\"anchor\" href=\"#state-diagram-example\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h2><p>State diagrams show the sequence of states an object goes through during its life cycle.</p><div class=\"mermaid-diagram-container\"><div class=\"mermaid-wrapper\" id=\"mermaid-0wkbbu\"><div class=\"mermaid\" data-mermaid-code=\"stateDiagram-v2\n    [*] --> Draft\n    \n    Draft --> UnderReview : submit\n    UnderReview --> Draft : reject\n    UnderReview --> Approved : approve\n    Approved --> Published : publish\n    Published --> Archived : archive\n    Published --> Draft : retract\n    \n    state Published {\n        [*] --> Active\n        Active --> Hidden : temporarily hide\n        Hidden --> Active : restore\n        Active --> [*]\n        Hidden --> [*]\n    }\n    \n    Archived --> [*]\">stateDiagram-v2\n    [*] --> Draft\n    \n    Draft --> UnderReview : submit\n    UnderReview --> Draft : reject\n    UnderReview --> Approved : approve\n    Approved --> Published : publish\n    Published --> Archived : archive\n    Published --> Draft : retract\n    \n    state Published {\n        [*] --> Active\n        Active --> Hidden : temporarily hide\n        Hidden --> Active : restore\n        Active --> [*]\n        Hidden --> [*]\n    }\n    \n    Archived --> [*]</div></div><script type=\"text/javascript\">(() => {\n\t// 单例模式：检查是否已经初始化过\n\tif (window.mermaidInitialized) {\n\t\treturn;\n\t}\n\n\twindow.mermaidInitialized = true;\n\n\t// 记录当前主题状态，避免不必要的重新渲染\n\tlet currentTheme = null;\n\tlet isRendering = false; // 防止并发渲染\n\tlet retryCount = 0;\n\tconst MAX_RETRIES = 3;\n\tconst RETRY_DELAY = 1000; // 1秒\n\n\t// 检查主题是否真的发生了变化\n\tfunction hasThemeChanged() {\n\t\tconst isDark = document.documentElement.classList.contains(\"dark\");\n\t\tconst newTheme = isDark ? \"dark\" : \"default\";\n\n\t\tif (currentTheme !== newTheme) {\n\t\t\tcurrentTheme = newTheme;\n\t\t\treturn true;\n\t\t}\n\t\treturn false;\n\t}\n\n\t// 等待 Mermaid 库加载完成\n\tfunction waitForMermaid(timeout = 10000) {\n\t\treturn new Promise((resolve, reject) => {\n\t\t\tconst startTime = Date.now();\n\n\t\t\tfunction check() {\n\t\t\t\tif (window.mermaid && typeof window.mermaid.initialize === \"function\") {\n\t\t\t\t\tresolve(window.mermaid);\n\t\t\t\t} else if (Date.now() - startTime > timeout) {\n\t\t\t\t\treject(new Error(\"Mermaid library failed to load within timeout\"));\n\t\t\t\t} else {\n\t\t\t\t\tsetTimeout(check, 100);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tcheck();\n\t\t});\n\t}\n\n\t// 设置 MutationObserver 监听 html 元素的 class 属性变化\n\tfunction setupMutationObserver() {\n\t\tconst observer = new MutationObserver((mutations) => {\n\t\t\tmutations.forEach((mutation) => {\n\t\t\t\tif (\n\t\t\t\t\tmutation.type === \"attributes\" &&\n\t\t\t\t\tmutation.attributeName === \"class\"\n\t\t\t\t) {\n\t\t\t\t\t// 检查是否是 dark 类的变化\n\t\t\t\t\tconst target = mutation.target;\n\t\t\t\t\tconst wasDark = mutation.oldValue\n\t\t\t\t\t\t? mutation.oldValue.includes(\"dark\")\n\t\t\t\t\t\t: false;\n\t\t\t\t\tconst isDark = target.classList.contains(\"dark\");\n\n\t\t\t\t\tif (wasDark !== isDark) {\n\t\t\t\t\t\tif (hasThemeChanged()) {\n\t\t\t\t\t\t\t// 延迟渲染，避免主题切换时的闪烁\n\t\t\t\t\t\t\tsetTimeout(() => renderMermaidDiagrams(), 150);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t});\n\n\t\t// 开始观察 html 元素的 class 属性变化\n\t\tobserver.observe(document.documentElement, {\n\t\t\tattributes: true,\n\t\t\tattributeFilter: [\"class\"],\n\t\t\tattributeOldValue: true,\n\t\t});\n\t}\n\n    // 缩放平移\n    function attachZoomControls(element, svgElement) {\n        if (element.__zoomAttached) return;\n        element.__zoomAttached = true;\n\n        const wrapper = document.createElement('div');\n        wrapper.className = 'mermaid-zoom-wrapper';\n\n        const svgParent = svgElement.parentNode;\n        wrapper.appendChild(svgElement);\n        svgParent.appendChild(wrapper);\n\n        let scale = 1;\n        let tx = 0;\n        let ty = 0;\n        const MIN_SCALE = 0.2;\n        const MAX_SCALE = 6;\n\n        function applyTransform() {\n            wrapper.style.transform = `translate(${tx}px, ${ty}px) scale(${scale})`;\n        }\n        const controls = document.createElement('div');\n        controls.className = 'mermaid-zoom-controls';\n        controls.innerHTML = `\n\t\t\t<button class=\"btn-regular rounded-lg h-10 w-10 active:scale-90\" data-action=\"zoom-in\" title=\"Zoom in\">+</button>\n\t\t\t<button class=\"btn-regular rounded-lg h-10 w-10 active:scale-90\" data-action=\"zoom-out\" title=\"Zoom out\">−</button>\n\t\t\t<button class=\"btn-regular rounded-lg h-10 w-10 active:scale-90\" data-action=\"reset\" title=\"Reset\">⤾</button>\n\t\t`;\n        element.appendChild(controls);\n\n        controls.addEventListener('click', (ev) => {\n            const action = ev.target.getAttribute && ev.target.getAttribute('data-action');\n            if (!action) return;\n\n            switch (action) {\n                case 'zoom-in':\n                    scale = Math.min(MAX_SCALE, +(scale * 1.2).toFixed(3));\n                    applyTransform();\n                    break;\n                case 'zoom-out':\n                    scale = Math.max(MIN_SCALE, +(scale / 1.2).toFixed(3));\n                    applyTransform();\n                    break;\n                case 'reset':\n                    scale = 1;\n                    tx = 0;\n                    ty = 0;\n                    applyTransform();\n                    break;\n            }\n        });\n\n        let isPanning = false;\n        let startX = 0;\n        let startY = 0;\n        let startTx = 0;\n        let startTy = 0;\n\n        wrapper.style.touchAction = 'none';\n\n        wrapper.addEventListener('pointerdown', (ev) => {\n            if (ev.button !== 0) return; // 仅左键\n            isPanning = true;\n            wrapper.setPointerCapture(ev.pointerId);\n            startX = ev.clientX;\n            startY = ev.clientY;\n            startTx = tx;\n            startTy = ty;\n        });\n\n        wrapper.addEventListener('pointermove', (ev) => {\n            if (!isPanning) return;\n            const dx = ev.clientX - startX;\n            const dy = ev.clientY - startY;\n            tx = startTx + dx / scale; // 根据当前缩放调整灵敏度\n            ty = startTy + dy / scale;\n            applyTransform();\n        });\n\n        wrapper.addEventListener('pointerup', (ev) => {\n            isPanning = false;\n            try {\n                wrapper.releasePointerCapture(ev.pointerId);\n            } catch (e) {\n            }\n        });\n\n        wrapper.addEventListener('pointercancel', () => {\n            isPanning = false;\n        });\n\n        // 鼠标滚轮缩放\n        element.addEventListener('wheel', (ev) => {\n            ev.preventDefault();\n            const delta = -ev.deltaY;\n            const zoomFactor = delta > 0 ? 1.12 : 1 / 1.12;\n            const prevScale = scale;\n            scale = Math.min(MAX_SCALE, Math.max(MIN_SCALE, +(scale * zoomFactor).toFixed(3)));\n\n            const rect = wrapper.getBoundingClientRect();\n            const cx = ev.clientX - rect.left;\n            const cy = ev.clientY - rect.top;\n\n            const worldX = (cx / prevScale) - tx;\n            const worldY = (cy / prevScale) - ty;\n\n            tx = cx / scale - worldX;\n            ty = cy / scale - worldY;\n\n            applyTransform();\n        }, {passive: false});\n\n        // 双击重置\n        wrapper.addEventListener('dblclick', () => {\n            scale = 1;\n            tx = 0;\n            ty = 0;\n            applyTransform();\n        });\n        applyTransform();\n        let resizeTimer = null;\n        window.addEventListener('resize', () => {\n            clearTimeout(resizeTimer);\n            resizeTimer = setTimeout(() => {\n                applyTransform()\n            }, 200);\n        });\n    }\n\n    // 设置其他事件监听器\n\tfunction setupEventListeners() {\n\t\t// 监听页面切换\n\t\tdocument.addEventListener(\"astro:page-load\", () => {\n\t\t\t// 重新初始化主题状态\n\t\t\tcurrentTheme = null;\n\t\t\tretryCount = 0; // 重置重试计数\n\t\t\tif (hasThemeChanged()) {\n\t\t\t\tsetTimeout(() => renderMermaidDiagrams(), 100);\n\t\t\t}\n\t\t});\n\n\t\t// 监听页面可见性变化，页面重新可见时重新渲染\n\t\tdocument.addEventListener(\"visibilitychange\", () => {\n\t\t\tif (!document.hidden) {\n\t\t\t\tsetTimeout(() => renderMermaidDiagrams(), 200);\n\t\t\t}\n\t\t});\n\t}\n\n\tasync function initializeMermaid() {\n\t\ttry {\n\t\t\tawait waitForMermaid();\n\n\t\t\t// 初始化 Mermaid 配置\n\t\t\twindow.mermaid.initialize({\n\t\t\t\tstartOnLoad: false,\n\t\t\t\ttheme: \"default\",\n\t\t\t\tthemeVariables: {\n\t\t\t\t\tfontFamily: \"inherit\",\n\t\t\t\t\tfontSize: \"16px\",\n\t\t\t\t},\n\t\t\t\tsecurityLevel: \"loose\",\n\t\t\t\t// 添加错误处理配置\n\t\t\t\terrorLevel: \"warn\",\n\t\t\t\tlogLevel: \"error\",\n\t\t\t});\n\n\t\t\t// 渲染所有 Mermaid 图表\n\t\t\tawait renderMermaidDiagrams();\n\t\t} catch (error) {\n\t\t\tconsole.error(\"Failed to initialize Mermaid:\", error);\n\t\t\t// 如果初始化失败，尝试重新加载\n\t\t\tif (retryCount < MAX_RETRIES) {\n\t\t\t\tretryCount++;\n\t\t\t\tsetTimeout(() => initializeMermaid(), RETRY_DELAY * retryCount);\n\t\t\t}\n\t\t}\n\t}\n\n\tasync function renderMermaidDiagrams() {\n\t\t// 防止并发渲染\n\t\tif (isRendering) {\n\t\t\treturn;\n\t\t}\n\n\t\t// 检查 Mermaid 是否可用\n\t\tif (!window.mermaid || typeof window.mermaid.render !== \"function\") {\n\t\t\tconsole.warn(\"Mermaid not available, skipping render\");\n\t\t\treturn;\n\t\t}\n\n\t\tisRendering = true;\n\n\t\ttry {\n\t\t\tconst mermaidElements = document.querySelectorAll(\n\t\t\t\t\".mermaid[data-mermaid-code]\",\n\t\t\t);\n\n\t\t\tif (mermaidElements.length === 0) {\n\t\t\t\tisRendering = false;\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// 延迟检测主题，确保 DOM 已经更新\n\t\t\tawait new Promise((resolve) => setTimeout(resolve, 100));\n\n\t\t\tconst htmlElement = document.documentElement;\n\t\t\tconst isDark = htmlElement.classList.contains(\"dark\");\n\t\t\tconst theme = isDark ? \"dark\" : \"default\";\n\n\t\t\t// 更新 Mermaid 主题（只需要更新一次）\n\t\t\twindow.mermaid.initialize({\n\t\t\t\tstartOnLoad: false,\n\t\t\t\ttheme: theme,\n\t\t\t\tthemeVariables: {\n\t\t\t\t\tfontFamily: \"inherit\",\n\t\t\t\t\tfontSize: \"16px\",\n\t\t\t\t\t// 强制应用主题变量\n\t\t\t\t\tprimaryColor: isDark ? \"#ffffff\" : \"#000000\",\n\t\t\t\t\tprimaryTextColor: isDark ? \"#ffffff\" : \"#000000\",\n\t\t\t\t\tprimaryBorderColor: isDark ? \"#ffffff\" : \"#000000\",\n\t\t\t\t\tlineColor: isDark ? \"#ffffff\" : \"#000000\",\n\t\t\t\t\tsecondaryColor: isDark ? \"#333333\" : \"#f0f0f0\",\n\t\t\t\t\ttertiaryColor: isDark ? \"#555555\" : \"#e0e0e0\",\n\t\t\t\t},\n\t\t\t\tsecurityLevel: \"loose\",\n\t\t\t\terrorLevel: \"warn\",\n\t\t\t\tlogLevel: \"error\",\n\t\t\t});\n\n\t\t\t// 批量渲染所有图表，添加重试机制\n\t\t\tconst renderPromises = Array.from(mermaidElements).map(\n\t\t\t\tasync (element, index) => {\n\t\t\t\t\tlet attempts = 0;\n\t\t\t\t\tconst maxAttempts = 3;\n\n\t\t\t\t\twhile (attempts < maxAttempts) {\n\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\tconst code = element.getAttribute(\"data-mermaid-code\");\n\n\t\t\t\t\t\t\tif (!code) {\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t// 显示加载状态\n\t\t\t\t\t\t\telement.innerHTML =\n\t\t\t\t\t\t\t\t'<div class=\"mermaid-loading\">Rendering diagram...</div>';\n\n\t\t\t\t\t\t\t// 渲染图表\n\t\t\t\t\t\t\tconst { svg } = await window.mermaid.render(\n\t\t\t\t\t\t\t\t`mermaid-${Date.now()}-${index}-${attempts}`,\n\t\t\t\t\t\t\t\tcode,\n\t\t\t\t\t\t\t);\n\n                            const parser = new DOMParser();\n                            const doc = parser.parseFromString(svg, 'image/svg+xml');\n                            const svgElement = doc.documentElement;\n\n                            element.innerHTML = '';\n                            element.__zoomAttached = false;\n                            element.appendChild(svgElement);\n\n                            // 添加响应式支持\n                            const insertedSvg = element.querySelector('svg');\n                            if (insertedSvg) {\n                                insertedSvg.setAttribute('width', '100%');\n                                insertedSvg.removeAttribute('height');\n                                insertedSvg.style.maxWidth = '100%';\n                                insertedSvg.style.height = 'auto';\n                                //Todo 需要根据实际情况\n                                insertedSvg.style.minHeight = \"300px\";\n\n\t\t\t\t\t\t\t\t// 强制应用样式\n\t\t\t\t\t\t\t\tif (isDark) {\n\t\t\t\t\t\t\t\t\tsvgElement.style.filter = \"brightness(0.9) contrast(1.1)\";\n\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\tsvgElement.style.filter = \"none\";\n\t\t\t\t\t\t\t\t}\n                                attachZoomControls(element, insertedSvg);\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t// 渲染成功，跳出重试循环\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t} catch (error) {\n\t\t\t\t\t\t\tattempts++;\n\t\t\t\t\t\t\tconsole.warn(\n\t\t\t\t\t\t\t\t`Mermaid rendering attempt ${attempts} failed for element ${index}:`,\n\t\t\t\t\t\t\t\terror,\n\t\t\t\t\t\t\t);\n\n\t\t\t\t\t\t\tif (attempts >= maxAttempts) {\n\t\t\t\t\t\t\t\tconsole.error(\n\t\t\t\t\t\t\t\t\t`Failed to render Mermaid diagram after ${maxAttempts} attempts:`,\n\t\t\t\t\t\t\t\t\terror,\n\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\telement.innerHTML = `\n\t\t\t\t\t\t\t\t\t<div class=\"mermaid-error\">\n\t\t\t\t\t\t\t\t\t\t<p>Failed to render diagram after ${maxAttempts} attempts.</p>\n\t\t\t\t\t\t\t\t\t\t<button onclick=\"location.reload()\" style=\"margin-top: 8px; padding: 4px 8px; background: var(--primary); color: white; border: none; border-radius: 4px; cursor: pointer;\">\n\t\t\t\t\t\t\t\t\t\t\tRetry Page\n\t\t\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t`;\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t// 等待一段时间后重试\n\t\t\t\t\t\t\t\tawait new Promise((resolve) =>\n\t\t\t\t\t\t\t\t\tsetTimeout(resolve, 500 * attempts),\n\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t);\n\n\t\t\t// 等待所有渲染完成\n\t\t\tawait Promise.all(renderPromises);\n\t\t\tretryCount = 0; // 重置重试计数\n\t\t} catch (error) {\n\t\t\tconsole.error(\"Error in renderMermaidDiagrams:\", error);\n\n\t\t\t// 如果渲染失败，尝试重新渲染\n\t\t\tif (retryCount < MAX_RETRIES) {\n\t\t\t\tretryCount++;\n\t\t\t\tsetTimeout(() => renderMermaidDiagrams(), RETRY_DELAY * retryCount);\n\t\t\t}\n\t\t} finally {\n\t\t\tisRendering = false;\n\t\t}\n\t}\n\n\t// 初始化主题状态\n\tfunction initializeThemeState() {\n\t\tconst isDark = document.documentElement.classList.contains(\"dark\");\n\t\tcurrentTheme = isDark ? \"dark\" : \"default\";\n\t}\n\n\t// 加载 Mermaid 库\n\tasync function loadMermaid() {\n\t\tif (typeof window.mermaid !== \"undefined\") {\n\t\t\treturn Promise.resolve();\n\t\t}\n\n\t\treturn new Promise((resolve, reject) => {\n\t\t\tconst script = document.createElement(\"script\");\n\t\t\tscript.src =\n\t\t\t\t\"https://cdn.jsdelivr.net/npm/mermaid@11/dist/mermaid.min.js\";\n\n\t\t\tscript.onload = () => {\n\t\t\t\tconsole.log(\"Mermaid library loaded successfully\");\n\t\t\t\tresolve();\n\t\t\t};\n\n\t\t\tscript.onerror = (error) => {\n\t\t\t\tconsole.error(\"Failed to load Mermaid library:\", error);\n\t\t\t\t// 尝试备用 CDN\n\t\t\t\tconst fallbackScript = document.createElement(\"script\");\n\t\t\t\tfallbackScript.src = \"https://unpkg.com/mermaid@11/dist/mermaid.min.js\";\n\n\t\t\t\tfallbackScript.onload = () => {\n\t\t\t\t\tconsole.log(\"Mermaid library loaded from fallback CDN\");\n\t\t\t\t\tresolve();\n\t\t\t\t};\n\n\t\t\t\tfallbackScript.onerror = () => {\n\t\t\t\t\treject(\n\t\t\t\t\t\tnew Error(\n\t\t\t\t\t\t\t\"Failed to load Mermaid from both primary and fallback CDNs\",\n\t\t\t\t\t\t),\n\t\t\t\t\t);\n\t\t\t\t};\n\n\t\t\t\tdocument.head.appendChild(fallbackScript);\n\t\t\t};\n\n\t\t\tdocument.head.appendChild(script);\n\t\t});\n\t}\n\n\t// 主初始化函数\n\tasync function initialize() {\n\t\ttry {\n\t\t\t// 设置监听器\n\t\t\tsetupMutationObserver();\n\t\t\tsetupEventListeners();\n\n\t\t\t// 初始化主题状态\n\t\t\tinitializeThemeState();\n\n\t\t\t// 加载并初始化 Mermaid\n\t\t\tawait loadMermaid();\n\t\t\tawait initializeMermaid();\n\t\t} catch (error) {\n\t\t\tconsole.error(\"Failed to initialize Mermaid system:\", error);\n\t\t}\n\t}\n\n\t// 启动初始化\n\tif (document.readyState === \"loading\") {\n\t\tdocument.addEventListener(\"DOMContentLoaded\", initialize);\n\t} else {\n\t\tinitialize();\n\t}\n})();\n\x3C/script></div></section><section><h2 id=\"pie-chart-example\">Pie Chart Example<a class=\"anchor\" href=\"#pie-chart-example\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h2><p>Pie charts are ideal for displaying proportions and percentage data.</p><div class=\"mermaid-diagram-container\"><div class=\"mermaid-wrapper\" id=\"mermaid-ufo5n9\"><div class=\"mermaid\" data-mermaid-code=\"pie title Website Traffic Sources Analysis\n    &#x22;Search Engines&#x22; : 45.6\n    &#x22;Direct Access&#x22; : 30.1\n    &#x22;Social Media&#x22; : 15.3\n    &#x22;Referral Links&#x22; : 6.4\n    &#x22;Other Sources&#x22; : 2.6\">pie title Website Traffic Sources Analysis\n    \"Search Engines\" : 45.6\n    \"Direct Access\" : 30.1\n    \"Social Media\" : 15.3\n    \"Referral Links\" : 6.4\n    \"Other Sources\" : 2.6</div></div><script type=\"text/javascript\">(() => {\n\t// 单例模式：检查是否已经初始化过\n\tif (window.mermaidInitialized) {\n\t\treturn;\n\t}\n\n\twindow.mermaidInitialized = true;\n\n\t// 记录当前主题状态，避免不必要的重新渲染\n\tlet currentTheme = null;\n\tlet isRendering = false; // 防止并发渲染\n\tlet retryCount = 0;\n\tconst MAX_RETRIES = 3;\n\tconst RETRY_DELAY = 1000; // 1秒\n\n\t// 检查主题是否真的发生了变化\n\tfunction hasThemeChanged() {\n\t\tconst isDark = document.documentElement.classList.contains(\"dark\");\n\t\tconst newTheme = isDark ? \"dark\" : \"default\";\n\n\t\tif (currentTheme !== newTheme) {\n\t\t\tcurrentTheme = newTheme;\n\t\t\treturn true;\n\t\t}\n\t\treturn false;\n\t}\n\n\t// 等待 Mermaid 库加载完成\n\tfunction waitForMermaid(timeout = 10000) {\n\t\treturn new Promise((resolve, reject) => {\n\t\t\tconst startTime = Date.now();\n\n\t\t\tfunction check() {\n\t\t\t\tif (window.mermaid && typeof window.mermaid.initialize === \"function\") {\n\t\t\t\t\tresolve(window.mermaid);\n\t\t\t\t} else if (Date.now() - startTime > timeout) {\n\t\t\t\t\treject(new Error(\"Mermaid library failed to load within timeout\"));\n\t\t\t\t} else {\n\t\t\t\t\tsetTimeout(check, 100);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tcheck();\n\t\t});\n\t}\n\n\t// 设置 MutationObserver 监听 html 元素的 class 属性变化\n\tfunction setupMutationObserver() {\n\t\tconst observer = new MutationObserver((mutations) => {\n\t\t\tmutations.forEach((mutation) => {\n\t\t\t\tif (\n\t\t\t\t\tmutation.type === \"attributes\" &&\n\t\t\t\t\tmutation.attributeName === \"class\"\n\t\t\t\t) {\n\t\t\t\t\t// 检查是否是 dark 类的变化\n\t\t\t\t\tconst target = mutation.target;\n\t\t\t\t\tconst wasDark = mutation.oldValue\n\t\t\t\t\t\t? mutation.oldValue.includes(\"dark\")\n\t\t\t\t\t\t: false;\n\t\t\t\t\tconst isDark = target.classList.contains(\"dark\");\n\n\t\t\t\t\tif (wasDark !== isDark) {\n\t\t\t\t\t\tif (hasThemeChanged()) {\n\t\t\t\t\t\t\t// 延迟渲染，避免主题切换时的闪烁\n\t\t\t\t\t\t\tsetTimeout(() => renderMermaidDiagrams(), 150);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t});\n\n\t\t// 开始观察 html 元素的 class 属性变化\n\t\tobserver.observe(document.documentElement, {\n\t\t\tattributes: true,\n\t\t\tattributeFilter: [\"class\"],\n\t\t\tattributeOldValue: true,\n\t\t});\n\t}\n\n    // 缩放平移\n    function attachZoomControls(element, svgElement) {\n        if (element.__zoomAttached) return;\n        element.__zoomAttached = true;\n\n        const wrapper = document.createElement('div');\n        wrapper.className = 'mermaid-zoom-wrapper';\n\n        const svgParent = svgElement.parentNode;\n        wrapper.appendChild(svgElement);\n        svgParent.appendChild(wrapper);\n\n        let scale = 1;\n        let tx = 0;\n        let ty = 0;\n        const MIN_SCALE = 0.2;\n        const MAX_SCALE = 6;\n\n        function applyTransform() {\n            wrapper.style.transform = `translate(${tx}px, ${ty}px) scale(${scale})`;\n        }\n        const controls = document.createElement('div');\n        controls.className = 'mermaid-zoom-controls';\n        controls.innerHTML = `\n\t\t\t<button class=\"btn-regular rounded-lg h-10 w-10 active:scale-90\" data-action=\"zoom-in\" title=\"Zoom in\">+</button>\n\t\t\t<button class=\"btn-regular rounded-lg h-10 w-10 active:scale-90\" data-action=\"zoom-out\" title=\"Zoom out\">−</button>\n\t\t\t<button class=\"btn-regular rounded-lg h-10 w-10 active:scale-90\" data-action=\"reset\" title=\"Reset\">⤾</button>\n\t\t`;\n        element.appendChild(controls);\n\n        controls.addEventListener('click', (ev) => {\n            const action = ev.target.getAttribute && ev.target.getAttribute('data-action');\n            if (!action) return;\n\n            switch (action) {\n                case 'zoom-in':\n                    scale = Math.min(MAX_SCALE, +(scale * 1.2).toFixed(3));\n                    applyTransform();\n                    break;\n                case 'zoom-out':\n                    scale = Math.max(MIN_SCALE, +(scale / 1.2).toFixed(3));\n                    applyTransform();\n                    break;\n                case 'reset':\n                    scale = 1;\n                    tx = 0;\n                    ty = 0;\n                    applyTransform();\n                    break;\n            }\n        });\n\n        let isPanning = false;\n        let startX = 0;\n        let startY = 0;\n        let startTx = 0;\n        let startTy = 0;\n\n        wrapper.style.touchAction = 'none';\n\n        wrapper.addEventListener('pointerdown', (ev) => {\n            if (ev.button !== 0) return; // 仅左键\n            isPanning = true;\n            wrapper.setPointerCapture(ev.pointerId);\n            startX = ev.clientX;\n            startY = ev.clientY;\n            startTx = tx;\n            startTy = ty;\n        });\n\n        wrapper.addEventListener('pointermove', (ev) => {\n            if (!isPanning) return;\n            const dx = ev.clientX - startX;\n            const dy = ev.clientY - startY;\n            tx = startTx + dx / scale; // 根据当前缩放调整灵敏度\n            ty = startTy + dy / scale;\n            applyTransform();\n        });\n\n        wrapper.addEventListener('pointerup', (ev) => {\n            isPanning = false;\n            try {\n                wrapper.releasePointerCapture(ev.pointerId);\n            } catch (e) {\n            }\n        });\n\n        wrapper.addEventListener('pointercancel', () => {\n            isPanning = false;\n        });\n\n        // 鼠标滚轮缩放\n        element.addEventListener('wheel', (ev) => {\n            ev.preventDefault();\n            const delta = -ev.deltaY;\n            const zoomFactor = delta > 0 ? 1.12 : 1 / 1.12;\n            const prevScale = scale;\n            scale = Math.min(MAX_SCALE, Math.max(MIN_SCALE, +(scale * zoomFactor).toFixed(3)));\n\n            const rect = wrapper.getBoundingClientRect();\n            const cx = ev.clientX - rect.left;\n            const cy = ev.clientY - rect.top;\n\n            const worldX = (cx / prevScale) - tx;\n            const worldY = (cy / prevScale) - ty;\n\n            tx = cx / scale - worldX;\n            ty = cy / scale - worldY;\n\n            applyTransform();\n        }, {passive: false});\n\n        // 双击重置\n        wrapper.addEventListener('dblclick', () => {\n            scale = 1;\n            tx = 0;\n            ty = 0;\n            applyTransform();\n        });\n        applyTransform();\n        let resizeTimer = null;\n        window.addEventListener('resize', () => {\n            clearTimeout(resizeTimer);\n            resizeTimer = setTimeout(() => {\n                applyTransform()\n            }, 200);\n        });\n    }\n\n    // 设置其他事件监听器\n\tfunction setupEventListeners() {\n\t\t// 监听页面切换\n\t\tdocument.addEventListener(\"astro:page-load\", () => {\n\t\t\t// 重新初始化主题状态\n\t\t\tcurrentTheme = null;\n\t\t\tretryCount = 0; // 重置重试计数\n\t\t\tif (hasThemeChanged()) {\n\t\t\t\tsetTimeout(() => renderMermaidDiagrams(), 100);\n\t\t\t}\n\t\t});\n\n\t\t// 监听页面可见性变化，页面重新可见时重新渲染\n\t\tdocument.addEventListener(\"visibilitychange\", () => {\n\t\t\tif (!document.hidden) {\n\t\t\t\tsetTimeout(() => renderMermaidDiagrams(), 200);\n\t\t\t}\n\t\t});\n\t}\n\n\tasync function initializeMermaid() {\n\t\ttry {\n\t\t\tawait waitForMermaid();\n\n\t\t\t// 初始化 Mermaid 配置\n\t\t\twindow.mermaid.initialize({\n\t\t\t\tstartOnLoad: false,\n\t\t\t\ttheme: \"default\",\n\t\t\t\tthemeVariables: {\n\t\t\t\t\tfontFamily: \"inherit\",\n\t\t\t\t\tfontSize: \"16px\",\n\t\t\t\t},\n\t\t\t\tsecurityLevel: \"loose\",\n\t\t\t\t// 添加错误处理配置\n\t\t\t\terrorLevel: \"warn\",\n\t\t\t\tlogLevel: \"error\",\n\t\t\t});\n\n\t\t\t// 渲染所有 Mermaid 图表\n\t\t\tawait renderMermaidDiagrams();\n\t\t} catch (error) {\n\t\t\tconsole.error(\"Failed to initialize Mermaid:\", error);\n\t\t\t// 如果初始化失败，尝试重新加载\n\t\t\tif (retryCount < MAX_RETRIES) {\n\t\t\t\tretryCount++;\n\t\t\t\tsetTimeout(() => initializeMermaid(), RETRY_DELAY * retryCount);\n\t\t\t}\n\t\t}\n\t}\n\n\tasync function renderMermaidDiagrams() {\n\t\t// 防止并发渲染\n\t\tif (isRendering) {\n\t\t\treturn;\n\t\t}\n\n\t\t// 检查 Mermaid 是否可用\n\t\tif (!window.mermaid || typeof window.mermaid.render !== \"function\") {\n\t\t\tconsole.warn(\"Mermaid not available, skipping render\");\n\t\t\treturn;\n\t\t}\n\n\t\tisRendering = true;\n\n\t\ttry {\n\t\t\tconst mermaidElements = document.querySelectorAll(\n\t\t\t\t\".mermaid[data-mermaid-code]\",\n\t\t\t);\n\n\t\t\tif (mermaidElements.length === 0) {\n\t\t\t\tisRendering = false;\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// 延迟检测主题，确保 DOM 已经更新\n\t\t\tawait new Promise((resolve) => setTimeout(resolve, 100));\n\n\t\t\tconst htmlElement = document.documentElement;\n\t\t\tconst isDark = htmlElement.classList.contains(\"dark\");\n\t\t\tconst theme = isDark ? \"dark\" : \"default\";\n\n\t\t\t// 更新 Mermaid 主题（只需要更新一次）\n\t\t\twindow.mermaid.initialize({\n\t\t\t\tstartOnLoad: false,\n\t\t\t\ttheme: theme,\n\t\t\t\tthemeVariables: {\n\t\t\t\t\tfontFamily: \"inherit\",\n\t\t\t\t\tfontSize: \"16px\",\n\t\t\t\t\t// 强制应用主题变量\n\t\t\t\t\tprimaryColor: isDark ? \"#ffffff\" : \"#000000\",\n\t\t\t\t\tprimaryTextColor: isDark ? \"#ffffff\" : \"#000000\",\n\t\t\t\t\tprimaryBorderColor: isDark ? \"#ffffff\" : \"#000000\",\n\t\t\t\t\tlineColor: isDark ? \"#ffffff\" : \"#000000\",\n\t\t\t\t\tsecondaryColor: isDark ? \"#333333\" : \"#f0f0f0\",\n\t\t\t\t\ttertiaryColor: isDark ? \"#555555\" : \"#e0e0e0\",\n\t\t\t\t},\n\t\t\t\tsecurityLevel: \"loose\",\n\t\t\t\terrorLevel: \"warn\",\n\t\t\t\tlogLevel: \"error\",\n\t\t\t});\n\n\t\t\t// 批量渲染所有图表，添加重试机制\n\t\t\tconst renderPromises = Array.from(mermaidElements).map(\n\t\t\t\tasync (element, index) => {\n\t\t\t\t\tlet attempts = 0;\n\t\t\t\t\tconst maxAttempts = 3;\n\n\t\t\t\t\twhile (attempts < maxAttempts) {\n\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\tconst code = element.getAttribute(\"data-mermaid-code\");\n\n\t\t\t\t\t\t\tif (!code) {\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t// 显示加载状态\n\t\t\t\t\t\t\telement.innerHTML =\n\t\t\t\t\t\t\t\t'<div class=\"mermaid-loading\">Rendering diagram...</div>';\n\n\t\t\t\t\t\t\t// 渲染图表\n\t\t\t\t\t\t\tconst { svg } = await window.mermaid.render(\n\t\t\t\t\t\t\t\t`mermaid-${Date.now()}-${index}-${attempts}`,\n\t\t\t\t\t\t\t\tcode,\n\t\t\t\t\t\t\t);\n\n                            const parser = new DOMParser();\n                            const doc = parser.parseFromString(svg, 'image/svg+xml');\n                            const svgElement = doc.documentElement;\n\n                            element.innerHTML = '';\n                            element.__zoomAttached = false;\n                            element.appendChild(svgElement);\n\n                            // 添加响应式支持\n                            const insertedSvg = element.querySelector('svg');\n                            if (insertedSvg) {\n                                insertedSvg.setAttribute('width', '100%');\n                                insertedSvg.removeAttribute('height');\n                                insertedSvg.style.maxWidth = '100%';\n                                insertedSvg.style.height = 'auto';\n                                //Todo 需要根据实际情况\n                                insertedSvg.style.minHeight = \"300px\";\n\n\t\t\t\t\t\t\t\t// 强制应用样式\n\t\t\t\t\t\t\t\tif (isDark) {\n\t\t\t\t\t\t\t\t\tsvgElement.style.filter = \"brightness(0.9) contrast(1.1)\";\n\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\tsvgElement.style.filter = \"none\";\n\t\t\t\t\t\t\t\t}\n                                attachZoomControls(element, insertedSvg);\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t// 渲染成功，跳出重试循环\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t} catch (error) {\n\t\t\t\t\t\t\tattempts++;\n\t\t\t\t\t\t\tconsole.warn(\n\t\t\t\t\t\t\t\t`Mermaid rendering attempt ${attempts} failed for element ${index}:`,\n\t\t\t\t\t\t\t\terror,\n\t\t\t\t\t\t\t);\n\n\t\t\t\t\t\t\tif (attempts >= maxAttempts) {\n\t\t\t\t\t\t\t\tconsole.error(\n\t\t\t\t\t\t\t\t\t`Failed to render Mermaid diagram after ${maxAttempts} attempts:`,\n\t\t\t\t\t\t\t\t\terror,\n\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\telement.innerHTML = `\n\t\t\t\t\t\t\t\t\t<div class=\"mermaid-error\">\n\t\t\t\t\t\t\t\t\t\t<p>Failed to render diagram after ${maxAttempts} attempts.</p>\n\t\t\t\t\t\t\t\t\t\t<button onclick=\"location.reload()\" style=\"margin-top: 8px; padding: 4px 8px; background: var(--primary); color: white; border: none; border-radius: 4px; cursor: pointer;\">\n\t\t\t\t\t\t\t\t\t\t\tRetry Page\n\t\t\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t`;\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t// 等待一段时间后重试\n\t\t\t\t\t\t\t\tawait new Promise((resolve) =>\n\t\t\t\t\t\t\t\t\tsetTimeout(resolve, 500 * attempts),\n\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t);\n\n\t\t\t// 等待所有渲染完成\n\t\t\tawait Promise.all(renderPromises);\n\t\t\tretryCount = 0; // 重置重试计数\n\t\t} catch (error) {\n\t\t\tconsole.error(\"Error in renderMermaidDiagrams:\", error);\n\n\t\t\t// 如果渲染失败，尝试重新渲染\n\t\t\tif (retryCount < MAX_RETRIES) {\n\t\t\t\tretryCount++;\n\t\t\t\tsetTimeout(() => renderMermaidDiagrams(), RETRY_DELAY * retryCount);\n\t\t\t}\n\t\t} finally {\n\t\t\tisRendering = false;\n\t\t}\n\t}\n\n\t// 初始化主题状态\n\tfunction initializeThemeState() {\n\t\tconst isDark = document.documentElement.classList.contains(\"dark\");\n\t\tcurrentTheme = isDark ? \"dark\" : \"default\";\n\t}\n\n\t// 加载 Mermaid 库\n\tasync function loadMermaid() {\n\t\tif (typeof window.mermaid !== \"undefined\") {\n\t\t\treturn Promise.resolve();\n\t\t}\n\n\t\treturn new Promise((resolve, reject) => {\n\t\t\tconst script = document.createElement(\"script\");\n\t\t\tscript.src =\n\t\t\t\t\"https://cdn.jsdelivr.net/npm/mermaid@11/dist/mermaid.min.js\";\n\n\t\t\tscript.onload = () => {\n\t\t\t\tconsole.log(\"Mermaid library loaded successfully\");\n\t\t\t\tresolve();\n\t\t\t};\n\n\t\t\tscript.onerror = (error) => {\n\t\t\t\tconsole.error(\"Failed to load Mermaid library:\", error);\n\t\t\t\t// 尝试备用 CDN\n\t\t\t\tconst fallbackScript = document.createElement(\"script\");\n\t\t\t\tfallbackScript.src = \"https://unpkg.com/mermaid@11/dist/mermaid.min.js\";\n\n\t\t\t\tfallbackScript.onload = () => {\n\t\t\t\t\tconsole.log(\"Mermaid library loaded from fallback CDN\");\n\t\t\t\t\tresolve();\n\t\t\t\t};\n\n\t\t\t\tfallbackScript.onerror = () => {\n\t\t\t\t\treject(\n\t\t\t\t\t\tnew Error(\n\t\t\t\t\t\t\t\"Failed to load Mermaid from both primary and fallback CDNs\",\n\t\t\t\t\t\t),\n\t\t\t\t\t);\n\t\t\t\t};\n\n\t\t\t\tdocument.head.appendChild(fallbackScript);\n\t\t\t};\n\n\t\t\tdocument.head.appendChild(script);\n\t\t});\n\t}\n\n\t// 主初始化函数\n\tasync function initialize() {\n\t\ttry {\n\t\t\t// 设置监听器\n\t\t\tsetupMutationObserver();\n\t\t\tsetupEventListeners();\n\n\t\t\t// 初始化主题状态\n\t\t\tinitializeThemeState();\n\n\t\t\t// 加载并初始化 Mermaid\n\t\t\tawait loadMermaid();\n\t\t\tawait initializeMermaid();\n\t\t} catch (error) {\n\t\t\tconsole.error(\"Failed to initialize Mermaid system:\", error);\n\t\t}\n\t}\n\n\t// 启动初始化\n\tif (document.readyState === \"loading\") {\n\t\tdocument.addEventListener(\"DOMContentLoaded\", initialize);\n\t} else {\n\t\tinitialize();\n\t}\n})();\n\x3C/script></div></section><section><h2 id=\"conclusion\">Conclusion<a class=\"anchor\" href=\"#conclusion\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h2><p>Mermaid is a powerful tool for creating various types of diagrams in Markdown documents. This article demonstrated how to use flowcharts, sequence diagrams, Gantt charts, class diagrams, state diagrams, and pie charts. These diagrams can help you express complex concepts, processes, and data structures more clearly.</p><p>To use Mermaid, simply specify the mermaid language in a code block and describe the diagram using concise text syntax. Mermaid will automatically convert these descriptions into beautiful visual diagrams.</p><p>Try using Mermaid diagrams in your next technical blog post or project documentation - they will make your content more professional and easier to understand!</p></section></section>","metadata":{"headings":[{"depth":1,"slug":"complete-guide-to-markdown-with-mermaid-diagrams","text":"Complete Guide to Markdown with Mermaid Diagrams#"},{"depth":2,"slug":"flowchart-example","text":"Flowchart Example#"},{"depth":2,"slug":"sequence-diagram-example","text":"Sequence Diagram Example#"},{"depth":2,"slug":"gantt-chart-example","text":"Gantt Chart Example#"},{"depth":2,"slug":"class-diagram-example","text":"Class Diagram Example#"},{"depth":2,"slug":"state-diagram-example","text":"State Diagram Example#"},{"depth":2,"slug":"pie-chart-example","text":"Pie Chart Example#"},{"depth":2,"slug":"conclusion","text":"Conclusion#"}],"localImagePaths":[],"remoteImagePaths":[],"frontmatter":{"title":"Markdown Mermaid","published":"2023-10-01T00:00:00.000Z","pinned":false,"description":"A simple example of a Markdown blog post with Mermaid.","tags":["Markdown","Blogging","Mermaid"],"category":"Examples","draft":false,"minutes":3,"words":578,"excerpt":"This article demonstrates how to create various complex diagrams using Mermaid in Markdown documents, including flowcharts, sequence diagrams, Gantt charts, class diagrams, and state diagrams."},"imagePaths":[]}},"collection":"posts"}],"2022-08-01":[{"id":"video","data":{"title":"Include Video in the Posts","published":"2022-08-01T00:00:00.000Z","draft":false,"description":"This post demonstrates how to include embedded video in a blog post.","image":"","tags":["Example","Video"],"category":"Examples","lang":"","pinned":false,"author":"","sourceLink":"","licenseName":"","licenseUrl":"","encrypted":false,"password":"","prevTitle":"","prevSlug":"","nextTitle":"Markdown Mermaid","nextSlug":"markdown-mermaid"},"body":"Just copy the embed code from YouTube or other platforms, and paste it in the markdown file.\n\n```yaml\n---\ntitle: Include Video in the Post\npublished: 2023-10-19\n// ...\n---\n\n<iframe width=\"100%\" height=\"468\" src=\"https://www.youtube.com/embed/5gIf0_xpFPI?si=N1WTorLKL0uwLsU_\" title=\"YouTube video player\" frameborder=\"0\" allowfullscreen></iframe>\n```\n## YouTube\n\n<iframe width=\"100%\" height=\"468\" src=\"https://www.youtube.com/embed/5gIf0_xpFPI?si=N1WTorLKL0uwLsU_\" title=\"YouTube video player\" frameborder=\"0\" allow=\"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share\" allowfullscreen></iframe>\n\n## Bilibili\n\n<iframe width=\"100%\" height=\"468\" src=\"//player.bilibili.com/player.html?bvid=BV1fK4y1s7Qf&p=1&autoplay=0\" scrolling=\"no\" border=\"0\" frameborder=\"no\" framespacing=\"0\" allowfullscreen=\"true\" &autoplay=0> </iframe>","filePath":"src/content/posts/video.md","digest":"04937d2e6f72917e","rendered":{"html":"<p>Just copy the embed code from YouTube or other platforms, and paste it in the markdown file.</p>\n<div class=\"expressive-code\"><link rel=\"stylesheet\" href=\"/_astro/ec.xyvso.css\"><script type=\"module\" src=\"/_astro/ec.g1fg5.js\">\x3C/script><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"yaml\" class=\"wrap\" style=\"--ecMaxLine:172ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#6F42C1;--1:#B392F0\">---</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">2</div></div><div class=\"code\"><span style=\"--0:#1E7734;--1:#85E89D\">title</span><span style=\"--0:#24292E;--1:#E1E4E8\">: </span><span style=\"--0:#032F62;--1:#9ECBFF\">Include Video in the Post</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">3</div></div><div class=\"code\"><span style=\"--0:#1E7734;--1:#85E89D\">published</span><span style=\"--0:#24292E;--1:#E1E4E8\">: </span><span style=\"--0:#005CC5;--1:#79B8FF\">2023-10-19</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">4</div></div><div class=\"code\"><span style=\"--0:#032F62;--1:#9ECBFF\">// ...</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">5</div></div><div class=\"code\"><span style=\"--0:#6F42C1;--1:#B392F0\">---</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">6</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">7</div></div><div class=\"code\"><span style=\"--0:#032F62;--1:#9ECBFF\">&#x3C;iframe width=\"100%\" height=\"468\" src=\"https://www.youtube.com/embed/5gIf0_xpFPI?si=N1WTorLKL0uwLsU_\" title=\"YouTube video player\" frameborder=\"0\" allowfullscreen>&#x3C;/iframe></span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div>\n<section><h2 id=\"youtube\">YouTube<a class=\"anchor\" href=\"#youtube\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h2><iframe width=\"100%\" height=\"468\" src=\"https://www.youtube.com/embed/5gIf0_xpFPI?si=N1WTorLKL0uwLsU_\" title=\"YouTube video player\" frameborder=\"0\" allow=\"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share\" allowfullscreen></iframe></section>\n<section><h2 id=\"bilibili\">Bilibili<a class=\"anchor\" href=\"#bilibili\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h2><iframe width=\"100%\" height=\"468\" src=\"//player.bilibili.com/player.html?bvid=BV1fK4y1s7Qf&#x26;p=1&#x26;autoplay=0\" scrolling=\"no\" border=\"0\" frameborder=\"no\" framespacing=\"0\" allowfullscreen=\"true\" &#x26;autoplay=\"0\"> </iframe></section>","metadata":{"headings":[{"depth":2,"slug":"youtube","text":"YouTube#"},{"depth":2,"slug":"bilibili","text":"Bilibili#"}],"localImagePaths":[],"remoteImagePaths":[],"frontmatter":{"title":"Include Video in the Posts","published":"2022-08-01T00:00:00.000Z","description":"This post demonstrates how to include embedded video in a blog post.","tags":["Example","Video"],"category":"Examples","draft":false,"minutes":1,"words":62,"excerpt":"Just copy the embed code from YouTube or other platforms, and paste it in the markdown file."},"imagePaths":[]}},"collection":"posts"}]};
const allPostsData = [{"id":"eideticlip/eideticlip","title":"一个剪贴板管理工具","published":"2025-11-07T00:00:00.000Z"},{"id":"bug/electron中导入better-sqlite3","title":"Electron中导入better-sqlite3：为什么import不行，require却可以？","published":"2025-09-01T00:00:00.000Z"},{"id":"vue/vue3-透传attributes","title":"Vue3 笔记：透传 Attributes","published":"2025-08-22T00:00:00.000Z"},{"id":"vue/vue3-深入响应式系统","title":"Vue3 笔记：深入响应式系统","published":"2025-08-18T00:00:00.000Z"},{"id":"vue/vue3-响应式基础","title":"Vue3 笔记：响应式基础","published":"2025-08-16T00:00:00.000Z"},{"id":"docker/docker学习笔记-二","title":"Docker学习笔记(二)：容器数据卷","published":"2025-08-14T00:00:00.000Z"},{"id":"docker/docker学习笔记-三","title":"Docker学习笔记(三)：部署MySQL","published":"2025-08-14T00:00:00.000Z"},{"id":"docker/docker学习笔记-一","title":"Docker学习笔记(一)：Docker常用命令","published":"2025-08-13T00:00:00.000Z"},{"id":"bug/解决springboot中lombok注解失效的那些坑","title":"解决SpringBoot中Lombok注解失效的那些坑","published":"2025-08-13T00:00:00.000Z"},{"id":"markdown-tutorial","title":"Markdown Tutorial","published":"2025-01-20T00:00:00.000Z"},{"id":"markdown-extended","title":"Markdown Extended Features","published":"2024-05-01T00:00:00.000Z"},{"id":"guide","title":"Simple Guides for Mizuki","published":"2024-04-01T00:00:00.000Z"},{"id":"encrypted-post","title":"Encrypted Post","published":"2024-01-15T00:00:00.000Z"},{"id":"markdown-mermaid","title":"Markdown Mermaid","published":"2023-10-01T00:00:00.000Z"},{"id":"video","title":"Include Video in the Posts","published":"2022-08-01T00:00:00.000Z"}];
const monthNames = ["1月","2月","3月","4月","5月","6月","7月","8月","9月","10月","11月","12月"];
const weekDays = ["日","一","二","三","四","五","六"];
const yearSuffix = "年";

  // 客户端动态渲染日历
  function renderCalendar() {
    const now = new Date();
    const currentYear = now.getFullYear();
    const currentMonth = now.getMonth();
    const currentDate = now.getDate();
    
    // 更新 Widget 标题
    const titleElement = document.getElementById('calendar-widget-title');
    if (titleElement) {
      titleElement.textContent = `${currentYear}${yearSuffix}${monthNames[currentMonth]}`;
    }
    
    // 获取月份的第一天是星期几
    const firstDayOfMonth = new Date(currentYear, currentMonth, 1).getDay();
    
    // 获取当月天数
    const daysInMonth = new Date(currentYear, currentMonth + 1, 0).getDate();
    
    // 生成日历格子
    const calendarGrid = document.getElementById('calendar-grid');
    if (!calendarGrid) return;
    
    const calendarDays = [];
    
    // 添加空白格子（月初空白）
    for (let i = 0; i < firstDayOfMonth; i++) {
      calendarDays.push({ day: null, hasPost: false, count: 0, dateKey: "" });
    }
    
    // 添加每一天
    for (let day = 1; day <= daysInMonth; day++) {
      const dateKey = `${currentYear}-${String(currentMonth + 1).padStart(2, '0')}-${String(day).padStart(2, '0')}`;
      const posts = postDateMap[dateKey] || [];
      const count = posts.length;
      calendarDays.push({
        day,
        hasPost: count > 0,
        count,
        dateKey
      });
    }
    
    // 渲染日历格子
    calendarGrid.innerHTML = calendarDays.map(({day, hasPost, count, dateKey}) => {
      const isToday = day === currentDate;
      const classes = [
        "calendar-day aspect-square flex items-center justify-center rounded text-sm relative cursor-pointer"
      ];
      
      if (!day) {
        classes.push("text-neutral-400 dark:text-neutral-600");
      } else if (!hasPost) {
        classes.push("text-neutral-700 dark:text-neutral-300");
      } else {
        classes.push("text-neutral-900 dark:text-neutral-100 font-bold");
      }
      
      if (isToday) {
        classes.push("ring-2 ring-[var(--primary)]");
      }
      
      return `
        <div
          class="${classes.join(' ')}"
          data-date="${dateKey}"
          data-has-post="${hasPost}"
        >
          ${day || ''}
          ${hasPost ? '<span class="absolute bottom-0 left-1/2 -translate-x-1/2 w-1 h-1 rounded-full bg-[var(--primary)]"></span>' : ''}
          ${hasPost && count > 1 ? `<span class="absolute top-0 right-0 text-[10px] text-[var(--primary)] font-bold">${count}</span>` : ''}
        </div>
      `;
    }).join('');
    
    // 获取当月所有文章
    const currentMonthPosts = allPostsData.filter(post => {
      const date = new Date(post.published);
      return date.getFullYear() === currentYear && date.getMonth() === currentMonth;
    });
    
    // 显示当月文章列表
    showMonthlyPosts(currentMonthPosts);
    
    // 添加点击事件监听
    setupClickHandlers(currentMonthPosts);
  }
  
  // 显示当月所有文章
  function showMonthlyPosts(currentMonthPosts) {
    const postsList = document.getElementById('calendar-posts-list');
    const divider = document.getElementById('calendar-posts-divider');
    
    if (postsList) {
      postsList.innerHTML = currentMonthPosts.map(post => `
        <a href="/posts/${post.id}/" class="block text-sm text-neutral-700 dark:text-neutral-300 hover:text-[var(--primary)] dark:hover:text-[var(--primary)] transition-colors truncate px-2 py-1 rounded hover:bg-[var(--btn-plain-bg-hover)]">
          ${post.title}
        </a>
      `).join('');
      
      // 显示/隐藏分割线
      if (divider) {
        divider.style.display = currentMonthPosts.length > 0 ? 'block' : 'none';
      }
    }
  }
  
  // 设置日历格子点击事件
  function setupClickHandlers(currentMonthPosts) {
    const calendarDays = document.querySelectorAll('.calendar-day[data-date]');
    const postsList = document.getElementById('calendar-posts-list');
    const divider = document.getElementById('calendar-posts-divider');
    
    let currentSelectedDay = null;
    
    calendarDays.forEach(dayElement => {
      dayElement.addEventListener('click', () => {
        const dateKey = dayElement.getAttribute('data-date');
        const hasPost = dayElement.getAttribute('data-has-post') === 'true';
        
        if (!hasPost || !dateKey) return;
        
        // 切换选中状态
        if (currentSelectedDay === dayElement) {
          // 取消选中，恢复显示当月所有文章
          dayElement.classList.remove('bg-[var(--primary)]', 'bg-opacity-10');
          currentSelectedDay = null;
          showMonthlyPosts(currentMonthPosts);
          return;
        }
        
        // 移除之前选中的样式
        if (currentSelectedDay) {
          currentSelectedDay.classList.remove('bg-[var(--primary)]', 'bg-opacity-10');
        }
        
        // 添加选中样式
        dayElement.classList.add('bg-[var(--primary)]', 'bg-opacity-10');
        currentSelectedDay = dayElement;
        
        // 获取该日期的文章
        const posts = postDateMap[dateKey] || [];
        
        if (posts.length > 0 && postsList) {
          // 渲染文章列表
          postsList.innerHTML = posts.map(post => `
            <a href="/posts/${post.id}/" class="block text-sm text-neutral-700 dark:text-neutral-300 hover:text-[var(--primary)] dark:hover:text-[var(--primary)] transition-colors truncate px-2 py-1 rounded hover:bg-[var(--btn-plain-bg-hover)]">
              ${post.data.title}
            </a>
          `).join('');
          
          // 显示分割线
          if (divider) {
            divider.style.display = 'block';
          }
        }
      });
    });
  }
  
  // 页面加载时渲染日历
  renderCalendar();
  
  // 每天午夜更新一次日历（可选）
  const now = new Date();
  const tomorrow = new Date(now.getFullYear(), now.getMonth(), now.getDate() + 1);
  const msUntilMidnight = tomorrow.getTime() - now.getTime();
  
  setTimeout(() => {
    renderCalendar();
    // 之后每24小时更新一次
    setInterval(renderCalendar, 24 * 60 * 60 * 1000);
  }, msUntilMidnight);
})();</script>  </div> <!-- 粘性组件区域 -->  </div> <!-- 响应式样式和JavaScript -->  <script type="module" src="/_astro/RightSideBar.astro_astro_type_script_index_0_lang.C9B9WSjj.js"></script></div> <main id="swup-container" class="transition-swup-fade overflow-hidden w-full col-span-1 row-start-1 row-end-2 col-span-1 row-start-1 row-end-2 lg:col-start-2 lg:col-end-3 lg:col-start-2 lg:col-end-3 transition-main" data-astro-cid-haiuh7kc> <div id="content-wrapper" class="onload-animation transition-leaving" data-astro-cid-haiuh7kc> <!-- the overflow-hidden here prevent long text break the layout--> <!-- make id different from windows.swup global property -->    <script type="module" src="/_astro/_...slug_.astro_astro_type_script_index_0_lang.IiygoCjM.js"></script> <div class="flex w-full rounded-[var(--radius-large)] overflow-hidden relative mb-4"> <div id="post-container" class="card-base z-10 px-6 md:px-9 pt-6 pb-4 relative w-full "> <!-- word count and reading time --> <div class="flex flex-row text-black/30 dark:text-white/30 gap-5 mb-3 transition onload-animation"> <div class="flex flex-row items-center"> <div class="transition h-6 w-6 rounded-md bg-black/5 dark:bg-white/10 text-black/50 dark:text-white/50 flex items-center justify-center mr-2"> <svg width="1em" height="1em" data-icon="material-symbols:notes-rounded">   <symbol id="ai:material-symbols:notes-rounded" viewBox="0 0 24 24"><path fill="currentColor" d="M4 18q-.425 0-.712-.288T3 17t.288-.712T4 16h10q.425 0 .713.288T15 17t-.288.713T14 18zm0-5q-.425 0-.712-.288T3 12t.288-.712T4 11h16q.425 0 .713.288T21 12t-.288.713T20 13zm0-5q-.425 0-.712-.288T3 7t.288-.712T4 6h16q.425 0 .713.288T21 7t-.288.713T20 8z"/></symbol><use href="#ai:material-symbols:notes-rounded"></use>  </svg> </div> <div class="text-sm"> 336  字 </div> </div> <div class="flex flex-row items-center"> <div class="transition h-6 w-6 rounded-md bg-black/5 dark:bg-white/10 text-black/50 dark:text-white/50 flex items-center justify-center mr-2"> <svg width="1em" height="1em" data-icon="material-symbols:schedule-outline-rounded">   <symbol id="ai:material-symbols:schedule-outline-rounded" viewBox="0 0 24 24"><path fill="currentColor" d="M13 11.6V8q0-.425-.288-.712T12 7t-.712.288T11 8v3.975q0 .2.075.388t.225.337l3.3 3.3q.275.275.7.275T16 16t.275-.7t-.275-.7zM12 22q-2.075 0-3.9-.788t-3.175-2.137T2.788 15.9T2 12t.788-3.9t2.137-3.175T8.1 2.788T12 2t3.9.788t3.175 2.137T21.213 8.1T22 12t-.788 3.9t-2.137 3.175t-3.175 2.138T12 22m0-2q3.325 0 5.663-2.337T20 12t-2.337-5.663T12 4T6.337 6.338T4 12t2.338 5.663T12 20"/></symbol><use href="#ai:material-symbols:schedule-outline-rounded"></use>  </svg> </div> <div class="text-sm"> 2  分钟 </div> </div> </div> <!-- title --> <div class="relative onload-animation"> <div data-pagefind-body data-pagefind-weight="10" data-pagefind-meta="title" class="transition w-full block font-bold mb-3
                    text-3xl md:text-[2.25rem]/[2.75rem]
                    text-black/90 dark:text-white/90
                    md:before:w-1 before:h-5 before:rounded-md before:bg-[var(--primary)]
                    before:absolute before:top-[0.75rem] before:left-[-1.125rem]"> Encrypted Post </div> </div> <!-- metadata --> <div class="onload-animation"> <div class="flex flex-wrap text-neutral-500 dark:text-neutral-400 items-center gap-4 gap-x-4 gap-y-2"> <!-- publish date --> <div class="flex items-center"> <div class="meta-icon"> <svg width="1em" height="1em" class="text-xl" data-icon="material-symbols:calendar-today-outline-rounded">   <symbol id="ai:material-symbols:calendar-today-outline-rounded" viewBox="0 0 24 24"><path fill="currentColor" d="M5 22q-.825 0-1.412-.587T3 20V6q0-.825.588-1.412T5 4h1V3q0-.425.288-.712T7 2t.713.288T8 3v1h8V3q0-.425.288-.712T17 2t.713.288T18 3v1h1q.825 0 1.413.588T21 6v14q0 .825-.587 1.413T19 22zm0-2h14V10H5zM5 8h14V6H5zm0 0V6z"/></symbol><use href="#ai:material-symbols:calendar-today-outline-rounded"></use>  </svg> </div> <span class="text-50 text-sm font-medium">2024-01-15</span> </div> <!-- update date -->  <!-- categories --> <div class="flex items-center"> <div class="meta-icon"> <svg width="1em" height="1em" class="text-xl" data-icon="material-symbols:book-2-outline-rounded">   <symbol id="ai:material-symbols:book-2-outline-rounded" viewBox="0 0 24 24"><path fill="currentColor" d="M6 15.325q.35-.175.725-.25T7.5 15H8V4h-.5q-.625 0-1.062.438T6 5.5zM10 15h8V4h-8zm-4 .325V4zM7.5 22q-1.45 0-2.475-1.025T4 18.5v-13q0-1.45 1.025-2.475T7.5 2H18q.825 0 1.413.587T20 4v12.525q0 .2-.162.363t-.588.362q-.35.175-.55.5t-.2.75t.2.763t.55.487t.55.413t.2.562v.25q0 .425-.288.725T19 22zm0-2h9.325q-.15-.35-.237-.712T16.5 18.5q0-.4.075-.775t.25-.725H7.5q-.65 0-1.075.438T6 18.5q0 .65.425 1.075T7.5 20"/></symbol><use href="#ai:material-symbols:book-2-outline-rounded"></use>  </svg> </div> <div class="flex flex-row flex-nowrap items-center"> <a href="/archive/?category=Technology" aria-label="View all posts in the Technology category" class="link-lg transition text-50 text-sm font-medium
                            hover:text-[var(--primary)] dark:hover:text-[var(--primary)] whitespace-nowrap"> Technology </a> </div> </div> <!-- word count -->  <!-- tags (只有在不显示基本元数据时才显示) --> <div class="items-center flex"> <div class="meta-icon"> <svg width="1em" height="1em" class="text-xl" data-icon="material-symbols:tag-rounded">   <symbol id="ai:material-symbols:tag-rounded" viewBox="0 0 24 24"><path fill="currentColor" d="m9 16l-.825 3.275q-.075.325-.325.525t-.6.2q-.475 0-.775-.375T6.3 18.8L7 16H4.275q-.5 0-.8-.387T3.3 14.75q.075-.35.35-.55t.625-.2H7.5l1-4H5.775q-.5 0-.8-.387T4.8 8.75q.075-.35.35-.55t.625-.2H9l.825-3.275Q9.9 4.4 10.15 4.2t.6-.2q.475 0 .775.375t.175.825L11 8h4l.825-3.275q.075-.325.325-.525t.6-.2q.475 0 .775.375t.175.825L17 8h2.725q.5 0 .8.387t.175.863q-.075.35-.35.55t-.625.2H16.5l-1 4h2.725q.5 0 .8.388t.175.862q-.075.35-.35.55t-.625.2H15l-.825 3.275q-.075.325-.325.525t-.6.2q-.475 0-.775-.375T12.3 18.8L13 16zm.5-2h4l1-4h-4z"/></symbol><use href="#ai:material-symbols:tag-rounded"></use>  </svg> </div> <div class="flex flex-row flex-nowrap items-center">  <div class="hidden mx-1.5 text-[var(--meta-divider)] text-sm">/</div> <a href="/archive/?tag=Test" aria-label="View all posts with the Test tag" class="link-lg transition text-50 text-sm font-medium
                                        hover:text-[var(--primary)] dark:hover:text-[var(--primary)] whitespace-nowrap"> Test </a>  <div class="mx-1.5 text-[var(--meta-divider)] text-sm">/</div> <a href="/archive/?tag=Encryption" aria-label="View all posts with the Encryption tag" class="link-lg transition text-50 text-sm font-medium
                                        hover:text-[var(--primary)] dark:hover:text-[var(--primary)] whitespace-nowrap"> Encryption </a>   </div> </div> <!-- 访问量（首页不显示，且umami.enabled为true时显示） -->  </div> <!-- 只有在非首页且启用umami且有slug时才加载脚本 -->  <div class="mt-4 border-[var(--line-divider)] border-dashed border-b-[1px] mb-5"></div> </div> <!-- always show cover as long as it has one -->  <div id="password-protection" class="password-protection" data-astro-cid-732embm3> <div class="password-container" data-astro-cid-732embm3> <div class="lock-icon" data-astro-cid-732embm3> <svg width="48" height="48" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" data-astro-cid-732embm3> <path d="M18 8h-1V6c0-2.76-2.24-5-5-5S7 3.24 7 6v2H6c-1.1 0-2 .9-2 2v10c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V10c0-1.1-.9-2-2-2zM9 6c0-1.66 1.34-3 3-3s3 1.34 3 3v2H9V6z" fill="currentColor" data-astro-cid-732embm3></path> </svg> </div> <h2 data-astro-cid-732embm3>此内容受密码保护</h2> <p data-astro-cid-732embm3>请输入密码以查看受保护的内容</p> <div class="password-input-group" data-astro-cid-732embm3> <input type="password" id="password-input" placeholder="请输入密码" class="password-input" data-astro-cid-732embm3> <button id="unlock-btn" class="unlock-button" data-astro-cid-732embm3>解锁</button> </div> <div id="error-message" class="error-message" style="display: none;" data-astro-cid-732embm3>密码错误，请重试</div> </div> </div> <div id="decrypted-content" class="decrypted-content" style="display: none;" data-astro-cid-732embm3></div>  <script>(function(){const encryptedContent = "U2FsdGVkX1+Q8rgXGq9VbFuHnqHjuluzgVDVxfd8Aqj3fIt0k+qLL0QWo9wdRor/g5BBguBkzHUjzsLIuWh2hQrd1HZdrzSz2YO6v2shv2aF1m8RY7xYO13/mq0+yhh8NbxMqFbGZ8ykDVapGjyubidbXsyx74L9d3pTDxahchGreIjS2N7eox8/aCGk1484h+xMYLTCx/WeieQzhe/fyuOY5b98ShmIl9n98BPUDSor8t2jFE6rJAZs/QH6UA4JODakMfS8gWymooexlEe6Ufmi0U5kG+4R9vMbt2Ug2p6QoJFyFGDD/GLvlIm+WR2pyF6j7Ce2cTQCCROYg3mRYUdMe6sSEooEHHDRcLlfy9t968za3+whFXWkqDjQkBtpI0ZemhFWoUkHPUPL7Y3h8xj64lFnlymg3Bx3d6jYd0HyMSROxiKGkhpYeeq1hnkxFrd93Na+jU0dDPiQIGPvo67U21kn7gEnP5AoJkv3Bmy19s2e3CxCzVf6xyJ1JRk63dBRe8l5aK54RQbSuOS0FDJJz2i+JCylz8A4xTsfg2a8ZpXAuX/Vy/nQvRI2a6xprnZ15K6jb1HUidf1xZMh+NuXq++MjJj93ZTuuVGx1DNSkaXLC2YtKF9MgrVF+3Wf1BmSXCbZ2w6Neh/yJYs4t/Z0bBE/2Dr3lx5HHcfQa+mk49L7W1T1C3J1PMu1io2Xp4byZVKqIMp/tZD7qT/w0d+AtitSmhJqocZaOox1sLsuKu1KV+0C8/89ZHYfFdkxEbt66MpgDzP1PqC2qEG/KPX9ZTAug0byafIwD9bEWqP2AeutBA9rWzB8MNpSBYb4k/kaQUencORxrCQwGns400V2sz5/5gosCZePcT5yI9TINXzCOqCDpRmKG3lK7Wu8ojO14RyH6JDZyMWbHjRIMl9tPl7fa5XNHW7sDYf0/QMSBgZhZ2EEp38N8OsjHro5JQKgZ2FU/Kl+Hz5kqd6xOKtUw7fd0kLIdm9HrIHZH9TDFal1aHxUgWivnrqBMjCt6H2DFddSzty5AiiUnnAljhqyLA27mkoSDw3E7I7w+juN1FJ098YWBIKj5oBZl9Fszl4AzYecJigM/Bow7kSp6pka8i0P90cYRl6gRvyIWE/DJd+dvsL9C9MsUgShr6JbMmAlpNJGNz7ORN7XcO3HbXx9Z8RFdVscmbBV/AaBNKl4fgjINqUD5+JSOxFTMFc23GmFMZ3l783MYpHlWZmeroNJDhhecfU2X4pxEAptL/WaPOxWX08YDmHfAeiBfceV2LuQ6X7OU2q7dj/hUigXAN1ffmzmjNJJkQvM5zzl7yauDqLUeykxD18BN5JyjGhJbfxCyD1q/peATE77UfZwPE4L5vFOBc+UoN1LkSr39enp1xuIYa/KrahNgHteIdhdqJgKTXqF9GBG7TGFj6BoRRl3Dvgybfs5Z2pi/o8eB/LOn2ZYjA4GTl1ReVEk5un8zrgKKLCHfVcsG9QSM6dTRAAUz4+eVLtuYCAMown87+2YEYfGjF7PyiHWZpnyVND/Ud/S/x/6CD6FlySv6iM+6RsBH4SFQ46OHP7RAhZ3LPgt+8iP/M1uVg33pch4ZGut1gGmgEqPGO1kWjbv7zyfTH+qle4YX52yMH6D+guWpgzxZutRpZSxjSscnWSzVcHAb5BlmSdV50W+j9exbpyGmHGR5XQhV3c53NlW0uymeo8oMkkFZQE4QXgU+owsuJqN3qCWQ5taSraqvB9Xymbu23Ij56U1mU4a+vWt3WiTjEBtMweKCikPmJkzcR4ve7cCIgF+i6qqQX41ID/c0uI3q9EePO0SM1rQpaeICk4eeLQLxIxzRU5fi94+ABqzWPb8XBD4PKNVY67lfF4Dksw0nEMpFPbmKIPHvTEO6W0CFXtbxE/sZaVn8gYuievZBQvh48/Jv+GpIyECtqQ/mlqbngnNdaFRltdydnXoQGG2idayxEVSwoB+RGCuKlPZkx3+ukQGvDzTsF0+0ziToZbdH6GDw7jhHjJ/a9WBztN4zutjEjXyN/QS2SVR5IOEfbFdQISiK4JrSssRS480o1C6q2FSx9kZnUX45wr5dz9Jbgc1pXsk5JG4iH3F/UCt4yDx363DW7dfrHxV1D51kLyRhMgw+S58Rtb97HYGiUROHLod0QAeokjzVRdfkhuilLWWB8de9xLOgW+fpQQj2CnOFXz5EPObdidLJIdPHlbz+pxmDvwLIMA4pRFFMIzbI92mp041MGtxli2OvXcPICVzQMZoT0TQ6HPdStZv8lQJ7bTls5BGNuZN14qXp7KT01II6t+ejYHp62CR53UCmTnBEH8l+7M1vyDc3RikSYMGwohUk4Bo5ziQHFSIi2cmMvxbUKGhH33MiphigAg8K7tyZTnQfCzF7ly/E4zDulDPp7d4HKHvs2sZbGPOLkX3qC5h7WHuCJcnTkY9MsaYZeoSeuoWUutpxwx8+H8M98vKFRkss96OHqotfhzbOxjxemCKpHmNOIFXiEnlIq7u5RJ6Xp2eRUJWPrQvoBilvxiW74AN2KrvqEzGcgKvIwWVEEt0gHz0Cc7Rb4bKIbcY4dIiUCbPRJRWRcRViiVFNyIw+sQ/GEOy87MbWFazAfadANCGU2YgIiSuE0Gw3/RAdN5M56aIYFVAPPGkNnbLcWz6WAfdM9vYjiIJ00mhLDo/1YB2Mq8Bi3Yl/Tr+6ciU8mImR5SouSRS3krzbMXDy6YwoGtgbX738ACCObnO7W/Y+cDEziNTDEOvAl/zBGNKiNoB7/ffXNIofdggaAYSGjhq0fCpXV+Tb5N791hpvywCXFGX5LXHeXhgH5SZxEdtY6DO/iOsDOI/VQp5ocek6NT6AkUpWnPafzTL6aaIXj+zLOxuMwDRMhComoVeQO8uakkF6aM3zeQ90/yngYBAfTCAUdcQCbzlSQI52Hdp02IYWiJnvAS09I1Kqk3II0RpQLQ7/NZ1FdJN7MZtPS2gbfJS+lZK5+LmzpaO61MLW4oFBICNDmpttfZIntGE0m5mVNpxQZA6Ff3NtCmbTW/Kx+Dd19IPs27jNlgn1m9WYuZb0XVzOcirlKS21lXp0bxBS60uEd2HSsTxaK1TUMz+JcY6P5FnfNRa+WzWgqjv2MlL2Q7q5KC6TdJ+It2qBG3yhI9vC41slr26tQ63G9Jodpd0BUtT9AstQstLsqgLjp3S0rEoNTkXu0BoSm5y1jqPKDFhDmx6q0yw/5HjoJjZwK0WaerGxpsUnpbuS2hf+I9Rkvh9Ic3ITanY+Kz0unZY1040yY11hlZvUKt9cM7HzKJOjrLCMDRje1CQCpM/PR12ns3bX+OHnCw38A0OZPUQ34/5AdPPT3S0nRpvU83Ec+oDdiI93dMyQlHxda70jnlGT3U4NBivHR1RGo4cPDN1Ezv0lbSpiGk71ekcbD2+DblTua00M8QyaGAByGTlI1NGBV7SYNZQPLUBxT31+EpnJe9cloJTACshCbUyyruz0L8pwsufGEK1eBVOTgBN4+N+25DubHrxvrG0kCSIPdUo8C66avK2EW5MPBsRM0c6xFNid9LwPyzfLAfWyA82JV8qr1xkvWbKPnpkknqaHc4VV9vwfPC7qs4NvUjP85r7nRRioVlnM+Aiii26Rhf2AxgFyRR82TgN4qbxb5Ud9SyhNAnbG4A8pHEUHo9vUME16JtI9J/7ArnxiR/W/Sho6oQu2j1pWbI7I2x4opIAsngp+2nze3QKqu5FLMdhGEYEG7hpOYnLlpF3KpP3UlODUKIEOu6GQF80ZEl022AT+pT9qYsYI09fkqZ3JUd4Nim4ET25kTRyypQ1i7sfTaRR5l7pVvQZTqz4auE0zQYoLkqO/4VcXtgduDYwnpfOUgh87+zbL1N65BIg1r/11jjwWffFb8nDG2VJyAmL/hV9BlqPYsFxIphBepbfkDs0G0W9ALaN2tNawHAWQMZUi2gn5DbPq0MsMJ767VlWJv++6JXTMDJGnaizone9yioGo/NToaEFyxR68NOwNvXNCk982wBR0lfaoQcF9p88nmg1Y1EhmJ+w8/PBT92dAJpzSYaKnTefKmoMQ5QZX+HewKOe3fYVav3kCyCPW9SQAxYvCMiI/KDPrjFgbUxungYGEW72WnuIWdVi4Id2tTWYoytpdGQ5LL4mjK/kTbLE5AfvfpUTBf6gUjKK4B/p8DBbejH+lrAdMlPd0ohBqOYR/hJJ7zBw7oSAF1CfWNXSt7VJUXzrvuEjl7/In5iLWFFkWMURQ2TLLyrUUznJ41Ls6PeoqdlbSkOLJ7hqpnqDUL/MBXGDFcI1wEyGtDOcF7/oyp4vc+tC+sCy/1TAi3lUqxv6GUfoJD6yPWS1Eu0WZdFXeG1eVmlyqytOqAN9I+y3pJD0mkK1/CmawnWC41X+gYkHowRHm7okaJSm0eORlSYl1yAVr/5fYoEDwPkgnFBUew2WWY3aCuKHuWkTDu5rGYDERgkz/utAcHdFMf6ZqcPKmkOJqpLc8He30ro4vjXk+NyOocmjnlGMKjxFHyPkqllT9llPgvfUzgrwiKx5NTgWnNbBOSeySPwnxrPu2Ec/4gOXjf5A1nNgUOHbVwGr07NbJj2XJP4H6IxqgvRyLgbtywZcOKqekKi4iZ/lbTg9WS5NwKe/wcW8bdOjjDpZFmFQ/6peoQX8+499+4UiTqvGDmf5Jv9GUhunh5nW3dSOsBJmXgbyahzkv+Gycs6o8yN+bk2/O+u+XaIC709IsWD2zsxqoF3uLhHaXcZciMqSHs+7Kdg2EIac1rKzbBWCXC1NJojuIpw34PqgiF+aHKmdZEIUukc9oQhjqrzY2fiFh3R+cgKE+V4CPhJSTkQjqhmPwsleUzfS3AhK6LjvfUsSU7vToZ5FdRs9YcMuGjNpJtaK1nz4CLIuY9WvdnA/OCxLJKKv7hcIOqHGLHDzBACDI7zW8zzBVR0lW4ZypGqsYpvA2LA2oyB9+DWHrbOlCKBxrImgV5TxkQMhW2TdvQrbtKjLmXuvrbCc5ugofgOwBu4pxsMWTuwjt11pijFKC/KxjmgzZ7SOaIMil/rUxXZ1Bht+GpYNNE2kFyJXBfpCDIKwEhVKtTi86pr7oQuSzDH/KR5NlIsAu6nCqSK0EVwLCg2O/tiai3+jKJ5PdtdJiTobo0OawDzgT9UF2ulnlvg7ezMxCJ0a0G0iM+PP0xEu6cSC0DyYJx+8e00W6NR7enrqekoV0UW3Q+phkiTZiA5yZ2qTrjfyitm0a55qvnU1XUy1kpdVRsYZyguR/deQiFI29t2Be045v9hkpChRNdXc6i8c9W65qSUDJ2BB4bgjK5z44qvHZl1KViwJkQzjsoklQhEpmOt//eVzDGTgV/l/2/mNC/ummrcZqO37Hiu8UNyEuNVc/Yorp56hQKOT29MPJfjOlWbcxiDjeuvMEMf6gQtkmoQSh1x9qUdFyFvsjmiu23TfAVflow61tB33vXAQh4UcbiJKn3z4ga85HC0RJshu1137/kyF4H0gKi3o/nRsf64Og83X/5IpD94EjS+HN9im3VoBk3XtWFpGuxmiEPaJ0+Wt/QgjyhxIpQNjZCAYSoDaWk+IsSD3qABsK6TWGKixal9gTMP6B2jpZm7KtgHhpUgzR+f9nbyK9BS5AkB0cMbL0ItraHm21jlHoij8dOYZSNLZZDL9AoHDxWS4H7ojdpVp66vo7O9jtqTh/i1FDMyWs0gBNJKryd1MgZs9JFJD8aHJqVZhfZXkDcl6cXCHDqqjj4ShL84m+UjhwFbOnZ8TYzxgf9Oit5qi/tP8+smS1I3nqrxDpGKXsF/maKVtdcbLTlaYWnB5hlSOGWV6mWhhNEhDQDEPqPPy1oSShjO/nBV+BY5sFD2wZbdxknRf+pGZzxDXVVc+iqj3Myuatq3UDV1n0KQ1SdYzzrKzC/Ntdj4gr632I2F5pzTyYr2ohQ+3DC4vEj0PdNQNhUdEPT6sryHl3kBi2W/Ka3nF5O+swvJMXXCK14xNFJXA6DAowVlT7ly8QUeTMcYsnA992b+FusStACvCkjsN0UwF2e2O0vfvoQRU3k6a8twk/A8ATPH9beb/R+SbxCZu+g60jK/fBPfkwyxXIgRX+kvVem9c54LWnUQWr0lqiTMIvc7tyf0Li3WWrgD99n4XXGpF0WQ6bi94oby0dd8hE+zpVAv63+T/IlQ25hmXGKKBSr+ENtYVXakvrO3VsJOLBTmx8Y8c/uAvinSENlP4P3DLI4W0NXcBGifUTRhuvXNyJ8PSXr+Cb4ga0hRpKeTBtw3X3E5+8sP1fxKNig9hbie5Zgcfvi8YMHUtGkp8dJzzjW19dqT/PVeSqQl8HrAK+SkYzcccZqLzG9FZFan9x/Ktr6MX96U3G4ELSVclzbqB/8NNYnwWyUHmjKt5stlZC7NQQKLnh499JZ/k/k6vXsI30m0xIvmkNoJtKGUDRBCfUyIsd+B6V4cdgA/uCk28agMbwnOInfH0lbsej1pc3ydHQEJ7zBOFZIUvqHi0jPnLuFf1xXr10TAxyDEIpD8nbCHQs8K6t7wUsXKrvUt03S4wYWvM3iiZhbGyqPQenqqgsgH7W6QQIIGub2XYnCDy7EYMuyYvUA==";
const passwordHash = "$2b$12$1gdrQ7/Ci5SWHwtlnyECeuNNZtZv2m4jmKLUioWueY/jNw5ywqx.W";
const i18nUnlocking = "解锁中...";
const i18nIncorrect = "密码错误，请重试";
const i18nDecryptError = "解密失败，请检查密码是否正确";
const i18nUnlock = "解锁";
const i18nCopyFailed = "复制失败:";
const i18nPasswordRequired = "请输入密码";
const i18nDecryptionError = "解密过程中发生错误:";
const i18nPasswordDecryptRetry = "解密失败，请重试";

  // 导入加密库 - 使用本地文件
  async function loadCryptoLibraries() {
    if (typeof CryptoJS === 'undefined') {
      await new Promise((resolve, reject) => {
        const script = document.createElement('script');
        script.src = '/assets/js/crypto-js.min.js';
        script.onload = resolve;
        script.onerror = reject;
        document.head.appendChild(script);
      });
    }
    
    if (typeof bcrypt === 'undefined') {
      await new Promise((resolve, reject) => {
        const script = document.createElement('script');
        script.src = '/assets/js/bcrypt.min.js';
        script.onload = resolve;
        script.onerror = reject;
        document.head.appendChild(script);
      });
    }
  }

  // 加载语法高亮库
  async function loadSyntaxHighlighter() {
    if (typeof hljs === 'undefined') {
      await new Promise((resolve, reject) => {
        const script = document.createElement('script');
        script.src = '/assets/js/highlight.min.js';
        script.onload = resolve;
        script.onerror = reject;
        document.head.appendChild(script);
      });
      await new Promise(resolve => setTimeout(resolve, 100));
    }
  }

  // 为代码块添加样式和功能的函数 - 使用highlight.js进行语法高亮，但使用全局expressive-code样式
  async function enhanceCodeBlocks(container) {
    // 加载语法高亮库
    await loadSyntaxHighlighter();
    
    const codeBlocks = container.querySelectorAll('pre code');
    
    codeBlocks.forEach(codeElement => {
      const preElement = codeElement.parentElement;
      if (!preElement) return;
      
      // 获取语言信息
      const className = codeElement.className || '';
      const langMatch = className.match(/language-(\w+)/);
      const language = langMatch ? langMatch[1] : 'text';
      
      // 获取原始代码文本
      const codeText = codeElement.textContent || '';
      
      // 使用 highlight.js 进行语法高亮
      let highlightedCode = codeText;
      if (typeof hljs !== 'undefined') {
        try {
          if (language && language !== 'text') {
            const result = hljs.highlight(codeText, { language: language });
            highlightedCode = result.value;
          } else {
            const result = hljs.highlightAuto(codeText);
            highlightedCode = result.value;
          }
        } catch (e) {
          console.warn('Syntax highlight failed:', e);
          highlightedCode = codeText;
        }
      }
      
      // 创建expressive-code样式的包装结构
      const wrapper = document.createElement('div');
      wrapper.className = 'expressive-code';
      
      const frame = document.createElement('div');
      frame.className = 'frame';
      
      // 创建新的pre元素
      const newPre = document.createElement('pre');
      newPre.className = 'astro-code';
      newPre.setAttribute('data-language', language);
      newPre.setAttribute('tabindex', '0');
      
      // 创建新的code元素
      const newCode = document.createElement('code');
      newCode.className = `language-${language}`;
      
      // 将高亮后的代码按行分割并添加.line类（模拟expressive-code的行结构）
      const lines = highlightedCode.split('\n');
      lines.forEach((line, index) => {
        const lineSpan = document.createElement('span');
        lineSpan.className = 'line';
        lineSpan.innerHTML = line || ' '; // 空行也要保留
        newCode.appendChild(lineSpan);
        
        // 除了最后一行，都添加换行符
        if (index < lines.length - 1) {
          newCode.appendChild(document.createTextNode('\n'));
        }
      });
      
      newPre.appendChild(newCode);
      
      // 将 pre 从原位置移除并重新包装
      const parent = preElement.parentNode;
      parent.insertBefore(wrapper, preElement);
      parent.removeChild(preElement);
      
      frame.appendChild(newPre);
      
      // 添加复制按钮
      const copyBtn = document.createElement('button');
      copyBtn.className = 'copy-btn';
      copyBtn.setAttribute('aria-label', 'Copy code');
      copyBtn.setAttribute('type', 'button');
      
      const copyBtnIcon = document.createElement('div');
      copyBtnIcon.className = 'copy-btn-icon';
      
      // 复制图标SVG
      const copyIcon = document.createElementNS('http://www.w3.org/2000/svg', 'svg');
      copyIcon.setAttribute('viewBox', '0 -960 960 960');
      copyIcon.setAttribute('class', 'copy-btn-icon copy-icon');
      const copyPath = document.createElementNS('http://www.w3.org/2000/svg', 'path');
      copyPath.setAttribute('d', 'M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-557.26h83v557.26h461.26v83H213.37Z');
      copyIcon.appendChild(copyPath);
      
      // 成功图标SVG
      const successIcon = document.createElementNS('http://www.w3.org/2000/svg', 'svg');
      successIcon.setAttribute('viewBox', '0 -960 960 960');
      successIcon.setAttribute('class', 'copy-btn-icon success-icon');
      const successPath = document.createElementNS('http://www.w3.org/2000/svg', 'path');
      successPath.setAttribute('d', 'm389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z');
      successIcon.appendChild(successPath);
      
      copyBtnIcon.appendChild(copyIcon);
      copyBtnIcon.appendChild(successIcon);
      copyBtn.appendChild(copyBtnIcon);
      
      // 复制功能 - 使用与全局一致的逻辑
      copyBtn.addEventListener('click', async () => {
        try {
          // 获取所有.line元素的文本内容（不包括行号）
          const lineElements = newCode.querySelectorAll('.line');
          const code = Array.from(lineElements)
            .map(el => el.textContent)
            .join('\n');
          
          await navigator.clipboard.writeText(code);
          copyBtn.classList.add('success');
          
          const timeoutId = copyBtn.getAttribute('data-timeout-id');
          if (timeoutId) {
            clearTimeout(parseInt(timeoutId));
          }
          
          const newTimeoutId = setTimeout(() => {
            copyBtn.classList.remove('success');
          }, 1000);
          
          copyBtn.setAttribute('data-timeout-id', newTimeoutId.toString());
        } catch (err) {
          console.error(i18nCopyFailed, err);
        }
      });
      
      frame.appendChild(copyBtn);
      wrapper.appendChild(frame);
    });
  }

  // 为标题添加id和锚点链接的函数
  function addHeadingAnchors(container) {
    const headings = container.querySelectorAll('h1, h2, h3, h4, h5, h6');
    const usedIds = new Set();
    
    headings.forEach(heading => {
      // 生成slug id（模拟rehype-slug功能）
      let slug = heading.textContent
        .toLowerCase()
        .trim()
        .replace(/[^\w\s-]/g, '') // 移除特殊字符
        .replace(/[\s_-]+/g, '-') // 替换空格和下划线为连字符
        .replace(/^-+|-+$/g, ''); // 移除开头和结尾的连字符
      
      // 确保id唯一
      let uniqueSlug = slug;
      let counter = 1;
      while (usedIds.has(uniqueSlug)) {
        uniqueSlug = `${slug}-${counter}`;
        counter++;
      }
      usedIds.add(uniqueSlug);
      
      // 设置id
      heading.id = uniqueSlug;
      
      // 添加锚点链接（模拟rehype-autolink-headings功能）
      const anchor = document.createElement('span');
      anchor.className = 'anchor-icon';
      anchor.setAttribute('data-pagefind-ignore', 'true');
      anchor.textContent = '#';
      
      const anchorWrapper = document.createElement('a');
      anchorWrapper.className = 'anchor';
      anchorWrapper.href = `#${uniqueSlug}`;
      anchorWrapper.appendChild(anchor);
      
      // 将锚点添加到标题末尾
      heading.appendChild(anchorWrapper);
    });
  }

  async function renderMarkdownContent(markdownText) {
    // 加载marked库用于markdown渲染 - 使用本地文件
    if (typeof marked === 'undefined') {
      await new Promise((resolve, reject) => {
        const script = document.createElement('script');
        script.src = '/assets/js/marked.min.js';
        script.onload = resolve;
        script.onerror = reject;
        document.head.appendChild(script);
      });
    }
    
    // 配置marked的基本选项
    marked.setOptions({
      breaks: true,
      gfm: true
    });
    
    const contentDiv = document.getElementById('decrypted-content');
    const htmlContent = marked.parse(markdownText);
    
    // 创建与正常文章完全相同的结构
    const markdownWrapper = document.createElement('div');
    markdownWrapper.className = 'prose dark:prose-invert prose-base !max-w-none custom-md mb-6 markdown-content onload-animation';
    markdownWrapper.setAttribute('data-pagefind-body', '');
    markdownWrapper.innerHTML = htmlContent;
    
    // 为标题添加id和锚点链接（模拟rehype-slug和rehype-autolink-headings插件功能）
    addHeadingAnchors(markdownWrapper);
    
    // 为代码块添加样式和功能（异步，使用与全局一致的样式）
    await enhanceCodeBlocks(markdownWrapper);
    
    // 清空容器并添加新内容
    contentDiv.innerHTML = '';
    contentDiv.appendChild(markdownWrapper);
    
    // 重置contentDiv的样式，让它作为普通容器
    contentDiv.className = '';
    contentDiv.style.cssText = '';
    
    // 触发TOC更新
    const tocElement = document.querySelector('table-of-contents');
    if (tocElement && typeof tocElement.regenerateTOC === 'function') {
      // 等待DOM更新后重新生成TOC
      setTimeout(() => {
        tocElement.regenerateTOC();
        tocElement.init();
      }, 100);
    }
    
    // 触发移动端TOC更新
    if (typeof window.mobileTOCInit === 'function') {
      setTimeout(() => {
        window.mobileTOCInit();
      }, 150);
    }
    
    // 触发动画结束事件，让TOC知道动画完成
    const animationEndEvent = new Event('animationend');
    markdownWrapper.dispatchEvent(animationEndEvent);
  }

  async function initPasswordProtection() {
    await loadCryptoLibraries();
    
    const passwordInput = document.getElementById('password-input');
    const unlockBtn = document.getElementById('unlock-btn');
    const errorMessage = document.getElementById('error-message');
    const protectionDiv = document.getElementById('password-protection');
    const contentDiv = document.getElementById('decrypted-content');

    async function attemptUnlock() {
      const inputPassword = passwordInput.value.trim();
      
      if (!inputPassword) {
        showError(i18nPasswordRequired);
        return;
      }

      unlockBtn.disabled = true;
      unlockBtn.textContent = i18nUnlocking;
      errorMessage.style.display = 'none';

      try {
        // 验证密码
        const isPasswordCorrect = bcrypt.compareSync(inputPassword, passwordHash);
        
        if (!isPasswordCorrect) {
          showError(i18nIncorrect);
          return;
        }

        // 使用密码哈希的前32个字符作为解密密钥（与服务端加密逻辑一致）
        const encryptionKey = passwordHash.substring(0, 32);
        
        // 解密内容
        const decryptedBytes = CryptoJS.AES.decrypt(encryptedContent, encryptionKey);
        const decryptedContent = decryptedBytes.toString(CryptoJS.enc.Utf8);
        
        if (!decryptedContent) {
          showError(i18nDecryptError);
          return;
        }

        // 渲染markdown内容
        await renderMarkdownContent(decryptedContent);
        protectionDiv.style.display = 'none';
        contentDiv.style.display = 'block';
        
        // 保存解锁状态到sessionStorage（可选）
        sessionStorage.setItem('page-unlocked-' + window.location.pathname, 'true');
        
      } catch (error) {
        console.error(i18n(I18nKey.decryptionError), error);
        showError(i18n(I18nKey.passwordDecryptRetry));
      } finally {
        unlockBtn.disabled = false;
        unlockBtn.textContent = i18nUnlock;
      }
    }

    function showError(message) {
      errorMessage.textContent = message;
      errorMessage.style.display = 'block';
      passwordInput.focus();
    }

    // 事件监听
    unlockBtn.addEventListener('click', attemptUnlock);
    passwordInput.addEventListener('keypress', (e) => {
      if (e.key === 'Enter') {
        attemptUnlock();
      }
    });

    // 检查是否已经解锁过（可选功能）
    if (sessionStorage.getItem('page-unlocked-' + window.location.pathname) === 'true') {
      passwordInput.value = 'auto-unlock';
      // 这里可以添加自动解锁逻辑，但需要存储密码，不太安全
    }

    // 聚焦到密码输入框
    passwordInput.focus();
  }

  // 页面加载完成后初始化
  if (document.readyState === 'loading') {
    document.addEventListener('DOMContentLoaded', initPasswordProtection);
  } else {
    initPasswordProtection();
  }
})();</script> </div> </div>    <div id="last-modified" data-last-modified="2024-01-15T00:00:00" data-prefix="距离上次编辑: " data-year="年" data-month="月" data-day="天" data-hour="小时" data-minute="分" data-second="秒" style="display: none;"></div> <div class="card-base p-6 mb-4"> <script>
                    function runtime() {
                        const lastModifiedElement = document.getElementById('last-modified');
                        const startDate = new Date(lastModifiedElement.dataset.lastModified);
                        const currentDate = new Date();
                        const diff = currentDate - startDate;

                        const seconds = Math.floor(diff / 1000);
                        const days = Math.floor(seconds / 86400);
                        const hours = Math.floor((seconds % 86400) / 3600);
                        const minutes = Math.floor((seconds % 3600) / 60);
                        const secs = seconds % 60;

                        const years = Math.floor(days / 365);
                        const months = Math.floor((days % 365) / 30);
                        const remainingDays = days % 30;

                        const prefix = lastModifiedElement.dataset.prefix;
                        const yearKey = lastModifiedElement.dataset.year;
                        const monthKey = lastModifiedElement.dataset.month;
                        const dayKey = lastModifiedElement.dataset.day;
                        const hourKey = lastModifiedElement.dataset.hour;
                        const minuteKey = lastModifiedElement.dataset.minute;
                        const secondKey = lastModifiedElement.dataset.second;

                        let runtimeString = prefix + ' ';
                        
                        if (years > 0) {
                            runtimeString += `${years} ${yearKey} `;
                        }
                        if (months > 0) {
                            runtimeString += `${months} ${monthKey} `;
                        }
                        if (remainingDays > 0) {
                            runtimeString += `${remainingDays} ${dayKey} `;
                        }
                        runtimeString += `${hours} ${hourKey} `;
                        if (minutes < 10) {
                            runtimeString += `0${minutes} ${minuteKey} `;
                        } else {
                            runtimeString += `${minutes} ${minuteKey} `;
                        }
                        if (secs < 10) {
                            runtimeString += `0${secs} ${secondKey}`;
                        } else {
                            runtimeString += `${secs} ${secondKey}`;
                        }

                        document.getElementById("modifiedtime").innerHTML = runtimeString;
                    }
                    setInterval(runtime, 1000);
                </script> <div class="flex items-center gap-3"> <div class="flex items-center justify-center h-12 w-12 rounded-lg bg-[var(--enter-btn-bg)]"> <svg width="1em" height="1em" class="text-3xl text-[var(--primary)]" data-icon="material-symbols:history-rounded">   <symbol id="ai:material-symbols:history-rounded" viewBox="0 0 24 24"><path fill="currentColor" d="M12 21q-3.15 0-5.575-1.912T3.275 14.2q-.1-.375.15-.687t.675-.363q.4-.05.725.15t.45.6q.6 2.25 2.475 3.675T12 19q2.925 0 4.963-2.037T19 12t-2.037-4.962T12 5q-1.725 0-3.225.8T6.25 8H8q.425 0 .713.288T9 9t-.288.713T8 10H4q-.425 0-.712-.288T3 9V5q0-.425.288-.712T4 4t.713.288T5 5v1.35q1.275-1.6 3.113-2.475T12 3q1.875 0 3.513.713t2.85 1.924t1.925 2.85T21 12t-.712 3.513t-1.925 2.85t-2.85 1.925T12 21m1-9.4l2.5 2.5q.275.275.275.7t-.275.7t-.7.275t-.7-.275l-2.8-2.8q-.15-.15-.225-.337T11 11.975V8q0-.425.288-.712T12 7t.713.288T13 8z"/></symbol><use href="#ai:material-symbols:history-rounded"></use>  </svg> </div> <div class="flex flex-col gap-1"> <div id="modifiedtime" class="text-[1.0rem] leading-tight text-black/75 dark:text-white/75"></div> <p class="text-[0.8rem] leading-tight text-black/75 dark:text-white/75"> 部分信息可能已经过时 </p> </div> </div> </div> <div class="flex flex-col md:flex-row justify-between mb-4 gap-4 overflow-hidden w-full"> <a href="/posts/guide/" class="w-full font-bold overflow-hidden active:scale-95"> <div class="btn-card rounded-2xl w-full h-[3.75rem] max-w-full px-4 flex items-center !justify-start gap-4"> <svg width="1em" height="1em" class="text-[2rem] text-[var(--primary)]" data-icon="material-symbols:chevron-left-rounded">   <symbol id="ai:material-symbols:chevron-left-rounded" viewBox="0 0 24 24"><path fill="currentColor" d="m10.8 12l3.9 3.9q.275.275.275.7t-.275.7t-.7.275t-.7-.275l-4.6-4.6q-.15-.15-.212-.325T8.425 12t.063-.375t.212-.325l4.6-4.6q.275-.275.7-.275t.7.275t.275.7t-.275.7z"/></symbol><use href="#ai:material-symbols:chevron-left-rounded"></use>  </svg> <div class="overflow-hidden transition overflow-ellipsis whitespace-nowrap max-w-[calc(100%_-_3rem)] text-black/75 dark:text-white/75"> Simple Guides for Mizuki </div> </div> </a> <a href="/posts/markdown-mermaid/" class="w-full font-bold overflow-hidden active:scale-95"> <div class="btn-card rounded-2xl w-full h-[3.75rem] max-w-full px-4 flex items-center !justify-end gap-4"> <div class="overflow-hidden transition overflow-ellipsis whitespace-nowrap max-w-[calc(100%_-_3rem)] text-black/75 dark:text-white/75"> Markdown Mermaid </div> <svg width="1em" height="1em" viewBox="0 0 24 24" class="text-[2rem] text-[var(--primary)]" data-icon="material-symbols:chevron-right-rounded">   <use href="#ai:material-symbols:chevron-right-rounded"></use>  </svg> </div> </a> </div>  <div class="footer col-span-2 onload-animation hidden lg:block" data-astro-cid-haiuh7kc> <!--<div class="border-t border-[var(&#45;&#45;primary)] mx-16 border-dashed py-8 max-w-[var(&#45;&#45;page-width)] flex flex-col items-center justify-center px-6">--><div class="transition border-t border-black/10 dark:border-white/15 my-10 border-dashed mx-32"></div> <!--<div class="transition bg-[oklch(92%_0.01_var(&#45;&#45;hue))] dark:bg-black rounded-2xl py-8 mt-4 mb-8 flex flex-col items-center justify-center px-6">--> <div class="transition border-dashed border-[oklch(85%_0.01_var(--hue))] dark:border-white/15 rounded-2xl mb-12 flex flex-col items-center justify-center px-6"> <div class="transition text-50 text-sm text-center"> 
&copy; <span id="copyright-year">2025</span> hnugreycrow. All Rights Reserved. /
<a class="transition link text-[var(--primary)] font-medium" href="/rss/" onclick="event.preventDefault(); navigateToPage('/rss/')">RSS</a> /
<a class="transition link text-[var(--primary)] font-medium" href="/atom/" onclick="event.preventDefault(); navigateToPage('/atom/')">Atom</a> /
<a class="transition link text-[var(--primary)] font-medium" target="_blank" href="/sitemap-index.xml">Sitemap</a><br>
Powered by
<a class="transition link text-[var(--primary)] font-medium" target="_blank" href="https://astro.build">Astro</a> &
<a class="transition link text-[var(--primary)] font-medium" target="_blank" href="https://github.com/matsuzaka-yuki/mizuki">Mizuki</a>&nbsp; Version <a class="transition link text-[var(--primary)] font-medium" target="_blank" href="https://github.com/matsuzaka-yuki/mizuki">7.5</a><br> </div> </div> </div> </div> </main> <div class="footer col-span-2 onload-animation block lg:hidden" data-astro-cid-haiuh7kc> <!--<div class="border-t border-[var(&#45;&#45;primary)] mx-16 border-dashed py-8 max-w-[var(&#45;&#45;page-width)] flex flex-col items-center justify-center px-6">--><div class="transition border-t border-black/10 dark:border-white/15 my-10 border-dashed mx-32"></div> <!--<div class="transition bg-[oklch(92%_0.01_var(&#45;&#45;hue))] dark:bg-black rounded-2xl py-8 mt-4 mb-8 flex flex-col items-center justify-center px-6">--> <div class="transition border-dashed border-[oklch(85%_0.01_var(--hue))] dark:border-white/15 rounded-2xl mb-12 flex flex-col items-center justify-center px-6"> <div class="transition text-50 text-sm text-center"> 
&copy; <span id="copyright-year">2025</span> hnugreycrow. All Rights Reserved. /
<a class="transition link text-[var(--primary)] font-medium" href="/rss/" onclick="event.preventDefault(); navigateToPage('/rss/')">RSS</a> /
<a class="transition link text-[var(--primary)] font-medium" href="/atom/" onclick="event.preventDefault(); navigateToPage('/atom/')">Atom</a> /
<a class="transition link text-[var(--primary)] font-medium" target="_blank" href="/sitemap-index.xml">Sitemap</a><br>
Powered by
<a class="transition link text-[var(--primary)] font-medium" target="_blank" href="https://astro.build">Astro</a> &
<a class="transition link text-[var(--primary)] font-medium" target="_blank" href="https://github.com/matsuzaka-yuki/mizuki">Mizuki</a>&nbsp; Version <a class="transition link text-[var(--primary)] font-medium" target="_blank" href="https://github.com/matsuzaka-yuki/mizuki">7.5</a><br> </div> </div> </div> </div> <!-- There can't be a filter on parent element, or it will break `fixed` --><div class="back-to-top-wrapper block" data-astro-cid-eymb5ayk> <div id="back-to-top-btn" class="back-to-top-btn hide flex items-center rounded-2xl overflow-hidden transition" onclick="backToTop()" data-astro-cid-eymb5ayk> <button aria-label="Back to Top" class="btn-card h-[3.75rem] w-[3.75rem]" data-astro-cid-eymb5ayk> <svg width="1em" height="1em" class="mx-auto" data-astro-cid-eymb5ayk="true" data-icon="material-symbols:keyboard-arrow-up-rounded">   <symbol id="ai:material-symbols:keyboard-arrow-up-rounded" viewBox="0 0 24 24"><path fill="currentColor" d="m12 10.8l-3.9 3.9q-.275.275-.7.275t-.7-.275t-.275-.7t.275-.7l4.6-4.6q.3-.3.7-.3t.7.3l4.6 4.6q.275.275.275.7t-.275.7t-.7.275t-.7-.275z"/></symbol><use href="#ai:material-symbols:keyboard-arrow-up-rounded"></use>  </svg> </button> </div> </div>  <script>
    function backToTop() {
        // 直接使用原生滚动，避免OverlayScrollbars冲突
        window.scroll({top: 0, behavior: 'smooth'});
    }
</script> </div> </div>  <div class="absolute w-full z-0 hidden 2xl:block" data-astro-cid-haiuh7kc> <div class="relative max-w-[var(--page-width)] mx-auto" data-astro-cid-haiuh7kc> <!-- TOC component --> <div id="toc-wrapper" class="hidden lg:block transition absolute top-0 w-[var(--toc-width)] items-center -right-[var(--toc-width)] toc-hide" data-astro-cid-haiuh7kc> <div id="toc-inner-wrapper" class="fixed top-14 w-[var(--toc-width)] h-[calc(100vh_-_20rem)] overflow-y-scroll overflow-x-hidden hide-scrollbar" data-astro-cid-haiuh7kc> <div id="toc" class="w-full h-full transition-swup-fade " data-astro-cid-haiuh7kc> <table-of-contents id="toc" data-astro-cid-7ckeuxew="true" class="group"> <!-- TOC内容将由JavaScript动态生成 --> </table-of-contents> <script type="module" src="/_astro/TOC.astro_astro_type_script_index_0_lang.h7KfX3Q5.js"></script>  </div> </div> </div> <!-- #toc needs to exist for Swup to work normally -->  </div> </div>  <!-- Music Player - 仅在启用时加载 --> <script>(()=>{var e=async t=>{await(await t())()};(self.Astro||(self.Astro={})).load=e;window.dispatchEvent(new Event("astro:load"));})();</script><astro-island uid="Z1rRUjr" component-url="/_astro/MusicPlayer.BBMXchTP.js" component-export="default" renderer-url="/_astro/client.svelte.Kd9eTfLd.js" props="{&quot;data-astro-cid-sckkx6r4&quot;:[0,true]}" ssr client="load" opts="{&quot;name&quot;:&quot;MusicPlayer&quot;,&quot;value&quot;:true}" await-children><!--[--><!--[--><!--[!--><!--]--> <div class="music-player fixed bottom-4 right-4 z-50 transition-all duration-300 ease-in-out"><div class="orb-player w-12 h-12 bg-[var(--primary)] rounded-full shadow-lg cursor-pointer transition-all duration-500 ease-in-out flex items-center justify-center hover:scale-110 active:scale-95 opacity-0 scale-0 pointer-events-none" role="button" tabindex="0" aria-label="显示音乐播放器"><!--[!--><!--[!--><!--[!--><!--]--><!--]--><!--]--></div> <div class="mini-player card-base bg-[var(--float-panel-bg)] shadow-xl rounded-2xl p-3 transition-all duration-500 ease-in-out"><div class="flex items-center gap-3"><div class="cover-container relative w-12 h-12 rounded-full overflow-hidden cursor-pointer" role="button" tabindex="0" aria-label="播放"><img src="/favicon/favicon.ico" alt="封面" class="w-full h-full object-cover transition-transform duration-300"/> <div class="absolute inset-0 bg-black/20 flex items-center justify-center opacity-0 hover:opacity-100 transition-opacity"><!--[!--><!--[!--><!--[!--><!--]--><!--]--><!--]--></div></div> <div class="flex-1 min-w-0 cursor-pointer" role="button" tabindex="0" aria-label="展开音乐播放器"><div class="text-sm font-medium text-90 truncate">Sample Song</div> <div class="text-xs text-50 truncate">Sample Artist</div></div> <div class="flex items-center gap-1"><button class="btn-plain w-8 h-8 rounded-lg flex items-center justify-center" title="隐藏播放器"><!--[!--><!--]--><!----></button> <button class="btn-plain w-8 h-8 rounded-lg flex items-center justify-center"><!--[!--><!--]--><!----></button></div></div></div> <div class="expanded-player card-base bg-[var(--float-panel-bg)] shadow-xl rounded-2xl p-4 transition-all duration-500 ease-in-out opacity-0 scale-95 pointer-events-none"><div class="flex items-center gap-4 mb-4"><div class="cover-container relative w-16 h-16 rounded-full overflow-hidden flex-shrink-0"><img src="/favicon/favicon.ico" alt="封面" class="w-full h-full object-cover transition-transform duration-300"/></div> <div class="flex-1 min-w-0"><div class="song-title text-lg font-bold text-90 truncate mb-1">Sample Song</div> <div class="song-artist text-sm text-50 truncate">Sample Artist</div> <div class="text-xs text-30 mt-1">0:00 / 0:00</div></div> <div class="flex items-center gap-1"><button class="btn-plain w-8 h-8 rounded-lg flex items-center justify-center" title="隐藏播放器"><!--[!--><!--]--><!----></button> <button class="btn-plain w-8 h-8 rounded-lg flex items-center justify-center"><!--[!--><!--]--><!----></button></div></div> <div class="progress-section mb-4"><div class="progress-bar flex-1 h-2 bg-[var(--btn-regular-bg)] rounded-full cursor-pointer" role="slider" tabindex="0" aria-label="播放进度" aria-valuemin="0" aria-valuemax="100" aria-valuenow="0"><div class="h-full bg-[var(--primary)] rounded-full transition-all duration-100" style="width: 0%"></div></div></div> <div class="controls flex items-center justify-center gap-2 mb-4"><button class="w-10 h-10 rounded-lg btn-plain" disabled><!--[!--><!--]--><!----></button> <button class="btn-plain w-10 h-10 rounded-lg" disabled><!--[!--><!--]--><!----></button> <button class="btn-regular w-12 h-12 rounded-full"><!--[!--><!--[!--><!--[!--><!--]--><!--]--><!--]--></button> <button class="btn-plain w-10 h-10 rounded-lg" disabled><!--[!--><!--]--><!----></button> <button class="w-10 h-10 rounded-lg btn-plain"><!--[!--><!--[!--><!--[!--><!--]--><!--]--><!--]--></button></div> <div class="bottom-controls flex items-center gap-2"><button class="btn-plain w-8 h-8 rounded-lg"><!--[!--><!--[!--><!--[!--><!--]--><!--]--><!--]--></button> <div class="flex-1 h-2 bg-[var(--btn-regular-bg)] rounded-full cursor-pointer" role="slider" tabindex="0" aria-label="音量控制" aria-valuemin="0" aria-valuemax="100" aria-valuenow="70"><div class="h-full bg-[var(--primary)] rounded-full transition-all duration-100" style="width: 70%"></div></div> <button class="btn-plain w-8 h-8 rounded-lg"><!--[!--><!--]--><!----></button></div></div> <!--[!--><!--]--></div> <style>
.orb-player {
	position: relative;
	backdrop-filter: blur(10px);
	-webkit-backdrop-filter: blur(10px);
}
.orb-player::before {
	content: '';
	position: absolute;
	inset: -2px;
	background: linear-gradient(45deg, var(--primary), transparent, var(--primary));
	border-radius: 50%;
	z-index: -1;
	opacity: 0;
	transition: opacity 0.3s ease;
}
.orb-player:hover::before {
	opacity: 0.3;
	animation: rotate 2s linear infinite;
}
.orb-player .animate-pulse {
	animation: musicWave 1.5s ease-in-out infinite;
}
@keyframes rotate {
	from { transform: rotate(0deg); }
	to { transform: rotate(360deg); }
}
@keyframes musicWave {
	0%, 100% { transform: scaleY(0.5); }
	50% { transform: scaleY(1); }
}
.music-player.hidden-mode {
	width: 48px;
	height: 48px;
}
.music-player {
    max-width: 320px;
    -webkit-user-select: none;
       -moz-user-select: none;
            user-select: none;
}
.mini-player {
    width: 280px;
    position: absolute;
    bottom: 0;
    right: 0;
    /*left: 0;*/
}
.expanded-player {
    width: 320px;
    position: absolute;
    bottom: 0;
    right: 0;
}
.animate-pulse {
    animation: pulse 2s cubic-bezier(0.4, 0, 0.6, 1) infinite;
}
@keyframes pulse {
    0%, 100% {
        opacity: 1;
    }
    50% {
        opacity: 0.5;
    }
}
.progress-section div:hover,
.bottom-controls > div:hover {
    transform: scaleY(1.2);
    transition: transform 0.2s ease;
}
@media (max-width: 768px) {
    .music-player {
        max-width: 280px;
        /*left: 8px !important;*/
        bottom: 8px !important;
        right: 8px !important;
    }
    .music-player.expanded {
        width: calc(100vw - 16px);
        max-width: none;
        /*left: 8px !important;*/
        right: 8px !important;
    }
    .playlist-panel {
        width: calc(100vw - 16px) !important;
        /*left: 8px !important;*/
        right: 8px !important;
        max-width: none;
    }
    .controls {
        gap: 8px;
    }
    .controls button {
        width: 36px;
        height: 36px;
    }
    .controls button:nth-child(3) {
        width: 44px;
        height: 44px;
    }
}
@media (max-width: 480px) {
    .music-player {
        max-width: 260px;
    }
    .song-title {
        font-size: 14px;
    }
    .song-artist {
        font-size: 12px;
    }
    .controls {
        gap: 6px;
        margin-bottom: 12px;
    }
    .controls button {
        width: 32px;
        height: 32px;
    }
    .controls button:nth-child(3) {
        width: 40px;
        height: 40px;
    }
    .playlist-item {
        padding: 8px 12px;
    }
    .playlist-item .w-10 {
        width: 32px;
        height: 32px;
    }
}
@keyframes slide-up {
    from {
        transform: translateY(100%);
        opacity: 0;
    }
    to {
        transform: translateY(0);
        opacity: 1;
    }
}
.animate-slide-up {
    animation: slide-up 0.3s ease-out;
}
@media (hover: none) and (pointer: coarse) {
    .music-player button,
    .playlist-item {
        min-height: 44px;
    }
    .progress-section > div,
    .bottom-controls > div:nth-child(2) {
        height: 12px;
    }
}
/* 自定义旋转动画，停止时保持当前位置 */
@keyframes spin-continuous {
    from {
        transform: rotate(0deg);
    }
    to {
        transform: rotate(360deg);
    }
}
.cover-container img {
    animation: spin-continuous 3s linear infinite;
    animation-play-state: paused;
}
.cover-container img.spinning {
    animation-play-state: running;
}
/* 让主题色按钮更有视觉反馈 */
button.bg-\[var\(--primary\)\] {
    box-shadow: 0 0 0 2px var(--primary);
    border: none;
}
</style><!--]--><!--]--><!--astro:end--></astro-island> <!-- Pio 看板娘组件 - 仅在启用时加载 --> <astro-island uid="1OlTF2" component-url="/_astro/Pio.8p8WpRBK.js" component-export="default" renderer-url="/_astro/client.svelte.Kd9eTfLd.js" props="{&quot;data-astro-cid-sckkx6r4&quot;:[0,true]}" ssr client="load" opts="{&quot;name&quot;:&quot;Pio&quot;,&quot;value&quot;:true}" await-children><!--[--><!--[--><div class="pio-container left"><div class="pio-action"></div> <canvas id="pio" width="280" height="250"></canvas></div><!--]--><!--]--><!--astro:end--></astro-island> <!-- increase the page height during page transition to prevent the scrolling animation from jumping --> <div id="page-height-extend" class="hidden h-[300vh]" data-astro-cid-sckkx6r4 style="--bannerOffset: 15vh;--banner-height-home: 65vh;--banner-height: 35vh;--configHue: 230;--page-width: 90rem;"></div>  <script type="module" src="/_astro/Layout.astro_astro_type_script_index_0_lang.SkltkRAO.js"></script> <!-- 代码块折叠功能 --> <script type="module" src="/_astro/Layout.astro_astro_type_script_index_1_lang._R4ib5TO.js"></script> <!-- 主题切换综合性能优化器（包含代码块优化、重型元素优化、性能诊断） --> <script type="module" src="/_astro/Layout.astro_astro_type_script_index_2_lang.BMyF9r-v.js"></script> <script type="module" src="/_astro/Layout.astro_astro_type_script_index_3_lang.B8epwNxx.js"></script></body></html> 